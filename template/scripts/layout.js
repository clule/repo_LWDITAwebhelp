(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


var HASH_KEY_RH_SEARCH = consts('HASH_KEY_RH_SEARCH');
var HASH_KEY_TOPIC = consts('HASH_KEY_TOPIC');
var HASH_KEY_UIMODE = consts('HASH_KEY_UIMODE');
var HASH_KEY_RH_TOCID = consts('HASH_KEY_RH_TOCID');
var HASH_KEY_RH_HIGHLIGHT = consts('HASH_KEY_RH_HIGHLIGHT');
var HASH_KEY_RANDOM = consts('HASH_KEY_RANDOM');
var hashQueryKeys = [HASH_KEY_RH_HIGHLIGHT, consts('HASH_KEY_RH_SYNS'), HASH_KEY_RH_TOCID];

// Helper methods
var getMergedParamsMap = function getMergedParamsMap(topicUrl) {
  var paramsMap = _.urlParams(_.extractParamString(topicUrl));
  var hashMap = _.hashParams(_.extractHashString(topicUrl));
  return _.extend(paramsMap, hashMap);
};

var getTopicURL = function getTopicURL(newMap, topicUrl) {
  topicUrl = topicUrl;
  var filePath = _.filePath(topicUrl);
  var bookMark = _.extractHashString(topicUrl);
  if (bookMark.length > 0) {
    bookMark = '#' + bookMark;
  }

  var paramsMap = _.urlParams(_.extractParamString(topicUrl));
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = Array.from(hashQueryKeys)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var key = _step.value;
      if (newMap[key] != null) {
        paramsMap[key] = newMap[key];
      }
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  if (model.get(consts('KEY_SCREEN_IOS'))) {
    paramsMap[HASH_KEY_RANDOM] = _.uniqueId();
  }
  var params = _.mapToEncodedString(paramsMap);
  if (params.length > 0) {
    params = '?' + params;
  }

  return '' + filePath + params + bookMark;
};

var queueUpdateHashMap = _.queueUpdateHashMap;


var fixHashMapForTopic = function fixHashMapForTopic(hashMap) {
  if (hashMap == null) {
    hashMap = {};
  }
  hashMap[HASH_KEY_UIMODE] = null;
  hashMap[HASH_KEY_RANDOM] = null;
  if (!hashMap[HASH_KEY_RH_TOCID]) {
    hashMap[HASH_KEY_RH_TOCID] = null;
  }
  if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
    hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
  }
  return hashMap;
};

var showTopic = function showTopic(relUrl, addToHistory) {
  relUrl = _.fixRelativeUrl(relUrl);
  var hashMap = _.urlParams(_.extractParamString(relUrl));
  hashMap[HASH_KEY_TOPIC] = _.stripParam(relUrl);
  hashMap = fixHashMapForTopic(hashMap);
  return queueUpdateHashMap(hashMap, addToHistory);
};

var showNonTopic = function showNonTopic(url, addToHistory) {
  var hashMap = {};
  hashMap[HASH_KEY_TOPIC] = url;
  hashMap = fixHashMapForTopic(hashMap);
  return queueUpdateHashMap(hashMap, addToHistory);
};

({
  isSameTopic: function isSameTopic(url1, url2) {}
});

//Event Handlers

var hashChanged = function hashChanged(obj) {
  var searchTermChanged = void 0;
  var newMap = obj.newMap;
  var oldMap = obj.oldMap;

  var oldUiMode = oldMap[HASH_KEY_UIMODE];
  var uiMode = newMap[HASH_KEY_UIMODE];

  if (HASH_KEY_RH_SEARCH in newMap) {
    var searchTerm = newMap[HASH_KEY_RH_SEARCH];
    searchTermChanged = searchTerm !== model.get(consts('KEY_SEARCHED_TERM'));
    model.publish(consts('KEY_SEARCH_TERM'), searchTerm, { sync: true });
  }

  if (uiMode === 'search') {
    if (searchTermChanged && window.gHost) {
      model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
    }
  }

  if (!uiMode || newMap[HASH_KEY_TOPIC]) {
    var topicUrl = void 0;
    var oldTopicUrl = model.get(consts('KEY_TOPIC_IN_IFRAME'));
    if (HASH_KEY_TOPIC in newMap) {
      topicUrl = newMap[HASH_KEY_TOPIC];
    }
    if (!topicUrl) {
      topicUrl = oldTopicUrl;
    }
    var feature = rh.model.get(rh.consts('KEY_FEATURE'));
    if (!topicUrl && (!feature || feature.showDefTopic !== false)) {
      topicUrl = window.gDefaultTopic != null ? window.gDefaultTopic.substring(1) : undefined;
    }
    var changed = topicUrl && (topicUrl !== oldTopicUrl || oldUiMode !== uiMode || oldMap[HASH_KEY_RH_HIGHLIGHT] !== newMap[HASH_KEY_RH_HIGHLIGHT] || oldMap[HASH_KEY_RH_TOCID] !== newMap[HASH_KEY_RH_TOCID]);
    if (changed) {
      if (_.stripBookmark(topicUrl) !== _.stripBookmark(oldTopicUrl)) {
        _.runTopicLoadingAnimation(true);
      }
      model.publish(consts('KEY_TOPIC_IN_IFRAME'), topicUrl);
      window.loadTopic(getTopicURL(newMap, topicUrl));
    }
  }

  return model.publish(consts('KEY_UI_MODE'), newMap[HASH_KEY_UIMODE]);
};

var topicChanged = function topicChanged(topicUrl) {
  var hashMap = _.hashParams();
  if (topicUrl && !hashMap[HASH_KEY_UIMODE]) {
    var decodedURI = decodeURI(document.location.href);
    var relUrl = window._getRelativeFileName(decodedURI, topicUrl);
    var oldUrl = hashMap[HASH_KEY_TOPIC];
    if (!oldUrl || _.filePath(relUrl) !== _.filePath(oldUrl)) {
      model.publish(consts('KEY_TOPIC_IN_IFRAME'), relUrl);
      return showTopic(relUrl, false);
    }
  }
};

var navigateToUrl = function navigateToUrl(obj) {
  var url = obj.absUrl;
  if (_.isRootUrl()) {
    if (_.isUrlAllowdInIframe(url)) {
      url = _.makeRelativeUrl(_.fixRelativeUrl(url));
      if (_.isHomeUrl(url)) {
        return document.location.href = url;
      }
      var fileName = url && _.filePath(url);
      if (fileName === consts('START_FILEPATH')) {
        url = url.substring(fileName.length); //never pass start file inside iframe
      } else if (!url) {
        url = '#ux';
      }

      if (url[0] === '#' || url[0] === '?') {
        var hashMap = _.hashParams(_.extractHashString(url));
        if (!(HASH_KEY_UIMODE in hashMap)) {
          hashMap[HASH_KEY_UIMODE] = null;
        }
        return queueUpdateHashMap(hashMap, true);
      } else if (url) {
        return showTopic(url, true);
      }
    } else {
      return showNonTopic(url, true);
    }
  } else {
    if (!_.isRootUrl(url)) {
      var params = void 0,
          relUrl = void 0;
      var rootUrl = _.getRootUrl();
      if (_.isExternalUrl(url)) {
        relUrl = url;
      } else {
        params = _.getParamsForRoot(url);
        relUrl = _.fixRelativeUrl(_.makeRelativePath(url, rootUrl));
      }
      url = '' + rootUrl + params + '#t=' + encodeURIComponent(relUrl);
    }
    return document.location.href = url;
  }
};

model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
  _.addEventListener(document, 'click', _.hookClick);

  model.subscribe(consts('EVT_HASH_CHANGE'), hashChanged);

  model.subscribe(consts('KEY_TOPIC_URL'), topicChanged);

  model.subscribe(consts('EVT_NAVIGATE_TO_URL'), navigateToUrl);

  // call to update old layout specific variables
  model.subscribe(consts('KEY_TOPIC_IN_IFRAME'), function (topicUrl) {
    if ('' + window.gHost + window.gHostPath !== '/') {
      // wait to resolve gHostPath
      if (window.setTopic) {
        window.setTopic();
      }
      if (window.changeTopicLink) {
        return window.changeTopicLink(document.location.toString());
      }
    }
  });

  model.subscribe(consts('EVT_TOPIC_LOADED'), function () {
    return _.runTopicLoadingAnimation(false);
  });

  return model.subscribe(consts('EVT_INSIDE_IFRAME_DOM_CONTENTLOADED'), function () {
    return _.runTopicLoadingAnimation(false);
  });
});

},{}],2:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;


var GlossaryController = function () {
  var entrys = undefined;
  GlossaryController = function (_rh$NavController) {
    _inherits(GlossaryController, _rh$NavController);

    _createClass(GlossaryController, null, [{
      key: 'initClass',
      value: function initClass() {

        entrys = 'entrys';
      }
    }]);

    function GlossaryController(widget) {
      _classCallCheck(this, GlossaryController);

      var _this = _possibleConstructorReturn(this, (GlossaryController.__proto__ || Object.getPrototypeOf(GlossaryController)).call(this));

      _this.data = [];
      _this.chunkCount = 0;
      _this.count = 0;
      _this.keys = '';
      _this.alhpabet = '';
      _this.loadNavData('glo');
      _this.filter = '';
      _this.widget = widget;
      _this.widget.publish('show', {});
      return _this;
    }

    _createClass(GlossaryController, [{
      key: 'addElement',
      value: function addElement(elements, list) {
        var _this2 = this;

        return function () {
          var result = [];
          _.each(elements[entrys], function (element) {
            if (element != null) {
              if (!_this2.lookup(list, element)) {
                result.push(list.push(element));
              } else {
                result.push(undefined);
              }
            }
          }, _this2);
          return result;
        }();
      }
    }, {
      key: 'exists',
      value: function exists(name) {
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return true;
        }
        this.alhpabet += ch;
        return false;
      }
    }, {
      key: 'isFiltered',
      value: function isFiltered(name, modelKey) {
        var filter = modelKey ? model.get(modelKey) : this.filter;
        return filter && name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) === -1;
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'filterGlo',
      value: function filterGlo(value) {
        this.filter = value.toLocaleLowerCase();
        this.alhpabet = '';
        return model.publish(consts('PROJECT_GLOSSARY_DATA'), model.get(consts('PROJECT_GLOSSARY_DATA')));
      }
    }]);

    return GlossaryController;
  }(rh.NavController);
  GlossaryController.initClass();
  return GlossaryController;
}();

rh.controller('GlossaryController', GlossaryController);

},{}],3:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;
var rhs = rh.rhs;

var topics = 'topics';

var NavController = function () {
  function NavController() {
    _classCallCheck(this, NavController);

    this.updateData = this.updateData.bind(this);
  }

  _createClass(NavController, [{
    key: 'lookup',
    value: function lookup(children, key) {
      var element = void 0;
      if (children != null && key != null) {
        _.any(children, function (child) {
          if (child != null) {
            if (key.type === child.type && key.name === child.name && _.isEqual(key.url, child.url)) {
              element = child;
            }
            return element != null;
          }
        }, this);
      }
      return element;
    }
  }, {
    key: 'sort',
    value: function sort(array) {
      return array.sort(function (first, second) {
        return window.compare(first.name, second.name);
      });
    }
  }, {
    key: 'updateData',
    value: function updateData(constKey, projectUrl) {
      var curData = model.get(consts('KEY_TEMP_DATA')) || [];
      model.publish(consts('KEY_TEMP_DATA'));
      this.addElement(curData, this.data, projectUrl, this.keys);
      if (--this.chunkCount === 0 && this.count === 0) {
        this.sort(this.data);
        return model.publish(consts(constKey), this.data);
      }
    }
  }, {
    key: 'getChunkData',
    value: function getChunkData(projectUrl, key) {
      this.count--;
      var arr = __guard__(model.get(consts('KEY_TEMP_DATA')), function (x) {
        return x['chunkinfos'];
      }) || [];
      this.chunkCount += arr.length;
      return _.each(arr, function (chunk) {
        var _this = this;

        if (projectUrl) {
          projectUrl = _.ensureSlash(projectUrl);
        }
        return _.loadScript(projectUrl + 'whxdata/' + chunk.node + '.new.js', false, function () {
          return _this.updateData(key, projectUrl);
        });
      }, this);
    }
  }, {
    key: 'loadNavData',
    value: function loadNavData(type) {
      var _this2 = this;

      return model.subscribe(consts('KEY_PROJECT_LIST'), function (list) {
        _this2.alhpabet = '';
        _this2.count += list.length;
        return _.each(list, function (projectUrl) {
          var _this3 = this;

          if (projectUrl) {
            projectUrl = _.ensureSlash(projectUrl);
          }
          return _.loadScript(projectUrl + 'whxdata/' + (type === 'ndx' ? 'idx' : 'glo') + '.new.js', false, function () {
            return _this3.getChunkData(projectUrl, type === 'ndx' ? 'PROJECT_INDEX_DATA' : 'PROJECT_GLOSSARY_DATA');
          });
        }, _this2);
      });
    }
  }]);

  return NavController;
}();

rh.NavController = NavController;

var IndexController = function () {
  var defProject = undefined;
  IndexController = function (_rh$NavController) {
    _inherits(IndexController, _rh$NavController);

    _createClass(IndexController, null, [{
      key: 'initClass',
      value: function initClass() {
        defProject = '';
      }
    }]);

    function IndexController(widget) {
      _classCallCheck(this, IndexController);

      var _this4 = _possibleConstructorReturn(this, (IndexController.__proto__ || Object.getPrototypeOf(IndexController)).call(this));

      _this4.data = [];
      _this4.chunkCount = 0;
      _this4.count = 0;
      _this4.alhpabet = '';
      _this4.filter = '';
      _this4.keys = 'keys';
      _this4.widget = widget;

      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
        _this4.loadNavData('ndx');
        _this4.getIndexData();
        return model.subscribe(consts('KEY_INDEX_FILTER'), function () {
          return _this4.alhpabet = '';
        });
      });
      return _this4;
    }

    _createClass(IndexController, [{
      key: 'addElement',
      value: function addElement(element, list, projectUrl, data) {
        var _this5 = this;

        if (element[data] != null) {
          return function () {
            var result = [];
            _.each(element[data], function (child) {
              if (child != null) {
                var existing;

                if (!(existing = _this5.lookup(list, child))) {
                  var obj = { type: child.type, name: child.name };
                  if (child['data-rhtags']) {
                    obj['data-rhtags'] = child['data-rhtags'] + '+' + projectUrl;
                  }
                  if (!child.url) {
                    obj[topics] = [];
                  }
                  var relUrl = _.makeRelativeUrl('' + projectUrl, defProject);
                  if (child.url != null) {
                    obj.url = '' + encodeURI(relUrl) + child.url;
                  }
                  if (child.url == null) {
                    obj[_this5.keys] = [];
                  }
                  list.push(obj);
                  existing = list[list.length - 1];
                }
                _this5.addElement(child, existing[_this5.keys], projectUrl, _this5.keys);
                result.push(_this5.addElement(child, existing[topics], projectUrl, topics));
              }
            }, _this5);
            return result;
          }();
        }
      }
    }, {
      key: 'showItem',
      value: function showItem(name) {
        var filter = model.get(consts('KEY_INDEX_FILTER'));
        return !filter || name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1;
      }
    }, {
      key: 'showCategory',
      value: function showCategory(name, level) {
        if (level > 0) {
          return false;
        }
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return false;
        }
        this.alhpabet += ch;
        return true;
      }
    }, {
      key: 'showNextLevel',
      value: function showNextLevel(node) {
        var id = node.getAttribute('data-indexid');
        var old = this.widget.get('show.' + id);
        var childData = _defineProperty({}, id, !old);
        while (id) {
          id = id.substr(0, id.lastIndexOf('_'));
          childData[id] = true;
        }
        return this.widget.publish('show', childData);
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'getIndexData',
      value: function getIndexData() {
        return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function () {
          try {
            var baseUrl = model.get(consts('KEY_PUBLISH_BASE_URL'));
            var host = document.location.origin;
            var baseContext = baseUrl.substr(host.length);
            var parentPath = _.parentPath(_.filePath(_.getRootUrl()));
            if (baseContext && !_.isEmptyString(baseContext)) {
              var hashString = _.mapToEncodedString(_.extend(_.addPathNameKey({ area: rhs.area(),
                prj: rhs.project(), type: rhs.type(), agt: 'ndx', mgr: 'agm'
              })));
              return http.get(baseContext + '?' + hashString).success(function (data, status) {
                data = JSON.parse(data);
                var list = [];
                var rootPrjs = [];
                var projects = data.allProjects;
                var _data = data,
                    masterProjects = _data.masterProjects;

                if (projects.length) {
                  projects[0] = _.ensureSlash(projects[0]);
                }
                var makelist = function makelist(projectList, outList) {
                  return _.each(projectList, function (item) {
                    return outList.push(_.makeRelativeUrl(item, projects[0]));
                  });
                };
                makelist(projects, list);
                makelist(masterProjects, rootPrjs);
                var updateList = function updateList(item, index, list) {
                  if (_.isEmptyString(item)) {
                    list[index] = '.';
                  }
                };
                _.each(list, updateList);
                _.each(rootPrjs, updateList);
                model.publish(consts('KEY_PROJECT_LIST'), list);
                return model.publish(consts('KEY_MASTER_PROJECT_LIST'), rootPrjs);
              });
            }
          } catch (err) {
            if (rh._debug) {
              return rh._d('warn', err.message);
            }
          }
        });
      }
    }]);

    return IndexController;
  }(rh.NavController);
  IndexController.initClass();
  return IndexController;
}();

rh.controller('IndexController', IndexController);

function __guard__(value, transform) {
  return typeof value !== 'undefined' && value !== null ? transform(value) : undefined;
}

},{}],4:[function(require,module,exports){
"use strict";

var rh = require("../../src/lib/rh");
var _ = rh._;

_.findEditDist = function (first, second) {
  if (first == second) return 0;
  var prevDist = [];
  var dist = [];
  for (var i = 0; i < second.length + 1; i++) {
    prevDist.push(i);
    dist.push(0); //just to create a array of size second.length+1
  }

  for (var i = 0; i < first.length; i++) {
    dist[0] = i + 1;

    for (var j = 0; j < second.length; j++) {
      var curr = void 0;
      if (first[i] == second[j]) curr = 0;else curr = 1;

      dist[j + 1] = Math.min(dist[j] + 1, prevDist[j + 1] + 1, prevDist[j] + curr);
    }

    for (var j = 0; j < prevDist.length; j++) {
      prevDist[j] = dist[j];
    }
  }
  return dist[dist.length - 1];
};

},{"../../src/lib/rh":24}],5:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var bind = function bind(fn, me) {
  return function () {
    return fn.apply(me, arguments);
  };
};

var rh = require("../../src/lib/rh");
var nodeUtil = require('../../src/responsive_help/utils/node_utils');
var _ = rh._;
var $ = rh.$;
var model = rh.model;
var consts = rh.consts;
var KEY_TOC_DRILL_DOWN = consts('KEY_TOC_DRILL_DOWN');
var ANIM_TIME = 700;
var SyncToc = void 0;
var TocController = void 0;

SyncToc = function () {
  var SyncToc = function () {
    function SyncToc() {
      _classCallCheck(this, SyncToc);
    }

    _createClass(SyncToc, [{
      key: 'sync',
      value: function sync(tc, info) {
        var node = void 0;
        tc.updateActiveBookInfo(0, '_');

        node = tc.widget.node;
        //tc.updateBreadcrumbInfo(tc.widget.node);

        this.reset(info);
        return this.syncToProjectToc(tc, node.children, function (_this) {
          return function (nodes) {
            return _this.syncToTocItem(tc, nodes);
          };
        }(this));
      }
    }, {
      key: 'reset',
      value: function reset(info) {
        var idx = void 0;
        this.parseTocInfo(info);
        idx = this.order.lastIndexOf('@');
        return this.parentOrder = idx !== -1 ? this.order.substring(0, idx) : '';
      }
    }, {
      key: 'parseTocInfo',
      value: function parseTocInfo(info) {
        var path = void 0;
        this.order = info.childOrder || '';
        path = _.splitAndTrim(info.childPrefix, '.');
        this.tocPath = _.reduce(path, function (result, prefix) {
          var arr = void 0,
              bookNo = void 0;
          arr = _.splitAndTrim(prefix, '@');
          if (bookNo = arr.shift()) {
            result.push({
              bookNo: _.parseInt(bookNo, 0),
              order: arr.length > 0 ? '@' + arr.join('@') : ''
            });
          }
          return result;
        }, []);
        path = _.splitAndTrim(info.topicID || '0', '_');
        this.bookNos = _.map(path.shift().split('.'), function (item) {
          return _.parseInt(item, 0);
        });
        return this.pageNo = _.parseInt(path.shift(), 0);
      }
    }, {
      key: 'syncToProjectToc',
      value: function syncToProjectToc(tc, nodes, success) {
        var curBookNo = void 0,
            idx = void 0,
            path = void 0;
        if (this.tocPath.length > 0) {
          curBookNo = 0;
          path = this.tocPath.shift();
          idx = _.findIndex(nodes, function (child) {
            var childOrder = void 0;
            childOrder = $.dataset(child, 'childorder') || '';
            if (childOrder === path.order && tc.isBookNode(child)) {
              curBookNo++;
              if (curBookNo === path.bookNo) {
                return true;
              }
            }
            return false;
          });
          if (idx !== -1) {
            return tc.openBook(nodes[idx], true, function (_this) {
              return function () {
                return _.defer(function () {
                  var child = void 0,
                      childNodes = void 0;
                  child = nodes[idx + 1];
                  if (childNodes = child.children && child.children[0]) {
                    return _this.syncToProjectToc(tc, childNodes.children, success);
                  }
                });
              };
            }(this));
          }
        } else if (success) {
          return success(nodes);
        }
      }
    }, {
      key: 'syncToTocItem',
      value: function syncToTocItem(tc, nodes, wait) {
        var curBookNo = void 0,
            curPageNo = void 0,
            lastBookNode = void 0;
        if (wait == null) {
          wait = 1;
        }
        curPageNo = 0;
        curBookNo = 0;
        lastBookNode = null;
        return _.any(nodes, function (_this) {
          return function (child) {
            var bookNode = void 0,
                childOrder = void 0,
                hasChild = void 0,
                pageNode = void 0,
                topicNode = void 0;
            childOrder = $.dataset(child, 'childorder') || '';
            if (childOrder !== _this.order) {
              return;
            }
            if (tc.isBookNode(child)) {
              bookNode = child;
              lastBookNode = bookNode;
            }
            if (bookNode) {
              curBookNo++;
            }
            if (_this.bookNos[0] !== curBookNo) {
              return;
            }
            if (tc.isPageNode(child)) {
              pageNode = child;
            }
            if (pageNode) {
              curPageNo++;
            }
            if (_this.bookNos.length === 1) {
              if (_this.pageNo === 0) {
                topicNode = child;
                if (lastBookNode) {
                  tc.openBook(lastBookNode, true, function () {
                    return tc.updateBookInfo();
                  });
                }
              } else if (pageNode && curPageNo === _this.pageNo) {
                topicNode = child;
              }
              tc.updateBookInfo();
              if (topicNode) {
                tc.selectLink(topicNode, true, wait);
              }
            } else if (lastBookNode && (hasChild = $.hasClass(child, 'child'))) {
              _this.bookNos.shift();
              tc.openBook(lastBookNode, true, function () {
                return _.defer(function () {
                  var childNodes = void 0;
                  if (childNodes = child.children && child.children[0]) {
                    return _this.syncToTocItem(tc, childNodes.children, ANIM_TIME);
                  }
                });
              });
              return true;
            }
            return topicNode != null;
          };
        }(this));
      }
    }]);

    return SyncToc;
  }();

  return SyncToc;
}();

TocController = function () {
  var ACTIVE_CLASS = void 0,
      COLLAPSING_CLASS = void 0,
      EXPANDED_CLASS = void 0,
      EXPANDING_CLASS = void 0,
      KEY_ACTIVE_BOOKID = void 0,
      KEY_ACTIVE_BOOK_LEVEL = void 0,
      KEY_BOOKID = void 0,
      KEY_BOOK_LEVEL = void 0,
      KEY_SHOW_CHILD = void 0,
      KEY_TOC = void 0,
      LOADING_BOOK = void 0,
      SELECTED_CLASS = void 0;

  EXPANDED_CLASS = 'expanded';

  ACTIVE_CLASS = 'active';

  COLLAPSING_CLASS = 'collapsing';

  EXPANDING_CLASS = 'expanding';

  LOADING_BOOK = 'loading-book';

  SELECTED_CLASS = 'selected';

  KEY_SHOW_CHILD = 'show_child';

  KEY_BOOKID = 'bookid';

  KEY_ACTIVE_BOOKID = 'active_bookid';

  KEY_BOOK_LEVEL = 'level';

  KEY_ACTIVE_BOOK_LEVEL = 'active_level';

  KEY_TOC = '.p.toc';
  var CURRENT_TOC_KEY = 'curtoc',
      TOC_ITEM_ATTR = 'data-tocitem';

  var KEY_BREADCRUMBS = consts('KEY_TOC_BREADCRUMBS');

  var TocController = function () {
    function TocController(widget) {
      var _this2 = this;

      _classCallCheck(this, TocController);

      this.widget = widget;
      this.subscribeTopicID = bind(this.subscribeTopicID, this);

      this.onClick = bind(this.onClick, this);
      this.updateBookInfo = bind(this.updateBookInfo, this);
      this._data = {};
      this.projectAbsRef = [];
      if (this.syncToc == null) {
        this.syncToc = new SyncToc();
      }
      this.widget.publish(KEY_BOOK_LEVEL, 0);
      this.widget.publish(KEY_BOOKID, '_');
      rh.model.subscribe(KEY_TOC, function (data) {
        _this2.widget.publish(CURRENT_TOC_KEY, data);
        _this2.widget.publish('curlevel', 0);
      });
      this.widget.subscribe(consts('KEY_TOC_SELECT_ITEM'), this.selectTocItem.bind(this));
      model.subscribeOnce([consts('EVT_PROJECT_LOADED'), consts('KEY_TOC_ORDER')], function (_this) {
        return function () {
          if (model.get(consts('KEY_PUBLISH_MODE'))) {
            return _this.getTOCData();
          } else {
            return _this.loadToc(KEY_TOC, '', function () {
              _this.widget.publish(consts('EVT_TOC_LOADED'), true);
              return _.defer(function () {
                return _this.widget.subscribe(rh.consts('KEY_TOPIC_ID'), _this.subscribeTopicID);
              });
            });
          }
        };
      }(this));
    }

    _createClass(TocController, [{
      key: 'expandBook',
      value: function expandBook(level, id, node, item) {
        this.selectTocItem({ 'id': id });
        var key = $.getAttribute(node, 'data-itemkey');
        rh.model.publish('EVT_TOC_LOADED' + 'gototab', { 'tab': 0, 'key': key, 'item': item });
      }
    }, {
      key: 'updateBookInfo',
      value: function updateBookInfo() {
        var id = void 0,
            newLevel = void 0;
        id = this.widget.get(KEY_ACTIVE_BOOKID);
        if (id != null && id !== this.widget.get(KEY_BOOKID)) {
          this.widget.publish(KEY_BOOKID, id);
        }
        newLevel = this.widget.get(KEY_ACTIVE_BOOK_LEVEL);
        if (newLevel != null && newLevel !== this.widget.get(KEY_BOOK_LEVEL)) {
          return this.widget.publish(KEY_BOOK_LEVEL, newLevel);
        }
      }
    }, {
      key: 'updateActiveBookInfo',
      value: function updateActiveBookInfo(level, id) {
        this.widget.publish(KEY_ACTIVE_BOOKID, id);

        return this.widget.publish(KEY_ACTIVE_BOOK_LEVEL, level);
      }
      /*
      _addBookmark(node){
        let that = this.this;
        if(!Array.isArray(this.path) || this.path.length === 0){
          return false;
        }
        if(that.isTOCItem(node)){
          if(this.currIndex === this.path[0]){
            let index = this.path.shift();
            this.curr_path += (this.curr_path === "")? index.toString() : "_" + index.toString();
            let text = that.getText(node);
            this.bookmarks.push({text: text, path: this.curr_path });
            this.index = 0;
          }
          else{
          //traverseChild =false;
            this.currIndex += 1;
          }
        }
      }
      */

    }, {
      key: 'getText',
      value: function getText(node) {
        return node.textContent.trim();
      }
    }, {
      key: '_getPreviousItemNode',
      value: function _getPreviousItemNode(node) {
        var pid = this.pid($.getAttribute(node, 'data-itemid'));
        return $.find(this.widget.node, '[data-itemid=\"' + pid + '\"]')[0];
      }
    }, {
      key: 'updateBreadcrumbInfo',
      value: function updateBreadcrumbInfo(node) {
        var $leafnode = node;
        var $node = void 0;
        var breadcrumbs = [];
        if (!this.isTOCItem(node)) {
          return;
        }
        breadcrumbs.push(this._createBreadcrumbItem($leafnode));
        while ($node = this._getPreviousItemNode($leafnode)) {
          breadcrumbs.push(this._createBreadcrumbItem($node));
          $leafnode = $node;
        }
        breadcrumbs.reverse();
        if (breadcrumbs.length > 0) {
          breadcrumbs[breadcrumbs.length - 1].lastNode = true;
        }
        breadcrumbs.curlevel = this.widget.get("curlevel");
        this.widget.publish(KEY_BREADCRUMBS, breadcrumbs);
      }
    }, {
      key: '_createBreadcrumbItem',
      value: function _createBreadcrumbItem(node) {
        var linkNode = node;
        if (!this.hasTOCItemLink(node)) {
          linkNode = this._findFirstLink(node);
        }
        var url = linkNode && ($.getAttribute(linkNode, 'href') || $.getAttribute(linkNode, 'link')) || '#';
        return { id: $.getAttribute(node, 'data-itemid'),
          text: this.getText(node),
          url: url,
          hasUrl: this.hasTOCItemLink(node),
          lastNode: false };
      }
    }, {
      key: 'isTOCItem',
      value: function isTOCItem(node) {

        return $.nodeName(node) === 'LI' || $.getAttribute(node, TOC_ITEM_ATTR);
      }
    }, {
      key: '_findFirstLink',
      value: function _findFirstLink(bookNode) {
        var context = { that: this };

        var node = nodeUtil.parentNode(bookNode);
        context.bookid = $.getAttribute(bookNode, 'data-itemid');
        $.traverseNode(node, this._findLinkFn, null, null, context);
        return context.linkNode;
      }
    }, {
      key: '_isParentTocItem',
      value: function _isParentTocItem(node) {
        return this.bookNode !== node && this.that.isTOCItem(node);
      }
    }, {
      key: '_findLinkFn',
      value: function _findLinkFn(node) {
        var id = $.getAttribute(node, 'data-itemid');
        if (id === this.bookid) {
          this.bookFound = true;
        }
        if (this.bookFound && this.that.hasTOCItemLink(node) && this.linkNode === undefined) {
          this.linkNode = node;
          return false;
        }
        return true;
      }
    }, {
      key: 'nextLevel',
      value: function nextLevel(node) {
        var level = void 0;
        level = _.parseInt($.dataset(node, 'itemlevel'), 0);
        if ($.hasClass(node, EXPANDED_CLASS)) {
          return level;
        } else {
          return level + 1;
        }
      }
    }, {
      key: 'onClick',
      value: function onClick(event) {
        var clickNode = void 0,
            hasLink = void 0,
            node = void 0,
            topNode = void 0;
        topNode = event.currentTarget;
        clickNode = event.target;
        hasLink = this.hasLink(clickNode);
        node = this.getItemNode(clickNode, topNode);
        if (this.isBookNode(node)) {
          if (!(hasLink && this.selectedNode !== node && this.isOpenBook(node))) {
            this.toggleBook(node, false);
            this.updateBreadcrumbInfo(node);
          }
        }

        if (!(!hasLink || this.isUrlNode(node) && this.hasExternalLink(clickNode))) {
          return this.selectLink(node, false);
        }
      }
    }, {
      key: 'selectLink',
      value: function selectLink(node, scrollIntoView, wait) {
        if (wait == null) {
          wait = ANIM_TIME;
        }
        if (this.selectedNode) {
          $.removeClass(this.selectedNode, SELECTED_CLASS);
        }
        if (scrollIntoView && this.selectedNode !== node) {
          _.delay(function () {
            return node.scrollIntoView(false);
          }, wait);
        }
        this.selectedNode = node;
        if (node) {
          this.updateBreadcrumbInfo(node);
          return $.addClass(node, SELECTED_CLASS);
        }
      }
    }, {
      key: 'selectTocItem',
      value: function selectTocItem(tocObj) {
        var id = tocObj.id + '_0';
        if (id) {
          var childData = {},
              level = -1;
          while (id) {
            level++;
            childData[id] = true;
            id = id.substr(0, id.lastIndexOf('_'));
          }
          this.widget.publish("show_child", childData);
          this.widget.publish("curlevel", level);
          if (tocObj.url) rh.model.publish('EVT_TOC_LOADED' + 'gototab', { 'tab': 0, 'item': { 'url': tocObj.url } });
        }
      }
    }, {
      key: 'getItemNode',
      value: function getItemNode(node, topNode) {
        return _.findParentNode(node, topNode, this.isTOCItem);
      }
    }, {
      key: 'getChildItemNode',
      value: function getChildItemNode(node, index) {
        return $.find(node, function (node) {
          return $.nodeName(node) === 'LI' || $.getAttribute(node, TOC_ITEM_ATTR);
        });
      }
    }, {
      key: 'hasTOCItemLink',
      value: function hasTOCItemLink(node) {
        var href = $.getAttribute(node, 'data-haslink');
        return href === 'true';
      }
    }, {
      key: 'hasLink',
      value: function hasLink(node) {
        var href = void 0;
        href = $.getAttribute(node, 'href');
        return href && href !== '#';
      }
    }, {
      key: 'isBookNode',
      value: function isBookNode(node) {
        return $.hasClass(node, 'book');
      }
    }, {
      key: 'isTopicNode',
      value: function isTopicNode(node) {
        return $.hasClass(node, 'item');
      }
    }, {
      key: 'isUrlNode',
      value: function isUrlNode(node) {
        return $.hasClass(node, 'url');
      }
    }, {
      key: 'isPageNode',
      value: function isPageNode(node) {
        return this.isTopicNode(node) || this.isUrlNode(node);
      }
    }, {
      key: 'isOpenBook',
      value: function isOpenBook(node) {
        if (this.widget.get(KEY_TOC_DRILL_DOWN)) {
          return $.hasClass(node, ACTIVE_CLASS);
        } else {
          return $.hasClass(node, EXPANDED_CLASS);
        }
      }
    }, {
      key: 'hasExternalLink',
      value: function hasExternalLink(node) {
        var href = void 0;
        href = $.getAttribute(node, 'href');
        if (!(href && !_.isRelativeUrl(href))) {
          return false;
        }
        return !_.isUrlAllowdInIframe(href);
      }
    }, {
      key: 'getBookNode',
      value: function getBookNode(node, topNode) {
        var itemNode = void 0;
        itemNode = this.getItemNode(node, topNode);
        if (this.isBookNode(itemNode)) {
          return itemNode;
        } else {
          return null;
        }
      }
    }, {
      key: 'animateCollapse',
      value: function animateCollapse(bookNode) {
        return _.each([bookNode, bookNode.nextElementSibling], function (node) {
          $.addClass(node, COLLAPSING_CLASS);
          return _.delay(function () {
            return $.removeClass(node, COLLAPSING_CLASS);
          }, ANIM_TIME);
        });
      }
    }, {
      key: 'animateExpand',
      value: function animateExpand(bookNode) {
        return _.each([bookNode, bookNode.nextElementSibling], function (node) {
          $.addClass(node, EXPANDING_CLASS);
          return _.delay(function () {
            return $.removeClass(node, EXPANDING_CLASS);
          }, ANIM_TIME);
        });
      }
    }, {
      key: 'toggleBook',
      value: function toggleBook(bookNode, scrollIntoView) {
        if (scrollIntoView == null) {
          scrollIntoView = true;
        }
        if (this.isOpenBook(bookNode)) {
          return this.closeBook(bookNode);
        } else {
          return this.openBook(bookNode, scrollIntoView);
        }
      }
    }, {
      key: 'closeBook',
      value: function closeBook(node) {
        var id = void 0,
            keyShow = void 0;
        id = $.dataset(node, 'itemid');
        keyShow = '' + KEY_SHOW_CHILD + id;
        if (false !== this.widget.get(keyShow)) {
          this.widget.publish(keyShow, false);
        }
        this.updateActiveBookInfo(this.nextLevel(node), this.pid(id));
        this.updateBookInfo();
        if ($.hasClass(node, EXPANDED_CLASS)) {
          $.removeClass(node, EXPANDED_CLASS);
          return this.animateCollapse(node);
        }
      }
    }, {
      key: 'openBook',
      value: function openBook(node, scrollIntoView, success) {
        var childOrder = void 0,
            id = void 0,
            key = void 0,
            keyShow = void 0;
        if (success == null) {
          success = this.updateBookInfo;
        }
        key = $.dataset(node, 'itemkey');
        id = $.dataset(node, 'itemid');
        childOrder = $.dataset(node, 'childorder');
        keyShow = '' + KEY_SHOW_CHILD + id;
        if (true !== this.widget.get(keyShow)) {
          this.widget.publish(keyShow, true);
        }
        this.updateActiveBookInfo(this.nextLevel(node), id);
        if (this.widget.get(key)) {
          if (!$.hasClass(node, EXPANDED_CLASS)) {
            $.addClass(node, EXPANDED_CLASS);
            this.animateExpand(node);
          }
          return success();
        } else {
          $.addClass(node, LOADING_BOOK);
          if (scrollIntoView) {
            node.scrollIntoView(false);
          }
          return this.loadToc(key, childOrder, function (_this) {
            return function () {
              $.removeClass(node, LOADING_BOOK);
              $.addClass(node, EXPANDED_CLASS);
              _this.animateExpand(node);
              return success();
            };
          }(this));
        }
      }
    }, {
      key: 'extractTempData',
      value: function extractTempData() {
        var tempItems = void 0;
        tempItems = this.widget.get(rh.consts('KEY_TEMP_DATA'));
        this.widget.publish(rh.consts('KEY_TEMP_DATA'));
        return tempItems;
      }
    }, {
      key: 'loadToc',
      value: function loadToc(fullKey, parentOrder, success) {
        var absRef = void 0,
            key = void 0,
            parentPath = void 0,
            ref1 = void 0;
        ref1 = this.parseKey(fullKey), absRef = ref1.absRef, key = ref1.key;
        parentPath = absRef ? absRef + '/' : '';
        return _.loadScript(parentPath + 'whxdata/' + key + '.new.js', true, function (_this) {
          return function () {
            var tempItems = void 0;
            tempItems = _this.extractTempData() || [];
            _.each(tempItems, function (item) {
              item.absRef = absRef;
              if (parentOrder) {
                return item.childOrder = parentOrder;
              }
            });
            return _this.loadRefToc(tempItems, function (items) {
              _this.widget.publish(fullKey, items);
              if (success) {
                return success();
              }
            });
          };
        }(this));
      }
    }, {
      key: 'loadRefToc',
      value: function loadRefToc(items, success) {
        var absRef = void 0,
            index = void 0,
            item = void 0;
        if (items == null) {
          items = [];
        }
        index = _.findIndex(items, function (item) {
          if (item.ref) {
            return true;
          }
        });
        if (index !== -1) {
          item = items[index];
          absRef = item.absRef || '';
          if (absRef) {
            absRef += '/';
          }
          absRef += item.ref;
          var prjOrder = model.get(consts('KEY_TOC_ORDER'));
          var childOrder = prjOrder[absRef].order;
          return _.loadScript(absRef + '/whxdata/toc.new.js', true, function (_this) {
            return function () {
              var tempItems = void 0;
              tempItems = _this.extractTempData() || [];
              _.each(tempItems, function (item) {
                item.absRef = absRef;
                if (childOrder) {
                  return item.childOrder = childOrder;
                }
              });
              Array.prototype.splice.apply(items, [index, 1].concat(tempItems));
              return _this.loadRefToc(items, success);
            };
          }(this));
        } else if (success) {
          return success(items);
        }
      }
    }, {
      key: 'getTOCData',
      value: function getTOCData() {
        return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function (_this) {
          return function () {
            var err;
            try {
              return model.subscribe(consts('KEY_PROJECT_LIST'), function (allProjects) {
                return model.subscribe(consts('KEY_MASTER_PROJECT_LIST'), function (list) {
                  var items, len;
                  len = list.length;
                  items = [];
                  return _.each(list, function (prj) {
                    prj = _.makeRelativeUrl(prj, allProjects[0]);
                    if (prj) {
                      prj = prj + "/";
                    }
                    return _.loadScript(prj + "whxdata/toc.new.js", true, function (_this) {
                      return function () {
                        var tempItems;
                        tempItems = _this.extractTempData() || [];
                        _.each(tempItems, function (item) {
                          item.absRef = prj;
                        });
                        return _this.loadRefToc(tempItems, function (resolvedItems) {
                          len--;
                          items = items.concat(resolvedItems);
                          if (len === 0) {
                            _this.widget.publish(KEY_TOC, items);
                            _this.widget.publish(consts('EVT_TOC_LOADED'), true);
                            return _this.widget.subscribe(rh.consts('KEY_TOPIC_ID'), _this.subscribeTopicID);
                          }
                        });
                      };
                    }(this));
                  }, _this);
                });
              });
            } catch (error) {
              err = error;
              if (rh._debug) {
                return rh._d('warn', err.message);
              }
            }
          };
        }(this));
      }
    }, {
      key: 'nextChildOrder',
      value: function nextChildOrder(childOrder) {
        var orders = void 0;
        orders = childOrder.split('@');
        orders[orders.length - 1] = 1 + _.parseInt(orders[orders.length - 1], 0);
        return orders.join('@');
      }
    }, {
      key: 'childOrder',
      value: function childOrder(parentOrder) {
        if (parentOrder) {
          return parentOrder + '@1';
        } else {
          return '@1';
        }
      }
    }, {
      key: 'pid',
      value: function pid(id) {
        var path = void 0;
        path = id.split('_');
        path.pop();
        return path.join('_') || '_';
      }
    }, {
      key: 'key',
      value: function key(absRef, _key) {
        var idx = void 0;
        if (absRef == null) {
          absRef = '';
        }
        idx = _.findIndex(this.projectAbsRef, function (ref) {
          return ref === absRef;
        });
        if (idx === -1) {
          idx = this.projectAbsRef.length;
          this.projectAbsRef.push(absRef);
        }
        return '.p.child_toc.' + idx + '.' + _key;
      }
    }, {
      key: 'parseKey',
      value: function parseKey(key) {
        var absRef = void 0,
            keys = void 0,
            lastKey = void 0;
        key = key.substring(3);
        keys = key.split('.');
        lastKey = keys.pop();
        absRef = this.projectAbsRef[keys.pop()] || '';
        return {
          key: lastKey,
          absRef: absRef
        };
      }
    }, {
      key: 'url',
      value: function url(item, id) {
        var bookMark = void 0,
            filePath = void 0,
            params = void 0,
            parentPath = void 0,
            url = void 0;
        if (!item.url) {
          return '#';
        }
        if (item.type === 'remoteitem') {
          return encodeURI(item.url);
        }
        parentPath = item.absRef ? _.ensureSlash(item.absRef) : '';
        url = '' + parentPath + item.url;
        bookMark = _.extractHashString(url);
        if (bookMark.length > 0) {
          bookMark = '#' + bookMark;
          filePath = _.filePath(url);
          params = _.extractParamString(url);
          if (params.length > 0) {
            params = params + '&';
          }
          params = '?' + params + 'rhtocid=' + id;
          url = '' + filePath + params + bookMark;
        }
        return encodeURI(url);
      }
    }, {
      key: 'tags',
      value: function tags(item) {
        var parentPath = void 0;
        parentPath = item.absRef ? '+' + item.absRef : '';
        if (item['data-rhtags']) {
          return item['data-rhtags'] + parentPath;
        } else {
          return '';
        }
      }
    }, {
      key: 'subscribeTopicID',
      value: function subscribeTopicID(tocInfo) {
        var _this3 = this;

        var path = void 0,
            tocid = void 0;
        if (tocInfo == null) {
          tocInfo = {};
        }
        tocid = _.hashParams()['rhtocid'];
        if (tocid) {
          path = this.getPathfromId(tocid);
          this.selectTocById(path, this.widget.node);
        } else {
          rh.model.subscribe(rh.consts('KEY_MASTER_PROJECT_LIST'), function (list) {
            if (list && list.length < 2) return _this3.syncToc.sync(_this3, tocInfo);
          });
        }
      }
    }, {
      key: 'subscribeBookId',
      value: function subscribeBookId(bookId) {
        // sukumar: TODO remove this line
        var books = void 0;
        var path = void 0;
        if (bookId) {
          path = this.getPathfromId(bookId);
          return this.selectTocById(path, this.widget.node, null, books);
        }
      }
    }, {
      key: 'getPathfromId',
      value: function getPathfromId(id) {
        var path = void 0;
        path = id.split('_');
        path.shift();
        path = _.map(path, function (item) {
          return _.parseInt(item, 0);
        });
        return path;
      }
    }, {
      key: 'selectTocById',
      value: function selectTocById(path, node, wait, books) {
        var child = void 0,
            index = void 0;
        if (wait == null) {
          wait = 1;
        }
        if (!(node && node.children)) {
          return;
        }
        index = path.shift();
        child = _.find(node.children, function (child) {
          if (this.isBookNode(child) || this.isPageNode(child)) {
            if (index === 0) {
              return true;
            }
            index--;
          }
          return false;
        }, this);
        if (!child) {
          return;
        }

        if (path.length === 0) {
          this.selectLink(child, true, wait);
        }
        if (this.isBookNode(child)) {
          return this.openBook(child, true, function (_this) {
            return function () {
              return _.defer(function () {
                var childNode = void 0,
                    parentNode = void 0;
                if (path.length === 0) {
                  return _this.updateBookInfo();
                } else {
                  childNode = child.nextElementSibling;
                  parentNode = childNode.children && childNode.children[0];
                  return _this.selectTocById(path, parentNode, ANIM_TIME);
                }
              });
            };
          }(this));
        } else {
          return this.updateBookInfo();
        }
      }
    }]);

    return TocController;
  }();

  TocController.prototype["class"] = function (item) {
    if (item.type === 'remoteitem') {
      return 'url';
    } else {
      return item.type;
    }
  };

  return TocController;
}();

rh.controller('TocController', TocController);

},{"../../src/lib/rh":24,"../../src/responsive_help/utils/node_utils":66}],6:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../src/lib/rh");
var _ = rh._;
var $ = rh.$;
var model = rh.model;
var consts = rh.consts;

var TOCLevel = function () {
  function TOCLevel() {
    var _this = this;

    _classCallCheck(this, TOCLevel);

    this.data = { '': { order: '', nextChild: 0 } };
    model.subscribeOnce(consts('KEY_PROJECT_LIST'), function (allProjects) {
      _.each(allProjects, function (prj) {
        prj = _.makeRelativeUrl(_this.trimFirst(prj, '.'), allProjects[0]);
        _this.childOrder(prj);
      });
      model.publish(consts('KEY_TOC_ORDER'), _this.data);
    });
  }

  _createClass(TOCLevel, [{
    key: 'trimFirst',
    value: function trimFirst(path, char) {
      return path = path.length && path[0] === char && path[1] !== char ? path.substring(1) : path;
    }
  }, {
    key: 'childOrder',
    value: function childOrder(absRef) {
      absRef = this.trimFirst(absRef, '/');
      if (!this.data[absRef]) {
        var path = absRef;
        path = path.substring(0, path.lastIndexOf('/'));
        path = path.substring(0, path.lastIndexOf('/'));
        var parent = this.data[path];
        parent.nextChild++;
        this.data[absRef] = { order: parent.order + '@' + parent.nextChild, nextChild: 0 };
      }
      return this.data[absRef].order;
    }
  }]);

  return TOCLevel;
}();

new TOCLevel();

},{"../../src/lib/rh":24}],7:[function(require,module,exports){
'use strict';

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;

var BrowseSequenceBuilder = function BrowseSequenceBuilder() {
  _classCallCheck(this, BrowseSequenceBuilder);

  var handleTopicChange = function handleTopicChange(doNotUse) {
    var brsMap = rh.model.get('t.brsmap');
    if (brsMap != null) {
      var next = brsMap['n'] && brsMap['n'][0] || '';
      var prev = brsMap['p'] && brsMap['p'][0] || '';
      var decodedURI = window.decodeURI(document.location.href);

      if (!_.isEmptyString(next)) {
        next = window._getRelativeFileName(decodedURI, next);
      }
      if (!_.isEmptyString) {
        prev = window._getRelativeFileName(decodedURI, prev);
      }

      rh.model.publish('l.brsBack', prev);
      return rh.model.publish('l.brsNext', next);
    }
  };

  var updateShowBrs = function updateShowBrs() {
    var uiMode = rh.model.get(rh.consts('KEY_UI_MODE'));
    var prev = rh.model.get('l.brsBack');
    var next = rh.model.get('l.brsNext');
    var showBrs = !uiMode && (prev || next) ? true : false;
    return rh.model.publish('l.show_brs', showBrs);
  };

  rh.model.subscribe('t.topicurl', _.debounce(handleTopicChange, 200));
  rh.model.subscribe('t.brsmap', _.debounce(handleTopicChange, 200));

  rh.model.subscribe('l.brsBack', updateShowBrs);
  rh.model.subscribe('l.brsNext', updateShowBrs);
  rh.model.subscribe(rh.consts('KEY_UI_MODE'), updateShowBrs);
};

//TODO: move it to controller


rh.widgets.BrowseSequenceBuilder = BrowseSequenceBuilder;

},{}],8:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var $, HASH_KEY_RANDOM, HASH_KEY_RH_HIGHLIGHT, HASH_KEY_RH_SEARCH, HASH_KEY_RH_TOCID, HASH_KEY_TOPIC, HASH_KEY_UIMODE, _, consts, fixHashMapForRoot, fixHashMapForTopic, getHashMapForRoot, getMergedParamsMap, getParamsForRoot, getTopicURL, hashChanged, hashQueryKeys, model, navigateToUrl, queueUpdateHashMap, rh, showNonTopic, showTopic, topicChanged;

  rh = window.rh;

  _ = rh._;

  $ = rh.$;

  consts = rh.consts;

  model = rh.model;

  HASH_KEY_RH_SEARCH = consts('HASH_KEY_RH_SEARCH');

  HASH_KEY_TOPIC = consts('HASH_KEY_TOPIC');

  HASH_KEY_UIMODE = consts('HASH_KEY_UIMODE');

  HASH_KEY_RH_TOCID = consts('HASH_KEY_RH_TOCID');

  HASH_KEY_RH_HIGHLIGHT = consts('HASH_KEY_RH_HIGHLIGHT');

  HASH_KEY_RANDOM = consts('HASH_KEY_RANDOM');

  hashQueryKeys = [HASH_KEY_RH_HIGHLIGHT, consts('HASH_KEY_RH_SYNS'), HASH_KEY_RH_TOCID];

  getMergedParamsMap = function getMergedParamsMap(topicUrl) {
    var hashMap, paramsMap;
    paramsMap = _.urlParams(_.extractParamString(topicUrl));
    hashMap = _.hashParams(_.extractHashString(topicUrl));
    return _.extend(paramsMap, hashMap);
  };

  getTopicURL = function getTopicURL(newMap, topicUrl) {
    var bookMark, filePath, i, key, len, params, paramsMap;
    topicUrl = topicUrl;
    filePath = _.filePath(topicUrl);
    bookMark = _.extractHashString(topicUrl);
    if (bookMark.length > 0) {
      bookMark = "#" + bookMark;
    }
    paramsMap = _.urlParams(_.extractParamString(topicUrl));
    for (i = 0, len = hashQueryKeys.length; i < len; i++) {
      key = hashQueryKeys[i];
      if (newMap[key] != null) {
        paramsMap[key] = newMap[key];
      }
    }
    if (model.get(consts('KEY_SCREEN_IOS'))) {
      paramsMap[HASH_KEY_RANDOM] = _.uniqueId();
    }
    params = _.mapToEncodedString(paramsMap);
    if (params.length > 0) {
      params = "?" + params;
    }
    return "" + filePath + params + bookMark;
  };

  queueUpdateHashMap = _.queueUpdateHashMap;

  fixHashMapForTopic = function fixHashMapForTopic(hashMap) {
    if (hashMap == null) {
      hashMap = {};
    }
    hashMap[HASH_KEY_UIMODE] = null;
    hashMap[HASH_KEY_RANDOM] = null;
    if (!hashMap[HASH_KEY_RH_TOCID]) {
      hashMap[HASH_KEY_RH_TOCID] = null;
    }
    if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
      hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
    }
    return hashMap;
  };

  fixHashMapForRoot = function fixHashMapForRoot(hashMap) {
    if (hashMap == null) {
      hashMap = {};
    }
    if (!hashMap[HASH_KEY_UIMODE]) {
      hashMap[HASH_KEY_UIMODE] = null;
    }
    hashMap[HASH_KEY_RANDOM] = null;
    if (!hashMap[HASH_KEY_RH_TOCID]) {
      hashMap[HASH_KEY_RH_TOCID] = null;
    }
    if (!hashMap[HASH_KEY_RH_HIGHLIGHT]) {
      hashMap[HASH_KEY_RH_HIGHLIGHT] = null;
    }
    if (!hashMap[HASH_KEY_RH_SEARCH]) {
      hashMap[HASH_KEY_RH_SEARCH] = null;
    }
    return hashMap;
  };

  showTopic = function showTopic(relUrl, addToHistory) {
    var hashMap;
    relUrl = _.fixRelativeUrl(relUrl);
    hashMap = _.urlParams(_.extractParamString(relUrl));
    hashMap[HASH_KEY_TOPIC] = _.stripParam(relUrl);
    hashMap = fixHashMapForTopic(hashMap);
    return queueUpdateHashMap(hashMap, addToHistory);
  };

  getHashMapForRoot = function getHashMapForRoot(relUrl) {
    var hashMap;
    relUrl = _.fixRelativeUrl(relUrl);
    hashMap = _.urlParams(_.extractParamString(relUrl));
    hashMap = fixHashMapForRoot(hashMap);
    return hashMap;
  };

  getParamsForRoot = function getParamsForRoot(relUrl) {
    var queryMap;
    queryMap = getHashMapForRoot(relUrl);
    if (_.isEmptyObject(queryMap)) {
      return '';
    } else {
      return "?" + _.mapToEncodedString(queryMap);
    }
  };

  showNonTopic = function showNonTopic(url, addToHistory) {
    var hashMap;
    hashMap = {};
    hashMap[HASH_KEY_TOPIC] = url;
    hashMap = fixHashMapForTopic(hashMap);
    return queueUpdateHashMap(hashMap, addToHistory);
  };

  ({
    isSameTopic: function isSameTopic(url1, url2) {}
  });

  hashChanged = function hashChanged(obj) {
    var changed, newMap, oldMap, oldTopicUrl, oldUiMode, ref, searchTerm, searchTermChanged, topicUrl, uiMode;
    newMap = obj.newMap;
    oldMap = obj.oldMap;
    oldUiMode = oldMap[HASH_KEY_UIMODE];
    uiMode = newMap[HASH_KEY_UIMODE];
    if (HASH_KEY_RH_SEARCH in newMap) {
      searchTerm = newMap[HASH_KEY_RH_SEARCH];
      searchTermChanged = searchTerm !== model.get(consts('KEY_SEARCHED_TERM'));
      model.publish(consts('KEY_SEARCH_TERM'), searchTerm, {
        sync: true
      });
    }
    if (uiMode === 'search') {
      if (searchTermChanged && window.gHost) {
        model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
      }
    }
    if (!uiMode || newMap[HASH_KEY_TOPIC]) {
      oldTopicUrl = model.get(consts('KEY_TOPIC_IN_IFRAME'));
      if (HASH_KEY_TOPIC in newMap) {
        topicUrl = newMap[HASH_KEY_TOPIC];
      }
      if (!topicUrl) {
        topicUrl = oldTopicUrl;
      }
      var feature = rh.model.get(rh.consts('KEY_FEATURE'));
      if (!topicUrl && (!feature || feature.showDefTopic !== false)) {
        topicUrl = (ref = window.gDefaultTopic) != null ? ref.substring(1) : void 0;
      }
      changed = topicUrl && (topicUrl !== oldTopicUrl || oldUiMode !== uiMode || oldMap[HASH_KEY_RH_HIGHLIGHT] !== newMap[HASH_KEY_RH_HIGHLIGHT] || oldMap[HASH_KEY_RH_TOCID] !== newMap[HASH_KEY_RH_TOCID]);
      if (changed) {
        if (_.stripBookmark(topicUrl) !== _.stripBookmark(oldTopicUrl)) {
          _.runTopicLoadingAnimation(true);
        }
        model.publish(consts('KEY_TOPIC_IN_IFRAME'), topicUrl);
        window.loadTopic(getTopicURL(newMap, topicUrl));
      }
    }
    return model.publish(consts('KEY_UI_MODE'), newMap[HASH_KEY_UIMODE]);
  };

  topicChanged = function topicChanged(topicUrl) {
    var decodedURI, hashMap, oldUrl, relUrl;
    hashMap = _.hashParams();
    if (topicUrl && !hashMap[HASH_KEY_UIMODE]) {
      decodedURI = decodeURI(document.location.href);
      relUrl = window._getRelativeFileName(decodedURI, topicUrl);
      oldUrl = hashMap[HASH_KEY_TOPIC];
      if (!oldUrl || _.filePath(relUrl) !== _.filePath(oldUrl)) {
        model.publish(consts('KEY_TOPIC_IN_IFRAME'), relUrl);
        return showTopic(relUrl, false);
      }
    }
  };

  navigateToUrl = function navigateToUrl(obj) {
    var fileName, hashMap, params, relUrl, rootUrl, url;
    url = obj.absUrl;
    if (_.isRootUrl()) {
      if (_.isUrlAllowdInIframe(url)) {
        url = _.makeRelativeUrl(_.fixRelativeUrl(url));
        fileName = url && _.filePath(url);
        if (fileName === consts('START_FILEPATH')) {
          url = url.substring(fileName.length);
        } else if (!url) {
          url = '#ux';
        }
        if (url[0] === '#' || url[0] === '?') {
          hashMap = _.hashParams(_.extractHashString(url));
          if (!(HASH_KEY_UIMODE in hashMap)) {
            hashMap[HASH_KEY_UIMODE] = null;
          }
          return queueUpdateHashMap(hashMap, true);
        } else if (url) {
          return showTopic(url, true);
        }
      } else {
        return showNonTopic(url, true);
      }
    } else {
      if (!_.isRootUrl(url)) {
        rootUrl = _.getRootUrl();
        if (_.isExternalUrl(url)) {
          relUrl = url;
        } else {
          params = getParamsForRoot(url);
          relUrl = _.fixRelativeUrl(_.makeRelativePath(url, rootUrl));
        }
        url = "" + rootUrl + params + "#t=" + encodeURIComponent(relUrl);
      }
      return document.location.href = url;
    }
  };

  model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
    _.addEventListener(document, 'click', _.hookClick);
    model.subscribe(consts('EVT_HASH_CHANGE'), hashChanged);
    model.subscribe(consts('KEY_TOPIC_URL'), topicChanged);
    model.subscribe(consts('EVT_NAVIGATE_TO_URL'), navigateToUrl);
    model.subscribe(consts('KEY_TOPIC_IN_IFRAME'), function (topicUrl) {
      if ("" + window.gHost + window.gHostPath !== '/') {
        if (window.setTopic) {
          window.setTopic();
        }
        if (window.changeTopicLink) {
          return window.changeTopicLink(document.location.toString());
        }
      }
    });
    model.subscribe(consts('EVT_TOPIC_LOADED'), function () {
      return _.runTopicLoadingAnimation(false);
    });
    return model.subscribe(consts('EVT_INSIDE_IFRAME_DOM_CONTENTLOADED'), function () {
      return _.runTopicLoadingAnimation(false);
    });
  });
}).call(undefined);

},{}],9:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var storage = rh.storage;

var urlFilter = rh._params.filter;

var ExpressionBuilder = function () {
  var GRP_SEPARATOR = undefined;
  var TAG_SEPARATOR = undefined;
  var ELEMENT_SEPARATOR = undefined;
  ExpressionBuilder = function () {
    _createClass(ExpressionBuilder, null, [{
      key: 'initClass',
      value: function initClass() {

        GRP_SEPARATOR = ':';
        TAG_SEPARATOR = ';';
        ELEMENT_SEPARATOR = ',';
      }
    }]);

    function ExpressionBuilder(config) {
      _classCallCheck(this, ExpressionBuilder);

      this.getUnchecked = this.getUnchecked.bind(this);
      this.handleTagStates = this.handleTagStates.bind(this);
      storage.init(consts('HELP_ID'));

      this.allTagNames = this.computeNames(rh.model.get(consts('KEY_MERGED_FILTER_KEY')));

      this.prepareTagStates();

      this.handleTagStates(rh.model.get(consts('KEY_PROJECT_TAG_STATES')));

      rh.model.subscribe(consts('KEY_PROJECT_TAG_STATES'), _.debounce(this.handleTagStates, 300), { initDone: true });
    }

    _createClass(ExpressionBuilder, [{
      key: 'computeNames',
      value: function computeNames(tags) {
        return _.reduce(tags, function (result, tag) {
          result.push(tag.children ? this.computeNames(tag.children) : tag.name);
          return result;
        }, [], this);
      }
    }, {
      key: 'getUnchecked',
      value: function getUnchecked(index, checked) {
        return _.filter(this.allTagNames[index], function (item) {
          return -1 === checked.indexOf(item);
        });
      }
    }, {
      key: 'computeExpression',
      value: function computeExpression(states) {
        if (!states || !this.allTagNames) {
          return rh.model.publish(consts('KEY_TAG_EXPRESSION'), []);
        }

        var groupExprs = _.reduce(states, function (result, value, key) {
          if (_.isString(value)) {
            result.push({ c: [value], u: [] });
          } else if (value != null) {
            var validValues = void 0;
            if ((validValues = _.compact(value)) && validValues.length > 0) {
              result.push({
                c: validValues,
                u: this.getUnchecked(key, validValues)
              });
            }
          }
          return result;
        }, [], this);

        return rh.model.publish(consts('KEY_TAG_EXPRESSION'), groupExprs);
      }
    }, {
      key: 'handleTagStates',
      value: function handleTagStates(states) {
        if (states == null) {
          states = {};
        }
        this.computeExpression(states);

        // Persist new tag state in localDB or cookies
        return storage.persist('tag_states', states);
      }
    }, {
      key: 'prepareTagStates',
      value: function prepareTagStates() {
        var _this = this;

        return rh.model.subscribe(consts('KEY_PROJECT_FILTER_TYPE'), function () {
          var tagStates = void 0;
          if (urlFilter) {
            var filter = rh.model.get(consts('KEY_MERGED_FILTER_KEY'));
            tagStates = _this.parseUrlFilter(filter, urlFilter.split(ELEMENT_SEPARATOR));
          }

          if (!tagStates) {
            tagStates = storage.fetch('tag_states');
          }

          if (!tagStates) {
            tagStates = _.clone(rh.model.get(consts('KEY_DEFAULT_FILTER')));
          }

          if (tagStates) {
            return rh.model.publish(consts('KEY_PROJECT_TAG_STATES'), tagStates);
          }
        });
      }
    }, {
      key: 'parseFilterElemnt',
      value: function parseFilterElemnt(filter, element) {
        var temp = element.split(GRP_SEPARATOR);
        var name = temp[0];
        var elements = temp[1] && temp[1].split(TAG_SEPARATOR);
        var index = _.findIndex(filter, function (item) {
          return elements != null === (item.children != null) && item.display === name;
        });
        return { index: index, elements: elements };
      }
    }, {
      key: 'parseUrlFilter',
      value: function parseUrlFilter(filter, array) {
        if (!array && !array.length) {
          return;
        }
        var radioMode = rh.model.get(consts('KEY_PROJECT_FILTER_TYPE')) === 'radio';
        var firstString = true;
        return _.reduce(array, function (result, element, index) {
          var elements = void 0;

          var _parseFilterElemnt = this.parseFilterElemnt(filter, element);

          index = _parseFilterElemnt.index;
          elements = _parseFilterElemnt.elements;

          if (index !== -1) {
            var node = filter[index];
            if (node.children) {
              result[index] = this.parseUrlFilter(node.children, elements);
            } else if (!radioMode || firstString) {
              firstString = false;
              result[index] = node.name;
            }
          }
          return result;
        }, {}, this);
      }
    }]);

    return ExpressionBuilder;
  }();
  ExpressionBuilder.initClass();
  return ExpressionBuilder;
}();

rh.widgets.ExpressionBuilder = ExpressionBuilder;

},{}],10:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;


var FilterController = function () {
  var GROUP_CLASS = undefined;
  var ITEM_CLASS = undefined;
  var KEY_PROJECT_FILTER_TYPE = undefined;
  FilterController = function () {
    _createClass(FilterController, null, [{
      key: 'initClass',
      value: function initClass() {

        GROUP_CLASS = 'group';
        ITEM_CLASS = 'item';
        KEY_PROJECT_FILTER_TYPE = consts('KEY_PROJECT_FILTER_TYPE');
      }
    }]);

    function FilterController(widget) {
      _classCallCheck(this, FilterController);

      this.click = this.click.bind(this);
      this.widget = widget;
    }

    _createClass(FilterController, [{
      key: 'click',
      value: function click(e) {
        var topNode = e.currentTarget;
        var clickNode = e.target;
        var node = this.getItemNode(clickNode, topNode);
        var selTagExprsPath = '' + consts('KEY_PROJECT_TAG_STATES') + this.getItemKey(node);
        var selTagExprs = this.widget.get(selTagExprsPath);
        if (this.filterType() !== 'radio') {
          this.handleCheckboxClick(node, selTagExprsPath, selTagExprs);
        } else {
          this.handleRadioClick(node, selTagExprsPath, selTagExprs);
        }
        return _.preventDefault(e);
      }
    }, {
      key: 'handleRadioClick',
      value: function handleRadioClick(node, selTagExprsPath, selTagExprs) {
        if (!this.isGroupNode(node) && !selTagExprs) {
          var _$splitKey = _.splitKey(selTagExprsPath),
              parentKey = _$splitKey.parentKey,
              key = _$splitKey.key;

          var newValue = {};
          newValue[key] = this.getItemValue(node);
          return this.widget.publish(parentKey, newValue);
        }
      }
    }, {
      key: 'handleCheckboxClick',
      value: function handleCheckboxClick(node, selTagExprsPath, selTagExprs) {
        var newValue = void 0;
        if (this.isGroupNode(node)) {
          var checked = _.any(selTagExprs, function (tagExpr) {
            return tagExpr;
          });
          newValue = checked ? undefined : this.getGroupItemExprs(node);
          return this.widget.publish(selTagExprsPath, newValue);
        } else {
          newValue = selTagExprs ? undefined : this.getItemValue(node);
          return this.widget.publish(selTagExprsPath, newValue);
        }
      }
    }, {
      key: 'getItemNode',
      value: function getItemNode(node, topNode) {
        return _.findParentNode(node, topNode, function (node) {
          return $.nodeName(node) === 'LI';
        });
      }
    }, {
      key: 'getItemValue',
      value: function getItemValue(node) {
        return $.dataset(node, 'itemvalue');
      }
    }, {
      key: 'getGroupItemExprs',
      value: function getGroupItemExprs(node) {
        var key = $.dataset(node, 'itemkey');
        var groupTag = this.widget.get('' + this.widget.key + key);
        return _.map(groupTag.children, function (tag) {
          return tag.name;
        });
      }
    }, {
      key: 'getItemKey',
      value: function getItemKey(node) {
        return $.dataset(node, 'itemkey');
      }
    }, {
      key: 'isGroupNode',
      value: function isGroupNode(node) {
        return $.hasClass(node, GROUP_CLASS);
      }
    }, {
      key: 'isItemNode',
      value: function isItemNode(node) {
        return $.hasClass(node, ITEM_CLASS);
      }
    }, {
      key: 'class',
      value: function _class(item) {
        if (item.children) {
          return GROUP_CLASS;
        } else {
          return ITEM_CLASS;
        }
      }
    }, {
      key: 'value',
      value: function value(item) {
        if (item.children) {
          return null;
        } else {
          return item.name;
        }
      }
    }, {
      key: 'filterType',
      value: function filterType() {
        return this.widget.get(KEY_PROJECT_FILTER_TYPE) || 'checkbox';
      }
    }, {
      key: 'inputType',
      value: function inputType(item) {
        var type = this.filterType();
        if (item.children && type === 'radio') {
          type = undefined;
        }
        return type;
      }
    }]);

    return FilterController;
  }();
  FilterController.initClass();
  return FilterController;
}();

rh.controller('FilterController', FilterController);

},{}],11:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;
var rhs = rh.rhs;


var FilterReport = function () {
  var getPostUrl = undefined;
  FilterReport = function () {
    _createClass(FilterReport, null, [{
      key: 'initClass',
      value: function initClass() {

        getPostUrl = function getPostUrl() {
          var host = document.location.origin;
          var baseContext = model.get(consts('KEY_PUBLISH_BASE_URL')).substr(host.length);
          if (baseContext && !_.isEmptyString(baseContext)) {
            var hashString = _.mapToEncodedString(_.extend(_.addPathNameKey({ area: rhs.area(),
              prj: rhs.project(), type: rhs.type(), agt: 'fltRpt', mgr: 'agm'
            })));
            return baseContext + '?' + hashString;
          }
        };
      }
    }]);

    function FilterReport() {
      _classCallCheck(this, FilterReport);

      var timer = 3000;
      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
        return model.subscribeOnce(consts('KEY_PUBLISH_MODE'), function (val) {
          if (!val) {
            return;
          }
          var url = url || getPostUrl();
          var ckTags = [];
          var postToServer = _.debounce(function () {
            return http.post(url, JSON.stringify(ckTags)).error(function (data, status) {
              if (rh._debug) {
                return rh._d('error', 'Filter report status ', status);
              }
            });
          }, timer, false);

          return model.subscribe(consts('KEY_TAG_EXPRESSION'), function (expr) {
            ckTags = [];
            var filterData = rh.model.get(consts('KEY_MERGED_FILTER_KEY'));
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
              for (var _iterator = Array.from(expr)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var tags = _step.value;
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                  for (var _iterator2 = Array.from(tags.c)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                    var tag = _step2.value;

                    var tagData;
                    if (tagData = rh.filterObject.lookup(filterData, tag, false)) {
                      ckTags.push(tagData.display);
                    }
                  }
                } catch (err) {
                  _didIteratorError2 = true;
                  _iteratorError2 = err;
                } finally {
                  try {
                    if (!_iteratorNormalCompletion2 && _iterator2.return) {
                      _iterator2.return();
                    }
                  } finally {
                    if (_didIteratorError2) {
                      throw _iteratorError2;
                    }
                  }
                }
              }
            } catch (err) {
              _didIteratorError = true;
              _iteratorError = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                  _iterator.return();
                }
              } finally {
                if (_didIteratorError) {
                  throw _iteratorError;
                }
              }
            }

            if (ckTags.length > 0) {
              return postToServer();
            }
          });
        });
      });
    }

    return FilterReport;
  }();
  FilterReport.initClass();
  return FilterReport;
}();

new FilterReport();

},{}],12:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _window = window,
    rh = _window.rh;
var model = rh.model;
var _ = rh._;
var consts = rh.consts;
var http = rh.http;


var GlossaryController = function () {
  var entrys = undefined;
  GlossaryController = function (_rh$NavController) {
    _inherits(GlossaryController, _rh$NavController);

    _createClass(GlossaryController, null, [{
      key: 'initClass',
      value: function initClass() {

        entrys = 'entrys';
      }
    }]);

    function GlossaryController(widget) {
      _classCallCheck(this, GlossaryController);

      var _this = _possibleConstructorReturn(this, (GlossaryController.__proto__ || Object.getPrototypeOf(GlossaryController)).call(this));

      _this.data = [];
      _this.chunkCount = 0;
      _this.count = 0;
      _this.keys = '';
      _this.alhpabet = '';
      _this.loadNavData('glo');
      _this.filter = '';
      _this.widget = widget;
      _this.widget.publish('show', {});
      return _this;
    }

    _createClass(GlossaryController, [{
      key: 'addElement',
      value: function addElement(elements, list) {
        var _this2 = this;

        return function () {
          var result = [];
          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = Array.from(elements[entrys])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var element = _step.value;

              if (element != null) {
                if (!_this2.lookup(list, element)) {
                  result.push(list.push(element));
                } else {
                  result.push(undefined);
                }
              }
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          return result;
        }();
      }
    }, {
      key: 'exists',
      value: function exists(name) {
        var ch = this.alphaText(name);
        if (this.alhpabet.indexOf(ch) > -1) {
          return true;
        }
        this.alhpabet += ch;
        return false;
      }
    }, {
      key: 'isFiltered',
      value: function isFiltered(name) {
        return this.filter && name.toLocaleLowerCase().indexOf(this.filter) === -1;
      }
    }, {
      key: 'alphaText',
      value: function alphaText(name) {
        return name.toUpperCase().charAt(0);
      }
    }, {
      key: 'filterGlo',
      value: function filterGlo(value) {
        this.filter = value.toLocaleLowerCase();
        this.alhpabet = '';
        return model.publish(consts('PROJECT_GLOSSARY_DATA'), model.get(consts('PROJECT_GLOSSARY_DATA')));
      }
    }]);

    return GlossaryController;
  }(rh.NavController);
  GlossaryController.initClass();
  return GlossaryController;
}();

rh.controller('GlossaryController', GlossaryController);

},{}],13:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var IndexController,
      NavController,
      _,
      consts,
      http,
      model,
      rh,
      rhs,
      topics,
      bind = function bind(fn, me) {
    return function () {
      return fn.apply(me, arguments);
    };
  },
      extend = function extend(child, parent) {
    for (var key in parent) {
      if (hasProp.call(parent, key)) child[key] = parent[key];
    }function ctor() {
      this.constructor = child;
    }ctor.prototype = parent.prototype;child.prototype = new ctor();child.__super__ = parent.prototype;return child;
  },
      hasProp = {}.hasOwnProperty;

  rh = window.rh;

  model = rh.model;

  _ = rh._;

  consts = rh.consts;

  http = rh.http;

  rhs = rh.rhs;

  topics = 'topics';

  NavController = function () {
    function NavController() {
      this.updateData = bind(this.updateData, this);
    }

    NavController.prototype.lookup = function (children, key) {
      var child, element, i, len;
      if (children != null && key != null) {
        for (i = 0, len = children.length; i < len; i++) {
          child = children[i];
          if (!(child != null)) {
            continue;
          }
          if (key.type === child.type && key.name === child.name && _.isEqual(key.url, child.url) && _.isEqual(key[topics], child[topics])) {
            element = child;
          }
          if (element != null) {
            break;
          }
        }
      }
      return element;
    };

    NavController.prototype.sort = function (array) {
      return array.sort(function (first, second) {
        return window.compare(first.name, second.name);
      });
    };

    NavController.prototype.updateData = function (constKey, projectUrl) {
      var curData;
      curData = model.get(consts('KEY_TEMP_DATA')) || [];
      model.publish(consts('KEY_TEMP_DATA'));
      this.addElement(curData, this.data, projectUrl, this.keys);
      if (--this.chunkCount === 0 && this.count === 0) {
        this.sort(this.data);
        return model.publish(consts(constKey), this.data);
      }
    };

    NavController.prototype.getChunkData = function (projectUrl, key) {
      var arr, ref;
      this.count--;
      arr = ((ref = model.get(consts('KEY_TEMP_DATA'))) != null ? ref['chunkinfos'] : void 0) || [];
      this.chunkCount += arr.length;
      return _.each(arr, function (chunk) {
        if (projectUrl) {
          projectUrl = _.ensureSlash(projectUrl);
        }
        return _.loadScript(projectUrl + "whxdata/" + chunk.node + ".new.js", false, function (_this) {
          return function () {
            return _this.updateData(key, projectUrl);
          };
        }(this));
      }, this);
    };

    NavController.prototype.loadNavData = function (type) {
      return model.subscribe(consts('KEY_PROJECT_LIST'), function (_this) {
        return function (list) {
          _this.alhpabet = '';
          _this.count += list.length;
          return _.each(list, function (projectUrl) {
            if (projectUrl) {
              projectUrl = _.ensureSlash(projectUrl);
            }
            return _.loadScript(projectUrl + "whxdata/" + (type === 'ndx' ? 'idx' : 'glo') + ".new.js", false, function (_this) {
              return function () {
                return _this.getChunkData(projectUrl, type === 'ndx' ? 'PROJECT_INDEX_DATA' : 'PROJECT_GLOSSARY_DATA');
              };
            }(this));
          }, _this);
        };
      }(this));
    };

    return NavController;
  }();

  rh.NavController = NavController;

  IndexController = function (superClass) {
    var defProject;

    extend(IndexController, superClass);

    defProject = '';

    function IndexController(widget) {
      this.data = [];
      this.chunkCount = 0;
      this.count = 0;
      this.alhpabet = '';
      this.filter = '';
      this.keys = 'keys';
      this.widget = widget;
      model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function (_this) {
        return function () {
          _this.loadNavData('ndx');
          _this.getIndexData();
          return model.subscribe(consts('KEY_INDEX_FILTER'), function () {
            _this.alhpabet = '';
            return model.publish(consts('PROJECT_INDEX_DATA'), model.get(consts('PROJECT_INDEX_DATA')));
          });
        };
      }(this));
    }

    IndexController.prototype.addElement = function (element, list, projectUrl, data) {
      var child, existing, i, len, obj, ref, relUrl, results;
      if (element[data] != null) {
        ref = element[data];
        results = [];
        for (i = 0, len = ref.length; i < len; i++) {
          child = ref[i];
          if (!(child != null)) {
            continue;
          }
          if (!(existing = this.lookup(list, child))) {
            obj = {
              type: child.type,
              name: child.name
            };
            if (child['data-rhtags']) {
              obj['data-rhtags'] = child['data-rhtags'] + "+" + projectUrl;
            }
            if (!child.url) {
              obj[topics] = [];
            }
            relUrl = _.makeRelativeUrl("" + projectUrl, defProject);
            if (child.url != null) {
              obj.url = "" + encodeURI(relUrl) + child.url;
            }
            if (child.url == null) {
              obj[this.keys] = [];
            }
            list.push(obj);
            existing = list[list.length - 1];
          }
          this.addElement(child, existing[this.keys], projectUrl, this.keys);
          results.push(this.addElement(child, existing[topics], projectUrl, topics));
        }
        return results;
      }
    };

    IndexController.prototype.showItem = function (name) {
      var filter;
      filter = model.get(consts('KEY_INDEX_FILTER'));
      return !filter || name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1;
    };

    IndexController.prototype.showCategory = function (name, level) {
      var ch;
      if (level > 0) {
        return false;
      }
      ch = this.alphaText(name);
      if (this.alhpabet.indexOf(ch) > -1) {
        return false;
      }
      this.alhpabet += ch;
      return true;
    };

    IndexController.prototype.showNextLevel = function (node) {
      var childData, id, obj1, old;
      id = node.getAttribute('data-indexid');
      old = this.widget.get('show.' + id);
      childData = (obj1 = {}, obj1["" + id] = !old, obj1);
      while (id) {
        id = id.substr(0, id.lastIndexOf('_'));
        childData[id] = true;
      }
      return this.widget.publish('show', childData);
    };

    IndexController.prototype.alphaText = function (name) {
      return name.toUpperCase().charAt(0);
    };

    IndexController.prototype.getIndexData = function () {
      return model.subscribeOnce(consts('KEY_PUBLISH_BASE_URL'), function () {
        var baseContext, baseUrl, err, hashString, host, parentPath;
        try {
          baseUrl = model.get(consts('KEY_PUBLISH_BASE_URL'));
          host = document.location.origin;
          baseContext = baseUrl.substr(host.length);
          parentPath = _.parentPath(_.filePath(_.getRootUrl()));
          if (baseContext && !_.isEmptyString(baseContext)) {
            hashString = _.mapToEncodedString(_.extend({
              area: rhs.area(),
              prj: rhs.project(),
              type: rhs.type(),
              agt: 'ndx',
              mgr: 'agm'
            }));
            return http.get(baseContext + "?" + hashString).success(function (data, status) {
              var list;
              data = JSON.parse(data);
              list = [];
              _.each(data, function (item) {
                data[0] = _.ensureSlash(data[0]);
                return list.push(_.makeRelativeUrl(item, data[0]));
              });
              return model.publish(consts('KEY_PROJECT_LIST'), list);
            });
          }
        } catch (_error) {
          err = _error;
          if (rh._debug) {
            return rh._d('warn', err.message);
          }
        }
      });
    };

    return IndexController;
  }(rh.NavController);

  rh.controller('IndexController', IndexController);
}).call(undefined);

},{}],14:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


model.publish(consts('KEY_SHOW_TAGS'), rh._params.showtags === 'true');
model.publish(consts('KEY_IFRAME_EVENTS'), { click: true });

var oldHashMap = {};
var hashChanged = function hashChanged() {
  var newHashMap = _.hashParams();
  model.publish(consts('EVT_HASH_CHANGE'), { oldMap: oldHashMap, newMap: newHashMap }, { sync: true });
  return oldHashMap = newHashMap;
};

var redirectToDefaultTopic = function redirectToDefaultTopic() {
  var paramsStr = _.extractParamString(document.location.href);
  var paramsMap = _.urlParams(paramsStr);
  var hashStr = _.extractHashString(document.location.href);
  var hashMap = _.hashParams(hashStr);
  var mapnoattr = consts('RHMAPNO');
  var topicKey = consts('HASH_KEY_TOPIC');
  if (!(mapnoattr in paramsMap) && !(topicKey in hashMap)) {
    return document.location = consts('DEFAULT_TOPIC');
  }
};

_.addEventListener(window, 'hashchange', hashChanged);

_.addEventListener(window, 'orientationchange', function (e) {
  model.publish(consts('EVT_ORIENTATION_CHANGE'), null);
  if (model.get(consts('KEY_SCREEN_IPAD'))) {
    var topicFrame = void 0;
    if (topicFrame = _.getTopicFrame()) {
      var display = topicFrame.style.display;

      topicFrame.style.display = 'none';
      topicFrame.offsetHeight;
      return _.defer(function () {
        topicFrame.style.display = display;
        return _.delay(function () {
          topicFrame.offsetHeight;
          return _.delay(function () {
            return (// Let try once more
              topicFrame.offsetHeight
            );
          }, 500);
        }, 200);
      });
    }
  }
});

// TODO
//model.subscribe consts('EVT_ORIENTATION_CHANGE'), _.debounce ->
//  meta = $('meta[name=viewport]', 0)
//  meta.content = "width=#{window.innerWidth}, initial-scale=1,
//  maximum-scale=3, user-scalable=yes"
//  if model.get consts 'KEY_SCREEN_IOS'
//    model.publish consts('EVT_RELOAD_TOPIC'), null
//, 250

model.subscribe(consts('EVT_WIDGET_LOADED'), function () {
  // Create ExpressionBuilder widget on every page
  var topicFrame = void 0;
  model.subscribe(consts('KEY_MERGED_FILTER_KEY'), function () {
    return new rh.widgets.ExpressionBuilder();
  });

  // Create BrowseSequenceBuilder widget on every page
  new rh.widgets.BrowseSequenceBuilder();

  hashChanged();

  // replace default print method to support iFrame
  rh.layoutPrint = window.print;
  window.print = function () {
    return (
      // publish it with null value, to stop the autmatic subscribe calls
      model.publish(consts('EVT_PRINT_TOPIC'), null)
    );
  };

  var topicFileName = _.getFileName(document.location.href);
  if (topicFileName === consts('TOPIC_FILE')) {
    var redirectUrl = redirectToDefaultTopic();
    if (redirectUrl) {
      return redirectUrl;
    }
  }

  if (topicFrame = _.getTopicFrame()) {
    return topicFrame.onload = function () {
      return model.publish(consts('EVT_TOPIC_LOADED'), null);
    };
  } else {
    var paramsStr = _.extractParamString(document.location.href);
    var paramsMap = _.urlParams(paramsStr);
    var mapnoattr = consts('RHMAPNO');
    if (mapnoattr in paramsMap) {
      return document.location = consts('TOPIC_FILE') + "?" + paramsStr;
    }
  }
});
model.subscribe(consts('EVT_BOOKMARK') + '#content_top_placeholder', function () {
  return (
    // Hack #content_top_link clicks and send them to content iframe
    model.publish(consts('EVT_SCROLL_TO_TOP'), null)
  );
});

model.subscribe(consts('KEY_PROJECT_LIST'), function () {
  return rh.filterObject = new rh.MergeProj();
});

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  var deviceReady = "deviceready";
  return document.addEventListener(deviceReady, function () {
    if (window.cordova != null) {
      return model.publish(consts('KEY_MOBILE_APP_MODE'), true);
    }
  });
});

},{}],15:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var JsLoadingController = function () {
  var rh = undefined;
  var $ = undefined;
  var _ = undefined;
  JsLoadingController = function () {
    _createClass(JsLoadingController, null, [{
      key: 'initClass',
      value: function initClass() {
        var _window = window;
        rh = _window.rh;
        var _rh = rh;
        $ = _rh.$;
        var _rh2 = rh;
        _ = _rh2._;
      }
    }]);

    function JsLoadingController(widget, opts) {
      _classCallCheck(this, JsLoadingController);

      var removeClasses = (opts != null ? opts.removeClasses : undefined) || ['hide-children', 'loading'];
      _.each(removeClasses, function (className) {
        return $.removeClass(widget.node, className);
      });
      _.each(opts != null ? opts.addClasses : undefined, function (className) {
        return $.addClass(widget.node, className);
      });
    }

    return JsLoadingController;
  }();
  JsLoadingController.initClass();
  return JsLoadingController;
}();

window.rh.controller('JsLoadingController', JsLoadingController);

},{}],16:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;


rh.model.subscribe(consts('EVT_WIDGET_BEFORELOAD'), function () {
  if ($('a.wShow', 0) !== null) {
    var contentDiv = $('.contenttopic', 0);
    $.setAttribute(contentDiv, 'data-rhwidget', 'Basic');
    return $.setAttribute(contentDiv, 'data-class', 'govt_csh:@.l.csh_mode;govt_nocsh:!@.l.csh_mode');
  }
});

},{}],17:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var _window = window,
    rh = _window.rh;
var _ = rh._;
var model = rh.model;
var consts = rh.consts;


var Projects = function () {
  var projectList = undefined;
  var projectQueue = undefined;
  var projDataFile = undefined;
  var REMOTENODE = undefined;
  var PROJNODE = undefined;
  var URL = undefined;
  var loaded = undefined;
  var loadProjectFile = undefined;
  var getProjectList = undefined;
  Projects = function () {
    _createClass(Projects, null, [{
      key: 'initClass',
      value: function initClass() {
        projectList = [];
        projectQueue = [];
        projDataFile = 'projectdata.js';
        REMOTENODE = 'remote';
        PROJNODE = 'project';
        URL = 'url';
        loaded = 0;

        loadProjectFile = function loadProjectFile(curProjPath) {
          var curProjDataFile = curProjPath + '/' + projDataFile;
          return window.xmlJsReader.loadFile(curProjDataFile, function (xmlDoc, curProjPath) {
            var remoteNodes = void 0;
            var len = 0;
            loaded++;
            if (xmlDoc != null) {
              var projXmlNode = xmlDoc.getElementsByTagName(PROJNODE)[0];
              remoteNodes = projXmlNode.getElementsByTagName(REMOTENODE);
              len = remoteNodes.length;
            }
            _.each(remoteNodes, function (remoteNode) {
              var path = curProjPath + '/' + remoteNode.getAttribute(URL);
              projectList.push(path);
              return projectQueue.push(path);
            });
            getProjectList();
            if (projectQueue.length === 0 && loaded === projectList.length) {
              model.publish(consts('KEY_PROJECT_LIST'), projectList);
              return model.publish(consts('KEY_MASTER_PROJECT_LIST'), ["."]);
            }
          }, curProjPath);
        };

        getProjectList = function getProjectList() {
          return function () {
            var result = [];
            while (projectQueue.length > 0) {
              var project = projectQueue.splice(0, 1);
              result.push(loadProjectFile(project));
            }
            return result;
          }();
        };
      }
    }]);

    function Projects() {
      _classCallCheck(this, Projects);

      projectList.push('.');
      projectQueue.push('.');
      getProjectList();
    }

    return Projects;
  }();
  Projects.initClass();
  return Projects;
}();

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  return _.defer(function () {
    if (!model.get(consts('KEY_PUBLISH_MODE')) && !window.gbPreviewMode) {
      return new Projects();
    }
  });
});

},{}],18:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ModernLayoutController = function () {
  var rh = undefined;
  var _ = undefined;
  var $ = undefined;
  var consts = undefined;
  var KEY_FEATURE = undefined;
  var KEY_FILTER_LOCATION = undefined;
  var KEY_SEARCH_LOCATION = undefined;
  var KEY_ACTIVE_TAB = undefined;
  var KEY_UI_MODE = undefined;
  var KEY_MOBILE_TOC_DRILL_DOWN = undefined;
  var KEY_TOC_DRILL_DOWN = undefined;
  var DESKTOP = undefined;
  var TABLET = undefined;
  var PHONE = undefined;
  var SHOW_FILTER_UI = undefined;
  var tabs = undefined;
  var sideBarTabs = undefined;
  var delayLoadTabs = undefined;
  ModernLayoutController = function () {
    _createClass(ModernLayoutController, null, [{
      key: 'initClass',
      value: function initClass() {
        var _window = window;
        rh = _window.rh;
        var _rh = rh;
        _ = _rh._;
        var _rh2 = rh;
        $ = _rh2.$;
        var _rh3 = rh;
        consts = _rh3.consts;

        KEY_FEATURE = consts('KEY_FEATURE');
        KEY_FILTER_LOCATION = consts('KEY_FILTER_LOCATION');
        KEY_SEARCH_LOCATION = consts('KEY_SEARCH_LOCATION');
        KEY_ACTIVE_TAB = consts('KEY_ACTIVE_TAB');
        KEY_UI_MODE = consts('KEY_UI_MODE');
        KEY_MOBILE_TOC_DRILL_DOWN = consts('KEY_MOBILE_TOC_DRILL_DOWN');
        KEY_TOC_DRILL_DOWN = consts('KEY_TOC_DRILL_DOWN');
        DESKTOP = 'desktop';
        TABLET = 'tablet';
        PHONE = 'phone';
        SHOW_FILTER_UI = rh._params.hideUI !== 'filter';
        tabs = {
          desktop: ['toc', 'idx', 'glo', 'filter', 'fts'],
          tablet: ['toc', 'idx', 'glo', 'filter', 'fts'],
          phone: ['toc', 'idx', 'glo', 'filter', 'fts']
        };

        sideBarTabs = {
          desktop: ['toc', 'idx', 'glo', 'filter', 'fts'],
          tablet: ['toc', 'idx', 'glo', 'filter', 'fts'],
          phone: ['toc', 'idx', 'glo']
        };
        delayLoadTabs = {
          'idx': { evt: 'EVT_LOAD_IDX', f_key: 'delay_load_idx' },
          'glo': { evt: 'EVT_LOAD_GLO', f_key: 'delay_load_glo' }
        };
      }
    }]);

    function ModernLayoutController(widget) {
      var _this = this;

      _classCallCheck(this, ModernLayoutController);

      this.triggerDelayLoadWidgets = this.triggerDelayLoadWidgets.bind(this);
      this.widget = widget;
      this.init();
      this.subscribeActiveTab();
      this.subscribeToLocations();
      this.subscribeScreens();

      this.widget.subscribe(consts('EVT_PROJECT_LOADED'), function () {
        _this.subscribeUIMode();
        _this.subscribeMergedFilter();
        _this.subscribeTopicClick();
        _this.subscribeTopicScroll();
        _this.subscribForSearchResult();
        _this.subscribeTopicNavigate();
        _this.subscribeToDelayLoadEvents();
        return _this.widget.publish(consts('KEY_IFRAME_EVENTS'), { click: true, scroll: false });
      });
    }

    _createClass(ModernLayoutController, [{
      key: 'init',
      value: function init() {
        this.screens = this.widget.get(consts('KEY_SCREEN_NAMES'));
        rh.storage.init(consts('HELP_ID'));
        this.activeScreen = _.find(this.screens, function (screen) {
          return this.widget.get(consts('KEY_SCREEN') + '.' + screen + '.attached');
        }, this);
        if (this.activeScreen == null) {
          this.activeScreen = this.widget.get(consts('KEY_DEFAULT_SCREEN'));
        }

        this.assureLocations(this.activeScreen);

        this.initDefauls();

        return this.initActiveTab();
      }
    }, {
      key: 'initDefauls',
      value: function initDefauls() {
        var defaultTab = this.widget.get(consts('KEY_DEFAULT_TAB'));
        if (!this.hasFeature(defaultTab)) {
          defaultTab = null;
        }

        this.defaultTabs = {};

        return _.each(this.screens, function (screen) {
          tabs[screen] = _.filter(tabs[screen], function (tab) {
            return this.hasFeature(tab);
          }, this);

          sideBarTabs[screen] = _.filter(sideBarTabs[screen], function (tab) {
            return this.hasFeature(tab);
          }, this);

          return this.defaultTabs[screen] = defaultTab && -1 !== tabs[screen].indexOf(defaultTab) ? defaultTab : tabs[screen][0];
        }, this);
      }
    }, {
      key: 'initActiveTab',
      value: function initActiveTab() {
        var activeTab = rh.storage.fetch('activetab');
        if (activeTab !== undefined && activeTab && this.hasFeature(activeTab)) {
          return this.widget.publish(KEY_ACTIVE_TAB, activeTab);
        }
      }
    }, {
      key: 'isValidTab',
      value: function isValidTab(tab, screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        if (!tab || !this.hasFeature(tab)) {
          return false;
        }

        if (screen === DESKTOP) {
          if (tab === 'filter' && 'content' === this.widget.get(KEY_FILTER_LOCATION) || tab === 'fts' && 'content' === this.widget.get(KEY_SEARCH_LOCATION)) {
            return false;
          }
        }

        return -1 !== tabs[screen].indexOf(tab);
      }
    }, {
      key: 'defaultTab',
      value: function defaultTab(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        var defaultTab = this.defaultTabs[screen];
        if (!this.isValidTab(defaultTab)) {
          defaultTab = _.find(tabs[screen], function (tab) {
            return this.isValidTab(tab);
          }, this);
        }
        return defaultTab;
      }
    }, {
      key: 'assureValidActiveTab',
      value: function assureValidActiveTab(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        var activetab = this.widget.get(KEY_ACTIVE_TAB);
        if (screen === DESKTOP || activetab) {
          if (!this.isValidTab(activetab)) {
            activetab = this.defaultTab();
          }
          return this.widget.publish(KEY_ACTIVE_TAB, activetab);
        }
      }
    }, {
      key: 'toggleSideBar',
      value: function toggleSideBar() {
        if (this.widget.get(KEY_ACTIVE_TAB)) {
          return this.widget.publish(KEY_ACTIVE_TAB, null);
        } else {
          return this.widget.publish(KEY_ACTIVE_TAB, this.lastMobileTab || this.defaultTab());
        }
      }
    }, {
      key: 'toggleActiveTab',
      value: function toggleActiveTab(tab) {
        return this.widget.publish(KEY_ACTIVE_TAB, !this.isDesktopScreen() && tab === this.widget.get(KEY_ACTIVE_TAB) ? null : tab);
      }
    }, {
      key: 'triggerDelayLoadWidgets',
      value: function triggerDelayLoadWidgets(tab) {
        var tabObj = delayLoadTabs[tab];
        if (tabObj && this.hasFeature(tabObj.f_key)) {
          return this.widget.publish(consts(tabObj.evt), true);
        }
      }
    }, {
      key: 'subscribeToDelayLoadEvents',
      value: function subscribeToDelayLoadEvents() {
        return this.widget.subscribe(KEY_ACTIVE_TAB, this.triggerDelayLoadWidgets);
      }
    }, {
      key: 'filterDone',
      value: function filterDone() {
        return this.widget.publish(KEY_ACTIVE_TAB, this.searchMode ? 'fts' : null);
      }
    }, {
      key: 'hasFeature',
      value: function hasFeature(feature) {
        return feature === undefined || false !== this.widget.get(KEY_FEATURE + '.' + feature);
      }
    }, {
      key: 'subscribeUIMode',
      value: function subscribeUIMode() {
        var _this2 = this;

        var setSearchTab = function setSearchTab() {
          if (!_this2.isValidTab('fts')) {
            return;
          }
          if (!_this2.isDesktopScreen() || 'tabbar' === _this2.widget.get(KEY_SEARCH_LOCATION)) {
            return _this2.widget.publish(KEY_ACTIVE_TAB, 'fts');
          }
        };

        this.widget.subscribe(KEY_UI_MODE, function (mode) {
          return _this2.widget.publish('active_content', mode);
        });

        this.widget.subscribe('active_content', function (mode) {
          if (_this2.isMobileScreen() && !mode) {
            return _this2.widget.publish(KEY_ACTIVE_TAB, null);
          } else if ('search' === mode) {
            return setSearchTab();
          }
        }, { initDone: true });
        if ('search' === this.widget.get('active_content')) {
          return setSearchTab();
        }
      }
    }, {
      key: 'subscribeMergedFilter',
      value: function subscribeMergedFilter() {
        var _this3 = this;

        var featureFilterKey = void 0;
        if (this.widget.get(featureFilterKey = KEY_FEATURE + '.filter')) {
          return this.widget.subscribe(consts('KEY_MERGED_FILTER_KEY'), function (tags) {
            _this3.widget.publish(featureFilterKey, tags && tags.length && SHOW_FILTER_UI ? true : false);
            return _this3.assureValidActiveTab();
          });
        }
      }
    }, {
      key: 'subscribeTopicClick',
      value: function subscribeTopicClick() {
        var _this4 = this;

        return this.widget.subscribe(consts('EVT_CLICK_INSIDE_IFRAME'), function () {
          if (_this4.activeScreen === PHONE && _this4.widget.get(KEY_ACTIVE_TAB)) {
            return _this4.toggleSideBar();
          }
        });
      }
    }, {
      key: 'subscribeTopicNavigate',
      value: function subscribeTopicNavigate() {
        var _this5 = this;

        return this.widget.subscribe(consts('EVT_NAVIGATE_TO_URL'), function (obj) {
          if (obj.absUrl && _.isUrlAllowdInIframe(obj.absUrl)) {
            return _this5.widget.publish('active_content', null);
          }
        });
      }
    }, {
      key: 'subscribeTopicScroll',
      value: function subscribeTopicScroll() {
        var _this6 = this;

        return this.widget.subscribe(consts('EVT_SCROLL_INSIDE_IFRAME'), function (info) {
          var hide_header = info.dir === 'down' || info.scrollTop > 10;
          _this6.widget.publish('hide_header', hide_header);

          var hide_mobile_functions = info.dir === 'down' && info.scrollTop > 10;
          return _this6.widget.publish('hide_mobile_functions', hide_mobile_functions);
        });
      }
    }, {
      key: 'subscribeActiveTab',
      value: function subscribeActiveTab() {
        var _this7 = this;

        return this.widget.subscribe(KEY_ACTIVE_TAB, function (activeTab) {
          rh.storage.persist('activetab', activeTab);
          if (_this7.isMobileScreen()) {
            if (_this7.isSidebarTab(activeTab)) {
              _this7.lastMobileTab = activeTab;
            }
            return _this7.searchMode = activeTab === 'fts' || _this7.searchMode && activeTab === 'filter';
          } else {
            return _this7.searchMode = false;
          }
        });
      }
    }, {
      key: 'subscribeScreens',
      value: function subscribeScreens() {
        return _.each(this.screens, function (screen) {
          var _this8 = this;

          var key = consts('KEY_SCREEN') + '.' + screen + '.attached';
          if (this.widget.get(key)) {
            this.handleScreen(true, screen);
          }
          return this.widget.subscribe(key, function (attached) {
            return _this8.handleScreen(attached, screen);
          }, { initDone: true });
        }, this);
      }
    }, {
      key: 'subscribeToLocations',
      value: function subscribeToLocations() {
        var _this9 = this;

        this.widget.subscribe(KEY_SEARCH_LOCATION, function () {
          return _this9.assureValidActiveTab(_this9.activeScreen);
        });

        return this.widget.subscribe(KEY_FILTER_LOCATION, function () {
          return _this9.assureValidActiveTab(_this9.activeScreen);
        });
      }
    }, {
      key: 'subscribForSearchResult',
      value: function subscribForSearchResult() {
        var _this10 = this;

        var updateSearchResults = function updateSearchResults() {
          var tagExpr = _this10.widget.get(consts('KEY_TAG_EXPRESSION'));
          var searchTagExpr = _this10.widget.get(consts('KEY_ONSEARCH_TAG_EXPR'));
          if (searchTagExpr && searchTagExpr !== JSON.stringify(tagExpr)) {
            return _this10.widget.publish(consts('EVT_SEARCH_TERM'), true);
          }
        };

        this.widget.subscribe(consts('KEY_TAG_EXPRESSION'), _.debounce(function () {
          if (_this10.isValidTab('fts') && 'fts' !== _this10.widget.get(KEY_ACTIVE_TAB)) {
            return;
          }
          if (!_this10.isSearchMode(_this10.widget.get(KEY_ACTIVE_TAB))) {
            return;
          }

          return updateSearchResults();
        }, 300));

        return this.widget.subscribe(KEY_ACTIVE_TAB, function (tab) {
          if (tab === 'fts') {
            return updateSearchResults();
          }
        });
      }
    }, {
      key: 'isMobileScreen',
      value: function isMobileScreen() {
        return this.activeScreen === PHONE;
      }
    }, {
      key: 'isDesktopScreen',
      value: function isDesktopScreen() {
        return this.activeScreen === DESKTOP;
      }
    }, {
      key: 'isTabletScreen',
      value: function isTabletScreen() {
        return this.activeScreen === TABLET;
      }
    }, {
      key: 'isSidebarTab',
      value: function isSidebarTab(tab) {
        return tab && -1 !== sideBarTabs[this.activeScreen].indexOf(tab);
      }
    }, {
      key: 'isSearchMode',
      value: function isSearchMode(tab) {
        var topicTab = this.widget.get('active_content');
        return tab === 'fts' || topicTab === 'search' && this.isDesktopScreen() && 'content' === this.widget.get(KEY_SEARCH_LOCATION);
      }
    }, {
      key: 'handleScreen',
      value: function handleScreen(attached, screen) {
        if (attached) {
          this.activeScreen = screen;
          return this.handleAttached(screen);
        } else {
          return this.handleDetached(screen);
        }
      }
    }, {
      key: 'handleDetached',
      value: function handleDetached(screen) {
        var _this11 = this;

        return _.defer(function () {
          if (screen === DESKTOP) {
            return _this11.widget.publish(KEY_ACTIVE_TAB, 'search' === _this11.widget.get('active_content') && _this11.isValidTab('fts') ? 'fts' : null);
          }
        });
      }
    }, {
      key: 'handleAttached',
      value: function handleAttached(screen) {
        this.assureLocations(screen);
        this.assureValidActiveTab(screen);
        return this.assureTOCMode(screen);
      }
    }, {
      key: 'assureLocations',
      value: function assureLocations(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        this.widget.publish(KEY_SEARCH_LOCATION, screen === DESKTOP ? this.widget.get(consts('KEY_DEFAULT_SEARCH_LOCATION')) : screen === TABLET ? 'tabbar' : 'content');
        return this.widget.publish(KEY_FILTER_LOCATION, screen === DESKTOP || screen === TABLET ? 'tabbar' : 'content');
      }
    }, {
      key: 'assureTOCMode',
      value: function assureTOCMode(screen) {
        if (screen == null) {
          screen = this.activeScreen;
        }
        return this.widget.publish(KEY_TOC_DRILL_DOWN, screen !== DESKTOP && this.widget.get(KEY_MOBILE_TOC_DRILL_DOWN));
      }
    }, {
      key: 'newSearch',
      value: function newSearch(text, keyCode, event) {
        if (keyCode === 13) {
          var oldText = this.widget.get(consts('KEY_SEARCH_TERM'));
          if (oldText !== text) {
            this.widget.publish(consts('KEY_SEARCH_TERM'), text);
          }
          this.widget.publish(consts('EVT_SEARCH_TERM'), true);
          if (event != null ? event.target : undefined) {
            return event.target.blur();
          }
        }
      }
    }, {
      key: 'isTagStatesChanged',
      value: function isTagStatesChanged() {
        var currentState = _.compactObject(this.widget.get(consts('KEY_PROJECT_TAG_STATES')));
        var defaultState = _.compactObject(this.widget.get(consts('KEY_DEFAULT_FILTER')));
        return !_.isEqual(currentState, defaultState);
      }
    }, {
      key: 'setDefaultTagStates',
      value: function setDefaultTagStates() {
        var defaultState = this.widget.get(consts('KEY_DEFAULT_FILTER'));
        return this.widget.publish(consts('KEY_PROJECT_TAG_STATES'), _.clone(defaultState));
      }
    }]);

    return ModernLayoutController;
  }();
  ModernLayoutController.initClass();
  return ModernLayoutController;
}();

window.rh.controller('ModernLayoutController', ModernLayoutController);

},{}],19:[function(require,module,exports){
'use strict';

// Generated by CoffeeScript 1.9.1
(function () {
  var MergeProj, _, consts, model, rh;

  rh = window.rh;

  model = rh.model;

  _ = rh._;

  consts = rh.consts;

  MergeProj = function () {
    var group, onLoadScipt;

    function MergeProj() {
      this.tagCombs = [];
      this.idmap = {};
      this.filter = [];
      this.grpType = 'group';
      this.dataLoaded = false;
      this.loadTagData(model.get(consts('KEY_PROJECT_LIST')));
      this.caption = this.type = this.defFilter = void 0;
    }

    MergeProj.prototype.updateTagCombs = function (project) {
      var base, combs;
      combs = model.get(consts('KEY_PROJECT_TAG_COMBINATIONS'));
      if (combs != null) {
        project = _.parseProjectName(project);
        return (base = this.idmap)[project] != null ? base[project] : base[project] = combs;
      }
    };

    MergeProj.prototype.lookup = function (children, key, isGrpType) {
      var child, compKey, element, i, len;
      if (isGrpType == null) {
        isGrpType = true;
      }
      if (children != null && key != null) {
        for (i = 0, len = children.length; i < len; i++) {
          child = children[i];
          if (!(child != null)) {
            continue;
          }
          compKey = child.name || child.display;
          if (isGrpType === (child.children != null) && compKey === key) {
            element = child;
          } else if (child.children != null && !isGrpType) {
            element = this.lookup(child.children, key, isGrpType);
          }
          if (element != null) {
            break;
          }
        }
      }
      return element;
    };

    group = function group(disp) {
      var object;
      return object = {
        type: 'group',
        display: disp,
        children: []
      };
    };

    MergeProj.prototype.addTag = function (childArr, tagElement) {
      var tag;
      if (this.lookup(this.filter, tagElement.name, false) == null) {
        tag = {
          display: tagElement.display,
          name: tagElement.name
        };
        return childArr.push(tag);
      }
    };

    MergeProj.prototype.addGroup = function (grpElement) {
      var element, grp, i, len, ref;
      grp = this.lookup(this.filter, grpElement.display);
      if (grp == null) {
        grp = group(grpElement.display);
        this.filter.push(grp);
      }
      ref = grpElement.children;
      for (i = 0, len = ref.length; i < len; i++) {
        element = ref[i];
        if (element != null) {
          if (element.children == null) {
            this.addTag(grp.children, element);
          }
        }
      }
      if (grp.children.length === 0 && this.filter.indexOf(grp) > -1) {
        return this.filter.splice(this.filter.indexOf(grp), 1);
      }
    };

    MergeProj.prototype.updateFilter = function () {
      var curfilter, element, i, len, results;
      curfilter = model.get(consts('KEY_TEMP_DATA')) || [];
      if (!this.caption) {
        this.caption = curfilter['caption'];
      }
      if (!this.type) {
        this.type = curfilter['type'];
      }
      if (typeof this.defFilter === 'undefined') {
        this.defFilter = curfilter['default'];
      }
      curfilter = curfilter['tags'] || [];
      model.publish(consts('KEY_TEMP_DATA'));
      results = [];
      for (i = 0, len = curfilter.length; i < len; i++) {
        element = curfilter[i];
        if (element != null) {
          if (element.children != null) {
            results.push(this.addGroup(element));
          } else {
            results.push(this.addTag(this.filter, element));
          }
        }
      }
      return results;
    };

    onLoadScipt = function onLoadScipt(project, count) {
      this.updateTagCombs(project);
      this.updateFilter();
      if (!count) {
        model.publish(consts('KEY_MERGED_FILTER_KEY'), this.filter);
        model.publish(consts('KEY_MERGED_PROJECT_MAP'), this.idmap);
        model.publish(consts('KEY_PROJECT_FILTER_CAPTION'), this.caption);
        model.publish(consts('KEY_PROJECT_FILTER_TYPE'), this.type);
        model.publish(consts('KEY_DEFAULT_FILTER'), this.defFilter);
        return this.dataLoaded = true;
      }
    };

    MergeProj.prototype.loadTagData = function (projList) {
      var count, i, len, project, results;
      if (!this.dataLoaded) {
        count = projList.length;
        results = [];
        for (i = 0, len = projList.length; i < len; i++) {
          project = projList[i];
          if (project != null) {
            if (project) {
              project = project + "/";
            }
            results.push(_.loadScript("" + project + consts('PATH_PROJECT_TAGDATA_FILE'), false, onLoadScipt.bind(this, project, --count)));
          } else {
            results.push(void 0);
          }
        }
        return results;
      }
    };

    return MergeProj;
  }();

  rh.MergeProj = MergeProj;
}).call(undefined);

},{}],20:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;
var rhs = rh.rhs;

var unsub = null;

unsub = model.subscribe(consts('KEY_TAG_EXPRESSION'), function () {
  var done = false;
  return function () {
    if (unsub) {
      unsub();
    }
    if (done) {
      return;
    }
    done = true;
    return model.subscribe(consts('KEY_SEARCHED_TERM'), function () {
      return model.publish(consts('KEY_ONSEARCH_TAG_EXPR'), JSON.stringify(model.get(consts('KEY_TAG_EXPRESSION'))));
    });
  };
}());

model.subscribe(consts('EVT_SEARCH_TERM'), function () {
  var canHandleSearch = model.get(consts('KEY_CAN_HANDLE_SEARCH'));
  var searchTerm = model.get(consts('KEY_SEARCH_TERM')) || null;
  var newMap = {};
  newMap[consts('HASH_KEY_RH_SEARCH')] = searchTerm;
  newMap[consts('HASH_KEY_UIMODE')] = 'search';

  if (canHandleSearch !== true) {
    return document.location = window.gRootRelPath + '/' + ('' + (window.gSearchPageFilePath || consts('START_FILEPATH'))) + ('?#' + _.mapToEncodedString(newMap));
  } else {
    model.publish(consts('EVT_QUERY_SEARCH_RESULTS'), true);
    return _.defer(function () {
      return _.updateHashMap(newMap, true);
    });
  }
});

model.subscribe(consts('EVT_PROJECT_LOADED'), function () {
  if (window.readSetting) {
    window.readSetting(RHANDSEARCH, function (state) {
      return model.publish(consts('KEY_AND_SEARCH'), state);
    });
  }

  return model.subscribe(consts('KEY_AND_SEARCH'), function (state) {
    return saveSetting(RHANDSEARCH, state === '1' ? '1' : '0', true);
  });
});

model.subscribe(consts('EVT_QUERY_SEARCH_RESULTS'), function () {
  if (!rhs.doSearch()) {
    return window.doSearch();
  }
});

},{}],21:[function(require,module,exports){
'use strict';

var _window = window,
    rh = _window.rh;
var _ = rh._;
var $ = rh.$;
var consts = rh.consts;
var model = rh.model;


_.getRootUrl = function () {
  var rootUrl = null;
  return function () {
    return rootUrl != null ? rootUrl : rootUrl = '' + _.getHostFolder() + consts('START_FILEPATH');
  };
}();

_.runTopicLoadingAnimation = function () {
  var runAnimation = null;
  var topicLoading = false;
  return function (flag) {
    topicLoading = flag;
    if (flag) {
      if (runAnimation == null) {
        runAnimation = _.debounce(function () {
          return model.publish(consts('EVT_TOPIC_LOADING'), topicLoading);
        }, 700);
      }
      return runAnimation();
    } else {
      runAnimation = null;
      return model.publish(consts('EVT_TOPIC_LOADING'), false);
    }
  };
}();

_.getTopicFrame = function () {
  var topicFrameName = window.gTopicFrameName || 'rh_default_topic_frame_name';
  return $('[name=' + topicFrameName + ']', 0);
};

},{}],22:[function(require,module,exports){
'use strict';

// to support old browser

if (String.prototype.trim == null) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g, '');
  };
}

if (String.prototype.trimStart == null) {
  String.prototype.trimStart = String.prototype.trimLeft;
}

if (String.prototype.trimEnd == null) {
  String.prototype.trimEnd = String.prototype.trimRight;
}

},{}],23:[function(require,module,exports){
/**
 * lunr - http://lunrjs.com - A bit like Solr, but much smaller and not as bright - 2.3.1
 * Copyright (C) 2018 Oliver Nightingale
 * @license MIT
 */

;(function(){

/**
 * A convenience function for configuring and constructing
 * a new lunr Index.
 *
 * A lunr.Builder instance is created and the pipeline setup
 * with a trimmer, stop word filter and stemmer.
 *
 * This builder object is yielded to the configuration function
 * that is passed as a parameter, allowing the list of fields
 * and other builder parameters to be customised.
 *
 * All documents _must_ be added within the passed config function.
 *
 * @example
 * var idx = lunr(function () {
 *   this.field('title')
 *   this.field('body')
 *   this.ref('id')
 *
 *   documents.forEach(function (doc) {
 *     this.add(doc)
 *   }, this)
 * })
 *
 * @see {@link lunr.Builder}
 * @see {@link lunr.Pipeline}
 * @see {@link lunr.trimmer}
 * @see {@link lunr.stopWordFilter}
 * @see {@link lunr.stemmer}
 * @namespace {function} lunr
 */
var lunr = function (config) {
  var builder = new lunr.Builder

  builder.pipeline.add(
    lunr.trimmer,
    lunr.stopWordFilter,
    lunr.stemmer
  )

  builder.searchPipeline.add(
    lunr.stemmer
  )

  config.call(builder, builder)
  return builder.build()
}

lunr.version = "2.3.1"
/*!
 * lunr.utils
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A namespace containing utils for the rest of the lunr library
 * @namespace lunr.utils
 */
lunr.utils = {}

/**
 * Print a warning message to the console.
 *
 * @param {String} message The message to be printed.
 * @memberOf lunr.utils
 * @function
 */
lunr.utils.warn = (function (global) {
  /* eslint-disable no-console */
  return function (message) {
    if (global.console && console.warn) {
      console.warn(message)
    }
  }
  /* eslint-enable no-console */
})(this)

/**
 * Convert an object to a string.
 *
 * In the case of `null` and `undefined` the function returns
 * the empty string, in all other cases the result of calling
 * `toString` on the passed object is returned.
 *
 * @param {Any} obj The object to convert to a string.
 * @return {String} string representation of the passed object.
 * @memberOf lunr.utils
 */
lunr.utils.asString = function (obj) {
  if (obj === void 0 || obj === null) {
    return ""
  } else {
    return obj.toString()
  }
}

/**
 * Clones an object.
 *
 * Will create a copy of an existing object such that any mutations
 * on the copy cannot affect the original.
 *
 * Only shallow objects are supported, passing a nested object to this
 * function will cause a TypeError.
 *
 * Objects with primitives, and arrays of primitives are supported.
 *
 * @param {Object} obj The object to clone.
 * @return {Object} a clone of the passed object.
 * @throws {TypeError} when a nested object is passed.
 * @memberOf Utils
 */
lunr.utils.clone = function (obj) {
  if (obj === null || obj === undefined) {
    return obj
  }

  var clone = Object.create(null),
      keys = Object.keys(obj)

  for (var i = 0; i < keys.length; i++) {
    var key = keys[i],
        val = obj[key]

    if (Array.isArray(val)) {
      clone[key] = val.slice()
      continue
    }

    if (typeof val === 'string' ||
        typeof val === 'number' ||
        typeof val === 'boolean') {
      clone[key] = val
      continue
    }

    throw new TypeError("clone is not deep and does not support nested objects")
  }

  return clone
}
lunr.FieldRef = function (docRef, fieldName, stringValue) {
  this.docRef = docRef
  this.fieldName = fieldName
  this._stringValue = stringValue
}

lunr.FieldRef.joiner = "/"

lunr.FieldRef.fromString = function (s) {
  var n = s.indexOf(lunr.FieldRef.joiner)

  if (n === -1) {
    throw "malformed field ref string"
  }

  var fieldRef = s.slice(0, n),
      docRef = s.slice(n + 1)

  return new lunr.FieldRef (docRef, fieldRef, s)
}

lunr.FieldRef.prototype.toString = function () {
  if (this._stringValue == undefined) {
    this._stringValue = this.fieldName + lunr.FieldRef.joiner + this.docRef
  }

  return this._stringValue
}
/*!
 * lunr.Set
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A lunr set.
 *
 * @constructor
 */
lunr.Set = function (elements) {
  this.elements = Object.create(null)

  if (elements) {
    this.length = elements.length

    for (var i = 0; i < this.length; i++) {
      this.elements[elements[i]] = true
    }
  } else {
    this.length = 0
  }
}

/**
 * A complete set that contains all elements.
 *
 * @static
 * @readonly
 * @type {lunr.Set}
 */
lunr.Set.complete = {
  intersect: function (other) {
    return other
  },

  union: function (other) {
    return other
  },

  contains: function () {
    return true
  }
}

/**
 * An empty set that contains no elements.
 *
 * @static
 * @readonly
 * @type {lunr.Set}
 */
lunr.Set.empty = {
  intersect: function () {
    return this
  },

  union: function (other) {
    return other
  },

  contains: function () {
    return false
  }
}

/**
 * Returns true if this set contains the specified object.
 *
 * @param {object} object - Object whose presence in this set is to be tested.
 * @returns {boolean} - True if this set contains the specified object.
 */
lunr.Set.prototype.contains = function (object) {
  return !!this.elements[object]
}

/**
 * Returns a new set containing only the elements that are present in both
 * this set and the specified set.
 *
 * @param {lunr.Set} other - set to intersect with this set.
 * @returns {lunr.Set} a new set that is the intersection of this and the specified set.
 */

lunr.Set.prototype.intersect = function (other) {
  var a, b, elements, intersection = []

  if (other === lunr.Set.complete) {
    return this
  }

  if (other === lunr.Set.empty) {
    return other
  }

  if (this.length < other.length) {
    a = this
    b = other
  } else {
    a = other
    b = this
  }

  elements = Object.keys(a.elements)

  for (var i = 0; i < elements.length; i++) {
    var element = elements[i]
    if (element in b.elements) {
      intersection.push(element)
    }
  }

  return new lunr.Set (intersection)
}

/**
 * Returns a new set combining the elements of this and the specified set.
 *
 * @param {lunr.Set} other - set to union with this set.
 * @return {lunr.Set} a new set that is the union of this and the specified set.
 */

lunr.Set.prototype.union = function (other) {
  if (other === lunr.Set.complete) {
    return lunr.Set.complete
  }

  if (other === lunr.Set.empty) {
    return this
  }

  return new lunr.Set(Object.keys(this.elements).concat(Object.keys(other.elements)))
}
/**
 * A function to calculate the inverse document frequency for
 * a posting. This is shared between the builder and the index
 *
 * @private
 * @param {object} posting - The posting for a given term
 * @param {number} documentCount - The total number of documents.
 */
lunr.idf = function (posting, documentCount) {
  var documentsWithTerm = 0

  for (var fieldName in posting) {
    if (fieldName == '_index') continue // Ignore the term index, its not a field
    documentsWithTerm += Object.keys(posting[fieldName]).length
  }

  var x = (documentCount - documentsWithTerm + 0.5) / (documentsWithTerm + 0.5)

  return Math.log(1 + Math.abs(x))
}

/**
 * A token wraps a string representation of a token
 * as it is passed through the text processing pipeline.
 *
 * @constructor
 * @param {string} [str=''] - The string token being wrapped.
 * @param {object} [metadata={}] - Metadata associated with this token.
 */
lunr.Token = function (str, metadata) {
  this.str = str || ""
  this.metadata = metadata || {}
}

/**
 * Returns the token string that is being wrapped by this object.
 *
 * @returns {string}
 */
lunr.Token.prototype.toString = function () {
  return this.str
}

/**
 * A token update function is used when updating or optionally
 * when cloning a token.
 *
 * @callback lunr.Token~updateFunction
 * @param {string} str - The string representation of the token.
 * @param {Object} metadata - All metadata associated with this token.
 */

/**
 * Applies the given function to the wrapped string token.
 *
 * @example
 * token.update(function (str, metadata) {
 *   return str.toUpperCase()
 * })
 *
 * @param {lunr.Token~updateFunction} fn - A function to apply to the token string.
 * @returns {lunr.Token}
 */
lunr.Token.prototype.update = function (fn) {
  this.str = fn(this.str, this.metadata)
  return this
}

/**
 * Creates a clone of this token. Optionally a function can be
 * applied to the cloned token.
 *
 * @param {lunr.Token~updateFunction} [fn] - An optional function to apply to the cloned token.
 * @returns {lunr.Token}
 */
lunr.Token.prototype.clone = function (fn) {
  fn = fn || function (s) { return s }
  return new lunr.Token (fn(this.str, this.metadata), this.metadata)
}
/*!
 * lunr.tokenizer
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A function for splitting a string into tokens ready to be inserted into
 * the search index. Uses `lunr.tokenizer.separator` to split strings, change
 * the value of this property to change how strings are split into tokens.
 *
 * This tokenizer will convert its parameter to a string by calling `toString` and
 * then will split this string on the character in `lunr.tokenizer.separator`.
 * Arrays will have their elements converted to strings and wrapped in a lunr.Token.
 *
 * Optional metadata can be passed to the tokenizer, this metadata will be cloned and
 * added as metadata to every token that is created from the object to be tokenized.
 *
 * @static
 * @param {?(string|object|object[])} obj - The object to convert into tokens
 * @param {?object} metadata - Optional metadata to associate with every token
 * @returns {lunr.Token[]}
 * @see {@link lunr.Pipeline}
 */
lunr.tokenizer = function (obj, metadata) {
  if (obj == null || obj == undefined) {
    return []
  }

  if (Array.isArray(obj)) {
    return obj.map(function (t) {
      return new lunr.Token(
        lunr.utils.asString(t).toLowerCase(),
        lunr.utils.clone(metadata)
      )
    })
  }

  var str = obj.toString().trim().toLowerCase(),
      len = str.length,
      tokens = []

  for (var sliceEnd = 0, sliceStart = 0; sliceEnd <= len; sliceEnd++) {
    var char = str.charAt(sliceEnd),
        sliceLength = sliceEnd - sliceStart

    if ((char.match(lunr.tokenizer.separator) || sliceEnd == len)) {

      if (sliceLength > 0) {
        var tokenMetadata = lunr.utils.clone(metadata) || {}
        tokenMetadata["position"] = [sliceStart, sliceLength]
        tokenMetadata["index"] = tokens.length

        tokens.push(
          new lunr.Token (
            str.slice(sliceStart, sliceEnd),
            tokenMetadata
          )
        )
      }

      sliceStart = sliceEnd + 1
    }

  }

  return tokens
}

/**
 * The separator used to split a string into tokens. Override this property to change the behaviour of
 * `lunr.tokenizer` behaviour when tokenizing strings. By default this splits on whitespace and hyphens.
 *
 * @static
 * @see lunr.tokenizer
 */
lunr.tokenizer.separator = /[\s\-]+/
/*!
 * lunr.Pipeline
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.Pipelines maintain an ordered list of functions to be applied to all
 * tokens in documents entering the search index and queries being ran against
 * the index.
 *
 * An instance of lunr.Index created with the lunr shortcut will contain a
 * pipeline with a stop word filter and an English language stemmer. Extra
 * functions can be added before or after either of these functions or these
 * default functions can be removed.
 *
 * When run the pipeline will call each function in turn, passing a token, the
 * index of that token in the original list of all tokens and finally a list of
 * all the original tokens.
 *
 * The output of functions in the pipeline will be passed to the next function
 * in the pipeline. To exclude a token from entering the index the function
 * should return undefined, the rest of the pipeline will not be called with
 * this token.
 *
 * For serialisation of pipelines to work, all functions used in an instance of
 * a pipeline should be registered with lunr.Pipeline. Registered functions can
 * then be loaded. If trying to load a serialised pipeline that uses functions
 * that are not registered an error will be thrown.
 *
 * If not planning on serialising the pipeline then registering pipeline functions
 * is not necessary.
 *
 * @constructor
 */
lunr.Pipeline = function () {
  this._stack = []
}

lunr.Pipeline.registeredFunctions = Object.create(null)

/**
 * A pipeline function maps lunr.Token to lunr.Token. A lunr.Token contains the token
 * string as well as all known metadata. A pipeline function can mutate the token string
 * or mutate (or add) metadata for a given token.
 *
 * A pipeline function can indicate that the passed token should be discarded by returning
 * null. This token will not be passed to any downstream pipeline functions and will not be
 * added to the index.
 *
 * Multiple tokens can be returned by returning an array of tokens. Each token will be passed
 * to any downstream pipeline functions and all will returned tokens will be added to the index.
 *
 * Any number of pipeline functions may be chained together using a lunr.Pipeline.
 *
 * @interface lunr.PipelineFunction
 * @param {lunr.Token} token - A token from the document being processed.
 * @param {number} i - The index of this token in the complete list of tokens for this document/field.
 * @param {lunr.Token[]} tokens - All tokens for this document/field.
 * @returns {(?lunr.Token|lunr.Token[])}
 */

/**
 * Register a function with the pipeline.
 *
 * Functions that are used in the pipeline should be registered if the pipeline
 * needs to be serialised, or a serialised pipeline needs to be loaded.
 *
 * Registering a function does not add it to a pipeline, functions must still be
 * added to instances of the pipeline for them to be used when running a pipeline.
 *
 * @param {lunr.PipelineFunction} fn - The function to check for.
 * @param {String} label - The label to register this function with
 */
lunr.Pipeline.registerFunction = function (fn, label) {
  if (label in this.registeredFunctions) {
    lunr.utils.warn('Overwriting existing registered function: ' + label)
  }

  fn.label = label
  lunr.Pipeline.registeredFunctions[fn.label] = fn
}

/**
 * Warns if the function is not registered as a Pipeline function.
 *
 * @param {lunr.PipelineFunction} fn - The function to check for.
 * @private
 */
lunr.Pipeline.warnIfFunctionNotRegistered = function (fn) {
  var isRegistered = fn.label && (fn.label in this.registeredFunctions)

  if (!isRegistered) {
    lunr.utils.warn('Function is not registered with pipeline. This may cause problems when serialising the index.\n', fn)
  }
}

/**
 * Loads a previously serialised pipeline.
 *
 * All functions to be loaded must already be registered with lunr.Pipeline.
 * If any function from the serialised data has not been registered then an
 * error will be thrown.
 *
 * @param {Object} serialised - The serialised pipeline to load.
 * @returns {lunr.Pipeline}
 */
lunr.Pipeline.load = function (serialised) {
  var pipeline = new lunr.Pipeline

  serialised.forEach(function (fnName) {
    var fn = lunr.Pipeline.registeredFunctions[fnName]

    if (fn) {
      pipeline.add(fn)
    } else {
      throw new Error('Cannot load unregistered function: ' + fnName)
    }
  })

  return pipeline
}

/**
 * Adds new functions to the end of the pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction[]} functions - Any number of functions to add to the pipeline.
 */
lunr.Pipeline.prototype.add = function () {
  var fns = Array.prototype.slice.call(arguments)

  fns.forEach(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)
    this._stack.push(fn)
  }, this)
}

/**
 * Adds a single function after a function that already exists in the
 * pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
 * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
 */
lunr.Pipeline.prototype.after = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error('Cannot find existingFn')
  }

  pos = pos + 1
  this._stack.splice(pos, 0, newFn)
}

/**
 * Adds a single function before a function that already exists in the
 * pipeline.
 *
 * Logs a warning if the function has not been registered.
 *
 * @param {lunr.PipelineFunction} existingFn - A function that already exists in the pipeline.
 * @param {lunr.PipelineFunction} newFn - The new function to add to the pipeline.
 */
lunr.Pipeline.prototype.before = function (existingFn, newFn) {
  lunr.Pipeline.warnIfFunctionNotRegistered(newFn)

  var pos = this._stack.indexOf(existingFn)
  if (pos == -1) {
    throw new Error('Cannot find existingFn')
  }

  this._stack.splice(pos, 0, newFn)
}

/**
 * Removes a function from the pipeline.
 *
 * @param {lunr.PipelineFunction} fn The function to remove from the pipeline.
 */
lunr.Pipeline.prototype.remove = function (fn) {
  var pos = this._stack.indexOf(fn)
  if (pos == -1) {
    return
  }

  this._stack.splice(pos, 1)
}

/**
 * Runs the current list of functions that make up the pipeline against the
 * passed tokens.
 *
 * @param {Array} tokens The tokens to run through the pipeline.
 * @returns {Array}
 */
lunr.Pipeline.prototype.run = function (tokens) {
  var stackLength = this._stack.length

  for (var i = 0; i < stackLength; i++) {
    var fn = this._stack[i]
    var memo = []

    for (var j = 0; j < tokens.length; j++) {
      var result = fn(tokens[j], j, tokens)

      if (result === void 0 || result === '') continue

      if (result instanceof Array) {
        for (var k = 0; k < result.length; k++) {
          memo.push(result[k])
        }
      } else {
        memo.push(result)
      }
    }

    tokens = memo
  }

  return tokens
}

/**
 * Convenience method for passing a string through a pipeline and getting
 * strings out. This method takes care of wrapping the passed string in a
 * token and mapping the resulting tokens back to strings.
 *
 * @param {string} str - The string to pass through the pipeline.
 * @param {?object} metadata - Optional metadata to associate with the token
 * passed to the pipeline.
 * @returns {string[]}
 */
lunr.Pipeline.prototype.runString = function (str, metadata) {
  var token = new lunr.Token (str, metadata)

  return this.run([token]).map(function (t) {
    return t.toString()
  })
}

/**
 * Resets the pipeline by removing any existing processors.
 *
 */
lunr.Pipeline.prototype.reset = function () {
  this._stack = []
}

/**
 * Returns a representation of the pipeline ready for serialisation.
 *
 * Logs a warning if the function has not been registered.
 *
 * @returns {Array}
 */
lunr.Pipeline.prototype.toJSON = function () {
  return this._stack.map(function (fn) {
    lunr.Pipeline.warnIfFunctionNotRegistered(fn)

    return fn.label
  })
}
/*!
 * lunr.Vector
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A vector is used to construct the vector space of documents and queries. These
 * vectors support operations to determine the similarity between two documents or
 * a document and a query.
 *
 * Normally no parameters are required for initializing a vector, but in the case of
 * loading a previously dumped vector the raw elements can be provided to the constructor.
 *
 * For performance reasons vectors are implemented with a flat array, where an elements
 * index is immediately followed by its value. E.g. [index, value, index, value]. This
 * allows the underlying array to be as sparse as possible and still offer decent
 * performance when being used for vector calculations.
 *
 * @constructor
 * @param {Number[]} [elements] - The flat list of element index and element value pairs.
 */
lunr.Vector = function (elements) {
  this._magnitude = 0
  this.elements = elements || []
}


/**
 * Calculates the position within the vector to insert a given index.
 *
 * This is used internally by insert and upsert. If there are duplicate indexes then
 * the position is returned as if the value for that index were to be updated, but it
 * is the callers responsibility to check whether there is a duplicate at that index
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @returns {Number}
 */
lunr.Vector.prototype.positionForIndex = function (index) {
  // For an empty vector the tuple can be inserted at the beginning
  if (this.elements.length == 0) {
    return 0
  }

  var start = 0,
      end = this.elements.length / 2,
      sliceLength = end - start,
      pivotPoint = Math.floor(sliceLength / 2),
      pivotIndex = this.elements[pivotPoint * 2]

  while (sliceLength > 1) {
    if (pivotIndex < index) {
      start = pivotPoint
    }

    if (pivotIndex > index) {
      end = pivotPoint
    }

    if (pivotIndex == index) {
      break
    }

    sliceLength = end - start
    pivotPoint = start + Math.floor(sliceLength / 2)
    pivotIndex = this.elements[pivotPoint * 2]
  }

  if (pivotIndex == index) {
    return pivotPoint * 2
  }

  if (pivotIndex > index) {
    return pivotPoint * 2
  }

  if (pivotIndex < index) {
    return (pivotPoint + 1) * 2
  }
}

/**
 * Inserts an element at an index within the vector.
 *
 * Does not allow duplicates, will throw an error if there is already an entry
 * for this index.
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @param {Number} val - The value to be inserted into the vector.
 */
lunr.Vector.prototype.insert = function (insertIdx, val) {
  this.upsert(insertIdx, val, function () {
    throw "duplicate index"
  })
}

/**
 * Inserts or updates an existing index within the vector.
 *
 * @param {Number} insertIdx - The index at which the element should be inserted.
 * @param {Number} val - The value to be inserted into the vector.
 * @param {function} fn - A function that is called for updates, the existing value and the
 * requested value are passed as arguments
 */
lunr.Vector.prototype.upsert = function (insertIdx, val, fn) {
  this._magnitude = 0
  var position = this.positionForIndex(insertIdx)

  if (this.elements[position] == insertIdx) {
    this.elements[position + 1] = fn(this.elements[position + 1], val)
  } else {
    this.elements.splice(position, 0, insertIdx, val)
  }
}

/**
 * Calculates the magnitude of this vector.
 *
 * @returns {Number}
 */
lunr.Vector.prototype.magnitude = function () {
  if (this._magnitude) return this._magnitude

  var sumOfSquares = 0,
      elementsLength = this.elements.length

  for (var i = 1; i < elementsLength; i += 2) {
    var val = this.elements[i]
    sumOfSquares += val * val
  }

  return this._magnitude = Math.sqrt(sumOfSquares)
}

/**
 * Calculates the dot product of this vector and another vector.
 *
 * @param {lunr.Vector} otherVector - The vector to compute the dot product with.
 * @returns {Number}
 */
lunr.Vector.prototype.dot = function (otherVector) {
  var dotProduct = 0,
      a = this.elements, b = otherVector.elements,
      aLen = a.length, bLen = b.length,
      aVal = 0, bVal = 0,
      i = 0, j = 0

  while (i < aLen && j < bLen) {
    aVal = a[i], bVal = b[j]
    if (aVal < bVal) {
      i += 2
    } else if (aVal > bVal) {
      j += 2
    } else if (aVal == bVal) {
      dotProduct += a[i + 1] * b[j + 1]
      i += 2
      j += 2
    }
  }

  return dotProduct
}

/**
 * Calculates the similarity between this vector and another vector.
 *
 * @param {lunr.Vector} otherVector - The other vector to calculate the
 * similarity with.
 * @returns {Number}
 */
lunr.Vector.prototype.similarity = function (otherVector) {
  return this.dot(otherVector) / this.magnitude() || 0
}

/**
 * Converts the vector to an array of the elements within the vector.
 *
 * @returns {Number[]}
 */
lunr.Vector.prototype.toArray = function () {
  var output = new Array (this.elements.length / 2)

  for (var i = 1, j = 0; i < this.elements.length; i += 2, j++) {
    output[j] = this.elements[i]
  }

  return output
}

/**
 * A JSON serializable representation of the vector.
 *
 * @returns {Number[]}
 */
lunr.Vector.prototype.toJSON = function () {
  return this.elements
}
/* eslint-disable */
/*!
 * lunr.stemmer
 * Copyright (C) 2018 Oliver Nightingale
 * Includes code from - http://tartarus.org/~martin/PorterStemmer/js.txt
 */

/**
 * lunr.stemmer is an english language stemmer, this is a JavaScript
 * implementation of the PorterStemmer taken from http://tartarus.org/~martin
 *
 * @static
 * @implements {lunr.PipelineFunction}
 * @param {lunr.Token} token - The string to stem
 * @returns {lunr.Token}
 * @see {@link lunr.Pipeline}
 * @function
 */
lunr.stemmer = (function(){
  var step2list = {
      "ational" : "ate",
      "tional" : "tion",
      "enci" : "ence",
      "anci" : "ance",
      "izer" : "ize",
      "bli" : "ble",
      "alli" : "al",
      "entli" : "ent",
      "eli" : "e",
      "ousli" : "ous",
      "ization" : "ize",
      "ation" : "ate",
      "ator" : "ate",
      "alism" : "al",
      "iveness" : "ive",
      "fulness" : "ful",
      "ousness" : "ous",
      "aliti" : "al",
      "iviti" : "ive",
      "biliti" : "ble",
      "logi" : "log"
    },

    step3list = {
      "icate" : "ic",
      "ative" : "",
      "alize" : "al",
      "iciti" : "ic",
      "ical" : "ic",
      "ful" : "",
      "ness" : ""
    },

    c = "[^aeiou]",          // consonant
    v = "[aeiouy]",          // vowel
    C = c + "[^aeiouy]*",    // consonant sequence
    V = v + "[aeiou]*",      // vowel sequence

    mgr0 = "^(" + C + ")?" + V + C,               // [C]VC... is m>0
    meq1 = "^(" + C + ")?" + V + C + "(" + V + ")?$",  // [C]VC[V] is m=1
    mgr1 = "^(" + C + ")?" + V + C + V + C,       // [C]VCVC... is m>1
    s_v = "^(" + C + ")?" + v;                   // vowel in stem

  var re_mgr0 = new RegExp(mgr0);
  var re_mgr1 = new RegExp(mgr1);
  var re_meq1 = new RegExp(meq1);
  var re_s_v = new RegExp(s_v);

  var re_1a = /^(.+?)(ss|i)es$/;
  var re2_1a = /^(.+?)([^s])s$/;
  var re_1b = /^(.+?)eed$/;
  var re2_1b = /^(.+?)(ed|ing)$/;
  var re_1b_2 = /.$/;
  var re2_1b_2 = /(at|bl|iz)$/;
  var re3_1b_2 = new RegExp("([^aeiouylsz])\\1$");
  var re4_1b_2 = new RegExp("^" + C + v + "[^aeiouwxy]$");

  var re_1c = /^(.+?[^aeiou])y$/;
  var re_2 = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;

  var re_3 = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;

  var re_4 = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;
  var re2_4 = /^(.+?)(s|t)(ion)$/;

  var re_5 = /^(.+?)e$/;
  var re_5_1 = /ll$/;
  var re3_5 = new RegExp("^" + C + v + "[^aeiouwxy]$");

  var porterStemmer = function porterStemmer(w) {
    var stem,
      suffix,
      firstch,
      re,
      re2,
      re3,
      re4;

    if (w.length < 3) { return w; }

    firstch = w.substr(0,1);
    if (firstch == "y") {
      w = firstch.toUpperCase() + w.substr(1);
    }

    // Step 1a
    re = re_1a
    re2 = re2_1a;

    if (re.test(w)) { w = w.replace(re,"$1$2"); }
    else if (re2.test(w)) { w = w.replace(re2,"$1$2"); }

    // Step 1b
    re = re_1b;
    re2 = re2_1b;
    if (re.test(w)) {
      var fp = re.exec(w);
      re = re_mgr0;
      if (re.test(fp[1])) {
        re = re_1b_2;
        w = w.replace(re,"");
      }
    } else if (re2.test(w)) {
      var fp = re2.exec(w);
      stem = fp[1];
      re2 = re_s_v;
      if (re2.test(stem)) {
        w = stem;
        re2 = re2_1b_2;
        re3 = re3_1b_2;
        re4 = re4_1b_2;
        if (re2.test(w)) { w = w + "e"; }
        else if (re3.test(w)) { re = re_1b_2; w = w.replace(re,""); }
        else if (re4.test(w)) { w = w + "e"; }
      }
    }

    // Step 1c - replace suffix y or Y by i if preceded by a non-vowel which is not the first letter of the word (so cry -> cri, by -> by, say -> say)
    re = re_1c;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      w = stem + "i";
    }

    // Step 2
    re = re_2;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      suffix = fp[2];
      re = re_mgr0;
      if (re.test(stem)) {
        w = stem + step2list[suffix];
      }
    }

    // Step 3
    re = re_3;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      suffix = fp[2];
      re = re_mgr0;
      if (re.test(stem)) {
        w = stem + step3list[suffix];
      }
    }

    // Step 4
    re = re_4;
    re2 = re2_4;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      re = re_mgr1;
      if (re.test(stem)) {
        w = stem;
      }
    } else if (re2.test(w)) {
      var fp = re2.exec(w);
      stem = fp[1] + fp[2];
      re2 = re_mgr1;
      if (re2.test(stem)) {
        w = stem;
      }
    }

    // Step 5
    re = re_5;
    if (re.test(w)) {
      var fp = re.exec(w);
      stem = fp[1];
      re = re_mgr1;
      re2 = re_meq1;
      re3 = re3_5;
      if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {
        w = stem;
      }
    }

    re = re_5_1;
    re2 = re_mgr1;
    if (re.test(w) && re2.test(w)) {
      re = re_1b_2;
      w = w.replace(re,"");
    }

    // and turn initial Y back to y

    if (firstch == "y") {
      w = firstch.toLowerCase() + w.substr(1);
    }

    return w;
  };

  return function (token) {
    return token.update(porterStemmer);
  }
})();

lunr.Pipeline.registerFunction(lunr.stemmer, 'stemmer')
/*!
 * lunr.stopWordFilter
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.generateStopWordFilter builds a stopWordFilter function from the provided
 * list of stop words.
 *
 * The built in lunr.stopWordFilter is built using this generator and can be used
 * to generate custom stopWordFilters for applications or non English languages.
 *
 * @function
 * @param {Array} token The token to pass through the filter
 * @returns {lunr.PipelineFunction}
 * @see lunr.Pipeline
 * @see lunr.stopWordFilter
 */
lunr.generateStopWordFilter = function (stopWords) {
  var words = stopWords.reduce(function (memo, stopWord) {
    memo[stopWord] = stopWord
    return memo
  }, {})

  return function (token) {
    if (token && words[token.toString()] !== token.toString()) return token
  }
}

/**
 * lunr.stopWordFilter is an English language stop word list filter, any words
 * contained in the list will not be passed through the filter.
 *
 * This is intended to be used in the Pipeline. If the token does not pass the
 * filter then undefined will be returned.
 *
 * @function
 * @implements {lunr.PipelineFunction}
 * @params {lunr.Token} token - A token to check for being a stop word.
 * @returns {lunr.Token}
 * @see {@link lunr.Pipeline}
 */
lunr.stopWordFilter = lunr.generateStopWordFilter([
  'a',
  'able',
  'about',
  'across',
  'after',
  'all',
  'almost',
  'also',
  'am',
  'among',
  'an',
  'and',
  'any',
  'are',
  'as',
  'at',
  'be',
  'because',
  'been',
  'but',
  'by',
  'can',
  'cannot',
  'could',
  'dear',
  'did',
  'do',
  'does',
  'either',
  'else',
  'ever',
  'every',
  'for',
  'from',
  'get',
  'got',
  'had',
  'has',
  'have',
  'he',
  'her',
  'hers',
  'him',
  'his',
  'how',
  'however',
  'i',
  'if',
  'in',
  'into',
  'is',
  'it',
  'its',
  'just',
  'least',
  'let',
  'like',
  'likely',
  'may',
  'me',
  'might',
  'most',
  'must',
  'my',
  'neither',
  'no',
  'nor',
  'not',
  'of',
  'off',
  'often',
  'on',
  'only',
  'or',
  'other',
  'our',
  'own',
  'rather',
  'said',
  'say',
  'says',
  'she',
  'should',
  'since',
  'so',
  'some',
  'than',
  'that',
  'the',
  'their',
  'them',
  'then',
  'there',
  'these',
  'they',
  'this',
  'tis',
  'to',
  'too',
  'twas',
  'us',
  'wants',
  'was',
  'we',
  'were',
  'what',
  'when',
  'where',
  'which',
  'while',
  'who',
  'whom',
  'why',
  'will',
  'with',
  'would',
  'yet',
  'you',
  'your'
])

lunr.Pipeline.registerFunction(lunr.stopWordFilter, 'stopWordFilter')
/*!
 * lunr.trimmer
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.trimmer is a pipeline function for trimming non word
 * characters from the beginning and end of tokens before they
 * enter the index.
 *
 * This implementation may not work correctly for non latin
 * characters and should either be removed or adapted for use
 * with languages with non-latin characters.
 *
 * @static
 * @implements {lunr.PipelineFunction}
 * @param {lunr.Token} token The token to pass through the filter
 * @returns {lunr.Token}
 * @see lunr.Pipeline
 */
lunr.trimmer = function (token) {
  return token.update(function (s) {
    return s.replace(/^\W+/, '').replace(/\W+$/, '')
  })
}

lunr.Pipeline.registerFunction(lunr.trimmer, 'trimmer')
/*!
 * lunr.TokenSet
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * A token set is used to store the unique list of all tokens
 * within an index. Token sets are also used to represent an
 * incoming query to the index, this query token set and index
 * token set are then intersected to find which tokens to look
 * up in the inverted index.
 *
 * A token set can hold multiple tokens, as in the case of the
 * index token set, or it can hold a single token as in the
 * case of a simple query token set.
 *
 * Additionally token sets are used to perform wildcard matching.
 * Leading, contained and trailing wildcards are supported, and
 * from this edit distance matching can also be provided.
 *
 * Token sets are implemented as a minimal finite state automata,
 * where both common prefixes and suffixes are shared between tokens.
 * This helps to reduce the space used for storing the token set.
 *
 * @constructor
 */
lunr.TokenSet = function () {
  this.final = false
  this.edges = {}
  this.id = lunr.TokenSet._nextId
  lunr.TokenSet._nextId += 1
}

/**
 * Keeps track of the next, auto increment, identifier to assign
 * to a new tokenSet.
 *
 * TokenSets require a unique identifier to be correctly minimised.
 *
 * @private
 */
lunr.TokenSet._nextId = 1

/**
 * Creates a TokenSet instance from the given sorted array of words.
 *
 * @param {String[]} arr - A sorted array of strings to create the set from.
 * @returns {lunr.TokenSet}
 * @throws Will throw an error if the input array is not sorted.
 */
lunr.TokenSet.fromArray = function (arr) {
  var builder = new lunr.TokenSet.Builder

  for (var i = 0, len = arr.length; i < len; i++) {
    builder.insert(arr[i])
  }

  builder.finish()
  return builder.root
}

/**
 * Creates a token set from a query clause.
 *
 * @private
 * @param {Object} clause - A single clause from lunr.Query.
 * @param {string} clause.term - The query clause term.
 * @param {number} [clause.editDistance] - The optional edit distance for the term.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.fromClause = function (clause) {
  if ('editDistance' in clause) {
    return lunr.TokenSet.fromFuzzyString(clause.term, clause.editDistance)
  } else {
    return lunr.TokenSet.fromString(clause.term)
  }
}

/**
 * Creates a token set representing a single string with a specified
 * edit distance.
 *
 * Insertions, deletions, substitutions and transpositions are each
 * treated as an edit distance of 1.
 *
 * Increasing the allowed edit distance will have a dramatic impact
 * on the performance of both creating and intersecting these TokenSets.
 * It is advised to keep the edit distance less than 3.
 *
 * @param {string} str - The string to create the token set from.
 * @param {number} editDistance - The allowed edit distance to match.
 * @returns {lunr.Vector}
 */
lunr.TokenSet.fromFuzzyString = function (str, editDistance) {
  var root = new lunr.TokenSet

  var stack = [{
    node: root,
    editsRemaining: editDistance,
    str: str
  }]

  while (stack.length) {
    var frame = stack.pop()

    // no edit
    if (frame.str.length > 0) {
      var char = frame.str.charAt(0),
          noEditNode

      if (char in frame.node.edges) {
        noEditNode = frame.node.edges[char]
      } else {
        noEditNode = new lunr.TokenSet
        frame.node.edges[char] = noEditNode
      }

      if (frame.str.length == 1) {
        noEditNode.final = true
      } else {
        stack.push({
          node: noEditNode,
          editsRemaining: frame.editsRemaining,
          str: frame.str.slice(1)
        })
      }
    }

    // deletion
    // can only do a deletion if we have enough edits remaining
    // and if there are characters left to delete in the string
    if (frame.editsRemaining > 0 && frame.str.length > 1) {
      var char = frame.str.charAt(1),
          deletionNode

      if (char in frame.node.edges) {
        deletionNode = frame.node.edges[char]
      } else {
        deletionNode = new lunr.TokenSet
        frame.node.edges[char] = deletionNode
      }

      if (frame.str.length <= 2) {
        deletionNode.final = true
      } else {
        stack.push({
          node: deletionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(2)
        })
      }
    }

    // deletion
    // just removing the last character from the str
    if (frame.editsRemaining > 0 && frame.str.length == 1) {
      frame.node.final = true
    }

    // substitution
    // can only do a substitution if we have enough edits remaining
    // and if there are characters left to substitute
    if (frame.editsRemaining > 0 && frame.str.length >= 1) {
      if ("*" in frame.node.edges) {
        var substitutionNode = frame.node.edges["*"]
      } else {
        var substitutionNode = new lunr.TokenSet
        frame.node.edges["*"] = substitutionNode
      }

      if (frame.str.length == 1) {
        substitutionNode.final = true
      } else {
        stack.push({
          node: substitutionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str.slice(1)
        })
      }
    }

    // insertion
    // can only do insertion if there are edits remaining
    if (frame.editsRemaining > 0) {
      if ("*" in frame.node.edges) {
        var insertionNode = frame.node.edges["*"]
      } else {
        var insertionNode = new lunr.TokenSet
        frame.node.edges["*"] = insertionNode
      }

      if (frame.str.length == 0) {
        insertionNode.final = true
      } else {
        stack.push({
          node: insertionNode,
          editsRemaining: frame.editsRemaining - 1,
          str: frame.str
        })
      }
    }

    // transposition
    // can only do a transposition if there are edits remaining
    // and there are enough characters to transpose
    if (frame.editsRemaining > 0 && frame.str.length > 1) {
      var charA = frame.str.charAt(0),
          charB = frame.str.charAt(1),
          transposeNode

      if (charB in frame.node.edges) {
        transposeNode = frame.node.edges[charB]
      } else {
        transposeNode = new lunr.TokenSet
        frame.node.edges[charB] = transposeNode
      }

      if (frame.str.length == 1) {
        transposeNode.final = true
      } else {
        stack.push({
          node: transposeNode,
          editsRemaining: frame.editsRemaining - 1,
          str: charA + frame.str.slice(2)
        })
      }
    }
  }

  return root
}

/**
 * Creates a TokenSet from a string.
 *
 * The string may contain one or more wildcard characters (*)
 * that will allow wildcard matching when intersecting with
 * another TokenSet.
 *
 * @param {string} str - The string to create a TokenSet from.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.fromString = function (str) {
  var node = new lunr.TokenSet,
      root = node,
      wildcardFound = false

  /*
   * Iterates through all characters within the passed string
   * appending a node for each character.
   *
   * As soon as a wildcard character is found then a self
   * referencing edge is introduced to continually match
   * any number of any characters.
   */
  for (var i = 0, len = str.length; i < len; i++) {
    var char = str[i],
        final = (i == len - 1)

    if (char == "*") {
      wildcardFound = true
      node.edges[char] = node
      node.final = final

    } else {
      var next = new lunr.TokenSet
      next.final = final

      node.edges[char] = next
      node = next

      // TODO: is this needed anymore?
      if (wildcardFound) {
        node.edges["*"] = root
      }
    }
  }

  return root
}

/**
 * Converts this TokenSet into an array of strings
 * contained within the TokenSet.
 *
 * @returns {string[]}
 */
lunr.TokenSet.prototype.toArray = function () {
  var words = []

  var stack = [{
    prefix: "",
    node: this
  }]

  while (stack.length) {
    var frame = stack.pop(),
        edges = Object.keys(frame.node.edges),
        len = edges.length

    if (frame.node.final) {
      /* In Safari, at this point the prefix is sometimes corrupted, see:
       * https://github.com/olivernn/lunr.js/issues/279 Calling any
       * String.prototype method forces Safari to "cast" this string to what
       * it's supposed to be, fixing the bug. */
      frame.prefix.charAt(0)
      words.push(frame.prefix)
    }

    for (var i = 0; i < len; i++) {
      var edge = edges[i]

      stack.push({
        prefix: frame.prefix.concat(edge),
        node: frame.node.edges[edge]
      })
    }
  }

  return words
}

/**
 * Generates a string representation of a TokenSet.
 *
 * This is intended to allow TokenSets to be used as keys
 * in objects, largely to aid the construction and minimisation
 * of a TokenSet. As such it is not designed to be a human
 * friendly representation of the TokenSet.
 *
 * @returns {string}
 */
lunr.TokenSet.prototype.toString = function () {
  // NOTE: Using Object.keys here as this.edges is very likely
  // to enter 'hash-mode' with many keys being added
  //
  // avoiding a for-in loop here as it leads to the function
  // being de-optimised (at least in V8). From some simple
  // benchmarks the performance is comparable, but allowing
  // V8 to optimize may mean easy performance wins in the future.

  if (this._str) {
    return this._str
  }

  var str = this.final ? '1' : '0',
      labels = Object.keys(this.edges).sort(),
      len = labels.length

  for (var i = 0; i < len; i++) {
    var label = labels[i],
        node = this.edges[label]

    str = str + label + node.id
  }

  return str
}

/**
 * Returns a new TokenSet that is the intersection of
 * this TokenSet and the passed TokenSet.
 *
 * This intersection will take into account any wildcards
 * contained within the TokenSet.
 *
 * @param {lunr.TokenSet} b - An other TokenSet to intersect with.
 * @returns {lunr.TokenSet}
 */
lunr.TokenSet.prototype.intersect = function (b) {
  var output = new lunr.TokenSet,
      frame = undefined

  var stack = [{
    qNode: b,
    output: output,
    node: this
  }]

  while (stack.length) {
    frame = stack.pop()

    // NOTE: As with the #toString method, we are using
    // Object.keys and a for loop instead of a for-in loop
    // as both of these objects enter 'hash' mode, causing
    // the function to be de-optimised in V8
    var qEdges = Object.keys(frame.qNode.edges),
        qLen = qEdges.length,
        nEdges = Object.keys(frame.node.edges),
        nLen = nEdges.length

    for (var q = 0; q < qLen; q++) {
      var qEdge = qEdges[q]

      for (var n = 0; n < nLen; n++) {
        var nEdge = nEdges[n]

        if (nEdge == qEdge || qEdge == '*') {
          var node = frame.node.edges[nEdge],
              qNode = frame.qNode.edges[qEdge],
              final = node.final && qNode.final,
              next = undefined

          if (nEdge in frame.output.edges) {
            // an edge already exists for this character
            // no need to create a new node, just set the finality
            // bit unless this node is already final
            next = frame.output.edges[nEdge]
            next.final = next.final || final

          } else {
            // no edge exists yet, must create one
            // set the finality bit and insert it
            // into the output
            next = new lunr.TokenSet
            next.final = final
            frame.output.edges[nEdge] = next
          }

          stack.push({
            qNode: qNode,
            output: next,
            node: node
          })
        }
      }
    }
  }

  return output
}
lunr.TokenSet.Builder = function () {
  this.previousWord = ""
  this.root = new lunr.TokenSet
  this.uncheckedNodes = []
  this.minimizedNodes = {}
}

lunr.TokenSet.Builder.prototype.insert = function (word) {
  var node,
      commonPrefix = 0

  if (word < this.previousWord) {
    throw new Error ("Out of order word insertion")
  }

  for (var i = 0; i < word.length && i < this.previousWord.length; i++) {
    if (word[i] != this.previousWord[i]) break
    commonPrefix++
  }

  this.minimize(commonPrefix)

  if (this.uncheckedNodes.length == 0) {
    node = this.root
  } else {
    node = this.uncheckedNodes[this.uncheckedNodes.length - 1].child
  }

  for (var i = commonPrefix; i < word.length; i++) {
    var nextNode = new lunr.TokenSet,
        char = word[i]

    node.edges[char] = nextNode

    this.uncheckedNodes.push({
      parent: node,
      char: char,
      child: nextNode
    })

    node = nextNode
  }

  node.final = true
  this.previousWord = word
}

lunr.TokenSet.Builder.prototype.finish = function () {
  this.minimize(0)
}

lunr.TokenSet.Builder.prototype.minimize = function (downTo) {
  for (var i = this.uncheckedNodes.length - 1; i >= downTo; i--) {
    var node = this.uncheckedNodes[i],
        childKey = node.child.toString()

    if (childKey in this.minimizedNodes) {
      node.parent.edges[node.char] = this.minimizedNodes[childKey]
    } else {
      // Cache the key for this node since
      // we know it can't change anymore
      node.child._str = childKey

      this.minimizedNodes[childKey] = node.child
    }

    this.uncheckedNodes.pop()
  }
}
/*!
 * lunr.Index
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * An index contains the built index of all documents and provides a query interface
 * to the index.
 *
 * Usually instances of lunr.Index will not be created using this constructor, instead
 * lunr.Builder should be used to construct new indexes, or lunr.Index.load should be
 * used to load previously built and serialized indexes.
 *
 * @constructor
 * @param {Object} attrs - The attributes of the built search index.
 * @param {Object} attrs.invertedIndex - An index of term/field to document reference.
 * @param {Object<string, lunr.Vector>} attrs.fieldVectors - Field vectors
 * @param {lunr.TokenSet} attrs.tokenSet - An set of all corpus tokens.
 * @param {string[]} attrs.fields - The names of indexed document fields.
 * @param {lunr.Pipeline} attrs.pipeline - The pipeline to use for search terms.
 */
lunr.Index = function (attrs) {
  this.invertedIndex = attrs.invertedIndex
  this.fieldVectors = attrs.fieldVectors
  this.tokenSet = attrs.tokenSet
  this.fields = attrs.fields
  this.pipeline = attrs.pipeline
}

/**
 * A result contains details of a document matching a search query.
 * @typedef {Object} lunr.Index~Result
 * @property {string} ref - The reference of the document this result represents.
 * @property {number} score - A number between 0 and 1 representing how similar this document is to the query.
 * @property {lunr.MatchData} matchData - Contains metadata about this match including which term(s) caused the match.
 */

/**
 * Although lunr provides the ability to create queries using lunr.Query, it also provides a simple
 * query language which itself is parsed into an instance of lunr.Query.
 *
 * For programmatically building queries it is advised to directly use lunr.Query, the query language
 * is best used for human entered text rather than program generated text.
 *
 * At its simplest queries can just be a single term, e.g. `hello`, multiple terms are also supported
 * and will be combined with OR, e.g `hello world` will match documents that contain either 'hello'
 * or 'world', though those that contain both will rank higher in the results.
 *
 * Wildcards can be included in terms to match one or more unspecified characters, these wildcards can
 * be inserted anywhere within the term, and more than one wildcard can exist in a single term. Adding
 * wildcards will increase the number of documents that will be found but can also have a negative
 * impact on query performance, especially with wildcards at the beginning of a term.
 *
 * Terms can be restricted to specific fields, e.g. `title:hello`, only documents with the term
 * hello in the title field will match this query. Using a field not present in the index will lead
 * to an error being thrown.
 *
 * Modifiers can also be added to terms, lunr supports edit distance and boost modifiers on terms. A term
 * boost will make documents matching that term score higher, e.g. `foo^5`. Edit distance is also supported
 * to provide fuzzy matching, e.g. 'hello~2' will match documents with hello with an edit distance of 2.
 * Avoid large values for edit distance to improve query performance.
 *
 * Each term also supports a presence modifier. By default a term's presence in document is optional, however
 * this can be changed to either required or prohibited. For a term's presence to be required in a document the
 * term should be prefixed with a '+', e.g. `+foo bar` is a search for documents that must contain 'foo' and
 * optionally contain 'bar'. Conversely a leading '-' sets the terms presence to prohibited, i.e. it must not
 * appear in a document, e.g. `-foo bar` is a search for documents that do not contain 'foo' but may contain 'bar'.
 *
 * To escape special characters the backslash character '\' can be used, this allows searches to include
 * characters that would normally be considered modifiers, e.g. `foo\~2` will search for a term "foo~2" instead
 * of attempting to apply a boost of 2 to the search term "foo".
 *
 * @typedef {string} lunr.Index~QueryString
 * @example <caption>Simple single term query</caption>
 * hello
 * @example <caption>Multiple term query</caption>
 * hello world
 * @example <caption>term scoped to a field</caption>
 * title:hello
 * @example <caption>term with a boost of 10</caption>
 * hello^10
 * @example <caption>term with an edit distance of 2</caption>
 * hello~2
 * @example <caption>terms with presence modifiers</caption>
 * -foo +bar baz
 */

/**
 * Performs a search against the index using lunr query syntax.
 *
 * Results will be returned sorted by their score, the most relevant results
 * will be returned first.  For details on how the score is calculated, please see
 * the {@link https://lunrjs.com/guides/searching.html#scoring|guide}.
 *
 * For more programmatic querying use lunr.Index#query.
 *
 * @param {lunr.Index~QueryString} queryString - A string containing a lunr query.
 * @throws {lunr.QueryParseError} If the passed query string cannot be parsed.
 * @returns {lunr.Index~Result[]}
 */
lunr.Index.prototype.search = function (queryString) {
  return this.query(function (query) {
    var parser = new lunr.QueryParser(queryString, query)
    parser.parse()
  })
}

/**
 * A query builder callback provides a query object to be used to express
 * the query to perform on the index.
 *
 * @callback lunr.Index~queryBuilder
 * @param {lunr.Query} query - The query object to build up.
 * @this lunr.Query
 */

/**
 * Performs a query against the index using the yielded lunr.Query object.
 *
 * If performing programmatic queries against the index, this method is preferred
 * over lunr.Index#search so as to avoid the additional query parsing overhead.
 *
 * A query object is yielded to the supplied function which should be used to
 * express the query to be run against the index.
 *
 * Note that although this function takes a callback parameter it is _not_ an
 * asynchronous operation, the callback is just yielded a query object to be
 * customized.
 *
 * @param {lunr.Index~queryBuilder} fn - A function that is used to build the query.
 * @returns {lunr.Index~Result[]}
 */
lunr.Index.prototype.query = function (fn) {
  // for each query clause
  // * process terms
  // * expand terms from token set
  // * find matching documents and metadata
  // * get document vectors
  // * score documents

  var query = new lunr.Query(this.fields),
      matchingFields = Object.create(null),
      queryVectors = Object.create(null),
      termFieldCache = Object.create(null),
      requiredMatches = Object.create(null),
      prohibitedMatches = Object.create(null)

  /*
   * To support field level boosts a query vector is created per
   * field. An empty vector is eagerly created to support negated
   * queries.
   */
  for (var i = 0; i < this.fields.length; i++) {
    queryVectors[this.fields[i]] = new lunr.Vector
  }

  fn.call(query, query)

  for (var i = 0; i < query.clauses.length; i++) {
    /*
     * Unless the pipeline has been disabled for this term, which is
     * the case for terms with wildcards, we need to pass the clause
     * term through the search pipeline. A pipeline returns an array
     * of processed terms. Pipeline functions may expand the passed
     * term, which means we may end up performing multiple index lookups
     * for a single query term.
     */
    var clause = query.clauses[i],
        terms = null,
        clauseMatches = lunr.Set.complete

    if (clause.usePipeline) {
      terms = this.pipeline.runString(clause.term, {
        fields: clause.fields
      })
    } else {
      terms = [clause.term]
    }

    for (var m = 0; m < terms.length; m++) {
      var term = terms[m]

      /*
       * Each term returned from the pipeline needs to use the same query
       * clause object, e.g. the same boost and or edit distance. The
       * simplest way to do this is to re-use the clause object but mutate
       * its term property.
       */
      clause.term = term

      /*
       * From the term in the clause we create a token set which will then
       * be used to intersect the indexes token set to get a list of terms
       * to lookup in the inverted index
       */
      var termTokenSet = lunr.TokenSet.fromClause(clause),
          expandedTerms = this.tokenSet.intersect(termTokenSet).toArray()

      /*
       * If a term marked as required does not exist in the tokenSet it is
       * impossible for the search to return any matches. We set all the field
       * scoped required matches set to empty and stop examining any further
       * clauses.
       */
      if (expandedTerms.length === 0 && clause.presence === lunr.Query.presence.REQUIRED) {
        for (var k = 0; k < clause.fields.length; k++) {
          var field = clause.fields[k]
          requiredMatches[field] = lunr.Set.empty
        }

        break
      }

      for (var j = 0; j < expandedTerms.length; j++) {
        /*
         * For each term get the posting and termIndex, this is required for
         * building the query vector.
         */
        var expandedTerm = expandedTerms[j],
            posting = this.invertedIndex[expandedTerm],
            termIndex = posting._index

        for (var k = 0; k < clause.fields.length; k++) {
          /*
           * For each field that this query term is scoped by (by default
           * all fields are in scope) we need to get all the document refs
           * that have this term in that field.
           *
           * The posting is the entry in the invertedIndex for the matching
           * term from above.
           */
          var field = clause.fields[k],
              fieldPosting = posting[field],
              matchingDocumentRefs = Object.keys(fieldPosting),
              termField = expandedTerm + "/" + field,
              matchingDocumentsSet = new lunr.Set(matchingDocumentRefs)

          /*
           * if the presence of this term is required ensure that the matching
           * documents are added to the set of required matches for this clause.
           *
           */
          if (clause.presence == lunr.Query.presence.REQUIRED) {
            clauseMatches = clauseMatches.union(matchingDocumentsSet)

            if (requiredMatches[field] === undefined) {
              requiredMatches[field] = lunr.Set.complete
            }
          }

          /*
           * if the presence of this term is prohibited ensure that the matching
           * documents are added to the set of prohibited matches for this field,
           * creating that set if it does not yet exist.
           */
          if (clause.presence == lunr.Query.presence.PROHIBITED) {
            if (prohibitedMatches[field] === undefined) {
              prohibitedMatches[field] = lunr.Set.empty
            }

            prohibitedMatches[field] = prohibitedMatches[field].union(matchingDocumentsSet)

            /*
             * Prohibited matches should not be part of the query vector used for
             * similarity scoring and no metadata should be extracted so we continue
             * to the next field
             */
            continue
          }

          /*
           * The query field vector is populated using the termIndex found for
           * the term and a unit value with the appropriate boost applied.
           * Using upsert because there could already be an entry in the vector
           * for the term we are working with. In that case we just add the scores
           * together.
           */
          queryVectors[field].upsert(termIndex, clause.boost, function (a, b) { return a + b })

          /**
           * If we've already seen this term, field combo then we've already collected
           * the matching documents and metadata, no need to go through all that again
           */
          if (termFieldCache[termField]) {
            continue
          }

          for (var l = 0; l < matchingDocumentRefs.length; l++) {
            /*
             * All metadata for this term/field/document triple
             * are then extracted and collected into an instance
             * of lunr.MatchData ready to be returned in the query
             * results
             */
            var matchingDocumentRef = matchingDocumentRefs[l],
                matchingFieldRef = new lunr.FieldRef (matchingDocumentRef, field),
                metadata = fieldPosting[matchingDocumentRef],
                fieldMatch

            if ((fieldMatch = matchingFields[matchingFieldRef]) === undefined) {
              matchingFields[matchingFieldRef] = new lunr.MatchData (expandedTerm, field, metadata)
            } else {
              fieldMatch.add(expandedTerm, field, metadata)
            }

          }

          termFieldCache[termField] = true
        }
      }
    }

    /**
     * If the presence was required we need to update the requiredMatches field sets.
     * We do this after all fields for the term have collected their matches because
     * the clause terms presence is required in _any_ of the fields not _all_ of the
     * fields.
     */
    if (clause.presence === lunr.Query.presence.REQUIRED) {
      for (var k = 0; k < clause.fields.length; k++) {
        var field = clause.fields[k]
        requiredMatches[field] = requiredMatches[field].intersect(clauseMatches)
      }
    }
  }

  /**
   * Need to combine the field scoped required and prohibited
   * matching documents into a global set of required and prohibited
   * matches
   */
  var allRequiredMatches = lunr.Set.complete,
      allProhibitedMatches = lunr.Set.empty

  for (var i = 0; i < this.fields.length; i++) {
    var field = this.fields[i]

    if (requiredMatches[field]) {
      allRequiredMatches = allRequiredMatches.intersect(requiredMatches[field])
    }

    if (prohibitedMatches[field]) {
      allProhibitedMatches = allProhibitedMatches.union(prohibitedMatches[field])
    }
  }

  var matchingFieldRefs = Object.keys(matchingFields),
      results = [],
      matches = Object.create(null)

  /*
   * If the query is negated (contains only prohibited terms)
   * we need to get _all_ fieldRefs currently existing in the
   * index. This is only done when we know that the query is
   * entirely prohibited terms to avoid any cost of getting all
   * fieldRefs unnecessarily.
   *
   * Additionally, blank MatchData must be created to correctly
   * populate the results.
   */
  if (query.isNegated()) {
    matchingFieldRefs = Object.keys(this.fieldVectors)

    for (var i = 0; i < matchingFieldRefs.length; i++) {
      var matchingFieldRef = matchingFieldRefs[i]
      var fieldRef = lunr.FieldRef.fromString(matchingFieldRef)
      matchingFields[matchingFieldRef] = new lunr.MatchData
    }
  }

  for (var i = 0; i < matchingFieldRefs.length; i++) {
    /*
     * Currently we have document fields that match the query, but we
     * need to return documents. The matchData and scores are combined
     * from multiple fields belonging to the same document.
     *
     * Scores are calculated by field, using the query vectors created
     * above, and combined into a final document score using addition.
     */
    var fieldRef = lunr.FieldRef.fromString(matchingFieldRefs[i]),
        docRef = fieldRef.docRef

    if (!allRequiredMatches.contains(docRef)) {
      continue
    }

    if (allProhibitedMatches.contains(docRef)) {
      continue
    }

    var fieldVector = this.fieldVectors[fieldRef],
        score = queryVectors[fieldRef.fieldName].similarity(fieldVector),
        docMatch

    if ((docMatch = matches[docRef]) !== undefined) {
      docMatch.score += score
      docMatch.matchData.combine(matchingFields[fieldRef])
    } else {
      var match = {
        ref: docRef,
        score: score,
        matchData: matchingFields[fieldRef]
      }
      matches[docRef] = match
      results.push(match)
    }
  }

  /*
   * Sort the results objects by score, highest first.
   */
  return results.sort(function (a, b) {
    return b.score - a.score
  })
}

/**
 * Prepares the index for JSON serialization.
 *
 * The schema for this JSON blob will be described in a
 * separate JSON schema file.
 *
 * @returns {Object}
 */
lunr.Index.prototype.toJSON = function () {
  var invertedIndex = Object.keys(this.invertedIndex)
    .sort()
    .map(function (term) {
      return [term, this.invertedIndex[term]]
    }, this)

  var fieldVectors = Object.keys(this.fieldVectors)
    .map(function (ref) {
      return [ref, this.fieldVectors[ref].toJSON()]
    }, this)

  return {
    version: lunr.version,
    fields: this.fields,
    fieldVectors: fieldVectors,
    invertedIndex: invertedIndex,
    pipeline: this.pipeline.toJSON()
  }
}

/**
 * Loads a previously serialized lunr.Index
 *
 * @param {Object} serializedIndex - A previously serialized lunr.Index
 * @returns {lunr.Index}
 */
lunr.Index.load = function (serializedIndex) {
  var attrs = {},
      fieldVectors = {},
      serializedVectors = serializedIndex.fieldVectors,
      invertedIndex = {},
      serializedInvertedIndex = serializedIndex.invertedIndex,
      tokenSetBuilder = new lunr.TokenSet.Builder,
      pipeline = lunr.Pipeline.load(serializedIndex.pipeline)

  if (serializedIndex.version != lunr.version) {
    lunr.utils.warn("Version mismatch when loading serialised index. Current version of lunr '" + lunr.version + "' does not match serialized index '" + serializedIndex.version + "'")
  }

  for (var i = 0; i < serializedVectors.length; i++) {
    var tuple = serializedVectors[i],
        ref = tuple[0],
        elements = tuple[1]

    fieldVectors[ref] = new lunr.Vector(elements)
  }

  for (var i = 0; i < serializedInvertedIndex.length; i++) {
    var tuple = serializedInvertedIndex[i],
        term = tuple[0],
        posting = tuple[1]

    tokenSetBuilder.insert(term)
    invertedIndex[term] = posting
  }

  tokenSetBuilder.finish()

  attrs.fields = serializedIndex.fields

  attrs.fieldVectors = fieldVectors
  attrs.invertedIndex = invertedIndex
  attrs.tokenSet = tokenSetBuilder.root
  attrs.pipeline = pipeline

  return new lunr.Index(attrs)
}
/*!
 * lunr.Builder
 * Copyright (C) 2018 Oliver Nightingale
 */

/**
 * lunr.Builder performs indexing on a set of documents and
 * returns instances of lunr.Index ready for querying.
 *
 * All configuration of the index is done via the builder, the
 * fields to index, the document reference, the text processing
 * pipeline and document scoring parameters are all set on the
 * builder before indexing.
 *
 * @constructor
 * @property {string} _ref - Internal reference to the document reference field.
 * @property {string[]} _fields - Internal reference to the document fields to index.
 * @property {object} invertedIndex - The inverted index maps terms to document fields.
 * @property {object} documentTermFrequencies - Keeps track of document term frequencies.
 * @property {object} documentLengths - Keeps track of the length of documents added to the index.
 * @property {lunr.tokenizer} tokenizer - Function for splitting strings into tokens for indexing.
 * @property {lunr.Pipeline} pipeline - The pipeline performs text processing on tokens before indexing.
 * @property {lunr.Pipeline} searchPipeline - A pipeline for processing search terms before querying the index.
 * @property {number} documentCount - Keeps track of the total number of documents indexed.
 * @property {number} _b - A parameter to control field length normalization, setting this to 0 disabled normalization, 1 fully normalizes field lengths, the default value is 0.75.
 * @property {number} _k1 - A parameter to control how quickly an increase in term frequency results in term frequency saturation, the default value is 1.2.
 * @property {number} termIndex - A counter incremented for each unique term, used to identify a terms position in the vector space.
 * @property {array} metadataWhitelist - A list of metadata keys that have been whitelisted for entry in the index.
 */
lunr.Builder = function () {
  this._ref = "id"
  this._fields = Object.create(null)
  this._documents = Object.create(null)
  this.invertedIndex = Object.create(null)
  this.fieldTermFrequencies = {}
  this.fieldLengths = {}
  this.tokenizer = lunr.tokenizer
  this.pipeline = new lunr.Pipeline
  this.searchPipeline = new lunr.Pipeline
  this.documentCount = 0
  this._b = 0.75
  this._k1 = 1.2
  this.termIndex = 0
  this.metadataWhitelist = []
}

/**
 * Sets the document field used as the document reference. Every document must have this field.
 * The type of this field in the document should be a string, if it is not a string it will be
 * coerced into a string by calling toString.
 *
 * The default ref is 'id'.
 *
 * The ref should _not_ be changed during indexing, it should be set before any documents are
 * added to the index. Changing it during indexing can lead to inconsistent results.
 *
 * @param {string} ref - The name of the reference field in the document.
 */
lunr.Builder.prototype.ref = function (ref) {
  this._ref = ref
}

/**
 * A function that is used to extract a field from a document.
 *
 * Lunr expects a field to be at the top level of a document, if however the field
 * is deeply nested within a document an extractor function can be used to extract
 * the right field for indexing.
 *
 * @callback fieldExtractor
 * @param {object} doc - The document being added to the index.
 * @returns {?(string|object|object[])} obj - The object that will be indexed for this field.
 * @example <caption>Extracting a nested field</caption>
 * function (doc) { return doc.nested.field }
 */

/**
 * Adds a field to the list of document fields that will be indexed. Every document being
 * indexed should have this field. Null values for this field in indexed documents will
 * not cause errors but will limit the chance of that document being retrieved by searches.
 *
 * All fields should be added before adding documents to the index. Adding fields after
 * a document has been indexed will have no effect on already indexed documents.
 *
 * Fields can be boosted at build time. This allows terms within that field to have more
 * importance when ranking search results. Use a field boost to specify that matches within
 * one field are more important than other fields.
 *
 * @param {string} fieldName - The name of a field to index in all documents.
 * @param {object} attributes - Optional attributes associated with this field.
 * @param {number} [attributes.boost=1] - Boost applied to all terms within this field.
 * @param {fieldExtractor} [attributes.extractor] - Function to extract a field from a document.
 * @throws {RangeError} fieldName cannot contain unsupported characters '/'
 */
lunr.Builder.prototype.field = function (fieldName, attributes) {
  if (/\//.test(fieldName)) {
    throw new RangeError ("Field '" + fieldName + "' contains illegal character '/'")
  }

  this._fields[fieldName] = attributes || {}
}

/**
 * A parameter to tune the amount of field length normalisation that is applied when
 * calculating relevance scores. A value of 0 will completely disable any normalisation
 * and a value of 1 will fully normalise field lengths. The default is 0.75. Values of b
 * will be clamped to the range 0 - 1.
 *
 * @param {number} number - The value to set for this tuning parameter.
 */
lunr.Builder.prototype.b = function (number) {
  if (number < 0) {
    this._b = 0
  } else if (number > 1) {
    this._b = 1
  } else {
    this._b = number
  }
}

/**
 * A parameter that controls the speed at which a rise in term frequency results in term
 * frequency saturation. The default value is 1.2. Setting this to a higher value will give
 * slower saturation levels, a lower value will result in quicker saturation.
 *
 * @param {number} number - The value to set for this tuning parameter.
 */
lunr.Builder.prototype.k1 = function (number) {
  this._k1 = number
}

/**
 * Adds a document to the index.
 *
 * Before adding fields to the index the index should have been fully setup, with the document
 * ref and all fields to index already having been specified.
 *
 * The document must have a field name as specified by the ref (by default this is 'id') and
 * it should have all fields defined for indexing, though null or undefined values will not
 * cause errors.
 *
 * Entire documents can be boosted at build time. Applying a boost to a document indicates that
 * this document should rank higher in search results than other documents.
 *
 * @param {object} doc - The document to add to the index.
 * @param {object} attributes - Optional attributes associated with this document.
 * @param {number} [attributes.boost=1] - Boost applied to all terms within this document.
 */
lunr.Builder.prototype.add = function (doc, attributes) {
  var docRef = doc[this._ref],
      fields = Object.keys(this._fields)

  this._documents[docRef] = attributes || {}
  this.documentCount += 1

  for (var i = 0; i < fields.length; i++) {
    var fieldName = fields[i],
        extractor = this._fields[fieldName].extractor,
        field = extractor ? extractor(doc) : doc[fieldName],
        tokens = this.tokenizer(field, {
          fields: [fieldName]
        }),
        terms = this.pipeline.run(tokens),
        fieldRef = new lunr.FieldRef (docRef, fieldName),
        fieldTerms = Object.create(null)

    this.fieldTermFrequencies[fieldRef] = fieldTerms
    this.fieldLengths[fieldRef] = 0

    // store the length of this field for this document
    this.fieldLengths[fieldRef] += terms.length

    // calculate term frequencies for this field
    for (var j = 0; j < terms.length; j++) {
      var term = terms[j]

      if (fieldTerms[term] == undefined) {
        fieldTerms[term] = 0
      }

      fieldTerms[term] += 1

      // add to inverted index
      // create an initial posting if one doesn't exist
      if (this.invertedIndex[term] == undefined) {
        var posting = Object.create(null)
        posting["_index"] = this.termIndex
        this.termIndex += 1

        for (var k = 0; k < fields.length; k++) {
          posting[fields[k]] = Object.create(null)
        }

        this.invertedIndex[term] = posting
      }

      // add an entry for this term/fieldName/docRef to the invertedIndex
      if (this.invertedIndex[term][fieldName][docRef] == undefined) {
        this.invertedIndex[term][fieldName][docRef] = Object.create(null)
      }

      // store all whitelisted metadata about this token in the
      // inverted index
      for (var l = 0; l < this.metadataWhitelist.length; l++) {
        var metadataKey = this.metadataWhitelist[l],
            metadata = term.metadata[metadataKey]

        if (this.invertedIndex[term][fieldName][docRef][metadataKey] == undefined) {
          this.invertedIndex[term][fieldName][docRef][metadataKey] = []
        }

        this.invertedIndex[term][fieldName][docRef][metadataKey].push(metadata)
      }
    }

  }
}

/**
 * Calculates the average document length for this index
 *
 * @private
 */
lunr.Builder.prototype.calculateAverageFieldLengths = function () {

  var fieldRefs = Object.keys(this.fieldLengths),
      numberOfFields = fieldRefs.length,
      accumulator = {},
      documentsWithField = {}

  for (var i = 0; i < numberOfFields; i++) {
    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
        field = fieldRef.fieldName

    documentsWithField[field] || (documentsWithField[field] = 0)
    documentsWithField[field] += 1

    accumulator[field] || (accumulator[field] = 0)
    accumulator[field] += this.fieldLengths[fieldRef]
  }

  var fields = Object.keys(this._fields)

  for (var i = 0; i < fields.length; i++) {
    var fieldName = fields[i]
    accumulator[fieldName] = accumulator[fieldName] / documentsWithField[fieldName]
  }

  this.averageFieldLength = accumulator
}

/**
 * Builds a vector space model of every document using lunr.Vector
 *
 * @private
 */
lunr.Builder.prototype.createFieldVectors = function () {
  var fieldVectors = {},
      fieldRefs = Object.keys(this.fieldTermFrequencies),
      fieldRefsLength = fieldRefs.length,
      termIdfCache = Object.create(null)

  for (var i = 0; i < fieldRefsLength; i++) {
    var fieldRef = lunr.FieldRef.fromString(fieldRefs[i]),
        fieldName = fieldRef.fieldName,
        fieldLength = this.fieldLengths[fieldRef],
        fieldVector = new lunr.Vector,
        termFrequencies = this.fieldTermFrequencies[fieldRef],
        terms = Object.keys(termFrequencies),
        termsLength = terms.length


    var fieldBoost = this._fields[fieldName].boost || 1,
        docBoost = this._documents[fieldRef.docRef].boost || 1

    for (var j = 0; j < termsLength; j++) {
      var term = terms[j],
          tf = termFrequencies[term],
          termIndex = this.invertedIndex[term]._index,
          idf, score, scoreWithPrecision

      if (termIdfCache[term] === undefined) {
        idf = lunr.idf(this.invertedIndex[term], this.documentCount)
        termIdfCache[term] = idf
      } else {
        idf = termIdfCache[term]
      }

      score = idf * ((this._k1 + 1) * tf) / (this._k1 * (1 - this._b + this._b * (fieldLength / this.averageFieldLength[fieldName])) + tf)
      score *= fieldBoost
      score *= docBoost
      scoreWithPrecision = Math.round(score * 1000) / 1000
      // Converts 1.23456789 to 1.234.
      // Reducing the precision so that the vectors take up less
      // space when serialised. Doing it now so that they behave
      // the same before and after serialisation. Also, this is
      // the fastest approach to reducing a number's precision in
      // JavaScript.

      fieldVector.insert(termIndex, scoreWithPrecision)
    }

    fieldVectors[fieldRef] = fieldVector
  }

  this.fieldVectors = fieldVectors
}

/**
 * Creates a token set of all tokens in the index using lunr.TokenSet
 *
 * @private
 */
lunr.Builder.prototype.createTokenSet = function () {
  this.tokenSet = lunr.TokenSet.fromArray(
    Object.keys(this.invertedIndex).sort()
  )
}

/**
 * Builds the index, creating an instance of lunr.Index.
 *
 * This completes the indexing process and should only be called
 * once all documents have been added to the index.
 *
 * @returns {lunr.Index}
 */
lunr.Builder.prototype.build = function () {
  this.calculateAverageFieldLengths()
  this.createFieldVectors()
  this.createTokenSet()

  return new lunr.Index({
    invertedIndex: this.invertedIndex,
    fieldVectors: this.fieldVectors,
    tokenSet: this.tokenSet,
    fields: Object.keys(this._fields),
    pipeline: this.searchPipeline
  })
}

/**
 * Applies a plugin to the index builder.
 *
 * A plugin is a function that is called with the index builder as its context.
 * Plugins can be used to customise or extend the behaviour of the index
 * in some way. A plugin is just a function, that encapsulated the custom
 * behaviour that should be applied when building the index.
 *
 * The plugin function will be called with the index builder as its argument, additional
 * arguments can also be passed when calling use. The function will be called
 * with the index builder as its context.
 *
 * @param {Function} plugin The plugin to apply.
 */
lunr.Builder.prototype.use = function (fn) {
  var args = Array.prototype.slice.call(arguments, 1)
  args.unshift(this)
  fn.apply(this, args)
}
/**
 * Contains and collects metadata about a matching document.
 * A single instance of lunr.MatchData is returned as part of every
 * lunr.Index~Result.
 *
 * @constructor
 * @param {string} term - The term this match data is associated with
 * @param {string} field - The field in which the term was found
 * @param {object} metadata - The metadata recorded about this term in this field
 * @property {object} metadata - A cloned collection of metadata associated with this document.
 * @see {@link lunr.Index~Result}
 */
lunr.MatchData = function (term, field, metadata) {
  var clonedMetadata = Object.create(null),
      metadataKeys = Object.keys(metadata || {})

  // Cloning the metadata to prevent the original
  // being mutated during match data combination.
  // Metadata is kept in an array within the inverted
  // index so cloning the data can be done with
  // Array#slice
  for (var i = 0; i < metadataKeys.length; i++) {
    var key = metadataKeys[i]
    clonedMetadata[key] = metadata[key].slice()
  }

  this.metadata = Object.create(null)

  if (term !== undefined) {
    this.metadata[term] = Object.create(null)
    this.metadata[term][field] = clonedMetadata
  }
}

/**
 * An instance of lunr.MatchData will be created for every term that matches a
 * document. However only one instance is required in a lunr.Index~Result. This
 * method combines metadata from another instance of lunr.MatchData with this
 * objects metadata.
 *
 * @param {lunr.MatchData} otherMatchData - Another instance of match data to merge with this one.
 * @see {@link lunr.Index~Result}
 */
lunr.MatchData.prototype.combine = function (otherMatchData) {
  var terms = Object.keys(otherMatchData.metadata)

  for (var i = 0; i < terms.length; i++) {
    var term = terms[i],
        fields = Object.keys(otherMatchData.metadata[term])

    if (this.metadata[term] == undefined) {
      this.metadata[term] = Object.create(null)
    }

    for (var j = 0; j < fields.length; j++) {
      var field = fields[j],
          keys = Object.keys(otherMatchData.metadata[term][field])

      if (this.metadata[term][field] == undefined) {
        this.metadata[term][field] = Object.create(null)
      }

      for (var k = 0; k < keys.length; k++) {
        var key = keys[k]

        if (this.metadata[term][field][key] == undefined) {
          this.metadata[term][field][key] = otherMatchData.metadata[term][field][key]
        } else {
          this.metadata[term][field][key] = this.metadata[term][field][key].concat(otherMatchData.metadata[term][field][key])
        }

      }
    }
  }
}

/**
 * Add metadata for a term/field pair to this instance of match data.
 *
 * @param {string} term - The term this match data is associated with
 * @param {string} field - The field in which the term was found
 * @param {object} metadata - The metadata recorded about this term in this field
 */
lunr.MatchData.prototype.add = function (term, field, metadata) {
  if (!(term in this.metadata)) {
    this.metadata[term] = Object.create(null)
    this.metadata[term][field] = metadata
    return
  }

  if (!(field in this.metadata[term])) {
    this.metadata[term][field] = metadata
    return
  }

  var metadataKeys = Object.keys(metadata)

  for (var i = 0; i < metadataKeys.length; i++) {
    var key = metadataKeys[i]

    if (key in this.metadata[term][field]) {
      this.metadata[term][field][key] = this.metadata[term][field][key].concat(metadata[key])
    } else {
      this.metadata[term][field][key] = metadata[key]
    }
  }
}
/**
 * A lunr.Query provides a programmatic way of defining queries to be performed
 * against a {@link lunr.Index}.
 *
 * Prefer constructing a lunr.Query using the {@link lunr.Index#query} method
 * so the query object is pre-initialized with the right index fields.
 *
 * @constructor
 * @property {lunr.Query~Clause[]} clauses - An array of query clauses.
 * @property {string[]} allFields - An array of all available fields in a lunr.Index.
 */
lunr.Query = function (allFields) {
  this.clauses = []
  this.allFields = allFields
}

/**
 * Constants for indicating what kind of automatic wildcard insertion will be used when constructing a query clause.
 *
 * This allows wildcards to be added to the beginning and end of a term without having to manually do any string
 * concatenation.
 *
 * The wildcard constants can be bitwise combined to select both leading and trailing wildcards.
 *
 * @constant
 * @default
 * @property {number} wildcard.NONE - The term will have no wildcards inserted, this is the default behaviour
 * @property {number} wildcard.LEADING - Prepend the term with a wildcard, unless a leading wildcard already exists
 * @property {number} wildcard.TRAILING - Append a wildcard to the term, unless a trailing wildcard already exists
 * @see lunr.Query~Clause
 * @see lunr.Query#clause
 * @see lunr.Query#term
 * @example <caption>query term with trailing wildcard</caption>
 * query.term('foo', { wildcard: lunr.Query.wildcard.TRAILING })
 * @example <caption>query term with leading and trailing wildcard</caption>
 * query.term('foo', {
 *   wildcard: lunr.Query.wildcard.LEADING | lunr.Query.wildcard.TRAILING
 * })
 */

lunr.Query.wildcard = new String ("*")
lunr.Query.wildcard.NONE = 0
lunr.Query.wildcard.LEADING = 1
lunr.Query.wildcard.TRAILING = 2

/**
 * Constants for indicating what kind of presence a term must have in matching documents.
 *
 * @constant
 * @enum {number}
 * @see lunr.Query~Clause
 * @see lunr.Query#clause
 * @see lunr.Query#term
 * @example <caption>query term with required presence</caption>
 * query.term('foo', { presence: lunr.Query.presence.REQUIRED })
 */
lunr.Query.presence = {
  /**
   * Term's presence in a document is optional, this is the default value.
   */
  OPTIONAL: 1,

  /**
   * Term's presence in a document is required, documents that do not contain
   * this term will not be returned.
   */
  REQUIRED: 2,

  /**
   * Term's presence in a document is prohibited, documents that do contain
   * this term will not be returned.
   */
  PROHIBITED: 3
}

/**
 * A single clause in a {@link lunr.Query} contains a term and details on how to
 * match that term against a {@link lunr.Index}.
 *
 * @typedef {Object} lunr.Query~Clause
 * @property {string[]} fields - The fields in an index this clause should be matched against.
 * @property {number} [boost=1] - Any boost that should be applied when matching this clause.
 * @property {number} [editDistance] - Whether the term should have fuzzy matching applied, and how fuzzy the match should be.
 * @property {boolean} [usePipeline] - Whether the term should be passed through the search pipeline.
 * @property {number} [wildcard=lunr.Query.wildcard.NONE] - Whether the term should have wildcards appended or prepended.
 * @property {number} [presence=lunr.Query.presence.OPTIONAL] - The terms presence in any matching documents.
 */

/**
 * Adds a {@link lunr.Query~Clause} to this query.
 *
 * Unless the clause contains the fields to be matched all fields will be matched. In addition
 * a default boost of 1 is applied to the clause.
 *
 * @param {lunr.Query~Clause} clause - The clause to add to this query.
 * @see lunr.Query~Clause
 * @returns {lunr.Query}
 */
lunr.Query.prototype.clause = function (clause) {
  if (!('fields' in clause)) {
    clause.fields = this.allFields
  }

  if (!('boost' in clause)) {
    clause.boost = 1
  }

  if (!('usePipeline' in clause)) {
    clause.usePipeline = true
  }

  if (!('wildcard' in clause)) {
    clause.wildcard = lunr.Query.wildcard.NONE
  }

  if ((clause.wildcard & lunr.Query.wildcard.LEADING) && (clause.term.charAt(0) != lunr.Query.wildcard)) {
    clause.term = "*" + clause.term
  }

  if ((clause.wildcard & lunr.Query.wildcard.TRAILING) && (clause.term.slice(-1) != lunr.Query.wildcard)) {
    clause.term = "" + clause.term + "*"
  }

  if (!('presence' in clause)) {
    clause.presence = lunr.Query.presence.OPTIONAL
  }

  this.clauses.push(clause)

  return this
}

/**
 * A negated query is one in which every clause has a presence of
 * prohibited. These queries require some special processing to return
 * the expected results.
 *
 * @returns boolean
 */
lunr.Query.prototype.isNegated = function () {
  for (var i = 0; i < this.clauses.length; i++) {
    if (this.clauses[i].presence != lunr.Query.presence.PROHIBITED) {
      return false
    }
  }

  return true
}

/**
 * Adds a term to the current query, under the covers this will create a {@link lunr.Query~Clause}
 * to the list of clauses that make up this query.
 *
 * The term is used as is, i.e. no tokenization will be performed by this method. Instead conversion
 * to a token or token-like string should be done before calling this method.
 *
 * The term will be converted to a string by calling `toString`. Multiple terms can be passed as an
 * array, each term in the array will share the same options.
 *
 * @param {object|object[]} term - The term(s) to add to the query.
 * @param {object} [options] - Any additional properties to add to the query clause.
 * @returns {lunr.Query}
 * @see lunr.Query#clause
 * @see lunr.Query~Clause
 * @example <caption>adding a single term to a query</caption>
 * query.term("foo")
 * @example <caption>adding a single term to a query and specifying search fields, term boost and automatic trailing wildcard</caption>
 * query.term("foo", {
 *   fields: ["title"],
 *   boost: 10,
 *   wildcard: lunr.Query.wildcard.TRAILING
 * })
 * @example <caption>using lunr.tokenizer to convert a string to tokens before using them as terms</caption>
 * query.term(lunr.tokenizer("foo bar"))
 */
lunr.Query.prototype.term = function (term, options) {
  if (Array.isArray(term)) {
    term.forEach(function (t) { this.term(t, lunr.utils.clone(options)) }, this)
    return this
  }

  var clause = options || {}
  clause.term = term.toString()

  this.clause(clause)

  return this
}
lunr.QueryParseError = function (message, start, end) {
  this.name = "QueryParseError"
  this.message = message
  this.start = start
  this.end = end
}

lunr.QueryParseError.prototype = new Error
lunr.QueryLexer = function (str) {
  this.lexemes = []
  this.str = str
  this.length = str.length
  this.pos = 0
  this.start = 0
  this.escapeCharPositions = []
}

lunr.QueryLexer.prototype.run = function () {
  var state = lunr.QueryLexer.lexText

  while (state) {
    state = state(this)
  }
}

lunr.QueryLexer.prototype.sliceString = function () {
  var subSlices = [],
      sliceStart = this.start,
      sliceEnd = this.pos

  for (var i = 0; i < this.escapeCharPositions.length; i++) {
    sliceEnd = this.escapeCharPositions[i]
    subSlices.push(this.str.slice(sliceStart, sliceEnd))
    sliceStart = sliceEnd + 1
  }

  subSlices.push(this.str.slice(sliceStart, this.pos))
  this.escapeCharPositions.length = 0

  return subSlices.join('')
}

lunr.QueryLexer.prototype.emit = function (type) {
  this.lexemes.push({
    type: type,
    str: this.sliceString(),
    start: this.start,
    end: this.pos
  })

  this.start = this.pos
}

lunr.QueryLexer.prototype.escapeCharacter = function () {
  this.escapeCharPositions.push(this.pos - 1)
  this.pos += 1
}

lunr.QueryLexer.prototype.next = function () {
  if (this.pos >= this.length) {
    return lunr.QueryLexer.EOS
  }

  var char = this.str.charAt(this.pos)
  this.pos += 1
  return char
}

lunr.QueryLexer.prototype.width = function () {
  return this.pos - this.start
}

lunr.QueryLexer.prototype.ignore = function () {
  if (this.start == this.pos) {
    this.pos += 1
  }

  this.start = this.pos
}

lunr.QueryLexer.prototype.backup = function () {
  this.pos -= 1
}

lunr.QueryLexer.prototype.acceptDigitRun = function () {
  var char, charCode

  do {
    char = this.next()
    charCode = char.charCodeAt(0)
  } while (charCode > 47 && charCode < 58)

  if (char != lunr.QueryLexer.EOS) {
    this.backup()
  }
}

lunr.QueryLexer.prototype.more = function () {
  return this.pos < this.length
}

lunr.QueryLexer.EOS = 'EOS'
lunr.QueryLexer.FIELD = 'FIELD'
lunr.QueryLexer.TERM = 'TERM'
lunr.QueryLexer.EDIT_DISTANCE = 'EDIT_DISTANCE'
lunr.QueryLexer.BOOST = 'BOOST'
lunr.QueryLexer.PRESENCE = 'PRESENCE'

lunr.QueryLexer.lexField = function (lexer) {
  lexer.backup()
  lexer.emit(lunr.QueryLexer.FIELD)
  lexer.ignore()
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexTerm = function (lexer) {
  if (lexer.width() > 1) {
    lexer.backup()
    lexer.emit(lunr.QueryLexer.TERM)
  }

  lexer.ignore()

  if (lexer.more()) {
    return lunr.QueryLexer.lexText
  }
}

lunr.QueryLexer.lexEditDistance = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.EDIT_DISTANCE)
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexBoost = function (lexer) {
  lexer.ignore()
  lexer.acceptDigitRun()
  lexer.emit(lunr.QueryLexer.BOOST)
  return lunr.QueryLexer.lexText
}

lunr.QueryLexer.lexEOS = function (lexer) {
  if (lexer.width() > 0) {
    lexer.emit(lunr.QueryLexer.TERM)
  }
}

// This matches the separator used when tokenising fields
// within a document. These should match otherwise it is
// not possible to search for some tokens within a document.
//
// It is possible for the user to change the separator on the
// tokenizer so it _might_ clash with any other of the special
// characters already used within the search string, e.g. :.
//
// This means that it is possible to change the separator in
// such a way that makes some words unsearchable using a search
// string.
lunr.QueryLexer.termSeparator = lunr.tokenizer.separator

lunr.QueryLexer.lexText = function (lexer) {
  while (true) {
    var char = lexer.next()

    if (char == lunr.QueryLexer.EOS) {
      return lunr.QueryLexer.lexEOS
    }

    // Escape character is '\'
    if (char.charCodeAt(0) == 92) {
      lexer.escapeCharacter()
      continue
    }

    if (char == ":") {
      return lunr.QueryLexer.lexField
    }

    if (char == "~") {
      lexer.backup()
      if (lexer.width() > 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexEditDistance
    }

    if (char == "^") {
      lexer.backup()
      if (lexer.width() > 0) {
        lexer.emit(lunr.QueryLexer.TERM)
      }
      return lunr.QueryLexer.lexBoost
    }

    // "+" indicates term presence is required
    // checking for length to ensure that only
    // leading "+" are considered
    if (char == "+" && lexer.width() === 1) {
      lexer.emit(lunr.QueryLexer.PRESENCE)
      return lunr.QueryLexer.lexText
    }

    // "-" indicates term presence is prohibited
    // checking for length to ensure that only
    // leading "-" are considered
    if (char == "-" && lexer.width() === 1) {
      lexer.emit(lunr.QueryLexer.PRESENCE)
      return lunr.QueryLexer.lexText
    }

    if (char.match(lunr.QueryLexer.termSeparator)) {
      return lunr.QueryLexer.lexTerm
    }
  }
}

lunr.QueryParser = function (str, query) {
  this.lexer = new lunr.QueryLexer (str)
  this.query = query
  this.currentClause = {}
  this.lexemeIdx = 0
}

lunr.QueryParser.prototype.parse = function () {
  this.lexer.run()
  this.lexemes = this.lexer.lexemes

  var state = lunr.QueryParser.parseClause

  while (state) {
    state = state(this)
  }

  return this.query
}

lunr.QueryParser.prototype.peekLexeme = function () {
  return this.lexemes[this.lexemeIdx]
}

lunr.QueryParser.prototype.consumeLexeme = function () {
  var lexeme = this.peekLexeme()
  this.lexemeIdx += 1
  return lexeme
}

lunr.QueryParser.prototype.nextClause = function () {
  var completedClause = this.currentClause
  this.query.clause(completedClause)
  this.currentClause = {}
}

lunr.QueryParser.parseClause = function (parser) {
  var lexeme = parser.peekLexeme()

  if (lexeme == undefined) {
    return
  }

  switch (lexeme.type) {
    case lunr.QueryLexer.PRESENCE:
      return lunr.QueryParser.parsePresence
    case lunr.QueryLexer.FIELD:
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = "expected either a field or a term, found " + lexeme.type

      if (lexeme.str.length >= 1) {
        errorMessage += " with value '" + lexeme.str + "'"
      }

      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }
}

lunr.QueryParser.parsePresence = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  switch (lexeme.str) {
    case "-":
      parser.currentClause.presence = lunr.Query.presence.PROHIBITED
      break
    case "+":
      parser.currentClause.presence = lunr.Query.presence.REQUIRED
      break
    default:
      var errorMessage = "unrecognised presence operator'" + lexeme.str + "'"
      throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    var errorMessage = "expecting term or field, found nothing"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.FIELD:
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = "expecting term or field, found '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseField = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  if (parser.query.allFields.indexOf(lexeme.str) == -1) {
    var possibleFields = parser.query.allFields.map(function (f) { return "'" + f + "'" }).join(', '),
        errorMessage = "unrecognised field '" + lexeme.str + "', possible fields: " + possibleFields

    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.fields = [lexeme.str]

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    var errorMessage = "expecting term, found nothing"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      return lunr.QueryParser.parseTerm
    default:
      var errorMessage = "expecting term, found '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseTerm = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  parser.currentClause.term = lexeme.str.toLowerCase()

  if (lexeme.str.indexOf("*") != -1) {
    parser.currentClause.usePipeline = false
  }

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    case lunr.QueryLexer.PRESENCE:
      parser.nextClause()
      return lunr.QueryParser.parsePresence
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseEditDistance = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var editDistance = parseInt(lexeme.str, 10)

  if (isNaN(editDistance)) {
    var errorMessage = "edit distance must be numeric"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.editDistance = editDistance

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

lunr.QueryParser.parseBoost = function (parser) {
  var lexeme = parser.consumeLexeme()

  if (lexeme == undefined) {
    return
  }

  var boost = parseInt(lexeme.str, 10)

  if (isNaN(boost)) {
    var errorMessage = "boost must be numeric"
    throw new lunr.QueryParseError (errorMessage, lexeme.start, lexeme.end)
  }

  parser.currentClause.boost = boost

  var nextLexeme = parser.peekLexeme()

  if (nextLexeme == undefined) {
    parser.nextClause()
    return
  }

  switch (nextLexeme.type) {
    case lunr.QueryLexer.TERM:
      parser.nextClause()
      return lunr.QueryParser.parseTerm
    case lunr.QueryLexer.FIELD:
      parser.nextClause()
      return lunr.QueryParser.parseField
    case lunr.QueryLexer.EDIT_DISTANCE:
      return lunr.QueryParser.parseEditDistance
    case lunr.QueryLexer.BOOST:
      return lunr.QueryParser.parseBoost
    default:
      var errorMessage = "Unexpected lexeme type '" + nextLexeme.type + "'"
      throw new lunr.QueryParseError (errorMessage, nextLexeme.start, nextLexeme.end)
  }
}

  /**
   * export the module via AMD, CommonJS or as a browser global
   * Export code from https://github.com/umdjs/umd/blob/master/returnExports.js
   */
  ;(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
      // AMD. Register as an anonymous module.
      define(factory)
    } else if (typeof exports === 'object') {
      /**
       * Node. Does not work with strict CommonJS, but
       * only CommonJS-like enviroments that support module.exports,
       * like Node.
       */
      module.exports = factory()
    } else {
      // Browser globals (root is window)
      root.lunr = factory()
    }
  }(this, function () {
    /**
     * Just return a value to define the module export.
     * This example returns an object, but the module
     * can return a function as the exported value.
     */
    return lunr
  }))
})();

},{}],24:[function(require,module,exports){
(function (global){
"use strict";

//Gunjan
if (global.rh === undefined) {
  global.rh = {};
}

module.exports = global.rh;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],25:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var CountingSeamaphore = function () {
  function CountingSeamaphore(callback) {
    _classCallCheck(this, CountingSeamaphore);

    this._callback = callback;
    this._count = 0;
  }

  _createClass(CountingSeamaphore, [{
    key: "signal",
    value: function signal() {
      this._count++;
      if (this._count >= 0 && this._callback) {
        this._callback();
      }
    }
  }, {
    key: "wait",
    value: function wait(count) {
      var dec_count = count || 1;
      this._count -= dec_count;
    }
  }]);

  return CountingSeamaphore;
}();

module.exports = CountingSeamaphore;

},{}],26:[function(require,module,exports){
"use strict";

require("../lib/rh");
require("../../lenient_src/utils/shim");
require("../../lenient_src/robohelp/layout/url_utils");
require("../../lenient_src/robohelp/layout/init");
require("../../lenient_src/robohelp/layout/mp");
require("../../lenient_src/robohelp/layout/expression_builder");
require("../../lenient_src/robohelp/layout/browsesequence_builder");
require("../../lenient_src/robohelp/layout/event_handlers");
require("../../lenient_src/robohelp/layout/search_filed");
require("../../lenient_src/robohelp/layout/layoutfix");
require("../../lenient_src/robohelp/layout/filter_controller");
require("../../lenient_src/robohelp/layout/modern_layout_controller");
require("../../lenient_src/robohelp/layout/js_loading_controller");
require("../../lenient_src/robohelp/layout/index_controller");
require("../../lenient_src/robohelp/layout/glossary_controller");
require("../../lenient_src/robohelp/layout/filter_handler");
require("../../lenient_src/robohelp/layout/load_projects");
require("./layout/ui/carousel");
require("./layout/home_controller");
require("../../lenient_src/layout/search_util");
require("./layout/search/suggestion/search_controller");
require("./layout/favorites_controller");
require("./layout/toc_breadcrumbs_controller.js");
require("../../lenient_src/layout/toc_order");
require("../../lenient_src/layout/toc_controller");
require("../../lenient_src/layout/index_controller");
require("../../lenient_src/layout/glossary_controller");
require("../../lenient_src/layout/event_handlers");
require("./layout/rh2017layoutcontroller");
require("./layout/modal_dialog");
require("./layout/search_result_controller.js");
require("../../lenient_src/robohelp/layout/filter_handler");
require("./layout/custom_buttons");
require("./layout/expand_all");

},{"../../lenient_src/layout/event_handlers":1,"../../lenient_src/layout/glossary_controller":2,"../../lenient_src/layout/index_controller":3,"../../lenient_src/layout/search_util":4,"../../lenient_src/layout/toc_controller":5,"../../lenient_src/layout/toc_order":6,"../../lenient_src/robohelp/layout/browsesequence_builder":7,"../../lenient_src/robohelp/layout/event_handlers":8,"../../lenient_src/robohelp/layout/expression_builder":9,"../../lenient_src/robohelp/layout/filter_controller":10,"../../lenient_src/robohelp/layout/filter_handler":11,"../../lenient_src/robohelp/layout/glossary_controller":12,"../../lenient_src/robohelp/layout/index_controller":13,"../../lenient_src/robohelp/layout/init":14,"../../lenient_src/robohelp/layout/js_loading_controller":15,"../../lenient_src/robohelp/layout/layoutfix":16,"../../lenient_src/robohelp/layout/load_projects":17,"../../lenient_src/robohelp/layout/modern_layout_controller":18,"../../lenient_src/robohelp/layout/mp":19,"../../lenient_src/robohelp/layout/search_filed":20,"../../lenient_src/robohelp/layout/url_utils":21,"../../lenient_src/utils/shim":22,"../lib/rh":24,"./layout/custom_buttons":27,"./layout/expand_all":28,"./layout/favorites_controller":29,"./layout/home_controller":30,"./layout/modal_dialog":31,"./layout/rh2017layoutcontroller":32,"./layout/search/suggestion/search_controller":49,"./layout/search_result_controller.js":63,"./layout/toc_breadcrumbs_controller.js":64,"./layout/ui/carousel":65}],27:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh"),
    consts = rh.consts,
    model = rh.model,
    _ = rh._;

model.subscribe(consts('KEY_CUSTOM_BUTTONS_CONFIG'), function (config) {
  var buttons = _.map(config, function (item, index) {
    return _.extend({ class: 'custom-button-' + index }, item);
  });
  model.publish(consts('KEY_CUSTOM_BUTTONS'), buttons);
});

},{"../../lib/rh":24}],28:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh");

rh.model.csubscribe('EVT_EXPAND_COLLAPSE_ALL', function () {
  var currentState = rh.model.cget('ALL_ARE_EXPANDED');
  if (currentState) {
    rh.model.cpublish('EVT_COLLAPSE_ALL');
  } else {
    rh.model.cpublish('EVT_EXPAND_ALL');
  }
});

rh.model.csubscribe('EVT_COLLAPSE_ALL', function () {
  rh.model.cpublish('ALL_ARE_EXPANDED', false);
});

rh.model.csubscribe('EVT_EXPAND_ALL', function () {
  rh.model.cpublish('ALL_ARE_EXPANDED', true);
});

},{"../../lib/rh":24}],29:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var consts = rh.consts;

var FavoritesController = function () {
  function FavoritesController(widget) {
    var _this = this;

    _classCallCheck(this, FavoritesController);

    this.widget = widget;
    this.favStorage = new rh.Storage();
    /* Internal functions and variables */
    this._loadFromStorage = false; /* Favorites already loaded from storage? */

    this._favMemoryStore = undefined; /* Variable to hold favorites object */
    rh.model.subscribeOnce(consts('EVT_PROJECT_LOADED'), function () {
      _this.init();
    });
  }

  _createClass(FavoritesController, [{
    key: "_getUniqueId",
    value: function _getUniqueId() {
      function _p8(s) {
        var p = (Math.random().toString(16) + "000000000").substr(2, 8);
        return s ? "-" + p.substr(0, 4) + "-" + p.substr(4, 4) : p;
      }
      return _p8() + _p8(true) + _p8(true) + _p8();
    }
  }, {
    key: "numberOfItems",
    value: function numberOfItems(JSON) {
      /* Count the number of items in an object */
      return Object.keys(JSON).length;
    }
  }, {
    key: "_getFavHTMLElements",
    value: function _getFavHTMLElements(type) {
      /* Find all elements in the HTML that can hold a favorite widget */

      var allElements = document.getElementsByTagName("div"); /* Only divs can be favorite holders */
      var elements = [];

      for (var i = 0; i < allElements.length; i++) {
        if (allElements[i].getAttribute(rh.consts('FAVATTRIBUTE')) === type) {
          elements.push(allElements[i]);
        }
      }

      return elements;
    }
  }, {
    key: "getLinkTitle",
    value: function getLinkTitle(isFavorite) {
      var lng = rh.model.get(consts('KEY_LNG'));
      if (isFavorite) {
        return lng && lng.unsetAsFavorite || '';
      } else {
        return lng && lng.setAsFavorite || '';
      }
    }
  }, {
    key: "_loadFavoritesFromStorage",
    value: function _loadFavoritesFromStorage() {
      /* Load setting from storage */
      var storageObject = void 0;
      var loadString = this.favStorage.fetch(consts('FAVSTORAGE'));

      if (typeof loadString === "undefined" || loadString === null) {
        /* No settings yet, create new object. */
        storageObject = {};
      } else {
        storageObject = JSON.parse(loadString); /* Parse string to object */
      }
      return storageObject;
    }
  }, {
    key: "_loadFavorites",
    value: function _loadFavorites() {
      if (this._loadFromStorage === false) {
        /* Only load once, then use object in memory. Saves a few parsings. */
        this._favMemoryStore = this._loadFavoritesFromStorage();
      }
      return this._favMemoryStore;
    }
  }, {
    key: "_saveFavorites",
    value: function _saveFavorites() {
      var favoritesString = void 0;
      favoritesString = JSON.stringify(this._favMemoryStore);
      this.favStorage.persist(rh.consts('FAVSTORAGE'), favoritesString);
    }
  }, {
    key: "_unFavoriteTopic",
    value: function _unFavoriteTopic(topic) {
      for (var i in this._favMemoryStore) {
        var current = this._favMemoryStore[i];
        if (current.topic === topic) {
          delete this._favMemoryStore[i];
          break;
        }
      }
      this._saveFavorites();
      rh.model.publish(rh.consts('EVENTFAVCHANGE'), null); /* Publish so favorites subscribers are notified of changes */
    }
  }, {
    key: "_favoriteTopic",
    value: function _favoriteTopic(url, title) {
      //let id;
      this._favMemoryStore[this._getUniqueId()] = { "topic": url, "title": title };
      this._saveFavorites();
      rh.model.publish(rh.consts('EVENTFAVCHANGE'), null); /* Publish so favorites subscribers are notified of changes */
    }

    /* Public functions: for use in other scripts */

  }, {
    key: "getStorageId",
    value: function getStorageId() {
      return "fav-" + rh._.getHostFolder();
    }
  }, {
    key: "getTopicURL",
    value: function getTopicURL() {
      /* Get the URL of the current topic */
      return rh.model.get(rh.consts('KEY_TOPIC_URL'));
    }
  }, {
    key: "getTopicTitle",
    value: function getTopicTitle() {
      /* Get title of currently opened topic */
      return rh.model.get(rh.consts('KEY_TOPIC_TITLE'));
    }
  }, {
    key: "isTopicFavorite",
    value: function isTopicFavorite(topic) {
      /* Is the current topic a favorite topic? */
      var favorites = void 0;
      var isFavorite = void 0;
      if (!topic) {
        topic = this.getTopicURL();
      }
      favorites = this._loadFavorites();

      isFavorite = false;
      for (var i in favorites) {
        var current = favorites[i];
        if (current.topic === topic) {
          isFavorite = true;
          break;
        }
      }

      return isFavorite;
    }
  }, {
    key: "setfavoritesTitle",
    value: function setfavoritesTitle(isFavorite) {
      var title = this.getLinkTitle(isFavorite);
      rh.model.publish(consts('FAVORITES_BUTTON_TITLE'), title);
    }
  }, {
    key: "setTopicFavoriteState",
    value: function setTopicFavoriteState() {
      rh.model.publish(consts('TOPIC_FAVORITE'), this.isTopicFavorite());
    }
  }, {
    key: "setFavoritesList",
    value: function setFavoritesList() {
      /* Write the favorites list */
      //let favholders;
      var favorites = [];
      var id = void 0;
      var favorites_map = this._loadFavorites();
      for (id in favorites_map) {
        favorites.push(favorites_map[id]);
      }
      rh.model.publish(consts('KEY_FAVORITES'), favorites);
    }
  }, {
    key: "toggleFavorite",
    value: function toggleFavorite(topicURL) {
      /* Toggle whether the page is a favorite */
      if (!topicURL) {
        topicURL = this.getTopicURL();
      }
      if (this.isTopicFavorite(topicURL)) {
        this._unFavoriteTopic(topicURL); /* Because the favorites list can remove topics, removing a topic can be a different URL than the current topic. */
      } else {
        this._favoriteTopic(topicURL, this.getTopicTitle()); /* This can only be the current topic */
      }
      this.setTopicFavoriteState();
    }
  }, {
    key: "init",
    value: function init() {
      /* Initialise the favorites */

      this.favStorage.init(rh._.getRootUrl());

      /* Subscribe to topic events */
      rh.model.subscribe(rh.consts('KEY_TOPIC_URL'), this.setTopicFavoriteState.bind(this));
      rh.model.subscribe(rh.consts('EVENTFAVCHANGE'), this.setFavoritesList.bind(this));
      rh.model.subscribe(rh.consts('TOPIC_FAVORITE'), this.setfavoritesTitle.bind(this));

      this.setFavoritesList();
      rh.model.publish(consts('TOPIC_FAVORITE'), this.isTopicFavorite());
    }
  }]);

  return FavoritesController;
}();

rh.controller('FavoritesController', FavoritesController);

},{"../../lib/rh":24}],30:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;

var HomeController = function () {
  function HomeController(widget) {
    _classCallCheck(this, HomeController);

    this.widget = widget;
  }

  _createClass(HomeController, [{
    key: 'goToHome',
    value: function goToHome(tocId) {
      if (rh.consts('HOME_FILEPATH') === rh._.getFileName()) {
        return this.changeToDefaultTopic(tocId);
      }
      var hashMap = void 0;
      if (tocId !== undefined && tocId !== '') {
        hashMap = { rhtocid: tocId };
      }
      _.goToHome(hashMap);
      return true;
    }
  }, {
    key: 'changeToDefaultTopic',
    value: function changeToDefaultTopic(tocId) {
      var hashMap = { t: window.gDefaultTopic.substring(1) };
      if (tocId !== undefined && tocId !== '') {
        hashMap.rhtocid = tocId;
      }
      _.queueUpdateHashMap(hashMap, true);
      return true;
    }
  }]);

  return HomeController;
}();

rh.controller('HomeController', HomeController);

},{"../../lib/rh":24}],31:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var nodeUtils = require("../utils/node_utils");
var $ = rh.$;
var _ = rh._;

var ModalDialog = function () {
  function ModalDialog() {
    _classCallCheck(this, ModalDialog);
  }

  _createClass(ModalDialog, [{
    key: "createChildWidget",
    value: function createChildWidget() {
      this.node = $.createElement('div', this.template);
      nodeUtils.appendChild(document.body, this.node);
      this.widget = new rh.Widget({ node: this.node });
      this.widget.init();
    }
  }, {
    key: "setOnImageLoad",
    value: function setOnImageLoad() {
      var modalContent = $.find(this.node, '.rh-modal-content')[0];
      if (!modalContent) {
        return;
      }
      this.modalContent = modalContent;
      var img = $.find(modalContent, 'img')[0];
      if (img) {
        this.img = img;
        img.addEventListener('load', this.setModalSize.bind(this));
        img.addEventListener('error', this.setModalSize.bind(this));
      }
    }
  }, {
    key: "setModalSize",
    value: function setModalSize() {
      this.imageWidth = this.img.naturalWidth;
      this.imageHeight = this.img.naturalHeight;
      var position = this.calculatePosition(this.imageWidth, this.imageHeight);
      var modalContainer = $.find(this.node, '.rh-modal-container')[0];
      if (modalContainer) {
        this.setContainerStyle(modalContainer, position);
      }
    }
  }, {
    key: "setContainerStyle",
    value: function setContainerStyle(modalContainer, position) {
      var top = Math.round(position.top);
      var left = Math.round(position.left);

      $.css(modalContainer, 'left', left.toString() + 'px');
      $.css(modalContainer, 'top', top.toString() + 'px');

      if (this.modalContent) {
        this.setImageSize(position.width, position.height);
      }
      $.css(modalContainer, 'display', "block");
    }
  }, {
    key: "calculateImageSize",
    value: function calculateImageSize(size) {
      var aspect = size.imageWidth / size.imageHeight;
      if (size.imageWidth < size.pageWidth && size.imageHeight < size.pageHeight) {
        return { width: size.imageWidth, height: size.imageHeight };
      }

      if (size.imageWidth >= size.pageWidth && size.imageHeight <= size.pageHeight) {
        return { height: size.pageWidth / aspect, width: size.pageWidth };
      }
      if (size.imageWidth <= size.pageWidth && size.imageHeight >= size.pageHeight) {
        return { height: size.pageHeight, width: size.pageHeight * aspect
        };
      }
      if (size.imageWidth >= size.pageWidth && size.imageHeight >= size.pageHeight) {
        return this._calculateFullyExceedSize(size, aspect);
      }
    }
  }, {
    key: "_calculateFullyExceedSize",
    value: function _calculateFullyExceedSize(size, aspect) {
      var pageAspect = size.pageWidth / size.pageHeight;
      if (aspect < pageAspect) {
        return { height: size.pageHeight, width: size.pageHeight * aspect };
      } else {
        return { height: size.pageWidth / aspect, width: size.pageWidth };
      }
    }
  }, {
    key: "calculatePosition",
    value: function calculatePosition(imageWidth, imageHeight) {
      var pageWidth = window.innerWidth || document.body.clientWidth;
      var pageHeight = window.innerHeight || document.body.clientHeight;
      pageWidth -= 70;
      pageHeight -= 70;
      pageWidth = pageWidth >= 0 ? pageWidth : 0;
      pageHeight = pageHeight >= 0 ? pageHeight : 0;

      var size = { imageWidth: imageWidth, imageHeight: imageHeight, pageWidth: pageWidth, pageHeight: pageHeight };
      var image_size = this.calculateImageSize(size);
      imageWidth = image_size.width;
      imageHeight = image_size.height;
      var left = Math.max(5, (pageWidth - imageWidth) / 2);
      var top = Math.max(5, (pageHeight - imageHeight) / 2);

      return {
        left: left,
        top: top,
        width: imageWidth,
        height: imageHeight,
        pageWidth: pageWidth,
        pageHeight: pageHeight
      };
    }
  }, {
    key: "initialStyle",
    value: function initialStyle() {
      return this.isImage ? "style=\"display:none\"" : '';
    }
  }, {
    key: "ShowModal",
    value: function ShowModal(config) {
      this.isImage = config.isImage;
      this.createChildWidget();
      this.widget.subscribe('close', this._close.bind(this));
      this.widget.publish('content', config.content);
      _.defer(this.setOnImageLoad.bind(this));
    }
  }, {
    key: "setImageSize",
    value: function setImageSize(maxWidth, maxHeight) {
      if (this.imageWidth > maxWidth) {
        $.css(this.img, 'width', Math.round(maxWidth) + "px");
      }
      if (this.imageHeight > maxHeight) {
        $.css(this.img, 'height', Math.round(maxHeight) + "px");
      }
    }
  }, {
    key: "_close",
    value: function _close() {
      this.widget.destruct();
      this.widget = undefined;
      nodeUtils.removeChild(this.node);
      this.node = undefined;
    }
  }, {
    key: "template",
    get: function get() {
      var initialStyle = this.initialStyle();

      return "\n    <div class=\"rh-modal\">\n        <div class=\"rh-modal-container\" " + initialStyle + ">\n          <div class=\"rh-modal-content\" data-html=\"content\"></div>\n          <div class=\"rh-modal-close\" data-click=\"@close(true)\"> </div>\n        </div>\n    </div>";
    }
  }]);

  return ModalDialog;
}();

rh.model.csubscribe('SHOW_MODAL', function (config) {
  var model = new ModalDialog();
  model.ShowModal(config);
});

},{"../../lib/rh":24,"../utils/node_utils":66}],32:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var $ = rh.$;
var _ = rh._;
var consts = rh.consts;

var RH2017LayoutController = function () {
  function RH2017LayoutController(widget) {
    _classCallCheck(this, RH2017LayoutController);

    this.widget = widget;
    this.topicFrame = '.topic-container iframe';
    this.initLayout();
    this.initModal();
  }

  _createClass(RH2017LayoutController, [{
    key: 'isLayoutMode',
    value: function isLayoutMode(hashMap) {
      var hash = hashMap || _.hashParams();
      var topicMode = hash[rh.consts('HASH_KEY_TOPIC')];
      return hash[rh.consts('HASH_KEY_UIMODE')] !== consts('HELP_SEARCH_MODE') && (!topicMode || hash[rh.consts('HASH_HOMEPAGE_MODE')] === 'true' || hash[rh.consts('HASH_KEY_RH_TOCID')]);
    }
  }, {
    key: 'initLayout',
    value: function initLayout() {
      var _this = this;

      rh.model.subscribe(consts('EVT_HASH_CHANGE'), function (obj) {
        var hashMap = obj.newMap,
            oldHashMap = obj.oldMap;
        if (_this.isLayoutMode()) {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_LAYOUT_MODE'));
        } else if (hashMap[rh.consts('HASH_KEY_UIMODE')] === 'search') {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_SEARCH_MODE'));
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), false), false);
        } else {
          _this.widget.publish(rh.consts('KEY_VIEW_MODE'), rh.consts('HELP_TOPIC_MODE'));
        }

        var feature = rh.model.get(rh.consts('KEY_FEATURE'));
        if (feature && feature.showDefTopic === false && !hashMap[rh.consts('HASH_KEY_RH_TOCID')] && !oldHashMap[rh.consts('HASH_KEY_TOPIC')] && hashMap[rh.consts('HASH_KEY_TOPIC')]) {
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), 'false'), false);
        } else if (oldHashMap[rh.consts('HASH_KEY_TOPIC')] && !hashMap[rh.consts('HASH_KEY_RH_TOCID')] && oldHashMap[rh.consts('HASH_KEY_TOPIC')] !== hashMap[rh.consts('HASH_KEY_TOPIC')] && hashMap[rh.consts('HASH_HOMEPAGE_MODE')] === 'true' && oldHashMap[rh.consts('HASH_HOMEPAGE_MODE')] === hashMap[rh.consts('HASH_HOMEPAGE_MODE')]) {
          _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), 'false'), false);
        }
      });

      var hashMap = _.hashParams();
      if (this.isLayoutMode() && hashMap[rh.consts('HASH_HOMEPAGE_MODE')] !== 'true') {
        _.queueUpdateHashMap(_defineProperty({}, consts('HASH_HOMEPAGE_MODE'), true), false);
      }
      rh.model.subscribe('EVT_TOC_LOADEDgototab', function (bookData) {
        if (bookData.key) {
          rh.model.subscribe(bookData.key, function (bookTOC, key, unsub) {
            unsub();
            if (bookData.item && bookData.item.url && !bookTOC[0].added) {
              bookTOC.unshift({ 'type': 'item', 'url': bookData.item.url,
                'name': bookData.item.name, 'added': true });
              rh.model.publish(bookData.key, bookTOC);
            }
          });
        }
        if (bookData.item.url) {
          _this.viewTopicInLayoutMode(bookData.item.url);
        }
      });
    }
  }, {
    key: 'viewTopicInLayoutMode',
    value: function viewTopicInLayoutMode(topicUrl) {
      var paramMap = _defineProperty({ 'homepage': 'true'
      }, rh.consts('HASH_KEY_RH_TOCID'), true);
      if (topicUrl && topicUrl !== '#') {
        paramMap.t = topicUrl;
      }
      _.queueUpdateHashMap(paramMap, false);
    }
  }, {
    key: 'initModal',
    value: function initModal() {
      var bHandled = false;
      document.addEventListener("keydown", function (e) {
        if (e.keyCode === 27) {
          // ESC
          rh._.each($.find('.modal'), function (item) {
            $.addClass(item, 'rh-hide');
          });
        }
      }, false);
      document.addEventListener('click', function () {
        if (!bHandled) {
          rh._.each($.find('.modal'), function (item) {
            $.addClass(item, 'rh-hide');
          });
        }
        bHandled = false;
      });
      rh._.each($.find('.modal-content'), function (item) {
        _.addEventListener(item, 'click', function () {
          bHandled = true;
        });
      });
    }
  }]);

  return RH2017LayoutController;
}();

rh.controller('RH2017LayoutController', RH2017LayoutController);

},{"../../lib/rh":24}],33:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;

var Merger = function () {
  function Merger(items) {
    var max_items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;

    _classCallCheck(this, Merger);

    this._items = items;
    this._max_items = max_items;
  }

  _createClass(Merger, [{
    key: "merge",
    value: function merge(newItems) {
      var _this = this;

      _.each(newItems, function (item) {
        _this.mergeItem(item);
      });
      this._sort();
      this._purge();
    }
  }, {
    key: "clear",
    value: function clear() {
      this._items = [];
    }
  }, {
    key: "_purge",
    value: function _purge() {
      if (this._items.length > this._max_items) {
        this._items.splice(this._max_items);
      }
    }
  }, {
    key: "mergeItem",
    value: function mergeItem(item) {
      var existing_item = this.find_item(item);
      if (existing_item) {
        existing_item.merge(item);
      } else {
        this._items.push(item);
      }
    }
  }, {
    key: "find_item",
    value: function find_item(match_item) {
      return _.find(this._items, function (item) {
        return item.match(match_item);
      });
    }
  }, {
    key: "merge_item",
    value: function merge_item(existing_item, new_item) {
      existing_item.probability += new_item.probability;
      existing_item.count = Math.max(existing_item.count, new_item.count);
    }
  }, {
    key: "_sort",
    value: function _sort() {
      this.items.sort(this.compare_items);
    }
  }, {
    key: "compare_items",
    value: function compare_items(p1, p2) {
      return p1.compare(p2);
    }
  }, {
    key: "items",
    get: function get() {
      return this._items;
    }
  }]);

  return Merger;
}();

module.exports = Merger;

},{"../../../../lib/rh":24}],34:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var consts = rh.consts;

var Paths = function () {
  function Paths(path) {
    _classCallCheck(this, Paths);

    this._path = path || "";
    this.initPath();
  }

  _createClass(Paths, [{
    key: "initPath",
    value: function initPath() {
      if (this._path === ".") {
        this._path = "";
      }
      if (this._path[0] === '.' && this._path[1] === '/') {
        this._path = this._path.slice(2);
      }
    }
  }, {
    key: "_getModelFileName",
    value: function _getModelFileName(fileNo) {
      return consts("SEARCH_MODEL_ADDR") + fileNo.toString() + ".js";
    }
  }, {
    key: "getModelFilePath",
    value: function getModelFilePath(fileno) {
      var fileName = this._getModelFileName(fileno);
      return this._getRelativePath(fileName);
    }
  }, {
    key: "_getRelativePath",
    value: function _getRelativePath(filepath) {
      var path = this._path === "" ? filepath : this._path + '/' + filepath;

      return path;
    }
  }, {
    key: "_getPathKey",
    value: function _getPathKey() {
      return this._path === "" ? "" : '_' + this._path + '_';
    }
  }, {
    key: "getModelKey",
    value: function getModelKey(fileNo) {
      return consts('SEARCH_MODEL_KEY') + this._getPathKey() + fileNo.toString();
    }
  }, {
    key: "_getMapFileName",
    value: function _getMapFileName() {
      return consts("SEARCH_MAP_ADDR");
    }
  }, {
    key: "getMapFilePath",
    value: function getMapFilePath() {
      var fileName = this._getMapFileName();
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getIndexFilePath",
    value: function getIndexFilePath() {
      var fileName = consts("SEARCH_INDEX_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getTopicUrl",
    value: function getTopicUrl(url) {
      return this._getRelativePath(url);
    }
  }, {
    key: "getSearchDbFilePath",
    value: function getSearchDbFilePath() {
      var fileName = consts("SEARCH_DB_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getMetadataFilePath",
    value: function getMetadataFilePath() {
      var fileName = consts("SEARCH_METADATA_FILE");
      return this._getRelativePath(fileName);
    }
  }, {
    key: "getTextFilePath",
    value: function getTextFilePath(id) {
      var folderPath = consts("SEARCH_TEXT_FILE");
      var relFolderPath = this._getRelativePath(folderPath);
      return relFolderPath + "/" + id + ".js";
    }
  }]);

  return Paths;
}();

module.exports = Paths;

},{"../../../../lib/rh":24}],35:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
module.exports = function () {
  function Synonymns(synonymns) {
    _classCallCheck(this, Synonymns);

    this.synonymns = synonymns || [];
    this.rootWords = {};
    this.merge();
  }

  _createClass(Synonymns, [{
    key: "merge",
    value: function merge() {
      var _this = this;

      this.rootWords = {};
      _.each(this.synonymns, function (item) {
        var synonymns = item.words;
        var word = item.name;
        _.each(synonymns, function (syn) {
          _this._add(word, syn);
        });
      });
    }
  }, {
    key: "_add",
    value: function _add(word, syn) {
      syn = syn.toLowerCase();
      word = word.toLowerCase();
      this.rootWords[syn] = this.rootWords[word] || word;
    }
  }, {
    key: "getRoot",
    value: function getRoot(word) {
      return this.rootWords[word] || word;
    }
  }]);

  return Synonymns;
}();

},{"../../../../lib/rh":24}],36:[function(require,module,exports){
"use strict";

var _exports = {
  minPreviousThreshold: 0.2,
  previousnGram: 1,
  max_predictions: 5,
  PREDICTOR_SOURCE_ID: {
    HISTORY_PREDICTOR: 0,
    NGRAM_PREDICTOR: 1,
    GENERAL_PREDICTOR: 2,
    CORRECTOR: 3
  }
};

module.exports = _exports;

},{}],37:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var INDEX = require('./indices');
var rh = require("../../../../lib/rh");
var _ = rh._;
var Prediction = require('./prediction');
var search_consts = require('./consts');
var search_utils = require('./utils');
var PredictionList = require('./prediction_list');

var Corrector = function () {
  function Corrector(loader, callback) {
    var max_predictions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;

    _classCallCheck(this, Corrector);

    this._loader = loader;
    this.predictions = [];
    this.max_predictions = max_predictions;
    this._callback = callback;
  }

  _createClass(Corrector, [{
    key: 'getCorrections',
    value: function getCorrections(parsed_input) {
      this._parsed_input = parsed_input;
      this.predictions = [];
      this._computePredictions();
      var hashes = this._loader.getHashes(this._parsed_input._partial);
      if (hashes) {
        var hash_count = hashes.length;
        for (var i = 0; i < hash_count && this.predictions.length < this.max_predictions; i++) {
          var hash = hashes[i];
          this._addCorrection(hash);
        }
      }
      this.onResultCalculated();
    }
  }, {
    key: 'clear',
    value: function clear() {
      this.predictions = [];
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {

      var word_hashes = this._loader.getHashes(this._parsed_input._partial);
      if (word_hashes) {
        this._addCorrection(word_hashes);
      }
    }
  }, {
    key: 'onResultCalculated',
    value: function onResultCalculated() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this._parsed_input), this._loader);
      }
    }
  }, {
    key: '_matchCorrection',
    value: function _matchCorrection(word) {
      this._hamming_dist = this._getDistance(word);
      if (this._hamming_dist <= 2 && !this._loader.isStopWord(word)) {
        return true;
      }
      return false;
    }
  }, {
    key: '_addCorrection',
    value: function _addCorrection(word_hash) {
      if (!word_hash) {
        return;
      }
      var word = search_utils.getSafeElement(word_hash, INDEX.MAP.WORD);
      if (!word) {
        return;
      }

      if (this._matchCorrection(word)) {
        var complete_word = this._parsed_input.replaceLastWord(word);
        var term = this._parsed_input.completeSuggestion(complete_word);
        var prediction = new Prediction(term, 1 / this._hamming_dist, 2, search_consts.PREDICTOR_SOURCE_ID.CORRECTOR);
        this.predictions.push(prediction);
      }
    }
  }, {
    key: '_getDistance',
    value: function _getDistance(word) {
      return _.findEditDist(this._parsed_input._partial, word);
    }
  }]);

  return Corrector;
}();

module.exports = Corrector;

},{"../../../../lib/rh":24,"./consts":36,"./indices":41,"./prediction":45,"./prediction_list":47,"./utils":52}],38:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PredictionList = require('./prediction_list');
var PredictonCreator = require('./prediction_creator');
var search_consts = require('./consts');
var INDEX = require('./indices');
var rh = require("../../../../lib/rh");
var _ = rh._;
var PredictonMerger = require('../common/merger');

var GeneralPredictor = function () {
  function GeneralPredictor(callback, loader) {
    var max_predictions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 20;

    _classCallCheck(this, GeneralPredictor);

    this._max_predictions = max_predictions;
    this._loader = loader;
    this.total_count = this._loader.getTotalCount();
    this._callback = callback;
    this._source = search_consts.PREDICTOR_SOURCE_ID.GENERAL_PREDICTOR;
    this.prediction_merger = new PredictonMerger([], this.total_count * 5);
  }

  _createClass(GeneralPredictor, [{
    key: 'clear',
    value: function clear() {
      this.prediction_merger.clear();
      this.parsed_input = undefined;
    }
  }, {
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {

      this._init(parsed_input);
      this._computePredictions();

      this._onResultComputed();
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {

      var word_hashes = this._getWordHashes();
      if (word_hashes) {
        this._addPredictions(word_hashes);
      }
    }
  }, {
    key: '_isWholeWordInput',
    value: function _isWholeWordInput() {
      return this.parsed_input.isWholeWord;
    }
  }, {
    key: '_getWordHashes',
    value: function _getWordHashes() {
      return this.parsed_input.isWholeWord ? this._loader.top_words : this._loader.getHashes(this.parsed_input._partial);
    }
  }, {
    key: '_init',
    value: function _init(parsed_input) {
      this.prediction_merger = new PredictonMerger([], this.total_count * 5);
      this.parsed_input = parsed_input;
    }
  }, {
    key: '_onResultComputed',
    value: function _onResultComputed() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this.parsed_input), this._loader);
      }
    }
  }, {
    key: '_addPredictions',
    value: function _addPredictions(hashes) {
      if (!hashes) {
        return;
      }

      var hash_count = hashes.length;
      for (var i = 0; i < hash_count && this.predictions.length < this.max_predictions; i++) {
        var hash = hashes[i];
        this._addWordPrediction(hash);
      }
    }
  }, {
    key: '_addWordPrediction',
    value: function _addWordPrediction(word_hash, matchFn) {
      matchFn = matchFn || this._matches_partially.bind(this);
      var model_data = this._loader.getModelData(word_hash);
      var total_count = this._loader.total_count;
      if (matchFn(word_hash)) {
        var word = word_hash[INDEX.MAP.WORD];
        if (this._should_add_prediction(word)) {
          this._create_predictions(word_hash, total_count, model_data);
        }
      }
    }
  }, {
    key: '_continueFn',
    value: function _continueFn() {
      return true;
    }
  }, {
    key: '_should_add_prediction',
    value: function _should_add_prediction(word) {
      return !this._loader.isStopWord(word) && !this.parsed_input.equalLastWord(word);
    }
  }, {
    key: '_matches_partially',
    value: function _matches_partially(word_hash) {
      if (this.parsed_input.isWholeWord) {
        return true;
      }

      var word = word_hash[INDEX.MAP.WORD];
      return this.parsed_input.comparePartial(word);
    }
  }, {
    key: '_create_predictions',
    value: function _create_predictions(word_hash, model_count, model_item) {
      var _this = this;

      var creator = new PredictonCreator({ loader: this._loader, model_item: model_item, total_count: model_count, parsed_input: this.parsed_input, continueFn: this._continueFn });
      var predictions = creator.getMultiPredictions(word_hash, true, undefined, this._source);
      _.each(predictions, function (prediction) {
        if (prediction !== undefined) {
          _this.prediction_merger.mergeItem(prediction);
        }
      });
    }
  }, {
    key: '_calculate_probability',
    value: function _calculate_probability(count) {
      return count / this.total_count;
    }
  }, {
    key: 'predictions',
    get: function get() {
      return this.prediction_merger.items;
    }
  }, {
    key: 'max_predictions',
    set: function set(newValue) {
      this._max_predictions = newValue;
    },
    get: function get() {
      return this._max_predictions;
    }
  }]);

  return GeneralPredictor;
}();

module.exports = GeneralPredictor;

},{"../../../../lib/rh":24,"../common/merger":33,"./consts":36,"./indices":41,"./prediction_creator":46,"./prediction_list":47}],39:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var Prediction = require('./prediction');
var Parser = require('./input_parser');
var PredictionList = require('./prediction_list');
var search_consts = require('./consts');

var HistoryPredictor = function () {
  function HistoryPredictor(reader, callback) {
    _classCallCheck(this, HistoryPredictor);

    this._reader = reader;
    this._predictions = [];
    this._callback = callback;
    this._source = search_consts.PREDICTOR_SOURCE_ID.HISTORY_PREDICTOR;
    this._max_predictions = search_consts._max_history_predictions === undefined ? 2 : search_consts._max_history_predictions;
  }

  _createClass(HistoryPredictor, [{
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {
      this._predictions = [];
      this._parsed_input = parsed_input;
      this._computePredictions();
      if (this._callback) {
        this._callback(new PredictionList(this._predictions, this._parsed_input));
      }
      return this._predictions;
    }
  }, {
    key: 'init',
    value: function init() {}
  }, {
    key: 'clear',
    value: function clear() {
      this._predictions = [];
    }
  }, {
    key: '_computePredictions',
    value: function _computePredictions() {
      var _this = this;

      if (this._parsed_input.trimmedText !== "") {
        _.each(this._reader._list, function (item) {
          if (_this._match(item.text)) {
            _this._predictions.push(_this._createPrediction(item));
          }
        });
        this._purge();
      }
    }
  }, {
    key: '_purge',
    value: function _purge() {
      this._predictions.splice(this._max_predictions);
    }
  }, {
    key: '_createPrediction',
    value: function _createPrediction(item) {
      var newPrediction = new Prediction(item.text, 1, item.count, this._source);
      return newPrediction;
    }
  }, {
    key: '_match',
    value: function _match(text) {
      if (this._parsed_input.original_text.length > text.length) {
        return false;
      }
      var parsed_text = new Parser(text, true);
      return this._parsed_input.compare(parsed_text);
    }
  }]);

  return HistoryPredictor;
}();

module.exports = HistoryPredictor;

},{"../../../../lib/rh":24,"./consts":36,"./input_parser":42,"./prediction":45,"./prediction_list":47}],40:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var search_utils = require('./utils');

var HistoryReader = function () {
  function HistoryReader() {
    _classCallCheck(this, HistoryReader);
  }

  _createClass(HistoryReader, [{
    key: "initHistory",
    value: function initHistory(list) {
      if (this._list === undefined) {
        this._list = list || [];
      }
    }
  }, {
    key: "getHistory",
    value: function getHistory() {
      return this._list || [];
    }
  }, {
    key: "_updateText",
    value: function _updateText(text, index) {
      this.getHistory().splice(index, 1);
      this.getHistory().unshift(text);
    }
  }, {
    key: "_addNewText",
    value: function _addNewText(newText) {
      this.getHistory().push(newText);
    }
  }, {
    key: "add",
    value: function add(newText) {
      var nIndex = _.findIndex(this.getHistory(), function (item) {
        return search_utils.compareNoCase(newText.text, item.text) === 0;
      });
      if (nIndex >= 0) {
        this._updateText(newText, nIndex);
      } else {
        this._addNewText(newText);
      }
    }
  }, {
    key: "delete",
    value: function _delete(searchText) {
      var nIndex = _.findIndex(this.getHistory(), function (item) {
        return search_utils.compareNoCase(searchText, item.text) === 0;
      });
      if (nIndex >= 0) {
        this.getHistory().splice(nIndex);
      }
    }
  }]);

  return HistoryReader;
}();

module.exports = new HistoryReader();

},{"../../../../lib/rh":24,"./utils":52}],41:[function(require,module,exports){
"use strict";

var _exports = {
  MAP: {
    WORD: 0,
    HASH: 1,
    COUNT: 2,
    MODEL_FILE_NO: 3,
    MODEL_INDEX: 4,
    TOPICS: 5
  },

  MODEL: {
    WORD_HASH: 0,
    COUNT: 1,
    NEXT_MODEL: 2
  },

  FIRST_PREDICTION: {
    NEXT: 0,
    PREVIOUS: 1
  }
};

module.exports = _exports;

},{}],42:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var search_utils = require('./utils');
var rh = require("../../../../../src/lib/rh");
var _ = rh._;

var InputParser = function () {
  function InputParser(text, isWholeWord, selection, isPrevious) {
    _classCallCheck(this, InputParser);

    this.isPrevious = isPrevious;
    this.selection = selection === undefined ? text.length : selection;
    var separator = this._calculateSeparator(text);
    if (!this.isPrevious) {
      this.isWholeWord = isWholeWord || this._isWholeWord(text, separator);
    }
    this.initText(text, separator);
  }

  _createClass(InputParser, [{
    key: "initText",
    value: function initText(text, separator) {
      this._computeText(text, separator);
      this.trimmedText = this.original_text.trim();
      this.words = _.compact(this.trimmedText.split(" ") || []);
      this._reverseIfPrevious();
      if (!this.isWholeWord && this.words.length > 0) {
        this._partial = this.words.splice(-1)[0];
      }
    }
  }, {
    key: "_computeText",
    value: function _computeText(text, separator) {
      this._right_text = "";
      this._left_text = "";

      if (separator === undefined) {
        separator = text.length;
      }
      this.isSplitText = !(separator === 0 || separator === text.length);
      var left_text = text.substring(0, separator);
      var right_text = text.substring(separator);

      if (this.isPrevious) {
        this.original_text = right_text;
        this._left_text = left_text.trim();
      } else {
        this.original_text = left_text;
        this._right_text = right_text.trim();
      }
    }
  }, {
    key: "equalRemaingWord",
    value: function equalRemaingWord(word) {
      if (this._left_text !== "" || this._right_text !== "") {
        var remainingWord = this._getRemainigWord();
        if (remainingWord) {
          return search_utils.compareNoCase(remainingWord, word) === 0;
        }
      }
      return false;
    }
  }, {
    key: "_getRemainigWord",
    value: function _getRemainigWord() {
      var words = this.isPrevious ? this._left_text.split(" ") : this._right_text.split(" ");

      words = words || [];
      words = _.compact(words);
      if (words.length > 0) {
        return this.isPrevious ? words[words.length - 1] : words[0];
      }
    }
  }, {
    key: "completeSuggestion",
    value: function completeSuggestion(text) {
      if (this.isPrevious) {
        return this._left_text.length === 0 ? text : this._left_text + " " + text;
      } else {
        return this._right_text.length === 0 ? text : text + " " + this._right_text;
      }
    }
  }, {
    key: "_calculateSeparator",
    value: function _calculateSeparator(text) {

      if (this.isPrevious) {
        if (this.selection === 0) {
          this.isWholeWord = true;
          return 0;
        }
        if (text.length > this.selection && text[this.selection - 1] !== " ") {
          var previousSpaceIndex = text.lastIndexOf(" ", this.selection - 1);
          this.isWholeWord = false;
          return previousSpaceIndex >= 0 ? previousSpaceIndex + 1 : 0;
        }
        this.isWholeWord = true;
      }
      return this.selection;
    }
  }, {
    key: "_reverseIfPrevious",
    value: function _reverseIfPrevious() {
      if (this.isPrevious) {
        this.words.reverse();
      }
    }
  }, {
    key: "_isWholeWord",
    value: function _isWholeWord(text, separator) {
      if (this.isPrevious) {
        if (separator === 0) {
          return true;
        }
        return text.length > separator && text[separator - 1] === " ";
      }

      return separator > 0 && text[separator - 1] === " ";
    }
  }, {
    key: "compare",
    value: function compare(other_input) {
      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;

      end = end === undefined ? this.words.length - 1 : end;
      if (this.words.length > other_input.words.length) {
        return false;
      }
      var i = start;
      for (; i <= end; i++) {
        var word1 = this.words[i];
        var word2 = other_input.words[i];
        if (search_utils.compareNoCase(word1, word2) !== 0) {
          return false;
        }
      }
      return this.matchPartial(other_input, i);
    }
  }, {
    key: "matchPartial",
    value: function matchPartial(other_input, index) {
      if (this._partial === undefined) {
        return true;
      }
      if (other_input.words.length <= index) {
        return false;
      }
      var other_word = other_input.words[index];
      return this.comparePartial(other_word);
    }
  }, {
    key: "comparePartial",
    value: function comparePartial(word) {
      this._matchExp = new RegExp('^' + this._partial, 'i');
      return this._matchExp.test(word);
    }
  }, {
    key: "completeWord",
    value: function completeWord(next_word) {
      if (this.isWholeWord || this._partial === undefined || this._partial.length === 0) {
        return this.getTermForCompleteWord(next_word, this.trimmedText);
      } else {
        return this.getTermForPartialText(next_word);
      }
    }
  }, {
    key: "getTermForPartialText",
    value: function getTermForPartialText(next_word) {
      var partial_next_word = next_word.substring(this._partial.length, next_word.length);
      if (this.isPrevious) {
        var trimmedText = "";
        var firstSpaceIndex = this.trimmedText.indexOf(' ');
        if (firstSpaceIndex >= 0) {
          trimmedText = this.trimmedText.substring(firstSpaceIndex);
        }
        return this._partial + partial_next_word + trimmedText;
      } else {
        return this.trimmedText + partial_next_word;
      }
    }
  }, {
    key: "getTermForCompleteWord",
    value: function getTermForCompleteWord(next_word) {
      if (this.isPrevious) {
        return next_word + " " + this.trimmedText;
      } else {
        return this.trimmedText + " " + next_word;
      }
    }
  }, {
    key: "replaceLastWord",
    value: function replaceLastWord(next_word) {
      var text = this.trimmedText;
      if (this._partial !== undefined && !this.isWholeWord) {
        var index = this.trimmedText.length - this._partial.length;
        text = this.trimmedText.substring(0, index);
        text = text.trim();
      }
      return text + " " + next_word;
    }
  }, {
    key: "equalLastWord",
    value: function equalLastWord(word) {
      if (this.words.length === 0) {
        return false;
      }
      var last_word = this.words[this.words.length - 1];
      return search_utils.compareNoCase(last_word, word) === 0;
    }
  }]);

  return InputParser;
}();

module.exports = InputParser;

},{"../../../../../src/lib/rh":24,"./utils":52}],43:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var model = rh.model;
var search_utils = require('./utils');
var INDEX = require('./indices');
var SEARCH_CONSTS = require('./consts');
var Paths = require('../common/paths');

var Loader = function () {
  function Loader() {
    var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

    _classCallCheck(this, Loader);

    this._paths = new Paths(path);
  }

  _createClass(Loader, [{
    key: 'init',
    value: function init(callbackFn) {
      this.loadIndex(callbackFn);
      this.loadMap(callbackFn);
    }
  }, {
    key: '_isIndexLoaded',
    value: function _isIndexLoaded() {
      return this.index_data !== undefined;
    }
  }, {
    key: 'getModelCount',
    value: function getModelCount() {
      return this.index_data.Model.length;
    }
  }, {
    key: 'getMapHash',
    value: function getMapHash(hash_key) {
      return this._hash_to_word[hash_key];
    }
  }, {
    key: 'getHashes',
    value: function getHashes(input) {
      if (input !== undefined && input.length > 0) {
        return this.getAplhabetHashes(input[0]);
      }
    }
  }, {
    key: 'getAplhabetHashes',
    value: function getAplhabetHashes(alphabet) {
      if (this.map_data && alphabet.length === 1) {
        var lalphabet = alphabet.toLowerCase();
        return this.map_data[lalphabet];
      }
    }
  }, {
    key: 'getWordModel',
    value: function getWordModel(word, model_data) {
      var word_model = void 0;
      var word_hash = this._getHashForWord(word);
      if (word_hash && model_data) {
        word_model = model_data[word_hash[INDEX.MAP.MODEL_INDEX]];
      }
      return word_model;
    }
  }, {
    key: 'getCount',
    value: function getCount(word) {
      var word_hash = this._getHashForWord(word);
      if (word_hash) {
        return word_hash[INDEX.MAP.COUNT];
      }
    }
  }, {
    key: 'getModelData',
    value: function getModelData(word_hash) {
      // async call if not loaded return empty array
      var fileno = word_hash[INDEX.MAP.MODEL_FILE_NO];
      var model_index = word_hash[INDEX.MAP.MODEL_INDEX];
      var data = model.get(this._paths.getModelKey(fileno));
      if (!data) {
        this.loadModel(fileno);
      }
      return data && data[model_index];
    }
  }, {
    key: '_compareWordCount',
    value: function _compareWordCount(hash_item1, hash_item2) {
      var count1 = search_utils.getSafeElement(hash_item1, INDEX.MAP.COUNT);
      var count2 = search_utils.getSafeElement(hash_item2, INDEX.MAP.COUNT);
      if (count1 && count2) {
        return count2 - count1;
      }
      return 0;
    }
  }, {
    key: '_buildTopWords',
    value: function _buildTopWords(words) {
      words.sort(this._compareWordCount);
      words.splice(SEARCH_CONSTS.max_predictions * 100);
      this._top_words = words;
    }
  }, {
    key: 'getModelFileNo',
    value: function getModelFileNo(word) {
      var word_hash = this._getHashForWord(word);
      if (word_hash) {
        return word_hash[INDEX.MAP.MODEL_FILE_NO];
      }
    }
  }, {
    key: '_getHashForWord',
    value: function _getHashForWord(word) {
      var hash = void 0;
      var word_key = this.getHashKey(word);
      if (word_key) {
        hash = this._hash_to_word[word_key];
      }
      return hash;
    }
  }, {
    key: 'getHashKey',
    value: function getHashKey(word) {
      if (word && word.length > 0) {
        var lWord = word.toLowerCase();
        return this._word_hash[lWord];
      }
    }
  }, {
    key: 'loadIndex',
    value: function loadIndex(callbackFn) {
      var _this = this;

      if (this._isIndexLoaded() === false) {
        _.loadScript(this._paths.getIndexFilePath(), true, function () {
          _this.index_data = _.exports();
          _this.onIndexLoaded(callbackFn);
        }, true);
      } else {
        this.onIndexLoaded(callbackFn);
      }
    }
  }, {
    key: 'loadModel',
    value: function loadModel(fileNo, callbackFn) {
      var data = [];
      if (fileNo !== undefined) {
        var key = this._paths.getModelKey(fileNo);
        var _data = model.get(key);
        if (_data === undefined) {
          model.publish(key, null);

          var filepath = this._paths.getModelFilePath(fileNo);
          _.loadScript(filepath, true, this.getOnModelLoadFn(fileNo, callbackFn), true);
        } else if (_data === null && callbackFn !== undefined) {

          model.subscribe(key, callbackFn);
        } else {
          this.doCallback(callbackFn, _data, fileNo);
        }
      } else {
        this.doCallback(callbackFn, data, fileNo);
      }
    }
  }, {
    key: 'doCallback',
    value: function doCallback(callbackFn, data, fileno) {
      if (callbackFn) {
        callbackFn(data, fileno);
      }
    }
  }, {
    key: 'getOnModelLoadFn',
    value: function getOnModelLoadFn(fileNo, callbackFn) {
      var _this2 = this;

      return function () {
        var data = _.exports();
        model.publish(_this2._paths.getModelKey(fileNo), data);
        if (callbackFn) {
          callbackFn(data, fileNo);
        }
      };
    }
  }, {
    key: 'onMapLoaded',
    value: function onMapLoaded(callbackFn) {
      this.parseMap();
      if (this.index_data && callbackFn) {
        callbackFn(this);
      }
    }
  }, {
    key: 'onIndexLoaded',
    value: function onIndexLoaded(callbackFn) {
      if (this.map_data && callbackFn) {
        callbackFn(this);
      }
    }
  }, {
    key: 'parseMap',
    value: function parseMap() {
      var data = this.map_data;
      this._word_hash = {};
      this._hash_to_word = {};
      var words = [];
      for (var letter in data) {
        var words_data = data[letter];
        this._parseWordsData(words_data);
        words = words.concat(words_data);
      }
      this._buildTopWords(words);
    }
  }, {
    key: '_parseWordsData',
    value: function _parseWordsData(words_data) {
      var _this3 = this;

      _.each(words_data, function (word_data) {
        var hash_key = parseInt(word_data[INDEX.MAP.HASH]);
        if (word_data[INDEX.MAP.WORD]) {
          var word = word_data[INDEX.MAP.WORD].toString();
          _this3._word_hash[word] = hash_key;
        }
        _this3._hash_to_word[hash_key] = word_data;
      });
    }
  }, {
    key: 'isStopWord',
    value: function isStopWord(word) {
      var index = _.find(this.index_data.stopWords, function (stop_word) {
        return search_utils.compareNoCase(word, stop_word) === 0;
      });
      return index !== undefined;
    }
  }, {
    key: 'getTotalCount',
    value: function getTotalCount() {
      return this.index_data.totalCount;
    }
  }, {
    key: 'wordHashfromIndexKey',
    value: function wordHashfromIndexKey(index_key, fileno) {
      return _.find(this._hash_to_word, function (map_item) {
        return map_item[INDEX.MAP.MODEL_INDEX] === index_key && map_item[INDEX.MAP.MODEL_FILE_NO] === fileno;
      });
    }
  }, {
    key: 'loadMap',
    value: function loadMap(callbackFn) {
      var _this4 = this;

      if (this.map_data === undefined) {
        _.loadScript(this._paths.getMapFilePath(), true, function () {
          _this4.map_data = _.exports();
          _this4.onMapLoaded(callbackFn);
        }, true);
      } else {
        this.onMapLoaded(callbackFn);
      }
    }
  }, {
    key: 'top_words',
    get: function get() {
      return this._top_words;
    }
  }, {
    key: 'nGram',
    get: function get() {
      return this.index_data.nGram;
    }
  }, {
    key: 'search_model',
    get: function get() {
      return this.index_data.Model;
    }
  }, {
    key: 'search_map',
    get: function get() {
      return this.index_data.Map;
    }
  }, {
    key: 'total_count',
    get: function get() {
      return this.index_data.totalCount;
    }
  }, {
    key: 'stop_words',
    get: function get() {
      return this.index_data.stopWords;
    }
  }]);

  return Loader;
}();

module.exports = Loader;

},{"../../../../lib/rh":24,"../common/paths":34,"./consts":36,"./indices":41,"./utils":52}],44:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var PredictonCreator = require('./prediction_creator');
//let search_utils = require('./utils');
//let Prediction = require('./prediction');
var PredictionList = require('./prediction_list');
var search_consts = require('./consts');
var INDEX = require('./indices');

var NGramPredictor = function () {
  function NGramPredictor(_ref) {
    var loader = _ref.loader,
        level = _ref.level,
        callback = _ref.callback,
        previous = _ref.previous,
        _ref$max_predictions = _ref.max_predictions,
        max_predictions = _ref$max_predictions === undefined ? 20 : _ref$max_predictions;

    _classCallCheck(this, NGramPredictor);

    this.level = level;
    this.previous = previous;
    this._max_predictions = max_predictions;
    this.predictions = [];
    this._callback = callback;
    this._loader = loader;
    this._source = search_consts.PREDICTOR_SOURCE_ID.NGRAM_PREDICTOR;
  }

  _createClass(NGramPredictor, [{
    key: 'init',
    value: function init() {}
  }, {
    key: 'clear',
    value: function clear() {
      this._word_model = undefined;
      this._prediction_array = undefined;
      this.parsed_input = undefined;
      this.predictions = [];
    }
  }, {
    key: 'getPredictions',
    value: function getPredictions(parsed_input) {
      this.parsed_input = parsed_input;
      this.predictions = [];
      if (parsed_input !== undefined && parsed_input.words.length >= this.level) {
        this.word_index = parsed_input.words.length - this.level;
        this._word = parsed_input.words[this.word_index];
        this._loadInputModel(this._word, this._compute_word_predictions.bind(this));
      } else {
        this._onResultsComputed();
      }
    }
  }, {
    key: '_compute_word_predictions',
    value: function _compute_word_predictions(model_data) {
      this.predictions = [];
      var level = this.level;
      var word = this._word;
      var total_count = this._loader.getCount(word);
      this._word_model = this._loader.getWordModel(word, model_data);
      if (this._word_model) {
        this._prediction_array = this._get_prediction_array();
        this._compute_prediction_from_model(word, level, total_count);
      }
      this._onResultsComputed();
    }
  }, {
    key: '_onResultsComputed',
    value: function _onResultsComputed() {
      if (this._callback) {
        this._callback(new PredictionList(this.predictions, this.parsed_input), this._loader);
      }
    }
  }, {
    key: '_compute_prediction_from_model',
    value: function _compute_prediction_from_model(word, level, total_count) {
      if (this._prediction_array === undefined) {
        return;
      }

      if (this._is_my_level(level)) {
        this._compute_next_words(total_count);
      } else {
        level--;
        var next_index = this._get_word_index(level);
        var next_word = this.parsed_input.words[next_index];
        var next_word_key = this._loader.getHashKey(next_word);
        var next_word_model = this._get_next_model(this._prediction_array, next_word_key);
        if (next_word_model) {
          total_count = next_word_model[INDEX.MODEL.COUNT];
          this._prediction_array = next_word_model[INDEX.MODEL.NEXT_MODEL];
          this._compute_prediction_from_model(next_word, level, total_count);
        }
      }
    }
  }, {
    key: '_get_next_model',
    value: function _get_next_model(model_data, word_hash_key) {
      if (!word_hash_key) {
        return undefined;
      }
      var next_word_prediction = _.find(model_data, function (item) {
        return item.length > 1 && item[INDEX.MODEL.WORD_HASH] === word_hash_key;
      });
      if (next_word_prediction && next_word_prediction.length > INDEX.MODEL.NEXT_MODEL && Array.isArray(next_word_prediction)) {
        return next_word_prediction; // TODO may be needs a fix
      }
    }
  }, {
    key: '_get_word_index',
    value: function _get_word_index(level) {
      return this.parsed_input.words.length - level;
    }
  }, {
    key: '_is_my_level',
    value: function _is_my_level(level) {
      return level === 1;
    }
  }, {
    key: '_continueFn',
    value: function _continueFn() {
      return true;
    }
  }, {
    key: '_compute_next_words',
    value: function _compute_next_words(total_count) {
      var prediction_array = this._prediction_array;
      if (!(prediction_array && prediction_array.length > 0)) {
        return;
      }

      for (var i = 0; this.predictions.length < this.max_predictions && i < prediction_array.length && prediction_array[i].length > 1; i++) {
        if (!this._matches_partially(prediction_array[i])) {
          continue;
        }
        var predictions = this._create_predictions(prediction_array[i], total_count);
        this._compute_next_multi_words(predictions);
      }
    }
  }, {
    key: '_compute_next_multi_words',
    value: function _compute_next_multi_words(predictions) {
      var _this = this;

      _.each(predictions, function (prediction) {
        if (prediction !== undefined) {
          _this.predictions.push(prediction);
        }
      });
    }
  }, {
    key: '_get_word_hash',
    value: function _get_word_hash(model_item) {
      return this._loader.getMapHash(model_item[INDEX.MODEL.WORD_HASH]);
    }
  }, {
    key: '_matches_partially',
    value: function _matches_partially(prediction) {
      if (this.parsed_input.isWholeWord) {
        return true;
      }
      var word_hash = this._loader.getMapHash(prediction[INDEX.MODEL.WORD_HASH]);
      // TODO what if not a word hash ?
      if (!word_hash) {
        return false;
      }
      var word = word_hash[INDEX.MAP.WORD];
      return this.parsed_input.comparePartial(word);
    }
  }, {
    key: '_create_predictions',
    value: function _create_predictions(next_array, total_count) {
      var creator = new PredictonCreator({ loader: this._loader, model_item: next_array, total_count: total_count, parsed_input: this.parsed_input, continueFn: this._continueFn });
      return creator.getMultiPredictions(undefined, undefined, undefined, this._source);
    }
  }, {
    key: '_get_prediction_array',
    value: function _get_prediction_array() {
      // returns an array from which predictions are to be calculates
      if (this.parsed_input.isPrevious && this._word_model.length > 1) {
        return this._word_model[1];
      } else {
        return this._word_model[0];
      }
    }
  }, {
    key: '_loadInputModel',
    value: function _loadInputModel(word, callbackFn) {
      var nFileIndex = this._findFileIndex(word);
      this._loader.loadModel(nFileIndex, callbackFn);
    }
  }, {
    key: '_findFileIndex',
    value: function _findFileIndex(word) {
      return this._loader.getModelFileNo(word);
    }
  }, {
    key: 'max_predictions',
    set: function set(newValue) {
      this.max_predictions = newValue;
    },
    get: function get() {
      return this._max_predictions;
    }
  }]);

  return NGramPredictor;
}();

module.exports = NGramPredictor;

},{"../../../../lib/rh":24,"./consts":36,"./indices":41,"./prediction_creator":46,"./prediction_list":47}],45:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('./utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Prediction = function () {
  function Prediction(term, probability, count, source) {
    _classCallCheck(this, Prediction);

    this.probability = probability;
    this.term = term;
    this.count = count;
    this.source = source;
  }

  _createClass(Prediction, [{
    key: 'merge',
    value: function merge(new_item) {
      this.probability += new_item.probability;
      this.count = Math.max(this.count, new_item.count);
    }
  }, {
    key: 'compare',
    value: function compare(other) {
      return other.probability - this.probability;
    }
  }, {
    key: 'match',
    value: function match(other) {
      return _utils2.default.compareNoCase(other.term, this.term) === 0;
    }
  }]);

  return Prediction;
}();

module.exports = Prediction;

},{"./utils":52}],46:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Prediction = require('./prediction');
var search_utils = require('./utils');
var INDEX = require('./indices');
var InputParser = require('./input_parser');
var search_consts = require('./consts');

var PredictonCreator = function () {
  function PredictonCreator(_ref) {
    var loader = _ref.loader,
        model_item = _ref.model_item,
        total_count = _ref.total_count,
        parsed_input = _ref.parsed_input,
        continueFn = _ref.continueFn;

    _classCallCheck(this, PredictonCreator);

    this._model_item = model_item;
    this.parsed_input = parsed_input || new InputParser("");
    this._init();
    this._total_count = total_count;
    this._continueFn = continueFn || this._isStopWord;
    this._nextModelFn = this._nextModel;
    this._predictions = [];
    this._multi_prediction = false;
    this._loader = loader;
  }

  _createClass(PredictonCreator, [{
    key: '_init',
    value: function _init() {
      this.term = "";
      this.probability = 1;
      this._first_word = true;
      this.isFirstLevel = false;
      this._level = 0;
    }
  }, {
    key: 'getPrediction',
    value: function getPrediction(word_hash, isFirstLevel, previous, source) {
      this.word_hash = word_hash;
      this.isFirstLevel = isFirstLevel;
      this.previous = previous;
      this.source = source;
      if (this.isFirstLevel) {
        this._appendPreviousPredictions(this._model_item);
      }
      this._appendPrediction(this._model_item, word_hash);
      return this._createPrediction();
    }
  }, {
    key: 'getMultiPredictions',
    value: function getMultiPredictions(word_hash, isFirstLevel, previous, source) {
      this._multi_prediction = true;
      this.word_hash = word_hash;
      this.isFirstLevel = isFirstLevel;
      this.previous = previous;
      this.source = source;
      if (this.isFirstLevel) {
        this._appendPreviousPredictions(this._model_item);
      }
      this._appendPrediction(this._model_item, word_hash);
      return this._predictions;
    }
  }, {
    key: 'equalRemaingWord',
    value: function equalRemaingWord(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (word) {
        if (this.parsed_input.equalRemaingWord(word)) {
          return true;
        }
      }
      return false;
    }
  }, {
    key: '_appendPreviousPredictions',
    value: function _appendPreviousPredictions(model_item) {
      var previous_item = this._getPreviousItem(model_item);
      if (!previous_item) {
        return;
      }
      var previous_probaility = this._getPreviousProbability(previous_item);
      if (previous_probaility > search_consts.minPreviousThreshold) {
        this._appendPreviousTerm(previous_item);
      }
    }
  }, {
    key: '_getPreviousItem',
    value: function _getPreviousItem(model_item) {
      var previous_items = search_utils.getFirstLevelNextModel(model_item, true);
      if (previous_items) {
        var previous_item = search_utils.getSafeElement(previous_items, 0);
        return previous_item;
      }
    }
  }, {
    key: '_appendPreviousTerm',
    value: function _appendPreviousTerm(model_item) {
      var word = this._getword(model_item);
      if (word) {
        if (this.parsed_input.equalLastWord(word)) {
          return;
        }
        this.term = this.parsed_input.replaceLastWord(word);
        this._first_word = false;
      }
    }
  }, {
    key: '_createPrediction',
    value: function _createPrediction() {
      if (this.term !== "") {
        var suggestion_text = this.parsed_input.completeSuggestion(this.term);
        return new Prediction(suggestion_text, this.probability, 1, this.source);
      }
    }
  }, {
    key: '_appendPrediction',
    value: function _appendPrediction(model_item) {
      this.probability = this.probability * this._calculateProbability(model_item);
      this._update_term(model_item);
      if (this._shouldCreatePrediction(model_item)) {
        this._predictions.push(this._createPrediction());
      }
      if (this._continueFn(model_item)) {
        var next_model = this._nextModel(model_item);
        this._total_count = this._getCount(model_item);
        this._level++;
        this._first_word = false;
        this.isFirstLevel = false;
        this.word_hash = undefined;
        if (next_model) {
          this._appendPrediction(next_model);
        }
      }
    }
  }, {
    key: '_getPreviousProbability',
    value: function _getPreviousProbability(previous_item) {
      var total_count = this._getCount(this.model_item);
      var count = search_utils.getCountfromModel(previous_item);
      return count / total_count;
    }
  }, {
    key: '_update_term',
    value: function _update_term(model_item) {
      if (this.parsed_input.isPrevious) {
        this.term = this._nextTerm(model_item) + this.term;
      } else {
        this.term = this.term + this._nextTerm(model_item);
      }
    }
  }, {
    key: '_getword',
    value: function _getword(model_item, word_hash) {
      word_hash = word_hash || this._get_word_hash(model_item);
      return search_utils.getSafeElement(word_hash, INDEX.MAP.WORD);
    }
  }, {
    key: '_get_word_hash',
    value: function _get_word_hash(model_item) {
      return this._loader.getMapHash(model_item[INDEX.MODEL.WORD_HASH]);
    }
  }, {
    key: '_nextModel',
    value: function _nextModel(model_item) {
      var next_model = void 0;
      if (this.isFirstLevel) {
        next_model = search_utils.getFirstLevelNextModel(model_item, this.previous);
      } else {
        next_model = search_utils.getNextModel(model_item);
      }
      if (next_model && next_model.length > 0) {
        return search_utils.getFirstPrediction(next_model);
      }
    }
  }, {
    key: '_nextTerm',
    value: function _nextTerm(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (word) {
        return this._first_word ? this.parsed_input.completeWord(word) : " " + word;
      }
      return "";
    }
  }, {
    key: '_calculateProbability',
    value: function _calculateProbability(model_item) {
      var count = this._getCount(model_item);
      return count / this._total_count;
    }
  }, {
    key: '_getCount',
    value: function _getCount(model_item) {
      if (this.word_hash) {
        return search_utils.getCountfromWordHash(this.word_hash);
      } else {
        return search_utils.getCountfromModel(model_item);
      }
    }
  }, {
    key: '_shouldCreatePrediction',
    value: function _shouldCreatePrediction(model_item) {

      return this._multi_prediction && !this._isStopWord(model_item) && !this.equalRemaingWord(model_item);
    }
  }, {
    key: '_isStopWord',
    value: function _isStopWord(model_item) {
      var word = this._getword(model_item, this.word_hash);
      if (!word) {
        return false;
      }
      return this._loader.isStopWord(word);
    }
  }]);

  return PredictonCreator;
}();

module.exports = PredictonCreator;

},{"./consts":36,"./indices":41,"./input_parser":42,"./prediction":45,"./utils":52}],47:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PredictionList = function () {
  function PredictionList(list, parsed_input) {
    _classCallCheck(this, PredictionList);

    this.parsed_input = parsed_input;
    this._list = list || [];
  }

  _createClass(PredictionList, [{
    key: "isForInput",
    value: function isForInput(input, previous_input) {
      if (this.parsed_input.isPrevious) {
        return previous_input !== undefined && this.parsed_input.original_text === previous_input.original_text;
      } else {
        return this.parsed_input.original_text === input.original_text;
      }
    }
  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return this._list.length === 0;
    }
  }, {
    key: "predictions",
    get: function get() {
      return this._list;
    }
  }]);

  return PredictionList;
}();

module.exports = PredictionList;

},{}],48:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Loader = require('./loader');
var rh = require("../../../../lib/rh");
var _ = rh._;
var HistoryPredictor = require('./history_predictor');
var NgramPredictor = require('./ngram_predictor');
var GeneralPredictor = require('./general_predictor');
var Corrector = require('./corrector');
var search_consts = require('./consts');

//this.processResult.bind(this)

var PredictorsCreator = function () {
  function PredictorsCreator(history_reader, processResultFn) {
    _classCallCheck(this, PredictorsCreator);

    this._history_reader = history_reader;
    this._processResultFn = processResultFn;
  }

  _createClass(PredictorsCreator, [{
    key: '_createLoaders',
    value: function _createLoaders() {
      return _.map(this.projectPaths, function (path) {
        return new Loader(path);
      });
    }
  }, {
    key: 'createPredictors',
    value: function createPredictors(addFn, prevAddFn, addCorrectorFn) {
      var _this = this;

      this._addFn = addFn;
      this._prevaddFn = prevAddFn;
      this._addCorrectorFn = addCorrectorFn;
      var history_predictor = new HistoryPredictor(this._history_reader, this._processResultFn);
      this._addFn(history_predictor);

      var loaders = this._createLoaders();
      _.each(loaders, function (loader) {
        loader.init(_this.addPredictors.bind(_this));
      });
    }
  }, {
    key: 'addPredictors',
    value: function addPredictors(loader) {
      for (var i = 1; i <= loader.nGram; i++) {

        var ngp = new NgramPredictor({ loader: loader, level: i, callback: this._processResultFn });
        ngp.init();
        this._addFn(ngp);
      }
      for (var _i = 1; _i <= search_consts.previousnGram; _i++) {
        var _ngp = new NgramPredictor({ loader: loader, level: _i, callback: this._processResultFn, previous: true });
        _ngp.init();
        this._prevaddFn(_ngp);
      }

      var general_predictor = new GeneralPredictor(this._processResultFn, loader);
      this._addFn(general_predictor);

      var corrector = new Corrector(loader, this._processResultFn);
      this._addCorrectorFn(corrector);
    }
  }, {
    key: 'projectPaths',
    get: function get() {
      return rh.model.get(rh.consts('KEY_PROJECT_LIST'));
    }
  }]);

  return PredictorsCreator;
}();

module.exports = PredictorsCreator;

},{"../../../../lib/rh":24,"./consts":36,"./corrector":37,"./general_predictor":38,"./history_predictor":39,"./loader":43,"./ngram_predictor":44}],49:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
var consts = rh.consts;
var history_reader = require('./history_reader');
var InputParser = require('./input_parser');
var PredictonMerger = require('../common/merger');
var TopicCounter = require('./topic_counter');
var search_utils = require('./utils');
var search_consts = require('./consts');
var Seamaphore = require('./../../../common/counting_seamaphore');
var PredictorCreator = require('./predictors_creator');
var SearchHandler = require('../topic/handler');

var max_predictions = 5;

var SearchController = function () {
  function SearchController(widget) {
    var _this = this;

    _classCallCheck(this, SearchController);

    this.widget = widget;
    this._predictors = [];
    this._correctors = [];
    this._previous_predictors = [];
    this.initHandleKeyHash();
    this.max_predictions = max_predictions;
    this.predicton_merger = new PredictonMerger([]);
    widget.model.subscribe(consts('KEY_PROJECT_LIST'), function () {
      _this.init();
    });
    this.search_handler = new SearchHandler(widget);
  }

  _createClass(SearchController, [{
    key: 'init',
    value: function init() {
      var history_list = rh.storage.fetch(consts('PREV_SEARCH_KEY'));
      history_reader.initHistory(history_list);
      this.create_predictors();
      this.widget.model.csubscribe('EVT_CLOSE_SEARCH_SUGGESTION', this.closeSuggestions.bind(this));
      this.widget.model.csubscribe('EVT_SEARCH_TERM', this.search.bind(this));
    }
  }, {
    key: 'search',
    value: function search() {
      var text = this.widget.get(consts('KEY_SEARCH_TERM'));
      this.search_handler.showSearchResults(text);
    }
  }, {
    key: 'create_predictors',
    value: function create_predictors() {
      this._predictors = [];
      var predictor_creator = new PredictorCreator(history_reader, this.processResult.bind(this));
      predictor_creator.createPredictors(this.addPredictor.bind(this), this.addPrevPredictor.bind(this), this.addCorrector.bind(this));
    }
  }, {
    key: 'addPredictor',
    value: function addPredictor(predictor) {
      this._predictors.push(predictor);
    }
  }, {
    key: 'addPrevPredictor',
    value: function addPrevPredictor(predictor) {
      this._previous_predictors.push(predictor);
    }
  }, {
    key: 'addCorrector',
    value: function addCorrector(corrector) {
      this._correctors.push(corrector);
    }
  }, {
    key: 'showSuggestions',
    value: function showSuggestions(keyEvt) {
      this._initSuggestions(keyEvt);
      this._calculateSugguestions();
    }
  }, {
    key: '_initSuggestions',
    value: function _initSuggestions(keyEvt) {
      this._initResult();
      this._initInputs(keyEvt);
      this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
    }
  }, {
    key: '_initInputs',
    value: function _initInputs(keyEvt) {
      this.parsed_input = new InputParser(keyEvt.text, false, keyEvt.selStart, false);
      if (search_utils.isPrevious(keyEvt)) {
        this._previous_input = new InputParser(keyEvt.text, false, keyEvt.selStart, true);
      }
    }
  }, {
    key: '_calculateSugguestions',
    value: function _calculateSugguestions() {
      var _this2 = this;

      this._resutSeamaphore.wait(this._predictorCount());
      _.each(this._predictors, function (predictor) {
        predictor.getPredictions(_this2.parsed_input);
      });
      if (this._previous_input) {
        _.each(this._previous_predictors, function (predictor) {
          predictor.getPredictions(_this2._previous_input);
        });
      }
    }
  }, {
    key: '_clearPredictors',
    value: function _clearPredictors() {
      _.each(this._predictors, function (predictor) {
        predictor.clear();
      });
      _.each(this._previous_predictors, function (predictor) {
        predictor.clear();
      });
      _.each(this._correctors, function (corrector) {
        corrector.clear();
      });
    }
  }, {
    key: '_predictorCount',
    value: function _predictorCount() {
      var count = this._predictors.length;
      if (this._previous_input) {
        count += this._previous_predictors.length;
      }
      return count;
    }
  }, {
    key: '_initResult',
    value: function _initResult() {
      if (this.predicton_merger) {
        this.predicton_merger.clear();
      }
      this.widget.publish("selected", undefined);
      this._previous_input = undefined;
      this._computing_correction = false;
    }
  }, {
    key: '_clearResult',
    value: function _clearResult() {
      this._resetMovement();
      this._previous_input = undefined;
      this.parsed_input = undefined;
      this._resutSeamaphore = undefined;
      this._clearPredictors();
    }
  }, {
    key: 'isSuggestionsOpen',
    value: function isSuggestionsOpen() {
      var predictions = this.widget.get(consts("SEARCH_RESULTS_KEY"));
      return predictions && predictions.length > 0;
    }
  }, {
    key: 'processResult',
    value: function processResult(predictionList, loader) {
      if (!predictionList.isForInput(this.parsed_input, this._previous_input)) {
        return;
      }
      if (!predictionList.isEmpty()) {
        this.predicton_merger.merge(predictionList.predictions);
        var counter = new TopicCounter(loader);
        this.predictions = counter.computeCounts(this.predictions, this.parsed_input);
      }
      this._resutSeamaphore.signal();
    }
  }, {
    key: 'onResultComplete',
    value: function onResultComplete() {
      if (this.needCorrection()) {
        this.doCorrection();
      } else {
        this.predictions.splice(this.max_predictions);
        this.widget.publish(consts("SEARCH_RESULTS_KEY"), this.predictions);
        this._clearResult();
      }
    }
  }, {
    key: 'needCorrection',
    value: function needCorrection() {
      return !this._computing_correction && this.predictions.length === 0 && this.parsed_input.trimmedText !== "";
    }
  }, {
    key: 'doCorrection',
    value: function doCorrection() {
      var _this3 = this;

      this._computing_correction = true;
      this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
      this._resutSeamaphore.wait(this._correctors.length);
      _.each(this._correctors, function (corrector) {
        corrector.getCorrections(_this3.parsed_input);
      });
    }
  }, {
    key: 'canDelete',
    value: function canDelete(id) {
      var prediction = this.predictions[id];
      if (prediction === undefined) {
        return false;
      }
      return prediction.source === search_consts.PREDICTOR_SOURCE_ID.HISTORY_PREDICTOR;
    }
  }, {
    key: 'handleDelete',
    value: function handleDelete(id) {
      var prediction = this.predictions[id];
      this._deleteFromHistory(prediction.term);
      this._removePrediction(id);
      this.widget.publish("history_deleted", true);
    }
  }, {
    key: '_removePrediction',
    value: function _removePrediction(id) {
      this.predictions.splice(id, 1);
      this.widget.publish(consts("SEARCH_RESULTS_KEY"), this.predictions);
    }
  }, {
    key: 'handleClick',
    value: function handleClick(id) {
      var history_deleted = this.widget.get("history_deleted");
      if (history_deleted) {
        return;
      }
      var prediction = this.predictions[id];
      if (prediction === undefined) {
        return;
      }

      var new_text = prediction.term;
      this._addToHistory(new_text);
      this.widget.publish(consts('KEY_SEARCH_TERM'), new_text);
      this.widget.publish(rh.consts('EVT_SEARCH_TERM'), true);
    }
  }, {
    key: 'handleFocusOut',
    value: function handleFocusOut(key, focus_key) {
      var history_deleted = this.widget.get("history_deleted");
      if (!history_deleted) {
        this.widget.publish(key, false);
      } else {
        this.widget.publish("history_deleted", false);
        this.widget.publish(focus_key, true);
      }
    }
  }, {
    key: 'getFirstSuggestionIndex',
    value: function getFirstSuggestionIndex(length, down) {
      return down ? 0 : length - 1;
    }
  }, {
    key: 'getNextSuggestionIndex',
    value: function getNextSuggestionIndex(curr_selected, length, down) {
      var move = down ? 1 : length - 1;
      curr_selected = curr_selected === undefined ? 0 : curr_selected;
      curr_selected = (curr_selected + move) % length;
      return curr_selected;
    }
  }, {
    key: 'handleArrowKey',
    value: function handleArrowKey(keyEvt) {
      var curr_selected = this.widget.get("selected");
      var down = keyEvt.keyCode === 40;
      var length = this.getPredictionsLength();
      if (length > 0) {
        if (curr_selected === undefined) {
          curr_selected = this.getFirstSuggestionIndex(length, down);
        } else {
          curr_selected = this.getNextSuggestionIndex(curr_selected, length, down);
        }
        this.widget.publish("selected", curr_selected);
        var new_text = this.getNewInputText(this.results[curr_selected]);
        this.widget.publish(consts('KEY_SEARCH_TERM'), new_text);
      }
    }
  }, {
    key: 'getNewInputText',
    value: function getNewInputText(prediction) {
      return prediction.term;
    }
  }, {
    key: 'getPredictionsLength',
    value: function getPredictionsLength() {
      var length = void 0;
      this.results = this.widget.get(consts("SEARCH_RESULTS_KEY"));
      if (this.results) {
        length = this.results.length;
      }
      return length;
    }
  }, {
    key: 'closeSuggestions',
    value: function closeSuggestions() {
      this._clearResult();
      this.widget.publish("selected", undefined);
      this.original_parsed_input = undefined;
      this.widget.publish(consts("SEARCH_RESULTS_KEY"), []);
    }
  }, {
    key: '_deleteFromHistory',
    value: function _deleteFromHistory(text) {
      history_reader.delete(text);
      this._saveHistory();
    }
  }, {
    key: '_addToHistory',
    value: function _addToHistory(text) {
      if (text && text !== "") {
        history_reader.add({
          text: text.trim(),
          count: 10
        }); // TODO change
        this._saveHistory();
      }
    }
  }, {
    key: '_saveHistory',
    value: function _saveHistory() {
      rh.storage.persist(consts('PREV_SEARCH_KEY'), history_reader.getHistory());
    }
  }, {
    key: 'handleShowSuggestion',
    value: function handleShowSuggestion(keyEvt) {
      if (keyEvt.text === "" || search_utils.shouldShowSuggestion(keyEvt) === false) {
        this.closeSuggestions();
      } else {
        this.showSuggestions(keyEvt);
      }
    }
  }, {
    key: 'handleReturn',
    value: function handleReturn(keyEvt) {
      if (keyEvt.text !== "") {
        this._addToHistory(keyEvt.text);
        this.closeSuggestions();
        this.widget.publish(consts('KEY_SEARCH_TERM'), keyEvt.text);
        this.widget.publish(consts('EVT_SEARCH_TERM'), true);
      }
    }
  }, {
    key: '_isMovementKey',
    value: function _isMovementKey(keyCode) {
      return [38, 39, 40].indexOf(keyCode) >= 0;
    }
  }, {
    key: '_resetMovement',
    value: function _resetMovement() {
      this.original_parsed_input = undefined;
      this.widget.publish("selected", undefined);
    }
  }, {
    key: '_isHandlingCursorMove',
    value: function _isHandlingCursorMove() {
      var curr_selected = this.widget.get("selected");
      return curr_selected !== undefined;
    }
  }, {
    key: 'initHandleKeyHash',
    value: function initHandleKeyHash() {
      this.handle_key_hash = {
        up: this.handleArrowKey.bind(this),
        down: this.handleArrowKey.bind(this),
        backspace: this.handleBackSpace.bind(this),
        return: this.handleReturn.bind(this),
        default: this.handleShowSuggestion.bind(this),
        escape: this.handleEscape.bind(this),
        right: this.handleRight.bind(this)
      };
    }
  }, {
    key: 'handleRight',
    value: function handleRight(keyEvt) {
      if (!this._isHandlingCursorMove()) {
        this._resetMovement();
        return this.handleShowSuggestion(keyEvt);
      }
      if (search_utils.shouldAppendSpace(keyEvt)) {
        keyEvt.text += " ";
        keyEvt.selStart += 1;
        this.widget.publish(consts('KEY_SEARCH_TERM'), keyEvt.text);
      }
      this._resetMovement();
      this.handleShowSuggestion(keyEvt);
      return false;
    }
  }, {
    key: 'handleBackSpace',
    value: function handleBackSpace(keyEvt) {
      return this.handleShowSuggestion(keyEvt);
    }
  }, {
    key: 'handleEscape',
    value: function handleEscape() {
      this.closeSuggestions();
    }
  }, {
    key: 'handleKey',
    value: function handleKey(event) {

      var keyCode = event.keyCode;
      var keyEvt = {
        keyCode: keyCode,
        selStart: event.target.selectionStart,
        text: event.target.value
      };
      if (!this._isMovementKey(keyCode)) {
        this._resetMovement();
      }
      var index = _.getKeyIndex(keyCode);

      if (index === undefined) {
        return true;
      }
      var handleFn = this.handle_key_hash[index];
      if (handleFn) {
        return handleFn(keyEvt);
      }
    }
  }, {
    key: 'predictions',
    get: function get() {
      return this.predicton_merger.items;
    },
    set: function set(predictions) {
      this.predicton_merger = new PredictonMerger(predictions);
    }
  }]);

  return SearchController;
}();

rh.controller('SearchController', SearchController);

},{"../../../../lib/rh":24,"../common/merger":33,"../topic/handler":53,"./../../../common/counting_seamaphore":25,"./consts":36,"./history_reader":40,"./input_parser":42,"./predictors_creator":48,"./topic_counter":51,"./utils":52}],50:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SortedSet = function () {
  function SortedSet(set) {
    _classCallCheck(this, SortedSet);

    this._set = set || [];
    this._initialised = false;
  }

  _createClass(SortedSet, [{
    key: "intersect",
    value: function intersect(other) {
      if (!Array.isArray(other)) {
        other = other.set;
      }
      var new_set = [];
      var count = 0;
      var i = 0;var j = 0;
      for (; i < this._set.length && j < other.length;) {
        if (this._set[i] < other[j]) {
          i++;
        } else if (this._set[i] > other[j]) {
          j++;
        } else {
          new_set[count++] = this._set[i];
          i++;j++;
        }
      }
      this._set = new_set;
    }
  }, {
    key: "intersectOrSet",
    value: function intersectOrSet(other) {
      if (this._initialised) {
        this.intersect(other);
      } else {
        if (!Array.isArray(other)) {
          other = other.set;
        }
        this.set = other;
        this._initialised = true;
      }
    }
  }, {
    key: "intersectCount",
    value: function intersectCount(other) {
      if (!Array.isArray(other)) {
        other = other.set;
      }
      var count = 0;
      var i = 0;
      var j = 0;
      for (; i < this._set.length && j < other.length;) {
        if (this._set[i] < other[j]) {
          i++;
        } else if (this._set[i] > other[j]) {
          j++;
        } else {
          count++;
          i++;j++;
        }
      }
      return count;
    }
  }, {
    key: "set",
    set: function set(_set) {
      this._set = _set || [];
    },
    get: function get() {
      return this._set;
    }
  }, {
    key: "length",
    get: function get() {
      return this._set.length;
    }
  }]);

  return SortedSet;
}();

module.exports = SortedSet;

},{}],51:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SortedSet = require('./sorted_set');
var Parser = require('./input_parser');
var Prediction = require('./prediction');
var rh = require("../../../../lib/rh");
var _ = rh._;
var INDEX = require("./indices");

var TopicCounter = function () {
  function TopicCounter(loader) {
    _classCallCheck(this, TopicCounter);

    this.newPredictions = [];
    this.predictionSet = new SortedSet();
    this.inputSet = new SortedSet();
    this._loader = loader;
  }

  _createClass(TopicCounter, [{
    key: 'computeCounts',
    value: function computeCounts(predictions, parsed_input) {
      var _this = this;

      this.newPrediction = [];
      this.parsed_input = parsed_input;
      _.each(predictions, function (prediction) {
        _this.addUpdatedPrediction(prediction);
      });
      return this.newPredictions;
    }
  }, {
    key: 'addUpdatedPrediction',
    value: function addUpdatedPrediction(prediction) {
      var count = 1;
      if (this._loader !== undefined) {
        this.createPredictionSet(prediction);
        count = this.computeTopicCount();
      }
      if (count > 0) {
        var newPrdiction = new Prediction(prediction.term, prediction.probability, count, prediction.source);
        this.newPredictions.push(newPrdiction);
      }
    }
  }, {
    key: 'computeTopicCount',
    value: function computeTopicCount() {
      return this.predictionSet.set.length;
    }
  }, {
    key: 'createPredictionSet',
    value: function createPredictionSet(prediction) {
      var _this2 = this;

      this.predictionSet = new SortedSet();
      var parsed_prediction = new Parser(prediction.term, true);
      _.each(parsed_prediction.words, function (word, index) {
        _this2._addWordToSet(word, _this2.predictionSet, index);
      });
    }
  }, {
    key: 'initInput',
    value: function initInput(parsed_input) {
      var _this3 = this;

      this.inputSet = new SortedSet();
      _.each(parsed_input.words, function (word) {
        _this3._addWordToSet(word, _this3.inputSet);
      });
    }
  }, {
    key: '_addWordToSet',
    value: function _addWordToSet(word, set) {
      if (this._loader.isStopWord(word)) {
        return;
      }
      var wordHash = this._loader._getHashForWord(word);
      if (wordHash && wordHash.length > INDEX.MAP.TOPICS) {
        set.intersectOrSet(wordHash[INDEX.MAP.TOPICS]);
      }
    }
  }]);

  return TopicCounter;
}();

module.exports = TopicCounter;

},{"../../../../lib/rh":24,"./indices":41,"./input_parser":42,"./prediction":45,"./sorted_set":50}],52:[function(require,module,exports){
(function (global){
'use strict';

var INDEX = require('./indices');

var _exports = {
  getNextModel: function getNextModel(model_item) {

    if (model_item && Array.isArray(model_item) && model_item.length > INDEX.MODEL.NEXT_MODEL) {
      return model_item[INDEX.MODEL.NEXT_MODEL];
    }
  },
  getFirstLevelNextModel: function getFirstLevelNextModel(model_item, bprevious) {
    if (model_item && Array.isArray(model_item)) {
      if (!bprevious && model_item.length > INDEX.FIRST_PREDICTION.NEXT) {
        return model_item[INDEX.FIRST_PREDICTION.NEXT];
      }
      if (bprevious && model_item.length > INDEX.FIRST_PREDICTION.PREVIOUS) {
        return model_item[INDEX.FIRST_PREDICTION.PREVIOUS];
      }
    }
  },

  getFirstPrediction: function getFirstPrediction(model_item) {
    if (model_item && Array.isArray(model_item) && model_item.length > 0 && Array.isArray(model_item[0])) {
      return model_item[0];
    }
  },
  compareNoCase: function compareNoCase(word1, word2) {
    if (global.compare !== undefined) {
      return global.compare(word1, word2);
    } else {
      return word1 === word2 ? 0 : -1;
    }
  },
  hammingDistance: function hammingDistance(word1, word2) {
    var minLength = Math.min(word1.length, word2.length);
    var hammingDistance = 0;
    for (var i = 0; i < minLength; i++) {
      if (word1[i] !== word2[i]) {
        hammingDistance++;
      }
    }
    if (word1.length > minLength) {
      hammingDistance += word1.length - minLength;
    }
    return hammingDistance;
  },
  isPrevious: function isPrevious(keyEvt) {
    return keyEvt.selStart < keyEvt.text.length;
  },
  shouldShowSuggestion: function shouldShowSuggestion(keyEvt) {
    var text = keyEvt.text;
    var selStart = keyEvt.selStart;
    if (selStart === 0 || selStart === text.length) {
      return true;
    }
    if (text.length > 0) {
      // if cursor is before the end
      return text[selStart] === ' ' || text[selStart - 1] === ' ';
    }
    return false;
  },
  shouldAppendSpace: function shouldAppendSpace(keyEvt) {
    var text = keyEvt.text;
    var selStart = keyEvt.selStart;
    if (text.length > 0 && selStart === text.length) {
      //cusror at last
      return text[text.length - 1] !== " ";
    }
    return false;
  },
  getSafeElement: function getSafeElement(arr, index) {
    if (arr && Array.isArray(arr) && arr.length > index) {
      return arr[index];
    }
  },
  getCountfromModel: function getCountfromModel(model_item) {
    if (Array.isArray(model_item) && model_item.length > INDEX.MODEL.COUNT) {
      return model_item[INDEX.MODEL.COUNT];
    }
    return 0;
  },
  getCountfromWordHash: function getCountfromWordHash(word_hash) {
    if (Array.isArray(word_hash) && word_hash.length > INDEX.MAP.COUNT) {
      return word_hash[INDEX.MAP.COUNT];
    }
    return 0;
  }
};

module.exports = _exports;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./indices":41}],53:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var QueryProcessor = require('./query/processor');
var rh = require("../../../../lib/rh");
var _ = rh._;
var consts = rh.consts;
var Loader = require('./query/loader');
var ResultMerger = require('../common/merger');
var Seamaphore = require('../../../common/counting_seamaphore');
var SearchResult = require('./result');

module.exports = function () {
  function SearchHandler(widget) {
    var _this = this;

    var max_results = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;

    _classCallCheck(this, SearchHandler);

    this.widget = widget;
    this.initDone = false;
    this.max_results = max_results;
    this.queryProcessors = [];
    this.merger = new ResultMerger([]);
    this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
    this.widget.model.subscribe(consts('KEY_PROJECT_LIST'), function () {
      _this.init();
    });
  }

  _createClass(SearchHandler, [{
    key: 'init',
    value: function init() {
      var _this2 = this;

      if (!this.initDone) {
        var loaders = this._createLoaders();
        _.each(loaders, function (loader, id) {
          loader.init(id, _this2.addProcessors.bind(_this2));
        });
        this.initDone = true;
      }
    }
  }, {
    key: 'addProcessors',
    value: function addProcessors(loader) {
      this.queryProcessors.push(new QueryProcessor(loader));
    }
  }, {
    key: '_createLoaders',
    value: function _createLoaders() {
      return _.map(this.projectPaths, function (path) {
        return new Loader(path);
      });
    }
  }, {
    key: 'showSearchResults',
    value: function showSearchResults(text) {
      var _this3 = this;

      var isNewQuery = _.find(this.queryProcessors, function (processor) {
        return processor.isNewQuery(text, _this3.searchOpts);
      });
      if (isNewQuery) {
        this.merger = new ResultMerger([]);
        this._resutSeamaphore = new Seamaphore(this.onResultComplete.bind(this));
        this._resutSeamaphore.wait(this.processorCount);
        //rh.model.publish(rh.consts('EVT_SEARCH_IN_PROGRESS'), true, {sync: true});
        //rh.model.publish(rh.consts('KEY_SEARCH_PROGRESS'), 0, {sync: true});
        _.each(this.queryProcessors, function (processor) {
          processor.search(text, _this3.searchOpts, _this3.topicCallback.bind(_this3), _this3.onSearchResults.bind(_this3));
          var glossaryResult = processor.searchGlossary(text);
          _this3.processGlossaryResults(text, glossaryResult);
        });
      }
    }
  }, {
    key: 'onSearchResults',
    value: function onSearchResults(text, searchResult) {
      this.processTopicsResults(text, searchResult);
      this._resutSeamaphore.signal();
    }
  }, {
    key: 'onResultComplete',
    value: function onResultComplete() {
      this.widget.publish(rh.consts('EVT_SEARCH_IN_PROGRESS'), false, {
        sync: true
      });
      var resultsParams = _.mapToEncodedString(_.extend({
        rhsearch: this.text /*, { rhsyns: searchResults.syns }*/ }));
      this.widget.publish(consts('KEY_SEARCH_RESULT_PARAMS'), resultsParams);
      this.widget.publish('.p.searchresults', this.merger.items);
    }
  }, {
    key: 'topicCallback',
    value: function topicCallback(id, summary, url) {
      this.widget.publish('.p.searchsummary' + id, summary);
      this.widget.publish('.p.searchurl' + id, url);
    }
  }, {
    key: 'processGlossaryResults',
    value: function processGlossaryResults(text, glossary_result) {
      var term = glossary_result && Object.keys(glossary_result)[0];
      this.widget.publish(consts('KEY_GLOSSARY_RESULT_TERM'), term);
      this.widget.publish(consts('KEY_GLOSSARY_RESULT'), glossary_result[term]);
    }
  }, {
    key: 'processTopicsResults',
    value: function processTopicsResults(text, topicResults) {
      this.text = text;
      var processedResult = _.map(topicResults, function (result) {
        return new SearchResult(result);
      });
      this.merger.merge(processedResult);
    }
  }, {
    key: 'projectPaths',
    get: function get() {
      return rh.model.get(rh.consts('KEY_PROJECT_LIST'));
    }
  }, {
    key: 'processorCount',
    get: function get() {
      return this.queryProcessors.length;
    }
  }, {
    key: 'searchOpts',
    get: function get() {
      return {
        andSearch: rh.model.get(rh.consts('KEY_AND_SEARCH')) === '1',
        cbt: rh.model.cget('KEY_TAG_EXPRESSION'),
        origin: rh.model.cget('KEY_TOPIC_ORIGIN')
      };
    }
  }]);

  return SearchHandler;
}();

},{"../../../../lib/rh":24,"../../../common/counting_seamaphore":25,"../common/merger":33,"./query/loader":57,"./query/processor":58,"./result":61}],54:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

module.exports = function () {
  function SearchMetadata(data) {
    _classCallCheck(this, SearchMetadata);

    this.data = JSON.parse(data);
  }

  _createClass(SearchMetadata, [{
    key: "getTopicData",
    value: function getTopicData(id) {
      return this.topicData[id];
    }
  }, {
    key: "getTopicSummary",
    value: function getTopicSummary(id) {
      return this.topicData[id] && this.topicData[id].summary;
    }
  }, {
    key: "getTopicNextId",
    value: function getTopicNextId(id) {
      return this.topicData[id] && this.topicData[id].next;
    }
  }, {
    key: "settings",
    get: function get() {
      return this.data.settings;
    }
  }, {
    key: "topicData",
    get: function get() {
      return this.data.metadata;
    }
  }, {
    key: "context",
    get: function get() {
      return this.settings.context;
    }
  }, {
    key: "fields",
    get: function get() {
      return this.settings.fields;
    }
  }]);

  return SearchMetadata;
}();

},{}],55:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;

module.exports = function () {
  function CbtFilter(fields, origin, tagExprs) {
    _classCallCheck(this, CbtFilter);

    this.fileds = fields;
    this.origin = origin;
    this.tagExprs = tagExprs;
  }

  _createClass(CbtFilter, [{
    key: "filter",
    value: function filter(itemList) {
      var _this = this;

      return _.reduce(itemList, function (filtered, item) {
        return filtered || _this._isFilterd(item);
      }, false);
    }
  }, {
    key: "_isFilterd",
    value: function _isFilterd(item) {
      var cbt = this.getCbt(item);
      return cbt && this._isFilteredCbt(cbt);
    }
  }, {
    key: "_isFilteredCbt",
    value: function _isFilteredCbt(cbt) {
      var _this2 = this;

      var ids = cbt.split(';');
      return !_.any(ids, function (id) {
        return _.evalTagExpression(id, _this2.tagExprs, _this2.origin);
      });
    }
  }, {
    key: "getCbt",
    value: function getCbt(item) {
      return item && item.attributes && item.attributes.length > 0 && _.map(item.attributes, function (attr) {
        return attr.value;
      }).join(";");
    }
  }]);

  return CbtFilter;
}();

},{"../../../../../lib/rh":24}],56:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var lunr = require('lunr');
var Synonymns = require('../../common/synonymns');
var rh = require("../../../../../lib/rh");
var _ = rh._;

module.exports = function () {
  function SearchDb(content, settings) {
    _classCallCheck(this, SearchDb);

    this.init(content, settings);
  }

  _createClass(SearchDb, [{
    key: 'init',
    value: function init(content) {
      var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.settings = settings;
      this.processSyn();
      this.registerFunctions();
      this.setTokenizer();
      this.db = lunr.Index.load(content);
    }
  }, {
    key: 'registerFunctions',
    value: function registerFunctions() {
      var pipelineFunction = this.replaceSynonymn.bind(this);
      var addQueryFunction = this.addQuery.bind(this);

      lunr.Pipeline.registerFunction(pipelineFunction, 'replaceSynonymn');
      lunr.Pipeline.registerFunction(addQueryFunction, 'addQuery');
    }
  }, {
    key: 'setTokenizer',
    value: function setTokenizer() {
      lunr.tokenizer.separator = /[\s\.\-\'\,\n;\:\\\/\"]+/;
    }
  }, {
    key: 'processSyn',
    value: function processSyn() {
      var synonymns_words = this.settings && this.settings.synonyms || {};
      var synonyms = new Synonymns(synonymns_words);
      this.settings.rootWords = synonyms.rootWords;
    }
  }, {
    key: 'addQuery',
    value: function addQuery(token) {
      var word = token.toString();
      this.queryWords.push(word);
      this.queryWords = _.unique(this.queryWords);
      return token;
    }
  }, {
    key: 'replaceSynonymn',
    value: function replaceSynonymn(token) {
      var _this = this;

      var word = token.toString();
      var root = this.settings && this.settings.rootWords && this.settings.rootWords[word];
      if (root && root !== word) {
        return token.update(function () {
          return _this.settings.rootWords[word];
        });
      } else {
        return token;
      }
    }
  }, {
    key: 'addStopWords',
    value: function addStopWords(index, stopWords) {
      if (stopWords) {
        var stopWordFilter = lunr.generateStopWordFilter(stopWords);
        index.pipeline.before(lunr.stopWordFilter, stopWordFilter);
        index.pipeline.remove(lunr.stopWordFilter);
      }
    }
  }, {
    key: 'search',
    value: function search(query) {
      var _this2 = this;

      this.queryWords = [];
      var params = query.getParams(this.isStopWord.bind(this)).trim();
      var search_results = rh._.isEmptyString(params) ? [] : this.db.search(params);
      return query.opts ? _.filter(search_results, function (result) {
        return _this2.match(result, query.opts);
      }) : search_results;
    }
  }, {
    key: 'match',
    value: function match(result, opts) {
      var _this3 = this;

      var retVal = true;
      if (opts.andSearch) {
        var matchingWords = result && result.matchData.metadata || [];
        _.each(this.queryWords, function (word) {
          if (!matchingWords[word] && !_this3.isStopWord(word)) {
            retVal = false;
          }
        });
      }
      return retVal;
    }
  }, {
    key: 'isStopWord',
    value: function isStopWord(word) {
      return this.settings.stopWords.indexOf(word.toLowerCase()) !== -1;
    }
  }, {
    key: 'searchGlossary',
    value: function searchGlossary(query) {
      var _this4 = this;

      var glossary = this.settings && this.settings.glossary || {};
      var queryTokens = this.getRootTokens(query);
      var gossaryResults = _.reduce(glossary, function (result, definition, term) {
        var gloTokens = _this4.getRootTokens(term);
        if (queryTokens.length === gloTokens.length && _this4.matchTokens(queryTokens, gloTokens)) {
          result[term] = definition;
        }
        return result;
      }, {});
      return gossaryResults;
    }
  }, {
    key: 'matchTokens',
    value: function matchTokens(set1, set2) {
      var matched = true;
      _.each(set1, function (term1, index) {
        if (term1 !== set2[index]) {
          matched = false;
        }
      });
      return matched;
    }
  }, {
    key: 'getRootTokens',
    value: function getRootTokens(text) {
      var _this5 = this;

      var tokens = lunr.tokenizer(text);
      return _.map(tokens, function (token) {
        var word = token.toString();
        return _this5.settings.rootWords[word] || word;
      });
    }
  }, {
    key: 'export',
    value: function _export() {
      return this.db.toJSON();
    }
  }]);

  return SearchDb;
}();

},{"../../../../../lib/rh":24,"../../common/synonymns":35,"lunr":23}],57:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;
var Paths = require('../../common/paths');
module.exports = function () {
  function SearchLoader() {
    var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";

    _classCallCheck(this, SearchLoader);

    this._paths = new Paths(path);
  }

  _createClass(SearchLoader, [{
    key: "init",
    value: function init(id, callbackFn) {
      this.id = id;
      callbackFn(this);
    }
  }, {
    key: "loadDB",
    value: function loadDB(callbackFn) {
      var path = this._paths.getSearchDbFilePath();
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(data);
        }
      }, true);
    }
  }, {
    key: "getId",
    value: function getId(id) {
      return this.id + "_" + id;
    }
  }, {
    key: "getUrl",
    value: function getUrl(url) {
      return this._paths._getRelativePath(url);
    }
  }, {
    key: "loadMetaData",
    value: function loadMetaData(callbackFn) {
      var path = this._paths.getMetadataFilePath();
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(data);
        }
      }, true);
    }
  }, {
    key: "loadTextData",
    value: function loadTextData(query, id, callbackFn) {
      var path = this._paths.getTextFilePath(id);
      _.loadScript(path, true, function () {
        var data = _.exports();
        if (callbackFn) {
          callbackFn(query, id, data);
        }
      }, true);
    }
  }]);

  return SearchLoader;
}();

},{"../../../../../lib/rh":24,"../../common/paths":34}],58:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SearchDb = require('./db');
var Query = require('./query');
var Summary = require('./summary');
var rh = require("../../../../../lib/rh");
var _ = rh._;
var Seamaphore = require('../../../../common/counting_seamaphore');
var TextMerger = require('../text_merger');
var SearchMetadata = require('../metadata');
var CbtFilter = require("./cbt");

module.exports = function () {
  function SearchProcessor(loader) {
    var _this = this;

    _classCallCheck(this, SearchProcessor);

    this.loader = loader;
    this.metadataLoaded = this.dbLoaded = false;
    this.loader.loadDB(function (dbContent) {
      _this.initDB(dbContent);
    });
    this.loader.loadMetaData(function (metadata) {
      _this.initMetadata(metadata);
    });
  }

  _createClass(SearchProcessor, [{
    key: 'initMetadata',
    value: function initMetadata(metadata) {
      this.metadataLoaded = true;
      this.metadata = new SearchMetadata(metadata);

      if (!this.init && this.dbContent) {
        this.initDB(this.dbContent);
        this.dbContent = null;
      }
    }
  }, {
    key: 'initDB',
    value: function initDB(dbContent) {
      if (this.metadataLoaded) {
        this.db = new SearchDb(dbContent, this.metadata.settings);
        this.init = true;
        if (this.waiting) {
          this.waiting = false;
          this.getResults();
        }
      } else {
        this.dbContent = dbContent;
      }
    }
  }, {
    key: 'topicsLoaded',
    value: function topicsLoaded() {
      if (this.exactSearch) {
        this.filter();
      }
    }
  }, {
    key: 'isNewQuery',
    value: function isNewQuery(text, opts) {
      var query = this.buildQuery(text, opts);
      return !this.query || !this.query.isEqual(query);
    }
  }, {
    key: 'search',
    value: function search(text, opts, callback, resultsCallback) {
      var query = this.buildQuery(text, opts);
      if (this.isNewQuery(text, opts)) {
        this.text = text;
        this.seamaphore = new Seamaphore(this.topicsLoaded.bind(this));
        this.query = query;
        this.topicCallback = callback;
        this.opts = opts;
        this.summaries = {};
        this.resultsCallback = resultsCallback;
        this.exactSearch = this.query.exactMatch;
        this.getResults();
      }
    }
  }, {
    key: 'filter',
    value: function filter() {
      var _this2 = this;

      var terms = this.query.exaxctTerms;
      this.results = _.filter(this.results, function (result) {
        var topicText = _this2.resultsMetadata[result.id].topicText;
        return _this2.matchesExact(terms, topicText, result.id);
      });
      this.resultsCallback(this.query.text, this.results);
      this.processSummary();
    }
  }, {
    key: 'processSummary',
    value: function processSummary() {
      var _this3 = this;

      _.each(this.results, function (result) {
        var id = result.id;
        _this3.topicCallback(_this3.loader.getId(id), _this3.summaries[id], _this3.createUrl(id, _this3.query.exaxctTerms));
      });
    }
  }, {
    key: 'matchesExact',
    value: function matchesExact(terms, text, id) {
      var _this4 = this;

      var found = false;
      _.each(terms, function (term) {
        var idx = text.toLowerCase().indexOf(term);
        if (idx !== -1) {
          _this4.addSummary(id, text, idx, term);
          found = true;
        }
      });
      return found;
    }
  }, {
    key: 'addSummary',
    value: function addSummary(id, text, idx, term) {
      var summary = this.metadata.getTopicSummary(id);
      if (this.metadata.context && summary) {
        this.summaries[id] = summary;
      } else {
        var summaryExtractor = new Summary(this.metadata.topicData, this.metadata.context);
        this.summaries[id] = summaryExtractor.getSummaryText(text, idx, term.length, term);
      }
    }
  }, {
    key: 'getResults',
    value: function getResults() {
      if (!this.init) {
        this.waiting = true;
        return;
      }
      this.results = this.process();
      if (this.needsCorrection) {
        this.doCorrection();
      }

      if (!this.exactSearch) {
        this.resultsCallback(this.query.text, this.results);
      }
      if (this.exactSearch && this.results.length === 0) {
        this.resultsCallback(this.query.text, this.results);
      }
    }
  }, {
    key: 'doCorrection',
    value: function doCorrection() {
      this.query = this.buildQuery(this.query.text, _.extend(this.opts, { fuzzy: true }));
      this.results = this.process();
    }
  }, {
    key: 'searchGlossary',
    value: function searchGlossary(text) {
      var query = this.buildQuery(text);
      return this.processGlossary(query);
    }
  }, {
    key: 'buildQuery',
    value: function buildQuery(text, opts) {
      return new Query(text, this.metadata.settings, opts, this.filterItem.bind(this));
    }
  }, {
    key: 'process',
    value: function process() {
      var _this5 = this;

      this.resultsMetadata = {};
      var searchResults = this.db.search(this.query);
      this.seamaphore.wait(searchResults.length);
      _.each(searchResults, function (result) {
        var topicData = _this5.metadata.getTopicData(result.ref);
        _this5.resultsMetadata[result.ref] = result.matchData.metadata;
        _this5.loader.loadTextData(_this5.query, result.ref, _this5.processTopicData.bind(_this5));
        _.extend(result, topicData);
        result.id = result.ref;
        result.ref = _this5.loader.getId(result.ref);
      });
      return searchResults;
    }
  }, {
    key: 'processGlossary',
    value: function processGlossary(query) {
      return this.db.searchGlossary(query.text);
    }
  }, {
    key: 'processTopicData',
    value: function processTopicData(query, id, data) {
      if (!this.query.isEqual(query)) {
        return;
      }
      var matchResult = this.resultsMetadata[id];
      if (matchResult) {
        var wordlist = [];
        var summaryExtractor = new Summary(this.metadata.topicData, this.metadata.context);
        var summary = summaryExtractor.getSummary(id, matchResult, wordlist, data);
        summary = summary.replace(/\t+/gi, ' ').trim();
        this.resultsMetadata[id].topicText = this.createText(id, data);
        if (!this.exactSearch) {
          this.topicCallback(this.getId(id), summary, this.createUrl(id, wordlist));
        }
      }
      this.seamaphore.signal();
    }
  }, {
    key: 'createText',
    value: function createText(topicId, texts) {
      var nextTexts = this.metadata.getTopicNextId(topicId);
      var merger = new TextMerger(nextTexts, texts, this.filterId.bind(this));
      return merger.getText();
    }
  }, {
    key: 'filterId',
    value: function filterId(id) {
      var fields = this.metadata.fields;
      var fieldItem = fields[id];
      return this.filterItem(fieldItem);
    }
  }, {
    key: 'filterItem',
    value: function filterItem(fieldItem) {
      var fields = this.metadata.fields;
      var filter = new CbtFilter(fields, this.opts.origin, this.opts.cbt);
      return fieldItem && filter.filter(fieldItem);
    }
  }, {
    key: 'getId',
    value: function getId(id) {
      return this.loader.getId(id);
    }
  }, {
    key: 'createUrl',
    value: function createUrl(id, wordlist) {
      var data = this.metadata.getTopicData(id);
      var hlTerm = this.exactSearch ? '"' + wordlist[0] + '"' : wordlist;
      if (data) {
        var resultsParams = '?' + _.mapToEncodedString({
          rhsearch: this.query.originalText,
          rhhlterm: hlTerm
        });
        return '' + this.loader.getUrl(data.relUrl) + resultsParams;
      }
    }
  }, {
    key: 'needsCorrection',
    get: function get() {
      return this.results.length === 0 && this.metadata.settings.fuzzy && !this.query.exactMatch;
    }
  }]);

  return SearchProcessor;
}();

},{"../../../../../lib/rh":24,"../../../../common/counting_seamaphore":25,"../metadata":54,"../text_merger":62,"./cbt":55,"./db":56,"./query":59,"./summary":60}],59:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var _ = rh._;
var CbtFilter = require("./cbt");
var lunr = require("lunr");
module.exports = function () {
  function SearchQuery(text, settings, opts) {
    _classCallCheck(this, SearchQuery);

    this.originalText = text.trim();
    this.text = this.originalText.toLowerCase();
    this.settings = settings || {};
    this.opts = opts || {};
    this.checkExactMatch();
  }

  _createClass(SearchQuery, [{
    key: "filter",
    value: function filter(itemList) {
      var filter = new CbtFilter(this.settings.fields, this.opts.origin, this.opts.cbt);
      return filter.filter(itemList);
    }
  }, {
    key: "getParams",
    value: function getParams(isStopWordFn) {
      this.isStopWord = isStopWordFn;
      return "" + this.fieldsParam;
    }
  }, {
    key: "isEqual",
    value: function isEqual(other) {
      if (this.text !== other.text || this._bExactMatch !== other._bExactMatch) {
        return false;
      }
      return _.isEqual(this.opts, other.opts);
    }
  }, {
    key: "getFuzzyText",
    value: function getFuzzyText(id, token, boost) {
      if (this.isStopWord(token)) {
        return '';
      }
      return this.opts.fuzzy ? id + ":" + token + "~1^" + boost : id + ":" + token + "^" + boost;
    }
  }, {
    key: "checkExactMatch",
    value: function checkExactMatch() {
      if (this._isExactMatch) {
        this._bExactMatch = true;
        this.text = this.text.substring(1, this.text.length - 1);
      }
    }
  }, {
    key: "getFieldBoost",
    value: function getFieldBoost(field) {
      return _.reduce(field, function (max, rule) {
        return rule && rule.boost && rule.boost > max ? rule.boost : max;
      }, 1);
    }
  }, {
    key: "_isExactMatch",
    get: function get() {
      return this.text.length > 2 && this.quotesChar.indexOf(this.text[0]) !== -1 && this.quotesChar.indexOf(this.text[this.text.length - 1]) !== -1;
    }
  }, {
    key: "exactMatch",
    get: function get() {
      return this._bExactMatch;
    }
  }, {
    key: "exaxctTerms",
    get: function get() {
      return [this.text];
    }
  }, {
    key: "quotesChar",
    get: function get() {
      return ["\"", "\'"];
    }
  }, {
    key: "fieldsParam",
    get: function get() {
      var _this = this;

      var fieldquery = '';
      _.each(this.settings.fields, function (item, id) {
        if (!_this.filter(item)) {
          var tokens = _.map(lunr.tokenizer(_this.text), function (token) {
            return token.str;
          });
          var boost = _this.getFieldBoost(item);
          _.each(tokens, function (token) {
            fieldquery = fieldquery + " " + _this.getFuzzyText(id, token, boost);
          });
        }
      });
      return fieldquery;
    }
  }]);

  return SearchQuery;
}();

},{"../../../../../lib/rh":24,"./cbt":55,"lunr":23}],60:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../../lib/rh");
var TextMerger = require('../text_merger');
var _ = rh._;
module.exports = function () {
  function SearchSummary(topicData, context) {
    _classCallCheck(this, SearchSummary);

    this.topicData = topicData;
    this.context = context;
  }

  _createClass(SearchSummary, [{
    key: 'minDistance',
    value: function minDistance() {
      //_.each()
    }
  }, {
    key: 'getSummary',
    value: function getSummary(id, matchResult, wordlist, data) {
      var _this = this;

      if (this.context) {
        var _summary = this.topicData[id] && this.topicData[id].summary;
        if (_summary) {
          return _summary;
        }
      }
      var summaries = _.map(matchResult, function (metadata) {
        return _.union(metadata, function (posData, fieldId) {
          return _.union(posData.position, function (fistrPos) {
            var texts = data[fieldId];
            var merger = new TextMerger();
            var text = merger.getIndexText(texts);
            var word = text.substring(fistrPos[0], fistrPos[0] + fistrPos[1]);
            word = word.toLowerCase();
            if (wordlist.indexOf(word) === -1) {
              wordlist.push(word);
            }
            return _this.getSummaryText(text, fistrPos[0], fistrPos[1], word);
          });
        });
      });
      var summary = '';
      _.each(summaries[0] || [], function (s) {
        if (s.length > summary.length) {
          summary = s;
        }
      });
      return summary;
    }
  }, {
    key: 'getSummaryText',
    value: function getSummaryText(text, idx, length, word) {
      var leftText = text.substring(0, idx);
      var rightText = text.substring(idx + length);

      return this.trimLeft(leftText) + '<b>' + word + '</b>\n              ' + this.trimRight(rightText);
    }
  }, {
    key: 'trimLeft',
    value: function trimLeft(leftText) {
      var leftIdx = leftText.indexOf(" ", leftText.length - 30);
      leftText = leftText.substring(leftIdx, leftText.length);
      return leftText.trimStart();
    }
  }, {
    key: 'trimRight',
    value: function trimRight(rightText) {
      var rightIdx = rightText.indexOf(" ", 70);
      rightIdx = rightIdx === -1 ? rightText.length : rightIdx;
      rightText = rightText.substring(0, rightIdx);
      return rightText.trimEnd();
    }
  }]);

  return SearchSummary;
}();

},{"../../../../../lib/rh":24,"../text_merger":62}],61:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utils = require('../suggestion/utils');

var _utils2 = _interopRequireDefault(_utils);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

module.exports = function () {
  function SearchResult(result) {
    _classCallCheck(this, SearchResult);

    this.fRanking = result.score;
    this.nIndex = 1;
    this.strSummary = '.p.searchsummary' + result.ref;
    this.strTitle = result.title;
    this.strUrl = '.p.searchurl' + result.ref;
    this.strBreadcrumbs = result.relUrl;
  }

  _createClass(SearchResult, [{
    key: 'merge',
    value: function merge(new_item) {
      this.fRanking += new_item.fRanking;
    }
  }, {
    key: 'compare',
    value: function compare(other) {
      return other.fRanking - this.fRanking;
    }
  }, {
    key: 'match',
    value: function match(other) {
      return _utils2.default.compareNoCase(other.strUrl, this.strUrl) === 0;
    }
  }]);

  return SearchResult;
}();

},{"../suggestion/utils":52}],62:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../../lib/rh");
var _ = rh._;
module.exports = function () {
  function SearchTextMerger(nextTexts, texts, filter) {
    _classCallCheck(this, SearchTextMerger);

    this.nextTexts = nextTexts;
    this.texts = texts;
    this.separator = " ";
    this.filter = filter || this.defaultFilter;
  }

  _createClass(SearchTextMerger, [{
    key: "join",
    value: function join(id, start, end) {
      var texts = [];
      for (var i = start; i <= end; i++) {
        if (this.texts[id][i]) {
          texts.push(this.texts[id][i]);
        }
      }
      return texts.join(this.separator);
    }
  }, {
    key: "defaultFilter",
    value: function defaultFilter() {
      return false;
    }
  }, {
    key: "getIndexText",
    value: function getIndexText(texts) {
      return texts.join(this.separator).replace(/\n/gi, this.separator).trim();
    }
  }, {
    key: "getText",
    value: function getText() {
      var _this = this;

      var texts = [];
      _.each(this.nextTexts, function (item) {
        if (!_this.filter(item[0])) {
          texts.push(_this.join(item[0], item[1], item[2]));
        }
      });
      return texts.join(this.separator);
    }
  }]);

  return SearchTextMerger;
}();

},{"../../../../lib/rh":24}],63:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;
var consts = rh.consts;

var SearchResultController = function () {
  function SearchResultController(widget) {
    _classCallCheck(this, SearchResultController);

    this.widget = widget;
  }

  _createClass(SearchResultController, [{
    key: 'getLink',
    value: function getLink(url) {
      var searchUrl = url;
      var highlightParam = this.widget.get(consts('KEY_SEARCH_RESULT_PARAMS'));
      var searchTerm = this.widget.get(consts('KEY_SEARCH_TERM'));
      var searchTermParam = '';
      if (searchTerm && searchTerm !== '') {
        var key = consts('HASH_KEY_RH_SEARCH');
        var searchTermMap = {};
        searchTermMap[key] = searchTerm;
        searchTermParam = _.mapToEncodedString(searchTermMap);
      }
      if (highlightParam !== undefined && highlightParam !== '') {
        searchUrl = searchUrl + highlightParam + '&' + searchTermParam;
      } else if (searchTermParam !== '') {
        searchUrl = searchUrl + '?' + searchTermParam;
      }
      return searchUrl;
    }
  }]);

  return SearchResultController;
}();

rh.controller('SearchResultController', SearchResultController);

},{"../../lib/rh":24}],64:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../lib/rh");
var _ = rh._;
var consts = rh.consts;
//const KEY_ACTIVE_BOOKID = 'active_bookid';

var TocBreadcrumbsController = function () {
  function TocBreadcrumbsController(widget) {
    _classCallCheck(this, TocBreadcrumbsController);

    this.widget = widget;
    //this.widget.model.subscribe(KEY_ACTIVE_BOOKID, this.updateBreadcrumbs)
  }

  _createClass(TocBreadcrumbsController, [{
    key: 'select',
    value: function select(id, url) {
      this.widget.publish(consts('KEY_TOC_SELECT_ITEM'), { 'id': id, 'url': url });
    }
  }, {
    key: 'getLink',
    value: function getLink(id) {
      if (id) {
        var breadcrumbs = this.widget.get(consts('KEY_TOC_BREADCRUMBS'));
        var item = breadcrumbs[id];
        if (item && item.hasUrl) {
          return item.url;
        }
      }
    }
  }, {
    key: 'goToHome',
    value: function goToHome(index) {
      if (index) {
        var breadcrumbs = this.widget.get(consts('KEY_TOC_BREADCRUMBS'));
        var item = breadcrumbs[index];
        if (item && !item.hasUrl) {
          _.goToHome({ rhtocid: item.id });
        }
      }
    }
  }]);

  return TocBreadcrumbsController;
}();

rh.controller('TocBreadcrumbsController', TocBreadcrumbsController);

},{"../../lib/rh":24}],65:[function(require,module,exports){
'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var rh = require("../../../lib/rh");
var $ = rh.$;
var CAROUSEL_CHANGE = 'change';
var CAROUSEL_ITEM = '.carousel-item:not(.hide):not(.rh-hide)';

var Carousel = function () {
  function Carousel(widget, opts) {
    var _this = this;

    _classCallCheck(this, Carousel);

    this.widget = widget;
    this.node = this.widget.node;
    this.tab = 0;
    rh.model.subscribeOnce(rh.consts(opts.key), function () {
      _this.widget.publish(CAROUSEL_CHANGE, true);
    });
    rh.model.subscribe(rh.consts('KEY_SCREEN'), function () {
      _this.goto(_this.tab, 0);
    });
    rh.model.subscribe(opts.key + 'gototab', function (bookData) {
      _this.goto(_this.pagecount(), bookData.tab);
    });
  }

  _createClass(Carousel, [{
    key: 'goto',
    value: function goto(from, to) {
      var _this2 = this;

      this.tab = to;
      this.carouselnode = $.find(this.node, '.carousel')[0];
      this.animateLeft(from);
      rh._.delay(function () {
        _this2.widget.publish(CAROUSEL_CHANGE, true);
      }, 1000);
    }
  }, {
    key: 'hasNext',
    value: function hasNext() {
      this.carouselnode = $.find(this.node, '.carousel')[0];
      var lastItem = $.find($.find(this.node, '.carousel')[0], CAROUSEL_ITEM);
      lastItem = lastItem && lastItem.length > 0 ? lastItem[lastItem.length - 1] : null;
      return lastItem.offsetLeft + this.carouselnode.offsetLeft > this.carouselnode.offsetWidth;
    }
  }, {
    key: 'animateLeft',
    value: function animateLeft() {
      var leftVal = 'calc(-' + this.tab * 14 + 'px - ' + this.tab * 100 + '%)';
      $.css(this.carouselnode, 'left', leftVal);
    }
  }, {
    key: 'next',
    value: function next() {
      this.goto(this.tab, this.tab + 1);
    }
  }, {
    key: 'pagecount',
    value: function pagecount() {
      return this.tab;
    }
  }, {
    key: 'previous',
    value: function previous() {
      this.goto(this.tab, this.tab - 1);
    }
  }, {
    key: 'ensureVisible',
    value: function ensureVisible() {}
  }]);

  return Carousel;
}();

rh.controller('Carousel', Carousel);

},{"../../../lib/rh":24}],66:[function(require,module,exports){
'use strict';

var rh = require("../../lib/rh");
var $ = rh.$;
module.exports = {

  nodeType: {
    ELEMENT_NODE: 1,
    ATTRIBUTE_NODE: 2,
    TEXT_NODE: 3,
    CDATA_SECTION_NODE: 4,
    ENTITY_REFERENCE_NODE: 5,
    ENTITY_NODE: 6,
    PROCESSING_INSTRUCTION_NODE: 7,
    COMMENT_NODE: 8,
    DOCUMENT_NODE: 9,
    DOCUMENT_TYPE_NODE: 10,
    DOCUMENT_FRAGMENT_NODE: 11,
    NOTATION_NODE: 12
  },

  removeChild: function removeChild(node) {
    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.parentNode(node);

    return parent && parent.removeChild && parent.removeChild(node);
  },
  appendChild: function appendChild(parent, newNode) {
    return parent && parent.appendChild && parent.appendChild(newNode);
  },
  parentNode: function parentNode(node) {
    return node && node.parentNode;
  },
  childNodes: function childNodes(node) {
    return node && node.childNodes || [];
  },
  toHtmlNode: function toHtmlNode(html) {
    return this.childNodes($.createElement('div', html));
  },
  outerHTML: function outerHTML(node) {
    return node && node.outerHTML || '';
  },
  insertAfter: function insertAfter(node, newNode) {
    return node.parentNode.insertBefore(newNode, node.nextSibling);
  },
  value: function value(node) {
    return node && node.nodeValue;
  },
  name: function name(node) {
    return node && node.nodeName;
  },
  type: function type(node) {
    return node && node.nodeType;
  },
  isElementNode: function isElementNode(node) {
    return this.type(node) === this.nodeType.ELEMENT_NODE;
  },
  isTextNode: function isTextNode(node) {
    return this.type(node) === this.nodeType.TEXT_NODE;
  }
};

},{"../../lib/rh":24}]},{},[26])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsZW5pZW50X3NyYy9sYXlvdXQvZXZlbnRfaGFuZGxlcnMuanMiLCJsZW5pZW50X3NyYy9sYXlvdXQvZ2xvc3NhcnlfY29udHJvbGxlci5qcyIsImxlbmllbnRfc3JjL2xheW91dC9pbmRleF9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmMvbGF5b3V0L3NlYXJjaF91dGlsLmpzIiwibGVuaWVudF9zcmMvbGF5b3V0L3RvY19jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmMvbGF5b3V0L3RvY19vcmRlci5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9icm93c2VzZXF1ZW5jZV9idWlsZGVyLmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2V2ZW50X2hhbmRsZXJzLmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2V4cHJlc3Npb25fYnVpbGRlci5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfY29udHJvbGxlci5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfaGFuZGxlci5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9nbG9zc2FyeV9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2luZGV4X2NvbnRyb2xsZXIuanMiLCJsZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvaW5pdC5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9qc19sb2FkaW5nX2NvbnRyb2xsZXIuanMiLCJsZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvbGF5b3V0Zml4LmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2xvYWRfcHJvamVjdHMuanMiLCJsZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvbW9kZXJuX2xheW91dF9jb250cm9sbGVyLmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L21wLmpzIiwibGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L3NlYXJjaF9maWxlZC5qcyIsImxlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC91cmxfdXRpbHMuanMiLCJsZW5pZW50X3NyYy91dGlscy9zaGltLmpzIiwibm9kZV9tb2R1bGVzL2x1bnIvbHVuci5qcyIsInNyYy9saWIvcmguanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2NvbW1vbi9jb3VudGluZ19zZWFtYXBob3JlLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9jdXN0b21fYnV0dG9ucy5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L2V4cGFuZF9hbGwuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9mYXZvcml0ZXNfY29udHJvbGxlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L2hvbWVfY29udHJvbGxlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L21vZGFsX2RpYWxvZy5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3JoMjAxN2xheW91dGNvbnRyb2xsZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvY29tbW9uL21lcmdlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9jb21tb24vcGF0aHMuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvY29tbW9uL3N5bm9ueW1ucy5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9zdWdnZXN0aW9uL2NvbnN0cy5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9zdWdnZXN0aW9uL2NvcnJlY3Rvci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9zdWdnZXN0aW9uL2dlbmVyYWxfcHJlZGljdG9yLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vaGlzdG9yeV9wcmVkaWN0b3IuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9oaXN0b3J5X3JlYWRlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9zdWdnZXN0aW9uL2luZGljZXMuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9pbnB1dF9wYXJzZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9sb2FkZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9uZ3JhbV9wcmVkaWN0b3IuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9wcmVkaWN0aW9uLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vcHJlZGljdGlvbl9jcmVhdG9yLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vcHJlZGljdGlvbl9saXN0LmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vcHJlZGljdG9yc19jcmVhdG9yLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vc2VhcmNoX2NvbnRyb2xsZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvc3VnZ2VzdGlvbi9zb3J0ZWRfc2V0LmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vdG9waWNfY291bnRlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC9zdWdnZXN0aW9uL3V0aWxzLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3RvcGljL2hhbmRsZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvdG9waWMvbWV0YWRhdGEuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvdG9waWMvcXVlcnkvY2J0LmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3RvcGljL3F1ZXJ5L2RiLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC9sYXlvdXQvc2VhcmNoL3RvcGljL3F1ZXJ5L2xvYWRlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC90b3BpYy9xdWVyeS9wcm9jZXNzb3IuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvdG9waWMvcXVlcnkvcXVlcnkuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvdG9waWMvcXVlcnkvc3VtbWFyeS5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3NlYXJjaC90b3BpYy9yZXN1bHQuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2gvdG9waWMvdGV4dF9tZXJnZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC9zZWFyY2hfcmVzdWx0X2NvbnRyb2xsZXIuanMiLCJzcmMvcmVzcG9uc2l2ZV9oZWxwL2xheW91dC90b2NfYnJlYWRjcnVtYnNfY29udHJvbGxlci5qcyIsInNyYy9yZXNwb25zaXZlX2hlbHAvbGF5b3V0L3VpL2Nhcm91c2VsLmpzIiwic3JjL3Jlc3BvbnNpdmVfaGVscC91dGlscy9ub2RlX3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Y0NBZSxNO0lBQVAsRSxXQUFBLEU7SUFDQSxDLEdBQU0sRSxDQUFOLEM7SUFDQSxDLEdBQU0sRSxDQUFOLEM7SUFDQSxNLEdBQVcsRSxDQUFYLE07SUFDQSxLLEdBQVUsRSxDQUFW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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUM3NUdBO0FBQ0EsSUFBSSxPQUFPLEVBQVAsS0FBYyxTQUFsQixFQUE2QjtBQUMzQixTQUFPLEVBQVAsR0FBWSxFQUFaO0FBQ0Q7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLE9BQU8sRUFBeEI7Ozs7Ozs7Ozs7O0lDTE0sa0I7QUFDSiw4QkFBWSxRQUFaLEVBQXFCO0FBQUE7O0FBQ25CLFNBQUssU0FBTCxHQUFpQixRQUFqQjtBQUNBLFNBQUssTUFBTCxHQUFjLENBQWQ7QUFDRDs7Ozs2QkFDTztBQUNOLFdBQUssTUFBTDtBQUNBLFVBQUcsS0FBSyxNQUFMLElBQWUsQ0FBZixJQUFvQixLQUFLLFNBQTVCLEVBQXNDO0FBQ3BDLGFBQUssU0FBTDtBQUNEO0FBQ0Y7Ozt5QkFDSSxLLEVBQU07QUFDVCxVQUFJLFlBQVksU0FBUyxDQUF6QjtBQUNBLFdBQUssTUFBTCxJQUFjLFNBQWQ7QUFDRDs7Ozs7O0FBR0gsT0FBTyxPQUFQLEdBQWlCLGtCQUFqQjs7Ozs7QUNqQkEsUUFBUSxXQUFSO0FBQ0EsUUFBUSw4QkFBUjtBQUNBLFFBQVEsNkNBQVI7QUFDQSxRQUFRLHdDQUFSO0FBQ0EsUUFBUSxzQ0FBUjtBQUNBLFFBQVEsc0RBQVI7QUFDQSxRQUFRLDBEQUFSO0FBQ0EsUUFBUSxrREFBUjtBQUNBLFFBQVEsZ0RBQVI7QUFDQSxRQUFRLDZDQUFSO0FBQ0EsUUFBUSxxREFBUjtBQUNBLFFBQVEsNERBQVI7QUFDQSxRQUFRLHlEQUFSO0FBQ0EsUUFBUSxvREFBUjtBQUNBLFFBQVEsdURBQVI7QUFDQSxRQUFRLGtEQUFSO0FBQ0EsUUFBUSxpREFBUjtBQUNBLFFBQVEsc0JBQVI7QUFDQSxRQUFRLDBCQUFSO0FBQ0EsUUFBUSxzQ0FBUjtBQUNBLFFBQVEsOENBQVI7QUFDQSxRQUFRLCtCQUFSO0FBQ0EsUUFBUSx3Q0FBUjtBQUNBLFFBQVEsb0NBQVI7QUFDQSxRQUFRLHlDQUFSO0FBQ0EsUUFBUSwyQ0FBUjtBQUNBLFFBQVEsOENBQVI7QUFDQSxRQUFRLHlDQUFSO0FBQ0EsUUFBUSxpQ0FBUjtBQUNBLFFBQVEsdUJBQVI7QUFDQSxRQUFRLHNDQUFSO0FBQ0EsUUFBUSxrREFBUjtBQUNBLFFBQVEseUJBQVI7QUFDQSxRQUFRLHFCQUFSOzs7OztBQ2pDQSxJQUFNLEtBQUssUUFBUSxjQUFSLENBQVg7QUFBQSxJQUNFLFNBQVMsR0FBRyxNQURkO0FBQUEsSUFFRSxRQUFRLEdBQUcsS0FGYjtBQUFBLElBR0UsSUFBSSxHQUFHLENBSFQ7O0FBS0EsTUFBTSxTQUFOLENBQWdCLE9BQU8sMkJBQVAsQ0FBaEIsRUFBcUQsa0JBQVU7QUFDN0QsTUFBSSxVQUFVLEVBQUUsR0FBRixDQUFNLE1BQU4sRUFBYyxVQUFDLElBQUQsRUFBTyxLQUFQLEVBQWlCO0FBQzNDLFdBQU8sRUFBRSxNQUFGLENBQVMsRUFBQywwQkFBd0IsS0FBekIsRUFBVCxFQUE0QyxJQUE1QyxDQUFQO0FBQ0QsR0FGYSxDQUFkO0FBR0EsUUFBTSxPQUFOLENBQWMsT0FBTyxvQkFBUCxDQUFkLEVBQTRDLE9BQTVDO0FBQ0QsQ0FMRDs7Ozs7QUNMQSxJQUFJLEtBQUssUUFBUSxjQUFSLENBQVQ7O0FBRUEsR0FBRyxLQUFILENBQVMsVUFBVCxDQUFvQix5QkFBcEIsRUFBK0MsWUFBTTtBQUNuRCxNQUFJLGVBQWUsR0FBRyxLQUFILENBQVMsSUFBVCxDQUFjLGtCQUFkLENBQW5CO0FBQ0EsTUFBRyxZQUFILEVBQWlCO0FBQ2YsT0FBRyxLQUFILENBQVMsUUFBVCxDQUFrQixrQkFBbEI7QUFDRCxHQUZELE1BRU87QUFDTCxPQUFHLEtBQUgsQ0FBUyxRQUFULENBQWtCLGdCQUFsQjtBQUNEO0FBQ0YsQ0FQRDs7QUFTQSxHQUFHLEtBQUgsQ0FBUyxVQUFULENBQW9CLGtCQUFwQixFQUF3QyxZQUFNO0FBQzVDLEtBQUcsS0FBSCxDQUFTLFFBQVQsQ0FBa0Isa0JBQWxCLEVBQXNDLEtBQXRDO0FBQ0QsQ0FGRDs7QUFJQSxHQUFHLEtBQUgsQ0FBUyxVQUFULENBQW9CLGdCQUFwQixFQUFzQyxZQUFNO0FBQzFDLEtBQUcsS0FBSCxDQUFTLFFBQVQsQ0FBa0Isa0JBQWxCLEVBQXNDLElBQXRDO0FBQ0QsQ0FGRDs7Ozs7Ozs7O0FDZEEsSUFBTSxLQUFLLFFBQVEsY0FBUixDQUFYO0FBQ0EsSUFBTSxTQUFTLEdBQUcsTUFBbEI7O0lBRU0sbUI7QUFDSiwrQkFBWSxNQUFaLEVBQW1CO0FBQUE7O0FBQUE7O0FBQ2pCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLFVBQUwsR0FBa0IsSUFBSSxHQUFHLE9BQVAsRUFBbEI7QUFDQTtBQUNBLFNBQUssZ0JBQUwsR0FBd0IsS0FBeEIsQ0FKaUIsQ0FJYTs7QUFFOUIsU0FBSyxlQUFMLEdBQXVCLFNBQXZCLENBTmlCLENBTWdCO0FBQ2pDLE9BQUcsS0FBSCxDQUFTLGFBQVQsQ0FBdUIsT0FBTyxvQkFBUCxDQUF2QixFQUFxRCxZQUFLO0FBQ3hELFlBQUssSUFBTDtBQUNELEtBRkQ7QUFHRDs7OzttQ0FDYztBQUNiLGVBQVMsR0FBVCxDQUFhLENBQWIsRUFBZ0I7QUFDZCxZQUFNLElBQUksQ0FBSSxLQUFLLE1BQUwsR0FBYyxRQUFkLENBQXVCLEVBQXZCLENBQUosZ0JBQTJDLE1BQTNDLENBQWtELENBQWxELEVBQW9ELENBQXBELENBQVY7QUFDQSxlQUFPLFVBQVEsRUFBRSxNQUFGLENBQVMsQ0FBVCxFQUFXLENBQVgsQ0FBUixTQUF5QixFQUFFLE1BQUYsQ0FBUyxDQUFULEVBQVcsQ0FBWCxDQUF6QixHQUEyQyxDQUFsRDtBQUNEO0FBQ0QsYUFBTyxRQUFRLElBQUksSUFBSixDQUFSLEdBQW9CLElBQUksSUFBSixDQUFwQixHQUFnQyxLQUF2QztBQUNEOzs7a0NBRWEsSSxFQUFNO0FBQUM7QUFDbkIsYUFBTyxPQUFPLElBQVAsQ0FBWSxJQUFaLEVBQWtCLE1BQXpCO0FBQ0Q7Ozt3Q0FDbUIsSSxFQUFNO0FBQ3RCOztBQUVGLFVBQUksY0FBYyxTQUFTLG9CQUFULENBQThCLEtBQTlCLENBQWxCLENBSHdCLENBRytCO0FBQ3ZELFVBQUksV0FBVyxFQUFmOztBQUVBLFdBQUksSUFBSSxJQUFFLENBQVYsRUFBYSxJQUFFLFlBQVksTUFBM0IsRUFBbUMsR0FBbkMsRUFBd0M7QUFDdEMsWUFBRyxZQUFZLENBQVosRUFBZSxZQUFmLENBQTRCLEdBQUcsTUFBSCxDQUFVLGNBQVYsQ0FBNUIsTUFBMkQsSUFBOUQsRUFBb0U7QUFDbEUsbUJBQVMsSUFBVCxDQUFjLFlBQVksQ0FBWixDQUFkO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPLFFBQVA7QUFDRDs7O2lDQUVZLFUsRUFBVztBQUN0QixVQUFJLE1BQU0sR0FBRyxLQUFILENBQVMsR0FBVCxDQUFhLE9BQU8sU0FBUCxDQUFiLENBQVY7QUFDQSxVQUFHLFVBQUgsRUFBYztBQUNaLGVBQVEsT0FBTyxJQUFJLGVBQVosSUFBZ0MsRUFBdkM7QUFDRCxPQUZELE1BSUE7QUFDRSxlQUFRLE9BQU8sSUFBSSxhQUFaLElBQThCLEVBQXJDO0FBQ0Q7QUFDRjs7O2dEQUcwQjtBQUN2QjtBQUNGLFVBQUksc0JBQUo7QUFDQSxVQUFJLGFBQWEsS0FBSyxVQUFMLENBQWdCLEtBQWhCLENBQXNCLE9BQU8sWUFBUCxDQUF0QixDQUFqQjs7QUFFQSxVQUFHLE9BQU8sVUFBUCxLQUF1QixXQUF2QixJQUFzQyxlQUFlLElBQXhELEVBQThEO0FBQUM7QUFDN0Qsd0JBQWdCLEVBQWhCO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsd0JBQWdCLEtBQUssS0FBTCxDQUFXLFVBQVgsQ0FBaEIsQ0FESyxDQUNrQztBQUN4QztBQUNELGFBQU8sYUFBUDtBQUNEOzs7cUNBRWU7QUFDZCxVQUFHLEtBQUssZ0JBQUwsS0FBMEIsS0FBN0IsRUFBb0M7QUFBQztBQUNuQyxhQUFLLGVBQUwsR0FBdUIsS0FBSyx5QkFBTCxFQUF2QjtBQUNEO0FBQ0QsYUFBTyxLQUFLLGVBQVo7QUFDRDs7O3FDQUVlO0FBQ2QsVUFBSSx3QkFBSjtBQUNBLHdCQUFrQixLQUFLLFNBQUwsQ0FBZSxLQUFLLGVBQXBCLENBQWxCO0FBQ0EsV0FBSyxVQUFMLENBQWdCLE9BQWhCLENBQXdCLEdBQUcsTUFBSCxDQUFVLFlBQVYsQ0FBeEIsRUFBaUQsZUFBakQ7QUFDRDs7O3FDQUVnQixLLEVBQU07QUFDckIsV0FBSSxJQUFNLENBQVYsSUFBZSxLQUFLLGVBQXBCLEVBQXFDO0FBQ25DLFlBQU0sVUFBVSxLQUFLLGVBQUwsQ0FBcUIsQ0FBckIsQ0FBaEI7QUFDQSxZQUFHLFFBQVEsS0FBUixLQUFtQixLQUF0QixFQUE2QjtBQUMzQixpQkFBTyxLQUFLLGVBQUwsQ0FBcUIsQ0FBckIsQ0FBUDtBQUNBO0FBQ0Q7QUFDRjtBQUNELFdBQUssY0FBTDtBQUNBLFNBQUcsS0FBSCxDQUFTLE9BQVQsQ0FBaUIsR0FBRyxNQUFILENBQVUsZ0JBQVYsQ0FBakIsRUFBOEMsSUFBOUMsRUFUcUIsQ0FTK0I7QUFDckQ7OzttQ0FFYyxHLEVBQUssSyxFQUFNO0FBQ3hCO0FBQ0EsV0FBSyxlQUFMLENBQXFCLEtBQUssWUFBTCxFQUFyQixJQUE0QyxFQUFDLFNBQVUsR0FBWCxFQUFnQixTQUFVLEtBQTFCLEVBQTVDO0FBQ0EsV0FBSyxjQUFMO0FBQ0EsU0FBRyxLQUFILENBQVMsT0FBVCxDQUFpQixHQUFHLE1BQUgsQ0FBVSxnQkFBVixDQUFqQixFQUE4QyxJQUE5QyxFQUp3QixDQUk0QjtBQUNyRDs7QUFFRDs7OzttQ0FDZTtBQUFFLHNCQUFjLEdBQUcsQ0FBSCxDQUFLLGFBQUwsRUFBZDtBQUFzQzs7O2tDQUUxQztBQUFFO0FBQ2IsYUFBTyxHQUFHLEtBQUgsQ0FBUyxHQUFULENBQWEsR0FBRyxNQUFILENBQVUsZUFBVixDQUFiLENBQVA7QUFDRDs7O29DQUVjO0FBQUU7QUFDZixhQUFPLEdBQUcsS0FBSCxDQUFTLEdBQVQsQ0FBYSxHQUFHLE1BQUgsQ0FBVSxpQkFBVixDQUFiLENBQVA7QUFDRDs7O29DQUVlLEssRUFBTTtBQUNsQjtBQUNGLFVBQUksa0JBQUo7QUFDQSxVQUFJLG1CQUFKO0FBQ0EsVUFBRyxDQUFDLEtBQUosRUFBVztBQUNULGdCQUFRLEtBQUssV0FBTCxFQUFSO0FBQ0Q7QUFDRCxrQkFBWSxLQUFLLGNBQUwsRUFBWjs7QUFFQSxtQkFBYSxLQUFiO0FBQ0EsV0FBSSxJQUFNLENBQVYsSUFBZSxTQUFmLEVBQTBCO0FBQ3hCLFlBQU0sVUFBVSxVQUFVLENBQVYsQ0FBaEI7QUFDQSxZQUFHLFFBQVEsS0FBUixLQUFrQixLQUFyQixFQUE0QjtBQUMxQix1QkFBYSxJQUFiO0FBQ0E7QUFDRDtBQUNGOztBQUVELGFBQU8sVUFBUDtBQUNEOzs7c0NBQ2lCLFUsRUFBVztBQUMzQixVQUFJLFFBQVEsS0FBSyxZQUFMLENBQWtCLFVBQWxCLENBQVo7QUFDQSxTQUFHLEtBQUgsQ0FBUyxPQUFULENBQWlCLE9BQU8sd0JBQVAsQ0FBakIsRUFBbUQsS0FBbkQ7QUFDRDs7OzRDQUNzQjtBQUNyQixTQUFHLEtBQUgsQ0FBUyxPQUFULENBQWlCLE9BQU8sZ0JBQVAsQ0FBakIsRUFBMkMsS0FBSyxlQUFMLEVBQTNDO0FBQ0Q7Ozt1Q0FFaUI7QUFBQztBQUNqQjtBQUNBLFVBQUksWUFBWSxFQUFoQjtBQUNBLFVBQUksV0FBSjtBQUNBLFVBQUksZ0JBQWdCLEtBQUssY0FBTCxFQUFwQjtBQUNBLFdBQUksRUFBSixJQUFVLGFBQVYsRUFBd0I7QUFDdEIsa0JBQVUsSUFBVixDQUFlLGNBQWMsRUFBZCxDQUFmO0FBQ0Q7QUFDRCxTQUFHLEtBQUgsQ0FBUyxPQUFULENBQWlCLE9BQU8sZUFBUCxDQUFqQixFQUEwQyxTQUExQztBQUNEOzs7bUNBRWMsUSxFQUFTO0FBQUM7QUFDdkIsVUFBRyxDQUFDLFFBQUosRUFBYztBQUNaLG1CQUFXLEtBQUssV0FBTCxFQUFYO0FBQ0Q7QUFDRCxVQUFHLEtBQUssZUFBTCxDQUFxQixRQUFyQixDQUFILEVBQW1DO0FBQ2pDLGFBQUssZ0JBQUwsQ0FBc0IsUUFBdEIsRUFEaUMsQ0FDRDtBQUNqQyxPQUZELE1BRU87QUFDTCxhQUFLLGNBQUwsQ0FBb0IsUUFBcEIsRUFBOEIsS0FBSyxhQUFMLEVBQTlCLEVBREssQ0FDK0M7QUFDckQ7QUFDRCxXQUFLLHFCQUFMO0FBQ0Q7OzsyQkFFSztBQUFDOztBQUVMLFdBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixHQUFHLENBQUgsQ0FBSyxVQUFMLEVBQXJCOztBQUVBO0FBQ0EsU0FBRyxLQUFILENBQVMsU0FBVCxDQUFtQixHQUFHLE1BQUgsQ0FBVSxlQUFWLENBQW5CLEVBQStDLEtBQUsscUJBQUwsQ0FBMkIsSUFBM0IsQ0FBZ0MsSUFBaEMsQ0FBL0M7QUFDQSxTQUFHLEtBQUgsQ0FBUyxTQUFULENBQW1CLEdBQUcsTUFBSCxDQUFVLGdCQUFWLENBQW5CLEVBQWdELEtBQUssZ0JBQUwsQ0FBc0IsSUFBdEIsQ0FBMkIsSUFBM0IsQ0FBaEQ7QUFDQSxTQUFHLEtBQUgsQ0FBUyxTQUFULENBQW1CLEdBQUcsTUFBSCxDQUFVLGdCQUFWLENBQW5CLEVBQWdELEtBQUssaUJBQUwsQ0FBdUIsSUFBdkIsQ0FBNEIsSUFBNUIsQ0FBaEQ7O0FBRUEsV0FBSyxnQkFBTDtBQUNBLFNBQUcsS0FBSCxDQUFTLE9BQVQsQ0FBaUIsT0FBTyxnQkFBUCxDQUFqQixFQUEyQyxLQUFLLGVBQUwsRUFBM0M7QUFDRDs7Ozs7O0FBR0gsR0FBRyxVQUFILENBQWMscUJBQWQsRUFBcUMsbUJBQXJDOzs7Ozs7Ozs7QUMvS0EsSUFBSSxLQUFLLFFBQVEsY0FBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDs7SUFDTSxjO0FBRUosMEJBQVksTUFBWixFQUFvQjtBQUFBOztBQUNsQixTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0Q7Ozs7NkJBRVEsSyxFQUFPO0FBQ2QsVUFBRyxHQUFHLE1BQUgsQ0FBVSxlQUFWLE1BQStCLEdBQUcsQ0FBSCxDQUFLLFdBQUwsRUFBbEMsRUFBc0Q7QUFDcEQsZUFBTyxLQUFLLG9CQUFMLENBQTBCLEtBQTFCLENBQVA7QUFDRDtBQUNELFVBQUksZ0JBQUo7QUFDQSxVQUFHLFVBQVUsU0FBVixJQUF1QixVQUFTLEVBQW5DLEVBQXNDO0FBQ3BDLGtCQUFVLEVBQUMsU0FBUSxLQUFULEVBQVY7QUFDRDtBQUNELFFBQUUsUUFBRixDQUFXLE9BQVg7QUFDQSxhQUFPLElBQVA7QUFDRDs7O3lDQUVvQixLLEVBQU87QUFDMUIsVUFBSSxVQUFVLEVBQUMsR0FBRyxPQUFPLGFBQVAsQ0FBcUIsU0FBckIsQ0FBK0IsQ0FBL0IsQ0FBSixFQUFkO0FBQ0EsVUFBRyxVQUFVLFNBQVYsSUFBdUIsVUFBUyxFQUFuQyxFQUFzQztBQUNwQyxnQkFBUSxPQUFSLEdBQWtCLEtBQWxCO0FBQ0Q7QUFDRCxRQUFFLGtCQUFGLENBQXFCLE9BQXJCLEVBQThCLElBQTlCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7Ozs7OztBQUdILEdBQUcsVUFBSCxDQUFjLGdCQUFkLEVBQWdDLGNBQWhDOzs7Ozs7Ozs7QUM5QkEsSUFBSSxLQUFLLFFBQVEsY0FBUixDQUFUO0FBQ0EsSUFBSSxZQUFZLFFBQVEscUJBQVIsQ0FBaEI7QUFDQSxJQUFJLElBQUksR0FBRyxDQUFYO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDs7SUFDTSxXOzs7Ozs7O3dDQUVnQjtBQUNsQixXQUFLLElBQUwsR0FBWSxFQUFFLGFBQUYsQ0FBZ0IsS0FBaEIsRUFBdUIsS0FBSyxRQUE1QixDQUFaO0FBQ0EsZ0JBQVUsV0FBVixDQUFzQixTQUFTLElBQS9CLEVBQXFDLEtBQUssSUFBMUM7QUFDQSxXQUFLLE1BQUwsR0FBYyxJQUFJLEdBQUcsTUFBUCxDQUFjLEVBQUMsTUFBTSxLQUFLLElBQVosRUFBZCxDQUFkO0FBQ0EsV0FBSyxNQUFMLENBQVksSUFBWjtBQUNEOzs7cUNBZWU7QUFDZCxVQUFJLGVBQWUsRUFBRSxJQUFGLENBQU8sS0FBSyxJQUFaLEVBQWtCLG1CQUFsQixFQUF1QyxDQUF2QyxDQUFuQjtBQUNBLFVBQUcsQ0FBQyxZQUFKLEVBQWtCO0FBQ2hCO0FBQ0Q7QUFDRCxXQUFLLFlBQUwsR0FBb0IsWUFBcEI7QUFDQSxVQUFJLE1BQU0sRUFBRSxJQUFGLENBQU8sWUFBUCxFQUFxQixLQUFyQixFQUE0QixDQUE1QixDQUFWO0FBQ0EsVUFBRyxHQUFILEVBQU87QUFDTCxhQUFLLEdBQUwsR0FBVyxHQUFYO0FBQ0EsWUFBSSxnQkFBSixDQUFxQixNQUFyQixFQUE2QixLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBN0I7QUFDQSxZQUFJLGdCQUFKLENBQXFCLE9BQXJCLEVBQThCLEtBQUssWUFBTCxDQUFrQixJQUFsQixDQUF1QixJQUF2QixDQUE5QjtBQUNEO0FBQ0Y7OzttQ0FDYTtBQUNaLFdBQUssVUFBTCxHQUFrQixLQUFLLEdBQUwsQ0FBUyxZQUEzQjtBQUNBLFdBQUssV0FBTCxHQUFtQixLQUFLLEdBQUwsQ0FBUyxhQUE1QjtBQUNBLFVBQUksV0FBVyxLQUFLLGlCQUFMLENBQXVCLEtBQUssVUFBNUIsRUFBd0MsS0FBSyxXQUE3QyxDQUFmO0FBQ0EsVUFBSSxpQkFBaUIsRUFBRSxJQUFGLENBQU8sS0FBSyxJQUFaLEVBQWtCLHFCQUFsQixFQUF5QyxDQUF6QyxDQUFyQjtBQUNBLFVBQUcsY0FBSCxFQUFrQjtBQUNoQixhQUFLLGlCQUFMLENBQXVCLGNBQXZCLEVBQXVDLFFBQXZDO0FBQ0Q7QUFDRjs7O3NDQUNpQixjLEVBQWdCLFEsRUFBUztBQUN6QyxVQUFJLE1BQU0sS0FBSyxLQUFMLENBQVcsU0FBUyxHQUFwQixDQUFWO0FBQ0EsVUFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLFNBQVMsSUFBcEIsQ0FBWDs7QUFFQSxRQUFFLEdBQUYsQ0FBTSxjQUFOLEVBQXNCLE1BQXRCLEVBQThCLEtBQUssUUFBTCxLQUFrQixJQUFoRDtBQUNBLFFBQUUsR0FBRixDQUFNLGNBQU4sRUFBc0IsS0FBdEIsRUFBNkIsSUFBSSxRQUFKLEtBQWlCLElBQTlDOztBQUVBLFVBQUcsS0FBSyxZQUFSLEVBQXNCO0FBQ3BCLGFBQUssWUFBTCxDQUFrQixTQUFTLEtBQTNCLEVBQWtDLFNBQVMsTUFBM0M7QUFDRDtBQUNELFFBQUUsR0FBRixDQUFNLGNBQU4sRUFBc0IsU0FBdEIsRUFBaUMsT0FBakM7QUFFRDs7O3VDQUNrQixJLEVBQUs7QUFDdEIsVUFBSSxTQUFTLEtBQUssVUFBTCxHQUFnQixLQUFLLFdBQWxDO0FBQ0EsVUFBRyxLQUFLLFVBQUwsR0FBa0IsS0FBSyxTQUF2QixJQUFvQyxLQUFLLFdBQUwsR0FBbUIsS0FBSyxVQUEvRCxFQUEwRTtBQUN4RSxlQUFPLEVBQUMsT0FBTyxLQUFLLFVBQWIsRUFBeUIsUUFBUSxLQUFLLFdBQXRDLEVBQVA7QUFDRDs7QUFFRCxVQUFHLEtBQUssVUFBTCxJQUFtQixLQUFLLFNBQXhCLElBQXFDLEtBQUssV0FBTCxJQUFvQixLQUFLLFVBQWpFLEVBQTRFO0FBQzFFLGVBQU8sRUFBQyxRQUFRLEtBQUssU0FBTCxHQUFlLE1BQXhCLEVBQWdDLE9BQU8sS0FBSyxTQUE1QyxFQUFQO0FBQ0Q7QUFDRCxVQUFHLEtBQUssVUFBTCxJQUFtQixLQUFLLFNBQXhCLElBQXFDLEtBQUssV0FBTCxJQUFvQixLQUFLLFVBQWpFLEVBQTRFO0FBQzFFLGVBQU8sRUFBQyxRQUFRLEtBQUssVUFBZCxFQUEwQixPQUFPLEtBQUssVUFBTCxHQUFnQjtBQUFqRCxTQUFQO0FBRUQ7QUFDRCxVQUFHLEtBQUssVUFBTCxJQUFtQixLQUFLLFNBQXhCLElBQXFDLEtBQUssV0FBTCxJQUFvQixLQUFLLFVBQWpFLEVBQTRFO0FBQzFFLGVBQU8sS0FBSyx5QkFBTCxDQUErQixJQUEvQixFQUFxQyxNQUFyQyxDQUFQO0FBQ0Q7QUFDRjs7OzhDQUN5QixJLEVBQU0sTSxFQUFPO0FBQ3JDLFVBQUksYUFBYSxLQUFLLFNBQUwsR0FBZSxLQUFLLFVBQXJDO0FBQ0EsVUFBRyxTQUFTLFVBQVosRUFBdUI7QUFDckIsZUFBTyxFQUFDLFFBQVEsS0FBSyxVQUFkLEVBQTBCLE9BQU8sS0FBSyxVQUFMLEdBQWdCLE1BQWpELEVBQVA7QUFDRCxPQUZELE1BR0k7QUFDRixlQUFNLEVBQUUsUUFBUSxLQUFLLFNBQUwsR0FBZSxNQUF6QixFQUFpQyxPQUFPLEtBQUssU0FBN0MsRUFBTjtBQUNEO0FBQ0Y7OztzQ0FJaUIsVSxFQUFZLFcsRUFBWTtBQUN4QyxVQUFJLFlBQVksT0FBTyxVQUFQLElBQXFCLFNBQVMsSUFBVCxDQUFjLFdBQW5EO0FBQ0EsVUFBSSxhQUFhLE9BQU8sV0FBUCxJQUFzQixTQUFTLElBQVQsQ0FBYyxZQUFyRDtBQUNBLG1CQUFhLEVBQWI7QUFDQSxvQkFBYyxFQUFkO0FBQ0Esa0JBQWEsYUFBYSxDQUFkLEdBQW1CLFNBQW5CLEdBQThCLENBQTFDO0FBQ0EsbUJBQWMsY0FBYyxDQUFmLEdBQW9CLFVBQXBCLEdBQWdDLENBQTdDOztBQUVBLFVBQUksT0FBTyxFQUFDLFlBQVcsVUFBWixFQUF3QixhQUFZLFdBQXBDLEVBQWlELFdBQVUsU0FBM0QsRUFBc0UsWUFBVyxVQUFqRixFQUFYO0FBQ0EsVUFBSSxhQUFhLEtBQUssa0JBQUwsQ0FBd0IsSUFBeEIsQ0FBakI7QUFDQSxtQkFBYSxXQUFXLEtBQXhCO0FBQ0Esb0JBQWMsV0FBVyxNQUF6QjtBQUNBLFVBQUksT0FBTyxLQUFLLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxZQUFZLFVBQWIsSUFBeUIsQ0FBckMsQ0FBWDtBQUNBLFVBQUksTUFBTSxLQUFLLEdBQUwsQ0FBUyxDQUFULEVBQVksQ0FBQyxhQUFhLFdBQWQsSUFBMkIsQ0FBdkMsQ0FBVjs7QUFFQSxhQUFPO0FBQ0wsY0FBTSxJQUREO0FBRUwsYUFBSyxHQUZBO0FBR0wsZUFBTyxVQUhGO0FBSUwsZ0JBQVEsV0FKSDtBQUtMLG1CQUFXLFNBTE47QUFNTCxvQkFBWTtBQU5QLE9BQVA7QUFRRDs7O21DQUNhO0FBQ1osYUFBUSxLQUFLLE9BQU4sOEJBQXlDLEVBQWhEO0FBQ0Q7Ozs4QkFFUyxNLEVBQVE7QUFDaEIsV0FBSyxPQUFMLEdBQWUsT0FBTyxPQUF0QjtBQUNBLFdBQUssaUJBQUw7QUFDQSxXQUFLLE1BQUwsQ0FBWSxTQUFaLENBQXNCLE9BQXRCLEVBQStCLEtBQUssTUFBTCxDQUFZLElBQVosQ0FBaUIsSUFBakIsQ0FBL0I7QUFDQSxXQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLFNBQXBCLEVBQStCLE9BQU8sT0FBdEM7QUFDQSxRQUFFLEtBQUYsQ0FBUSxLQUFLLGNBQUwsQ0FBb0IsSUFBcEIsQ0FBeUIsSUFBekIsQ0FBUjtBQUVEOzs7aUNBRVksUSxFQUFVLFMsRUFBVTtBQUMvQixVQUFHLEtBQUssVUFBTCxHQUFrQixRQUFyQixFQUE4QjtBQUM1QixVQUFFLEdBQUYsQ0FBTSxLQUFLLEdBQVgsRUFBZ0IsT0FBaEIsRUFBNEIsS0FBSyxLQUFMLENBQVcsUUFBWCxDQUE1QjtBQUNEO0FBQ0QsVUFBRyxLQUFLLFdBQUwsR0FBbUIsU0FBdEIsRUFBZ0M7QUFDOUIsVUFBRSxHQUFGLENBQU0sS0FBSyxHQUFYLEVBQWdCLFFBQWhCLEVBQTZCLEtBQUssS0FBTCxDQUFXLFNBQVgsQ0FBN0I7QUFDRDtBQUNGOzs7NkJBQ087QUFDTixXQUFLLE1BQUwsQ0FBWSxRQUFaO0FBQ0EsV0FBSyxNQUFMLEdBQWMsU0FBZDtBQUNBLGdCQUFVLFdBQVYsQ0FBc0IsS0FBSyxJQUEzQjtBQUNBLFdBQUssSUFBTCxHQUFZLFNBQVo7QUFDRDs7O3dCQTlIYztBQUNiLFVBQUksZUFBZSxLQUFLLFlBQUwsRUFBbkI7O0FBRUEsNEZBRXNDLFlBRnRDO0FBT0Q7Ozs7OztBQXVISCxHQUFHLEtBQUgsQ0FBUyxVQUFULENBQW9CLFlBQXBCLEVBQWtDLGtCQUFVO0FBQzFDLE1BQUksUUFBUSxJQUFJLFdBQUosRUFBWjtBQUNBLFFBQU0sU0FBTixDQUFnQixNQUFoQjtBQUNELENBSEQ7Ozs7Ozs7Ozs7O0FDL0lBLElBQUksS0FBSyxRQUFRLGNBQVIsQ0FBVDtBQUNBLElBQUksSUFBSSxHQUFHLENBQVg7QUFDQSxJQUFJLElBQUksR0FBRyxDQUFYO0FBQ0EsSUFBSSxTQUFTLEdBQUcsTUFBaEI7O0lBQ00sc0I7QUFFSixrQ0FBWSxNQUFaLEVBQW9CO0FBQUE7O0FBQ2xCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLFVBQUwsR0FBa0IseUJBQWxCO0FBQ0EsU0FBSyxVQUFMO0FBQ0EsU0FBSyxTQUFMO0FBQ0Q7Ozs7aUNBRVksTyxFQUFTO0FBQ3BCLFVBQUksT0FBTyxXQUFXLEVBQUUsVUFBRixFQUF0QjtBQUNBLFVBQUksWUFBWSxLQUFLLEdBQUcsTUFBSCxDQUFVLGdCQUFWLENBQUwsQ0FBaEI7QUFDQSxhQUFRLEtBQUssR0FBRyxNQUFILENBQVUsaUJBQVYsQ0FBTCxNQUF1QyxPQUFPLGtCQUFQLENBQXZDLEtBQXNFLENBQUMsU0FBRCxJQUN6RSxLQUFLLEdBQUcsTUFBSCxDQUFVLG9CQUFWLENBQUwsTUFBMEMsTUFEK0IsSUFFekUsS0FBSyxHQUFHLE1BQUgsQ0FBVSxtQkFBVixDQUFMLENBRkcsQ0FBUjtBQUdEOzs7aUNBRVk7QUFBQTs7QUFDWCxTQUFHLEtBQUgsQ0FBUyxTQUFULENBQW1CLE9BQU8saUJBQVAsQ0FBbkIsRUFBOEMsVUFBQyxHQUFELEVBQVM7QUFDckQsWUFBSSxVQUFVLElBQUksTUFBbEI7QUFBQSxZQUEwQixhQUFhLElBQUksTUFBM0M7QUFDQSxZQUFHLE1BQUssWUFBTCxFQUFILEVBQXdCO0FBQ3RCLGdCQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLEdBQUcsTUFBSCxDQUFVLGVBQVYsQ0FBcEIsRUFBZ0QsR0FBRyxNQUFILENBQVUsa0JBQVYsQ0FBaEQ7QUFDRCxTQUZELE1BR0ssSUFBRyxRQUFRLEdBQUcsTUFBSCxDQUFVLGlCQUFWLENBQVIsTUFBMEMsUUFBN0MsRUFBc0Q7QUFDekQsZ0JBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsR0FBRyxNQUFILENBQVUsZUFBVixDQUFwQixFQUFnRCxHQUFHLE1BQUgsQ0FBVSxrQkFBVixDQUFoRDtBQUNBLFlBQUUsa0JBQUYscUJBQXVCLE9BQU8sb0JBQVAsQ0FBdkIsRUFBc0QsS0FBdEQsR0FBOEQsS0FBOUQ7QUFDRCxTQUhJLE1BSUE7QUFDSCxnQkFBSyxNQUFMLENBQVksT0FBWixDQUFvQixHQUFHLE1BQUgsQ0FBVSxlQUFWLENBQXBCLEVBQWdELEdBQUcsTUFBSCxDQUFVLGlCQUFWLENBQWhEO0FBQ0Q7O0FBRUQsWUFBSSxVQUFVLEdBQUcsS0FBSCxDQUFTLEdBQVQsQ0FBYSxHQUFHLE1BQUgsQ0FBVSxhQUFWLENBQWIsQ0FBZDtBQUNBLFlBQUcsV0FBVyxRQUFRLFlBQVIsS0FBeUIsS0FBcEMsSUFDRCxDQUFDLFFBQVEsR0FBRyxNQUFILENBQVUsbUJBQVYsQ0FBUixDQURBLElBRUQsQ0FBQyxXQUFXLEdBQUcsTUFBSCxDQUFVLGdCQUFWLENBQVgsQ0FGQSxJQUdELFFBQVEsR0FBRyxNQUFILENBQVUsZ0JBQVYsQ0FBUixDQUhGLEVBR3dDO0FBQ3RDLFlBQUUsa0JBQUYscUJBQXVCLE9BQU8sb0JBQVAsQ0FBdkIsRUFBc0QsT0FBdEQsR0FBZ0UsS0FBaEU7QUFDRCxTQUxELE1BTUssSUFBRyxXQUFXLEdBQUcsTUFBSCxDQUFVLGdCQUFWLENBQVgsS0FDTixDQUFDLFFBQVEsR0FBRyxNQUFILENBQVUsbUJBQVYsQ0FBUixDQURLLElBRU4sV0FBVyxHQUFHLE1BQUgsQ0FBVSxnQkFBVixDQUFYLE1BQTRDLFFBQVEsR0FBRyxNQUFILENBQVUsZ0JBQVYsQ0FBUixDQUZ0QyxJQUdOLFFBQVEsR0FBRyxNQUFILENBQVUsb0JBQVYsQ0FBUixNQUE2QyxNQUh2QyxJQUlOLFdBQVcsR0FBRyxNQUFILENBQVUsb0JBQVYsQ0FBWCxNQUFnRCxRQUFRLEdBQUcsTUFBSCxDQUFVLG9CQUFWLENBQVIsQ0FKN0MsRUFJdUY7QUFDMUYsWUFBRSxrQkFBRixxQkFBdUIsT0FBTyxvQkFBUCxDQUF2QixFQUFzRCxPQUF0RCxHQUFnRSxLQUFoRTtBQUNEO0FBQ0YsT0EzQkQ7O0FBNkJBLFVBQUksVUFBVSxFQUFFLFVBQUYsRUFBZDtBQUNBLFVBQUcsS0FBSyxZQUFMLE1BQ0MsUUFBUSxHQUFHLE1BQUgsQ0FBVSxvQkFBVixDQUFSLE1BQTZDLE1BRGpELEVBRUE7QUFDRSxVQUFFLGtCQUFGLHFCQUF1QixPQUFPLG9CQUFQLENBQXZCLEVBQXNELElBQXRELEdBQTZELEtBQTdEO0FBQ0Q7QUFDRCxTQUFHLEtBQUgsQ0FBUyxTQUFULENBQW1CLHVCQUFuQixFQUE0QyxVQUFDLFFBQUQsRUFBYztBQUN4RCxZQUFHLFNBQVMsR0FBWixFQUFpQjtBQUNmLGFBQUcsS0FBSCxDQUFTLFNBQVQsQ0FBbUIsU0FBUyxHQUE1QixFQUFpQyxVQUFDLE9BQUQsRUFBVSxHQUFWLEVBQWUsS0FBZixFQUF5QjtBQUN4RDtBQUNBLGdCQUFHLFNBQVMsSUFBVCxJQUFpQixTQUFTLElBQVQsQ0FBYyxHQUEvQixJQUFzQyxDQUFDLFFBQVEsQ0FBUixFQUFXLEtBQXJELEVBQTREO0FBQzFELHNCQUFRLE9BQVIsQ0FBZ0IsRUFBQyxRQUFRLE1BQVQsRUFBaUIsT0FBTyxTQUFTLElBQVQsQ0FBYyxHQUF0QztBQUNkLHdCQUFRLFNBQVMsSUFBVCxDQUFjLElBRFIsRUFDYyxTQUFTLElBRHZCLEVBQWhCO0FBRUEsaUJBQUcsS0FBSCxDQUFTLE9BQVQsQ0FBaUIsU0FBUyxHQUExQixFQUErQixPQUEvQjtBQUNEO0FBQ0YsV0FQRDtBQVFEO0FBQ0QsWUFBRyxTQUFTLElBQVQsQ0FBYyxHQUFqQixFQUFzQjtBQUNwQixnQkFBSyxxQkFBTCxDQUEyQixTQUFTLElBQVQsQ0FBYyxHQUF6QztBQUNEO0FBQ0YsT0FkRDtBQWVEOzs7MENBRXFCLFEsRUFBVTtBQUM5QixVQUFJLDZCQUFZLFlBQVk7QUFBeEIsU0FDRCxHQUFHLE1BQUgsQ0FBVSxtQkFBVixDQURDLEVBQ2dDLElBRGhDLENBQUo7QUFFQSxVQUFHLFlBQVksYUFBYSxHQUE1QixFQUFpQztBQUMvQixpQkFBUyxDQUFULEdBQWEsUUFBYjtBQUNEO0FBQ0QsUUFBRSxrQkFBRixDQUFxQixRQUFyQixFQUErQixLQUEvQjtBQUNEOzs7Z0NBRVc7QUFDVixVQUFJLFdBQVcsS0FBZjtBQUNBLGVBQVMsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBcUMsYUFBSztBQUN4QyxZQUFLLEVBQUUsT0FBRixLQUFjLEVBQW5CLEVBQXdCO0FBQUU7QUFDeEIsYUFBRyxDQUFILENBQUssSUFBTCxDQUFVLEVBQUUsSUFBRixDQUFPLFFBQVAsQ0FBVixFQUE0QixnQkFBUTtBQUNsQyxjQUFFLFFBQUYsQ0FBVyxJQUFYLEVBQWlCLFNBQWpCO0FBQ0QsV0FGRDtBQUdEO0FBQ0YsT0FORCxFQU1HLEtBTkg7QUFPQSxlQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFlBQVk7QUFDN0MsWUFBRyxDQUFDLFFBQUosRUFBYztBQUNaLGFBQUcsQ0FBSCxDQUFLLElBQUwsQ0FBVSxFQUFFLElBQUYsQ0FBTyxRQUFQLENBQVYsRUFBNEIsVUFBVSxJQUFWLEVBQWdCO0FBQzFDLGNBQUUsUUFBRixDQUFXLElBQVgsRUFBaUIsU0FBakI7QUFDRCxXQUZEO0FBR0Q7QUFDRCxtQkFBVyxLQUFYO0FBQ0QsT0FQRDtBQVFBLFNBQUcsQ0FBSCxDQUFLLElBQUwsQ0FBVSxFQUFFLElBQUYsQ0FBTyxnQkFBUCxDQUFWLEVBQW9DLFVBQVUsSUFBVixFQUFnQjtBQUNsRCxVQUFFLGdCQUFGLENBQW1CLElBQW5CLEVBQXlCLE9BQXpCLEVBQWtDLFlBQVc7QUFDM0MscUJBQVcsSUFBWDtBQUNELFNBRkQ7QUFHRCxPQUpEO0FBS0Q7Ozs7OztBQUdILEdBQUcsVUFBSCxDQUFjLHdCQUFkLEVBQXdDLHNCQUF4Qzs7Ozs7Ozs7O0FDNUdBLElBQUksS0FBSyxRQUFRLG9CQUFSLENBQVQ7QUFDQSxJQUFJLElBQUksR0FBRyxDQUFYOztJQUVNLE07QUFDSixrQkFBWSxLQUFaLEVBQWtDO0FBQUEsUUFBZixTQUFlLHVFQUFILEVBQUc7O0FBQUE7O0FBQ2hDLFNBQUssTUFBTCxHQUFjLEtBQWQ7QUFDQSxTQUFLLFVBQUwsR0FBa0IsU0FBbEI7QUFDRDs7OzswQkFJSyxRLEVBQVM7QUFBQTs7QUFDYixRQUFFLElBQUYsQ0FBTyxRQUFQLEVBQWlCLFVBQUMsSUFBRCxFQUFVO0FBQ3pCLGNBQUssU0FBTCxDQUFlLElBQWY7QUFDRCxPQUZEO0FBR0EsV0FBSyxLQUFMO0FBQ0EsV0FBSyxNQUFMO0FBQ0Q7Ozs0QkFDTTtBQUNMLFdBQUssTUFBTCxHQUFjLEVBQWQ7QUFDRDs7OzZCQUNPO0FBQ04sVUFBRyxLQUFLLE1BQUwsQ0FBWSxNQUFaLEdBQXFCLEtBQUssVUFBN0IsRUFBd0M7QUFDdEMsYUFBSyxNQUFMLENBQVksTUFBWixDQUFtQixLQUFLLFVBQXhCO0FBQ0Q7QUFDRjs7OzhCQUNTLEksRUFBSztBQUNiLFVBQUksZ0JBQWdCLEtBQUssU0FBTCxDQUFlLElBQWYsQ0FBcEI7QUFDQSxVQUFHLGFBQUgsRUFBaUI7QUFDZixzQkFBYyxLQUFkLENBQW9CLElBQXBCO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsYUFBSyxNQUFMLENBQVksSUFBWixDQUFpQixJQUFqQjtBQUNEO0FBQ0Y7Ozs4QkFFUyxVLEVBQVk7QUFDcEIsYUFBTyxFQUFFLElBQUYsQ0FBTyxLQUFLLE1BQVosRUFBb0IsVUFBQyxJQUFELEVBQVU7QUFDbkMsZUFBTyxLQUFLLEtBQUwsQ0FBVyxVQUFYLENBQVA7QUFDRCxPQUZNLENBQVA7QUFHRDs7OytCQUVVLGEsRUFBZSxRLEVBQVU7QUFDbEMsb0JBQWMsV0FBZCxJQUE2QixTQUFTLFdBQXRDO0FBQ0Esb0JBQWMsS0FBZCxHQUFzQixLQUFLLEdBQUwsQ0FBUyxjQUFjLEtBQXZCLEVBQThCLFNBQVMsS0FBdkMsQ0FBdEI7QUFDRDs7OzRCQUVNO0FBQ0wsV0FBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixLQUFLLGFBQXJCO0FBQ0Q7OztrQ0FDYSxFLEVBQUksRSxFQUFHO0FBQ25CLGFBQU8sR0FBRyxPQUFILENBQVcsRUFBWCxDQUFQO0FBQ0Q7Ozt3QkE1Q1U7QUFDVCxhQUFPLEtBQUssTUFBWjtBQUNEOzs7Ozs7QUE2Q0gsT0FBTyxPQUFQLEdBQWlCLE1BQWpCOzs7Ozs7Ozs7QUN2REEsSUFBSSxLQUFLLFFBQVEsb0JBQVIsQ0FBVDtBQUNBLElBQU0sU0FBUyxHQUFHLE1BQWxCOztJQUVNLEs7QUFDSixpQkFBWSxJQUFaLEVBQWlCO0FBQUE7O0FBQ2YsU0FBSyxLQUFMLEdBQWEsUUFBUSxFQUFyQjtBQUNBLFNBQUssUUFBTDtBQUNEOzs7OytCQUNTO0FBQ1IsVUFBRyxLQUFLLEtBQUwsS0FBZSxHQUFsQixFQUFzQjtBQUNwQixhQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0Q7QUFDRCxVQUFHLEtBQUssS0FBTCxDQUFXLENBQVgsTUFBa0IsR0FBbEIsSUFBeUIsS0FBSyxLQUFMLENBQVcsQ0FBWCxNQUFrQixHQUE5QyxFQUFrRDtBQUNoRCxhQUFLLEtBQUwsR0FBYSxLQUFLLEtBQUwsQ0FBVyxLQUFYLENBQWlCLENBQWpCLENBQWI7QUFDRDtBQUNGOzs7c0NBQ2lCLE0sRUFBTztBQUN2QixhQUFRLE9BQU8sbUJBQVAsSUFBOEIsT0FBTyxRQUFQLEVBQTlCLEdBQWlELEtBQXpEO0FBQ0Q7OztxQ0FDZ0IsTSxFQUFPO0FBQ3RCLFVBQUksV0FBVyxLQUFLLGlCQUFMLENBQXVCLE1BQXZCLENBQWY7QUFDQSxhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsUUFBdEIsQ0FBUDtBQUNEOzs7cUNBQ2dCLFEsRUFBUztBQUN4QixVQUFJLE9BQVEsS0FBSyxLQUFMLEtBQWUsRUFBaEIsR0FBcUIsUUFBckIsR0FBaUMsS0FBSyxLQUFMLEdBQWEsR0FBYixHQUFtQixRQUEvRDs7QUFFQSxhQUFPLElBQVA7QUFDRDs7O2tDQUNZO0FBQ1gsYUFBUSxLQUFLLEtBQUwsS0FBZSxFQUFoQixHQUFxQixFQUFyQixHQUEyQixNQUFNLEtBQUssS0FBWCxHQUFtQixHQUFyRDtBQUNEOzs7Z0NBQ1ksTSxFQUFPO0FBQ2xCLGFBQU8sT0FBTyxrQkFBUCxJQUE2QixLQUFLLFdBQUwsRUFBN0IsR0FBa0QsT0FBTyxRQUFQLEVBQXpEO0FBQ0Q7OztzQ0FFZ0I7QUFDZixhQUFPLE9BQU8saUJBQVAsQ0FBUDtBQUNEOzs7cUNBQ2U7QUFDZCxVQUFJLFdBQVcsS0FBSyxlQUFMLEVBQWY7QUFDQSxhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsUUFBdEIsQ0FBUDtBQUNEOzs7dUNBQ2lCO0FBQ2hCLFVBQUksV0FBVyxPQUFPLG1CQUFQLENBQWY7QUFDQSxhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsUUFBdEIsQ0FBUDtBQUNEOzs7Z0NBQ1csRyxFQUFLO0FBQ2YsYUFBTyxLQUFLLGdCQUFMLENBQXNCLEdBQXRCLENBQVA7QUFDRDs7OzBDQUNvQjtBQUNuQixVQUFJLFdBQVcsT0FBTyxnQkFBUCxDQUFmO0FBQ0EsYUFBTyxLQUFLLGdCQUFMLENBQXNCLFFBQXRCLENBQVA7QUFFRDs7OzBDQUNvQjtBQUNuQixVQUFJLFdBQVcsT0FBTyxzQkFBUCxDQUFmO0FBQ0EsYUFBTyxLQUFLLGdCQUFMLENBQXNCLFFBQXRCLENBQVA7QUFDRDs7O29DQUVlLEUsRUFBSTtBQUNsQixVQUFJLGFBQWEsT0FBTyxrQkFBUCxDQUFqQjtBQUNBLFVBQUksZ0JBQWdCLEtBQUssZ0JBQUwsQ0FBc0IsVUFBdEIsQ0FBcEI7QUFDQSxhQUFVLGFBQVYsU0FBMkIsRUFBM0I7QUFDRDs7Ozs7O0FBR0gsT0FBTyxPQUFQLEdBQWlCLEtBQWpCOzs7Ozs7Ozs7QUNsRUEsSUFBTSxLQUFLLFFBQVEsb0JBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxPQUFPLE9BQVA7QUFDRSxxQkFBWSxTQUFaLEVBQXVCO0FBQUE7O0FBRXJCLFNBQUssU0FBTCxHQUFpQixhQUFhLEVBQTlCO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBSyxLQUFMO0FBQ0Q7O0FBTkg7QUFBQTtBQUFBLDRCQU9VO0FBQUE7O0FBQ04sV0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsUUFBRSxJQUFGLENBQU8sS0FBSyxTQUFaLEVBQXVCLFVBQUMsSUFBRCxFQUFVO0FBQy9CLFlBQUksWUFBWSxLQUFLLEtBQXJCO0FBQ0EsWUFBSSxPQUFPLEtBQUssSUFBaEI7QUFDQSxVQUFFLElBQUYsQ0FBTyxTQUFQLEVBQWtCLFVBQUMsR0FBRCxFQUFTO0FBQ3pCLGdCQUFLLElBQUwsQ0FBVSxJQUFWLEVBQWdCLEdBQWhCO0FBQ0QsU0FGRDtBQUdELE9BTkQ7QUFPRDtBQWhCSDtBQUFBO0FBQUEseUJBaUJPLElBakJQLEVBaUJhLEdBakJiLEVBaUJrQjtBQUNkLFlBQU0sSUFBSSxXQUFKLEVBQU47QUFDQSxhQUFPLEtBQUssV0FBTCxFQUFQO0FBQ0EsV0FBSyxTQUFMLENBQWUsR0FBZixJQUFzQixLQUFLLFNBQUwsQ0FBZSxJQUFmLEtBQXdCLElBQTlDO0FBQ0Q7QUFyQkg7QUFBQTtBQUFBLDRCQXVCVSxJQXZCVixFQXVCZ0I7QUFDWixhQUFPLEtBQUssU0FBTCxDQUFlLElBQWYsS0FBd0IsSUFBL0I7QUFDRDtBQXpCSDs7QUFBQTtBQUFBOzs7OztBQ0ZBLElBQUksV0FBVztBQUNiLHdCQUFzQixHQURUO0FBRWIsaUJBQWUsQ0FGRjtBQUdiLG1CQUFnQixDQUhIO0FBSWIsdUJBQW9CO0FBQ2xCLHVCQUFrQixDQURBO0FBRWxCLHFCQUFnQixDQUZFO0FBR2xCLHVCQUFrQixDQUhBO0FBSWxCLGVBQVc7QUFKTztBQUpQLENBQWY7O0FBWUEsT0FBTyxPQUFQLEdBQWlCLFFBQWpCOzs7Ozs7Ozs7QUNaQSxJQUFNLFFBQVEsUUFBUSxXQUFSLENBQWQ7QUFDQSxJQUFNLEtBQUssUUFBUSxvQkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjtBQUNBLElBQU0sYUFBYSxRQUFRLGNBQVIsQ0FBbkI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLFVBQVIsQ0FBdEI7QUFDQSxJQUFNLGVBQWUsUUFBUSxTQUFSLENBQXJCO0FBQ0EsSUFBTSxpQkFBaUIsUUFBUSxtQkFBUixDQUF2Qjs7SUFHTSxTO0FBQ0oscUJBQWEsTUFBYixFQUFxQixRQUFyQixFQUFvRDtBQUFBLFFBQXJCLGVBQXFCLHVFQUFILEVBQUc7O0FBQUE7O0FBQ2xELFNBQUssT0FBTCxHQUFlLE1BQWY7QUFDQSxTQUFLLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxTQUFLLGVBQUwsR0FBdUIsZUFBdkI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsUUFBakI7QUFDRDs7OzttQ0FDYyxZLEVBQWE7QUFDMUIsV0FBSyxhQUFMLEdBQXFCLFlBQXJCO0FBQ0EsV0FBSyxXQUFMLEdBQW1CLEVBQW5CO0FBQ0EsV0FBSyxtQkFBTDtBQUNBLFVBQUksU0FBUyxLQUFLLE9BQUwsQ0FBYSxTQUFiLENBQXVCLEtBQUssYUFBTCxDQUFtQixRQUExQyxDQUFiO0FBQ0EsVUFBRyxNQUFILEVBQVU7QUFDUixZQUFJLGFBQWEsT0FBTyxNQUF4QjtBQUNBLGFBQUksSUFBSSxJQUFJLENBQVosRUFBZSxJQUFJLFVBQUosSUFBa0IsS0FBSyxXQUFMLENBQWlCLE1BQWpCLEdBQTBCLEtBQUssZUFBaEUsRUFBaUYsR0FBakYsRUFBcUY7QUFDbkYsY0FBSSxPQUFPLE9BQU8sQ0FBUCxDQUFYO0FBQ0EsZUFBSyxjQUFMLENBQW9CLElBQXBCO0FBQ0Q7QUFDRjtBQUNELFdBQUssa0JBQUw7QUFDRDs7OzRCQUNNO0FBQ0wsV0FBSyxXQUFMLEdBQW1CLEVBQW5CO0FBQ0Q7OzswQ0FDb0I7O0FBRW5CLFVBQUksY0FBYyxLQUFLLE9BQUwsQ0FBYSxTQUFiLENBQXVCLEtBQUssYUFBTCxDQUFtQixRQUExQyxDQUFsQjtBQUNBLFVBQUcsV0FBSCxFQUFlO0FBQ2IsYUFBSyxjQUFMLENBQW9CLFdBQXBCO0FBQ0Q7QUFDRjs7O3lDQUNtQjtBQUNsQixVQUFHLEtBQUssU0FBUixFQUFtQjtBQUNqQixhQUFLLFNBQUwsQ0FBZSxJQUFJLGNBQUosQ0FBbUIsS0FBSyxXQUF4QixFQUFxQyxLQUFLLGFBQTFDLENBQWYsRUFBeUUsS0FBSyxPQUE5RTtBQUNEO0FBQ0Y7OztxQ0FFZ0IsSSxFQUFLO0FBQ3BCLFdBQUssYUFBTCxHQUFxQixLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBckI7QUFDQSxVQUFHLEtBQUssYUFBTCxJQUFzQixDQUF0QixJQUEyQixDQUFDLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsSUFBeEIsQ0FBL0IsRUFBNkQ7QUFDM0QsZUFBTyxJQUFQO0FBQ0Q7QUFDRCxhQUFPLEtBQVA7QUFDRDs7O21DQUVjLFMsRUFBVTtBQUN2QixVQUFHLENBQUMsU0FBSixFQUFlO0FBQ2I7QUFDRDtBQUNELFVBQUksT0FBTyxhQUFhLGNBQWIsQ0FBNEIsU0FBNUIsRUFBdUMsTUFBTSxHQUFOLENBQVUsSUFBakQsQ0FBWDtBQUNBLFVBQUcsQ0FBQyxJQUFKLEVBQVU7QUFDUjtBQUNEOztBQUVELFVBQUcsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUFILEVBQStCO0FBQzdCLFlBQUksZ0JBQWdCLEtBQUssYUFBTCxDQUFtQixlQUFuQixDQUFtQyxJQUFuQyxDQUFwQjtBQUNBLFlBQUksT0FBTyxLQUFLLGFBQUwsQ0FBbUIsa0JBQW5CLENBQXNDLGFBQXRDLENBQVg7QUFDQSxZQUFJLGFBQWEsSUFBSSxVQUFKLENBQWUsSUFBZixFQUFxQixJQUFFLEtBQUssYUFBNUIsRUFBMkMsQ0FBM0MsRUFBOEMsY0FBYyxtQkFBZCxDQUFrQyxTQUFoRixDQUFqQjtBQUNBLGFBQUssV0FBTCxDQUFpQixJQUFqQixDQUFzQixVQUF0QjtBQUNEO0FBQ0Y7OztpQ0FDWSxJLEVBQUs7QUFDaEIsYUFBTyxFQUFFLFlBQUYsQ0FBZSxLQUFLLGFBQUwsQ0FBbUIsUUFBbEMsRUFBNEMsSUFBNUMsQ0FBUDtBQUNEOzs7Ozs7QUFHSCxPQUFPLE9BQVAsR0FBaUIsU0FBakI7Ozs7Ozs7OztBQzNFQSxJQUFNLGlCQUFpQixRQUFRLG1CQUFSLENBQXZCO0FBQ0EsSUFBTSxtQkFBbUIsUUFBUSxzQkFBUixDQUF6QjtBQUNBLElBQU0sZ0JBQWdCLFFBQVEsVUFBUixDQUF0QjtBQUNBLElBQU0sUUFBUSxRQUFRLFdBQVIsQ0FBZDtBQUNBLElBQU0sS0FBSyxRQUFRLG9CQUFSLENBQVg7QUFDQSxJQUFNLElBQUksR0FBRyxDQUFiO0FBQ0EsSUFBTSxrQkFBa0IsUUFBUSxrQkFBUixDQUF4Qjs7SUFFTSxnQjtBQUNKLDRCQUFZLFFBQVosRUFBc0IsTUFBdEIsRUFBbUQ7QUFBQSxRQUFyQixlQUFxQix1RUFBSCxFQUFHOztBQUFBOztBQUNqRCxTQUFLLGdCQUFMLEdBQXdCLGVBQXhCO0FBQ0EsU0FBSyxPQUFMLEdBQWUsTUFBZjtBQUNBLFNBQUssV0FBTCxHQUFtQixLQUFLLE9BQUwsQ0FBYSxhQUFiLEVBQW5CO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLFFBQWpCO0FBQ0EsU0FBSyxPQUFMLEdBQWUsY0FBYyxtQkFBZCxDQUFrQyxpQkFBakQ7QUFDQSxTQUFLLGlCQUFMLEdBQXlCLElBQUksZUFBSixDQUFvQixFQUFwQixFQUF3QixLQUFLLFdBQUwsR0FBaUIsQ0FBekMsQ0FBekI7QUFDRDs7Ozs0QkFDTTtBQUNMLFdBQUssaUJBQUwsQ0FBdUIsS0FBdkI7QUFDQSxXQUFLLFlBQUwsR0FBb0IsU0FBcEI7QUFDRDs7O21DQUNjLFksRUFBYTs7QUFFMUIsV0FBSyxLQUFMLENBQVcsWUFBWDtBQUNBLFdBQUssbUJBQUw7O0FBRUEsV0FBSyxpQkFBTDtBQUNEOzs7MENBQ29COztBQUVuQixVQUFJLGNBQWMsS0FBSyxjQUFMLEVBQWxCO0FBQ0EsVUFBRyxXQUFILEVBQWU7QUFDYixhQUFLLGVBQUwsQ0FBcUIsV0FBckI7QUFDRDtBQUNGOzs7d0NBQ2tCO0FBQ2pCLGFBQU8sS0FBSyxZQUFMLENBQWtCLFdBQXpCO0FBQ0Q7OztxQ0FDZTtBQUNkLGFBQVEsS0FBSyxZQUFMLENBQWtCLFdBQW5CLEdBQ0UsS0FBSyxPQUFMLENBQWEsU0FEZixHQUVHLEtBQUssT0FBTCxDQUFhLFNBQWIsQ0FBdUIsS0FBSyxZQUFMLENBQWtCLFFBQXpDLENBRlY7QUFHRDs7OzBCQUNLLFksRUFBYTtBQUNqQixXQUFLLGlCQUFMLEdBQXlCLElBQUksZUFBSixDQUFvQixFQUFwQixFQUF3QixLQUFLLFdBQUwsR0FBaUIsQ0FBekMsQ0FBekI7QUFDQSxXQUFLLFlBQUwsR0FBb0IsWUFBcEI7QUFDRDs7O3dDQUlrQjtBQUNqQixVQUFHLEtBQUssU0FBUixFQUFrQjtBQUNoQixhQUFLLFNBQUwsQ0FBZ0IsSUFBSSxjQUFKLENBQW1CLEtBQUssV0FBeEIsRUFBcUMsS0FBSyxZQUExQyxDQUFoQixFQUF5RSxLQUFLLE9BQTlFO0FBQ0Q7QUFDRjs7O29DQVFlLE0sRUFBTztBQUNyQixVQUFHLENBQUMsTUFBSixFQUFZO0FBQ1Y7QUFDRDs7QUFFRCxVQUFJLGFBQWEsT0FBTyxNQUF4QjtBQUNBLFdBQUksSUFBSSxJQUFJLENBQVosRUFBZSxJQUFJLFVBQUosSUFBa0IsS0FBSyxXQUFMLENBQWlCLE1BQWpCLEdBQTBCLEtBQUssZUFBaEUsRUFBaUYsR0FBakYsRUFBcUY7QUFDbkYsWUFBSSxPQUFPLE9BQU8sQ0FBUCxDQUFYO0FBQ0EsYUFBSyxrQkFBTCxDQUF3QixJQUF4QjtBQUNEO0FBQ0Y7Ozt1Q0FDa0IsUyxFQUFXLE8sRUFBUTtBQUNwQyxnQkFBVSxXQUFXLEtBQUssa0JBQUwsQ0FBd0IsSUFBeEIsQ0FBNkIsSUFBN0IsQ0FBckI7QUFDQSxVQUFJLGFBQWEsS0FBSyxPQUFMLENBQWEsWUFBYixDQUEwQixTQUExQixDQUFqQjtBQUNBLFVBQUksY0FBYyxLQUFLLE9BQUwsQ0FBYSxXQUEvQjtBQUNBLFVBQUcsUUFBUSxTQUFSLENBQUgsRUFBc0I7QUFDcEIsWUFBSSxPQUFPLFVBQVUsTUFBTSxHQUFOLENBQVUsSUFBcEIsQ0FBWDtBQUNBLFlBQUcsS0FBSyxzQkFBTCxDQUE0QixJQUE1QixDQUFILEVBQXFDO0FBQ25DLGVBQUssbUJBQUwsQ0FBeUIsU0FBekIsRUFBb0MsV0FBcEMsRUFBaUQsVUFBakQ7QUFDRDtBQUNGO0FBQ0Y7OztrQ0FFWTtBQUNYLGFBQU8sSUFBUDtBQUNEOzs7MkNBQ3NCLEksRUFBSztBQUMxQixhQUFPLENBQUMsS0FBSyxPQUFMLENBQWEsVUFBYixDQUF3QixJQUF4QixDQUFELElBQWtDLENBQUMsS0FBSyxZQUFMLENBQWtCLGFBQWxCLENBQWdDLElBQWhDLENBQTFDO0FBQ0Q7Ozt1Q0FDa0IsUyxFQUFVO0FBQzNCLFVBQUcsS0FBSyxZQUFMLENBQWtCLFdBQXJCLEVBQWlDO0FBQy9CLGVBQU8sSUFBUDtBQUNEOztBQUVELFVBQUksT0FBTyxVQUFVLE1BQU0sR0FBTixDQUFVLElBQXBCLENBQVg7QUFDQSxhQUFPLEtBQUssWUFBTCxDQUFrQixjQUFsQixDQUFpQyxJQUFqQyxDQUFQO0FBQ0Q7Ozt3Q0FDbUIsUyxFQUFXLFcsRUFBYSxVLEVBQVc7QUFBQTs7QUFDckQsVUFBSSxVQUFVLElBQUksZ0JBQUosQ0FBcUIsRUFBQyxRQUFRLEtBQUssT0FBZCxFQUF1QixzQkFBdkIsRUFBbUMsYUFBWSxXQUEvQyxFQUE0RCxjQUFhLEtBQUssWUFBOUUsRUFBNEYsWUFBWSxLQUFLLFdBQTdHLEVBQXJCLENBQWQ7QUFDQSxVQUFJLGNBQWMsUUFBUSxtQkFBUixDQUE0QixTQUE1QixFQUF1QyxJQUF2QyxFQUE2QyxTQUE3QyxFQUF3RCxLQUFLLE9BQTdELENBQWxCO0FBQ0EsUUFBRSxJQUFGLENBQU8sV0FBUCxFQUFvQixVQUFDLFVBQUQsRUFBZ0I7QUFDbEMsWUFBRyxlQUFlLFNBQWxCLEVBQTRCO0FBQzFCLGdCQUFLLGlCQUFMLENBQXVCLFNBQXZCLENBQWlDLFVBQWpDO0FBQ0Q7QUFDRixPQUpEO0FBS0Q7OzsyQ0FFc0IsSyxFQUFNO0FBQzNCLGFBQVEsUUFBTSxLQUFLLFdBQW5CO0FBQ0Q7Ozt3QkFoRWlCO0FBQ2hCLGFBQU8sS0FBSyxpQkFBTCxDQUF1QixLQUE5QjtBQUNEOzs7c0JBT21CLFEsRUFBUztBQUMzQixXQUFLLGdCQUFMLEdBQXdCLFFBQXhCO0FBQ0QsSzt3QkFDb0I7QUFDbkIsYUFBTyxLQUFLLGdCQUFaO0FBQ0Q7Ozs7OztBQXFESCxPQUFPLE9BQVAsR0FBaUIsZ0JBQWpCOzs7Ozs7Ozs7QUNsSEEsSUFBSSxLQUFLLFFBQVEsb0JBQVIsQ0FBVDtBQUNBLElBQUksSUFBSSxHQUFHLENBQVg7QUFDQSxJQUFJLGFBQWEsUUFBUSxjQUFSLENBQWpCO0FBQ0EsSUFBSSxTQUFTLFFBQVEsZ0JBQVIsQ0FBYjtBQUNBLElBQUksaUJBQWlCLFFBQVEsbUJBQVIsQ0FBckI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLFVBQVIsQ0FBdEI7O0lBRU0sZ0I7QUFDSiw0QkFBWSxNQUFaLEVBQW9CLFFBQXBCLEVBQTZCO0FBQUE7O0FBQzNCLFNBQUssT0FBTCxHQUFlLE1BQWY7QUFDQSxTQUFLLFlBQUwsR0FBb0IsRUFBcEI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsUUFBakI7QUFDQSxTQUFLLE9BQUwsR0FBZSxjQUFjLG1CQUFkLENBQWtDLGlCQUFqRDtBQUNBLFNBQUssZ0JBQUwsR0FBeUIsY0FBYyx3QkFBZCxLQUEyQyxTQUE1QyxHQUF3RCxDQUF4RCxHQUEyRCxjQUFjLHdCQUFqRztBQUNEOzs7O21DQUNjLFksRUFBYztBQUMzQixXQUFLLFlBQUwsR0FBb0IsRUFBcEI7QUFDQSxXQUFLLGFBQUwsR0FBcUIsWUFBckI7QUFDQSxXQUFLLG1CQUFMO0FBQ0EsVUFBRyxLQUFLLFNBQVIsRUFBa0I7QUFDaEIsYUFBSyxTQUFMLENBQWUsSUFBSSxjQUFKLENBQW1CLEtBQUssWUFBeEIsRUFBc0MsS0FBSyxhQUEzQyxDQUFmO0FBQ0Q7QUFDRCxhQUFPLEtBQUssWUFBWjtBQUNEOzs7MkJBQ0ssQ0FDTDs7OzRCQUNNO0FBQ0wsV0FBSyxZQUFMLEdBQW9CLEVBQXBCO0FBQ0Q7OzswQ0FDb0I7QUFBQTs7QUFDbkIsVUFBRyxLQUFLLGFBQUwsQ0FBbUIsV0FBbkIsS0FBbUMsRUFBdEMsRUFBeUM7QUFDdkMsVUFBRSxJQUFGLENBQU8sS0FBSyxPQUFMLENBQWEsS0FBcEIsRUFBMkIsVUFBQyxJQUFELEVBQVE7QUFDakMsY0FBRyxNQUFLLE1BQUwsQ0FBWSxLQUFLLElBQWpCLENBQUgsRUFBMEI7QUFDeEIsa0JBQUssWUFBTCxDQUFrQixJQUFsQixDQUF1QixNQUFLLGlCQUFMLENBQXVCLElBQXZCLENBQXZCO0FBQ0Q7QUFDRixTQUpEO0FBS0EsYUFBSyxNQUFMO0FBQ0Q7QUFDRjs7OzZCQUNPO0FBQ04sV0FBSyxZQUFMLENBQWtCLE1BQWxCLENBQXlCLEtBQUssZ0JBQTlCO0FBQ0Q7OztzQ0FDaUIsSSxFQUFLO0FBQ3JCLFVBQUksZ0JBQWdCLElBQUksVUFBSixDQUFlLEtBQUssSUFBcEIsRUFBMEIsQ0FBMUIsRUFBNkIsS0FBSyxLQUFsQyxFQUF5QyxLQUFLLE9BQTlDLENBQXBCO0FBQ0EsYUFBTyxhQUFQO0FBQ0Q7OzsyQkFDTSxJLEVBQUs7QUFDVixVQUFHLEtBQUssYUFBTCxDQUFtQixhQUFuQixDQUFpQyxNQUFqQyxHQUEwQyxLQUFLLE1BQWxELEVBQTBEO0FBQ3hELGVBQU8sS0FBUDtBQUNEO0FBQ0QsVUFBSSxjQUFjLElBQUksTUFBSixDQUFXLElBQVgsRUFBaUIsSUFBakIsQ0FBbEI7QUFDQSxhQUFPLEtBQUssYUFBTCxDQUFtQixPQUFuQixDQUEyQixXQUEzQixDQUFQO0FBQ0Q7Ozs7OztBQUdILE9BQU8sT0FBUCxHQUFpQixnQkFBakI7Ozs7Ozs7OztBQ3ZEQSxJQUFJLEtBQUssUUFBUSxvQkFBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDtBQUNBLElBQU0sZUFBZSxRQUFRLFNBQVIsQ0FBckI7O0lBRU0sYTtBQUNKLDJCQUFhO0FBQUE7QUFDWjs7OztnQ0FHVyxJLEVBQUs7QUFDZixVQUFHLEtBQUssS0FBTCxLQUFlLFNBQWxCLEVBQTRCO0FBQzFCLGFBQUssS0FBTCxHQUFhLFFBQVEsRUFBckI7QUFDRDtBQUNGOzs7aUNBQ1c7QUFDVixhQUFPLEtBQUssS0FBTCxJQUFjLEVBQXJCO0FBQ0Q7OztnQ0FFVyxJLEVBQU0sSyxFQUFNO0FBQ3RCLFdBQUssVUFBTCxHQUFrQixNQUFsQixDQUF5QixLQUF6QixFQUFnQyxDQUFoQztBQUNBLFdBQUssVUFBTCxHQUFrQixPQUFsQixDQUEwQixJQUExQjtBQUNEOzs7Z0NBRVcsTyxFQUFRO0FBQ2xCLFdBQUssVUFBTCxHQUFrQixJQUFsQixDQUF1QixPQUF2QjtBQUNEOzs7d0JBRUcsTyxFQUFRO0FBQ1YsVUFBSSxTQUFTLEVBQUUsU0FBRixDQUFZLEtBQUssVUFBTCxFQUFaLEVBQStCLFVBQUMsSUFBRCxFQUFVO0FBQUMsZUFBTyxhQUFhLGFBQWIsQ0FBMkIsUUFBUSxJQUFuQyxFQUF5QyxLQUFLLElBQTlDLE1BQXdELENBQS9EO0FBQWtFLE9BQTVHLENBQWI7QUFDQSxVQUFHLFVBQVMsQ0FBWixFQUFjO0FBQ1osYUFBSyxXQUFMLENBQWlCLE9BQWpCLEVBQTBCLE1BQTFCO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsYUFBSyxXQUFMLENBQWlCLE9BQWpCO0FBQ0Q7QUFDRjs7OzRCQUNNLFUsRUFBVztBQUNoQixVQUFJLFNBQVMsRUFBRSxTQUFGLENBQVksS0FBSyxVQUFMLEVBQVosRUFBK0IsVUFBQyxJQUFELEVBQVU7QUFBQyxlQUFPLGFBQWEsYUFBYixDQUEyQixVQUEzQixFQUF1QyxLQUFLLElBQTVDLE1BQXNELENBQTdEO0FBQWdFLE9BQTFHLENBQWI7QUFDQSxVQUFHLFVBQVMsQ0FBWixFQUFjO0FBQ1osYUFBSyxVQUFMLEdBQWtCLE1BQWxCLENBQXlCLE1BQXpCO0FBQ0Q7QUFDRjs7Ozs7O0FBR0gsT0FBTyxPQUFQLEdBQWlCLElBQUksYUFBSixFQUFqQjs7Ozs7QUM1Q0EsSUFBSSxXQUFXO0FBQ2IsT0FBSTtBQUNGLFVBQUssQ0FESDtBQUVGLFVBQUssQ0FGSDtBQUdGLFdBQU0sQ0FISjtBQUlGLG1CQUFjLENBSlo7QUFLRixpQkFBWSxDQUxWO0FBTUYsWUFBTztBQU5MLEdBRFM7O0FBVWIsU0FBTztBQUNMLGVBQVUsQ0FETDtBQUVMLFdBQU8sQ0FGRjtBQUdMLGdCQUFZO0FBSFAsR0FWTTs7QUFnQmIsb0JBQWlCO0FBQ2YsVUFBSyxDQURVO0FBRWYsY0FBUztBQUZNO0FBaEJKLENBQWY7O0FBc0JBLE9BQU8sT0FBUCxHQUFpQixRQUFqQjs7Ozs7Ozs7O0FDdEJBLElBQU0sZUFBZSxRQUFRLFNBQVIsQ0FBckI7QUFDQSxJQUFNLEtBQUssUUFBUSwyQkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjs7SUFFTSxXO0FBQ0osdUJBQVksSUFBWixFQUFrQixXQUFsQixFQUErQixTQUEvQixFQUEwQyxVQUExQyxFQUFxRDtBQUFBOztBQUNuRCxTQUFLLFVBQUwsR0FBa0IsVUFBbEI7QUFDQSxTQUFLLFNBQUwsR0FBa0IsY0FBYyxTQUFmLEdBQTRCLEtBQUssTUFBakMsR0FBMEMsU0FBM0Q7QUFDQSxRQUFJLFlBQVksS0FBSyxtQkFBTCxDQUF5QixJQUF6QixDQUFoQjtBQUNBLFFBQUcsQ0FBQyxLQUFLLFVBQVQsRUFBb0I7QUFDbEIsV0FBSyxXQUFMLEdBQW1CLGVBQWUsS0FBSyxZQUFMLENBQWtCLElBQWxCLEVBQXdCLFNBQXhCLENBQWxDO0FBQ0Q7QUFDRCxTQUFLLFFBQUwsQ0FBYyxJQUFkLEVBQW9CLFNBQXBCO0FBQ0Q7Ozs7NkJBRVEsSSxFQUFNLFMsRUFBVTtBQUN2QixXQUFLLFlBQUwsQ0FBa0IsSUFBbEIsRUFBd0IsU0FBeEI7QUFDQSxXQUFLLFdBQUwsR0FBbUIsS0FBSyxhQUFMLENBQW1CLElBQW5CLEVBQW5CO0FBQ0EsV0FBSyxLQUFMLEdBQWEsRUFBRSxPQUFGLENBQVUsS0FBSyxXQUFMLENBQWlCLEtBQWpCLENBQXVCLEdBQXZCLEtBQStCLEVBQXpDLENBQWI7QUFDQSxXQUFLLGtCQUFMO0FBQ0EsVUFBRyxDQUFDLEtBQUssV0FBTixJQUFxQixLQUFLLEtBQUwsQ0FBVyxNQUFYLEdBQW9CLENBQTVDLEVBQThDO0FBQzVDLGFBQUssUUFBTCxHQUFpQixLQUFLLEtBQUwsQ0FBVyxNQUFYLENBQWtCLENBQUMsQ0FBbkIsQ0FBRCxDQUF3QixDQUF4QixDQUFoQjtBQUNEO0FBQ0Y7OztpQ0FDWSxJLEVBQU0sUyxFQUFVO0FBQzNCLFdBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFdBQUssVUFBTCxHQUFrQixFQUFsQjs7QUFFQSxVQUFHLGNBQWMsU0FBakIsRUFBMkI7QUFDekIsb0JBQVksS0FBSyxNQUFqQjtBQUNEO0FBQ0QsV0FBSyxXQUFMLEdBQW1CLEVBQUUsY0FBYyxDQUFkLElBQW1CLGNBQWMsS0FBSyxNQUF4QyxDQUFuQjtBQUNBLFVBQUksWUFBWSxLQUFLLFNBQUwsQ0FBZSxDQUFmLEVBQWtCLFNBQWxCLENBQWhCO0FBQ0EsVUFBSSxhQUFhLEtBQUssU0FBTCxDQUFlLFNBQWYsQ0FBakI7O0FBRUEsVUFBRyxLQUFLLFVBQVIsRUFBbUI7QUFDakIsYUFBSyxhQUFMLEdBQXFCLFVBQXJCO0FBQ0EsYUFBSyxVQUFMLEdBQWtCLFVBQVUsSUFBVixFQUFsQjtBQUNELE9BSEQsTUFJSTtBQUNGLGFBQUssYUFBTCxHQUFxQixTQUFyQjtBQUNBLGFBQUssV0FBTCxHQUFtQixXQUFXLElBQVgsRUFBbkI7QUFDRDtBQUNGOzs7cUNBRWdCLEksRUFBSztBQUNwQixVQUFHLEtBQUssVUFBTCxLQUFvQixFQUFwQixJQUEwQixLQUFLLFdBQUwsS0FBb0IsRUFBakQsRUFBb0Q7QUFDbEQsWUFBSSxnQkFBZ0IsS0FBSyxnQkFBTCxFQUFwQjtBQUNBLFlBQUcsYUFBSCxFQUFpQjtBQUNmLGlCQUFPLGFBQWEsYUFBYixDQUEyQixhQUEzQixFQUEwQyxJQUExQyxNQUFvRCxDQUEzRDtBQUNEO0FBQ0Y7QUFDRCxhQUFPLEtBQVA7QUFDRDs7O3VDQUdpQjtBQUNoQixVQUFJLFFBQVMsS0FBSyxVQUFOLEdBQW1CLEtBQUssVUFBTCxDQUFnQixLQUFoQixDQUFzQixHQUF0QixDQUFuQixHQUNzQixLQUFLLFdBQUwsQ0FBaUIsS0FBakIsQ0FBdUIsR0FBdkIsQ0FEbEM7O0FBR0EsY0FBUSxTQUFTLEVBQWpCO0FBQ0EsY0FBUSxFQUFFLE9BQUYsQ0FBVSxLQUFWLENBQVI7QUFDQSxVQUFHLE1BQU0sTUFBTixHQUFlLENBQWxCLEVBQW9CO0FBQ2xCLGVBQVEsS0FBSyxVQUFOLEdBQW1CLE1BQU0sTUFBTSxNQUFOLEdBQWMsQ0FBcEIsQ0FBbkIsR0FBNEMsTUFBTSxDQUFOLENBQW5EO0FBQ0Q7QUFDRjs7O3VDQUVrQixJLEVBQUs7QUFDdEIsVUFBRyxLQUFLLFVBQVIsRUFBbUI7QUFDakIsZUFBUSxLQUFLLFVBQUwsQ0FBZ0IsTUFBaEIsS0FBMkIsQ0FBNUIsR0FBZ0MsSUFBaEMsR0FBdUMsS0FBSyxVQUFMLEdBQWtCLEdBQWxCLEdBQXdCLElBQXRFO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsZUFBUSxLQUFLLFdBQUwsQ0FBaUIsTUFBakIsS0FBNEIsQ0FBN0IsR0FBaUMsSUFBakMsR0FBd0MsT0FBTyxHQUFQLEdBQWEsS0FBSyxXQUFqRTtBQUNEO0FBQ0Y7Ozt3Q0FDbUIsSSxFQUFLOztBQUV2QixVQUFHLEtBQUssVUFBUixFQUFtQjtBQUNqQixZQUFHLEtBQUssU0FBTCxLQUFtQixDQUF0QixFQUF3QjtBQUN0QixlQUFLLFdBQUwsR0FBbUIsSUFBbkI7QUFDQSxpQkFBTyxDQUFQO0FBQ0Q7QUFDRCxZQUFJLEtBQUssTUFBTCxHQUFjLEtBQUssU0FBcEIsSUFBa0MsS0FBSyxLQUFLLFNBQUwsR0FBZSxDQUFwQixNQUEyQixHQUFoRSxFQUFvRTtBQUNsRSxjQUFJLHFCQUFxQixLQUFLLFdBQUwsQ0FBaUIsR0FBakIsRUFBc0IsS0FBSyxTQUFMLEdBQWUsQ0FBckMsQ0FBekI7QUFDQSxlQUFLLFdBQUwsR0FBbUIsS0FBbkI7QUFDQSxpQkFBUSxzQkFBc0IsQ0FBdkIsR0FBNEIscUJBQW1CLENBQS9DLEdBQW1ELENBQTFEO0FBQ0Q7QUFDRCxhQUFLLFdBQUwsR0FBbUIsSUFBbkI7QUFDRDtBQUNELGFBQU8sS0FBSyxTQUFaO0FBQ0Q7Ozt5Q0FDbUI7QUFDbEIsVUFBRyxLQUFLLFVBQVIsRUFBbUI7QUFDakIsYUFBSyxLQUFMLENBQVcsT0FBWDtBQUNEO0FBQ0Y7OztpQ0FDWSxJLEVBQU0sUyxFQUFVO0FBQzNCLFVBQUcsS0FBSyxVQUFSLEVBQW1CO0FBQ2pCLFlBQUksY0FBYyxDQUFsQixFQUFxQjtBQUNuQixpQkFBTyxJQUFQO0FBQ0Q7QUFDRCxlQUFRLEtBQUssTUFBTCxHQUFjLFNBQWYsSUFBNkIsS0FBSyxZQUFVLENBQWYsTUFBc0IsR0FBMUQ7QUFDRDs7QUFFRCxhQUFPLFlBQVksQ0FBWixJQUFpQixLQUFLLFlBQVcsQ0FBaEIsTUFBdUIsR0FBL0M7QUFDRDs7OzRCQUNPLFcsRUFBd0M7QUFBQSxVQUEzQixLQUEyQix1RUFBbkIsQ0FBbUI7QUFBQSxVQUFoQixHQUFnQix1RUFBVixTQUFVOztBQUM5QyxZQUFPLFFBQVEsU0FBVCxHQUF1QixLQUFLLEtBQUwsQ0FBVyxNQUFYLEdBQW1CLENBQTFDLEdBQThDLEdBQXBEO0FBQ0EsVUFBRyxLQUFLLEtBQUwsQ0FBVyxNQUFYLEdBQW9CLFlBQVksS0FBWixDQUFrQixNQUF6QyxFQUFnRDtBQUM5QyxlQUFPLEtBQVA7QUFDRDtBQUNELFVBQUksSUFBSSxLQUFSO0FBQ0EsYUFBTSxLQUFLLEdBQVgsRUFBZ0IsR0FBaEIsRUFBb0I7QUFDbEIsWUFBSSxRQUFRLEtBQUssS0FBTCxDQUFXLENBQVgsQ0FBWjtBQUNBLFlBQUksUUFBUSxZQUFZLEtBQVosQ0FBa0IsQ0FBbEIsQ0FBWjtBQUNBLFlBQUcsYUFBYSxhQUFiLENBQTJCLEtBQTNCLEVBQWtDLEtBQWxDLE1BQTZDLENBQWhELEVBQW1EO0FBQ2pELGlCQUFPLEtBQVA7QUFDRDtBQUNGO0FBQ0QsYUFBTyxLQUFLLFlBQUwsQ0FBa0IsV0FBbEIsRUFBK0IsQ0FBL0IsQ0FBUDtBQUNEOzs7aUNBQ1ksVyxFQUFhLEssRUFBTTtBQUM5QixVQUFHLEtBQUssUUFBTCxLQUFrQixTQUFyQixFQUErQjtBQUM3QixlQUFPLElBQVA7QUFDRDtBQUNELFVBQUcsWUFBWSxLQUFaLENBQWtCLE1BQWxCLElBQTRCLEtBQS9CLEVBQXFDO0FBQ25DLGVBQU8sS0FBUDtBQUNEO0FBQ0QsVUFBSSxhQUFhLFlBQVksS0FBWixDQUFrQixLQUFsQixDQUFqQjtBQUNBLGFBQU8sS0FBSyxjQUFMLENBQW9CLFVBQXBCLENBQVA7QUFDRDs7O21DQUNjLEksRUFBSztBQUNsQixXQUFLLFNBQUwsR0FBaUIsSUFBSSxNQUFKLENBQVcsTUFBTSxLQUFLLFFBQXRCLEVBQWdDLEdBQWhDLENBQWpCO0FBQ0EsYUFBTyxLQUFLLFNBQUwsQ0FBZSxJQUFmLENBQW9CLElBQXBCLENBQVA7QUFDRDs7O2lDQUNZLFMsRUFBVTtBQUNyQixVQUFHLEtBQUssV0FBTCxJQUFvQixLQUFLLFFBQUwsS0FBa0IsU0FBdEMsSUFBbUQsS0FBSyxRQUFMLENBQWMsTUFBZCxLQUF5QixDQUEvRSxFQUFpRjtBQUMvRSxlQUFPLEtBQUssc0JBQUwsQ0FBNEIsU0FBNUIsRUFBdUMsS0FBSyxXQUE1QyxDQUFQO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsZUFBTyxLQUFLLHFCQUFMLENBQTJCLFNBQTNCLENBQVA7QUFDRDtBQUNGOzs7MENBRXFCLFMsRUFBVTtBQUM5QixVQUFJLG9CQUFvQixVQUFVLFNBQVYsQ0FBb0IsS0FBSyxRQUFMLENBQWMsTUFBbEMsRUFBMEMsVUFBVSxNQUFwRCxDQUF4QjtBQUNBLFVBQUcsS0FBSyxVQUFSLEVBQW1CO0FBQ2pCLFlBQUksY0FBYyxFQUFsQjtBQUNBLFlBQUksa0JBQWtCLEtBQUssV0FBTCxDQUFpQixPQUFqQixDQUF5QixHQUF6QixDQUF0QjtBQUNBLFlBQUcsbUJBQW1CLENBQXRCLEVBQXdCO0FBQ3RCLHdCQUFjLEtBQUssV0FBTCxDQUFpQixTQUFqQixDQUEyQixlQUEzQixDQUFkO0FBQ0Q7QUFDRCxlQUFPLEtBQUssUUFBTCxHQUFnQixpQkFBaEIsR0FBb0MsV0FBM0M7QUFDRCxPQVBELE1BUUk7QUFDRixlQUFPLEtBQUssV0FBTCxHQUFtQixpQkFBMUI7QUFDRDtBQUNGOzs7MkNBRXNCLFMsRUFBVTtBQUMvQixVQUFHLEtBQUssVUFBUixFQUFtQjtBQUNqQixlQUFPLFlBQVksR0FBWixHQUFrQixLQUFLLFdBQTlCO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsZUFBTyxLQUFLLFdBQUwsR0FBbUIsR0FBbkIsR0FBeUIsU0FBaEM7QUFDRDtBQUNGOzs7b0NBRWUsUyxFQUFVO0FBQ3hCLFVBQUksT0FBTyxLQUFLLFdBQWhCO0FBQ0EsVUFBRyxLQUFLLFFBQUwsS0FBa0IsU0FBbEIsSUFBK0IsQ0FBQyxLQUFLLFdBQXhDLEVBQW9EO0FBQ2xELFlBQUksUUFBUSxLQUFLLFdBQUwsQ0FBaUIsTUFBakIsR0FBMEIsS0FBSyxRQUFMLENBQWMsTUFBcEQ7QUFDQSxlQUFPLEtBQUssV0FBTCxDQUFpQixTQUFqQixDQUEyQixDQUEzQixFQUE4QixLQUE5QixDQUFQO0FBQ0EsZUFBTyxLQUFLLElBQUwsRUFBUDtBQUNEO0FBQ0QsYUFBTyxPQUFPLEdBQVAsR0FBYSxTQUFwQjtBQUNEOzs7a0NBQ2EsSSxFQUFLO0FBQ2pCLFVBQUcsS0FBSyxLQUFMLENBQVcsTUFBWCxLQUFzQixDQUF6QixFQUE0QjtBQUMxQixlQUFPLEtBQVA7QUFDRDtBQUNELFVBQUksWUFBWSxLQUFLLEtBQUwsQ0FBVyxLQUFLLEtBQUwsQ0FBVyxNQUFYLEdBQW1CLENBQTlCLENBQWhCO0FBQ0EsYUFBTyxhQUFhLGFBQWIsQ0FBMkIsU0FBM0IsRUFBc0MsSUFBdEMsTUFBZ0QsQ0FBdkQ7QUFDRDs7Ozs7O0FBR0gsT0FBTyxPQUFQLEdBQWlCLFdBQWpCOzs7Ozs7Ozs7QUMxTEEsSUFBTSxLQUFLLFFBQVEsb0JBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxJQUFNLFFBQVEsR0FBRyxLQUFqQjtBQUNBLElBQU0sZUFBZSxRQUFRLFNBQVIsQ0FBckI7QUFDQSxJQUFNLFFBQVEsUUFBUSxXQUFSLENBQWQ7QUFDQSxJQUFNLGdCQUFnQixRQUFRLFVBQVIsQ0FBdEI7QUFDQSxJQUFNLFFBQVEsUUFBUSxpQkFBUixDQUFkOztJQUdNLE07QUFDSixvQkFBc0I7QUFBQSxRQUFWLElBQVUsdUVBQUgsRUFBRzs7QUFBQTs7QUFDcEIsU0FBSyxNQUFMLEdBQWMsSUFBSSxLQUFKLENBQVUsSUFBVixDQUFkO0FBQ0Q7Ozs7eUJBRUksVSxFQUFXO0FBQ2QsV0FBSyxTQUFMLENBQWUsVUFBZjtBQUNBLFdBQUssT0FBTCxDQUFhLFVBQWI7QUFDRDs7O3FDQUVlO0FBQ2QsYUFBTyxLQUFLLFVBQUwsS0FBb0IsU0FBM0I7QUFDRDs7O29DQUVjO0FBQ2IsYUFBTyxLQUFLLFVBQUwsQ0FBZ0IsS0FBaEIsQ0FBc0IsTUFBN0I7QUFDRDs7OytCQUNVLFEsRUFBUztBQUNsQixhQUFPLEtBQUssYUFBTCxDQUFtQixRQUFuQixDQUFQO0FBQ0Q7Ozs4QkFDUyxLLEVBQU07QUFDZCxVQUFHLFVBQVUsU0FBVixJQUF1QixNQUFNLE1BQU4sR0FBZSxDQUF6QyxFQUEyQztBQUN6QyxlQUFPLEtBQUssaUJBQUwsQ0FBdUIsTUFBTSxDQUFOLENBQXZCLENBQVA7QUFDRDtBQUNGOzs7c0NBQ2lCLFEsRUFBUztBQUN6QixVQUFHLEtBQUssUUFBTCxJQUFpQixTQUFTLE1BQVQsS0FBb0IsQ0FBeEMsRUFBMEM7QUFDeEMsWUFBSSxZQUFZLFNBQVMsV0FBVCxFQUFoQjtBQUNBLGVBQU8sS0FBSyxRQUFMLENBQWMsU0FBZCxDQUFQO0FBQ0Q7QUFDRjs7O2lDQUNZLEksRUFBTSxVLEVBQVc7QUFDNUIsVUFBSSxtQkFBSjtBQUNBLFVBQUksWUFBWSxLQUFLLGVBQUwsQ0FBcUIsSUFBckIsQ0FBaEI7QUFDQSxVQUFHLGFBQWEsVUFBaEIsRUFBMkI7QUFDekIscUJBQWEsV0FBVyxVQUFVLE1BQU0sR0FBTixDQUFVLFdBQXBCLENBQVgsQ0FBYjtBQUNEO0FBQ0QsYUFBTyxVQUFQO0FBQ0Q7Ozs2QkFFUSxJLEVBQUs7QUFDWixVQUFJLFlBQVksS0FBSyxlQUFMLENBQXFCLElBQXJCLENBQWhCO0FBQ0EsVUFBRyxTQUFILEVBQWE7QUFDWCxlQUFPLFVBQVUsTUFBTSxHQUFOLENBQVUsS0FBcEIsQ0FBUDtBQUNEO0FBQ0Y7OztpQ0FDWSxTLEVBQVU7QUFBRTtBQUN2QixVQUFJLFNBQVMsVUFBVSxNQUFNLEdBQU4sQ0FBVSxhQUFwQixDQUFiO0FBQ0EsVUFBSSxjQUFjLFVBQVUsTUFBTSxHQUFOLENBQVUsV0FBcEIsQ0FBbEI7QUFDQSxVQUFJLE9BQU8sTUFBTSxHQUFOLENBQVUsS0FBSyxNQUFMLENBQVksV0FBWixDQUF3QixNQUF4QixDQUFWLENBQVg7QUFDQSxVQUFHLENBQUMsSUFBSixFQUFTO0FBQ1AsYUFBSyxTQUFMLENBQWUsTUFBZjtBQUNEO0FBQ0QsYUFBTyxRQUFRLEtBQUssV0FBTCxDQUFmO0FBQ0Q7OztzQ0FDaUIsVSxFQUFZLFUsRUFBVztBQUN2QyxVQUFJLFNBQVMsYUFBYSxjQUFiLENBQTRCLFVBQTVCLEVBQXdDLE1BQU0sR0FBTixDQUFVLEtBQWxELENBQWI7QUFDQSxVQUFJLFNBQVMsYUFBYSxjQUFiLENBQTRCLFVBQTVCLEVBQXdDLE1BQU0sR0FBTixDQUFVLEtBQWxELENBQWI7QUFDQSxVQUFHLFVBQVUsTUFBYixFQUFxQjtBQUNuQixlQUFPLFNBQVMsTUFBaEI7QUFDRDtBQUNELGFBQU8sQ0FBUDtBQUNEOzs7bUNBQ2MsSyxFQUFNO0FBQ25CLFlBQU0sSUFBTixDQUFXLEtBQUssaUJBQWhCO0FBQ0EsWUFBTSxNQUFOLENBQWEsY0FBYyxlQUFkLEdBQStCLEdBQTVDO0FBQ0EsV0FBSyxVQUFMLEdBQWtCLEtBQWxCO0FBQ0Q7OzttQ0FJYyxJLEVBQUs7QUFDbEIsVUFBSSxZQUFZLEtBQUssZUFBTCxDQUFxQixJQUFyQixDQUFoQjtBQUNBLFVBQUcsU0FBSCxFQUFhO0FBQ1gsZUFBTyxVQUFVLE1BQU0sR0FBTixDQUFVLGFBQXBCLENBQVA7QUFDRDtBQUNGOzs7b0NBQ2UsSSxFQUFLO0FBQ25CLFVBQUksYUFBSjtBQUNBLFVBQUksV0FBVyxLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBZjtBQUNBLFVBQUcsUUFBSCxFQUFZO0FBQ1YsZUFBTyxLQUFLLGFBQUwsQ0FBbUIsUUFBbkIsQ0FBUDtBQUNEO0FBQ0QsYUFBTyxJQUFQO0FBQ0Q7OzsrQkFDVSxJLEVBQUs7QUFDZCxVQUFHLFFBQVEsS0FBSyxNQUFMLEdBQWMsQ0FBekIsRUFBMkI7QUFDekIsWUFBSSxRQUFRLEtBQUssV0FBTCxFQUFaO0FBQ0EsZUFBTyxLQUFLLFVBQUwsQ0FBZ0IsS0FBaEIsQ0FBUDtBQUNEO0FBQ0Y7Ozs4QkFFUyxVLEVBQVk7QUFBQTs7QUFDcEIsVUFBRyxLQUFLLGNBQUwsT0FBMEIsS0FBN0IsRUFBbUM7QUFDakMsVUFBRSxVQUFGLENBQWEsS0FBSyxNQUFMLENBQVksZ0JBQVosRUFBYixFQUE2QyxJQUE3QyxFQUFtRCxZQUFNO0FBQ3ZELGdCQUFLLFVBQUwsR0FBa0IsRUFBRSxPQUFGLEVBQWxCO0FBQ0EsZ0JBQUssYUFBTCxDQUFtQixVQUFuQjtBQUNELFNBSEQsRUFHRyxJQUhIO0FBSUQsT0FMRCxNQU1JO0FBQ0YsYUFBSyxhQUFMLENBQW1CLFVBQW5CO0FBQ0Q7QUFDRjs7OzhCQWtCUyxNLEVBQVEsVSxFQUFZO0FBQzVCLFVBQUksT0FBTyxFQUFYO0FBQ0EsVUFBRyxXQUFVLFNBQWIsRUFBdUI7QUFDckIsWUFBSSxNQUFNLEtBQUssTUFBTCxDQUFZLFdBQVosQ0FBd0IsTUFBeEIsQ0FBVjtBQUNBLFlBQUksUUFBTyxNQUFNLEdBQU4sQ0FBVSxHQUFWLENBQVg7QUFDQSxZQUFHLFVBQVMsU0FBWixFQUFzQjtBQUNwQixnQkFBTSxPQUFOLENBQWMsR0FBZCxFQUFtQixJQUFuQjs7QUFFQSxjQUFJLFdBQVcsS0FBSyxNQUFMLENBQVksZ0JBQVosQ0FBNkIsTUFBN0IsQ0FBZjtBQUNBLFlBQUUsVUFBRixDQUFhLFFBQWIsRUFBdUIsSUFBdkIsRUFBNkIsS0FBSyxnQkFBTCxDQUFzQixNQUF0QixFQUE4QixVQUE5QixDQUE3QixFQUF3RSxJQUF4RTtBQUNELFNBTEQsTUFNSyxJQUFHLFVBQVMsSUFBVCxJQUFpQixlQUFlLFNBQW5DLEVBQTZDOztBQUVoRCxnQkFBTSxTQUFOLENBQWdCLEdBQWhCLEVBQXFCLFVBQXJCO0FBQ0QsU0FISSxNQUlEO0FBQ0YsZUFBSyxVQUFMLENBQWdCLFVBQWhCLEVBQTRCLEtBQTVCLEVBQWtDLE1BQWxDO0FBQ0Q7QUFDRixPQWhCRCxNQWlCSTtBQUNGLGFBQUssVUFBTCxDQUFnQixVQUFoQixFQUE0QixJQUE1QixFQUFrQyxNQUFsQztBQUNEO0FBQ0Y7OzsrQkFDVSxVLEVBQVksSSxFQUFNLE0sRUFBTztBQUNsQyxVQUFHLFVBQUgsRUFBZTtBQUNiLG1CQUFXLElBQVgsRUFBaUIsTUFBakI7QUFDRDtBQUNGOzs7cUNBQ2dCLE0sRUFBUSxVLEVBQVc7QUFBQTs7QUFDbEMsYUFBTyxZQUFNO0FBQ1gsWUFBSSxPQUFPLEVBQUUsT0FBRixFQUFYO0FBQ0EsY0FBTSxPQUFOLENBQWMsT0FBSyxNQUFMLENBQVksV0FBWixDQUF3QixNQUF4QixDQUFkLEVBQStDLElBQS9DO0FBQ0EsWUFBRyxVQUFILEVBQWM7QUFDWixxQkFBVyxJQUFYLEVBQWlCLE1BQWpCO0FBQ0Q7QUFDRixPQU5EO0FBT0Q7OztnQ0FDVyxVLEVBQVc7QUFDckIsV0FBSyxRQUFMO0FBQ0EsVUFBRyxLQUFLLFVBQUwsSUFBbUIsVUFBdEIsRUFBaUM7QUFDL0IsbUJBQVcsSUFBWDtBQUNEO0FBQ0Y7OztrQ0FFYSxVLEVBQVc7QUFDdkIsVUFBRyxLQUFLLFFBQUwsSUFBaUIsVUFBcEIsRUFBK0I7QUFDN0IsbUJBQVcsSUFBWDtBQUNEO0FBQ0Y7OzsrQkFDUztBQUNSLFVBQUksT0FBTyxLQUFLLFFBQWhCO0FBQ0EsV0FBSyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsV0FBSyxhQUFMLEdBQW9CLEVBQXBCO0FBQ0EsVUFBSSxRQUFRLEVBQVo7QUFDQSxXQUFLLElBQU0sTUFBWCxJQUFxQixJQUFyQixFQUEwQjtBQUN4QixZQUFJLGFBQWEsS0FBSyxNQUFMLENBQWpCO0FBQ0EsYUFBSyxlQUFMLENBQXFCLFVBQXJCO0FBQ0EsZ0JBQVEsTUFBTSxNQUFOLENBQWEsVUFBYixDQUFSO0FBQ0Q7QUFDRCxXQUFLLGNBQUwsQ0FBb0IsS0FBcEI7QUFDRDs7O29DQUNlLFUsRUFBVztBQUFBOztBQUN6QixRQUFFLElBQUYsQ0FBTyxVQUFQLEVBQW1CLFVBQUMsU0FBRCxFQUFjO0FBQy9CLFlBQUksV0FBVyxTQUFTLFVBQVUsTUFBTSxHQUFOLENBQVUsSUFBcEIsQ0FBVCxDQUFmO0FBQ0EsWUFBRyxVQUFVLE1BQU0sR0FBTixDQUFVLElBQXBCLENBQUgsRUFBOEI7QUFDNUIsY0FBSSxPQUFPLFVBQVUsTUFBTSxHQUFOLENBQVUsSUFBcEIsRUFBMEIsUUFBMUIsRUFBWDtBQUNBLGlCQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsSUFBd0IsUUFBeEI7QUFDRDtBQUNELGVBQUssYUFBTCxDQUFtQixRQUFuQixJQUErQixTQUEvQjtBQUNELE9BUEQ7QUFRRDs7OytCQUNVLEksRUFBSztBQUNkLFVBQUksUUFBUSxFQUFFLElBQUYsQ0FBTyxLQUFLLFVBQUwsQ0FBZ0IsU0FBdkIsRUFBa0MsVUFBQyxTQUFELEVBQWM7QUFDMUQsZUFBTyxhQUFhLGFBQWIsQ0FBMkIsSUFBM0IsRUFBaUMsU0FBakMsTUFBZ0QsQ0FBdkQ7QUFDRCxPQUZXLENBQVo7QUFHQSxhQUFPLFVBQVUsU0FBakI7QUFDRDs7O29DQUVjO0FBQ2IsYUFBTyxLQUFLLFVBQUwsQ0FBZ0IsVUFBdkI7QUFDRDs7O3lDQUNvQixTLEVBQVcsTSxFQUFPO0FBQ3JDLGFBQU8sRUFBRSxJQUFGLENBQU8sS0FBSyxhQUFaLEVBQTJCLFVBQUMsUUFBRCxFQUFhO0FBQzdDLGVBQU8sU0FBUyxNQUFNLEdBQU4sQ0FBVSxXQUFuQixNQUFvQyxTQUFwQyxJQUFpRCxTQUFTLE1BQU0sR0FBTixDQUFVLGFBQW5CLE1BQXNDLE1BQTlGO0FBQ0QsT0FGTSxDQUFQO0FBR0Q7Ozs0QkFDTyxVLEVBQVc7QUFBQTs7QUFDakIsVUFBRyxLQUFLLFFBQUwsS0FBa0IsU0FBckIsRUFBK0I7QUFDN0IsVUFBRSxVQUFGLENBQWEsS0FBSyxNQUFMLENBQVksY0FBWixFQUFiLEVBQTJDLElBQTNDLEVBQWlELFlBQU07QUFDckQsaUJBQUssUUFBTCxHQUFnQixFQUFFLE9BQUYsRUFBaEI7QUFDQSxpQkFBSyxXQUFMLENBQWlCLFVBQWpCO0FBQ0QsU0FIRCxFQUdHLElBSEg7QUFJRCxPQUxELE1BTUk7QUFDRixhQUFLLFdBQUwsQ0FBaUIsVUFBakI7QUFDRDtBQUNGOzs7d0JBcEpjO0FBQ2IsYUFBTyxLQUFLLFVBQVo7QUFDRDs7O3dCQWtDVTtBQUNULGFBQU8sS0FBSyxVQUFMLENBQWdCLEtBQXZCO0FBQ0Q7Ozt3QkFDbUI7QUFDbEIsYUFBTyxLQUFLLFVBQUwsQ0FBZ0IsS0FBdkI7QUFDRDs7O3dCQUNlO0FBQ2QsYUFBTyxLQUFLLFVBQUwsQ0FBZ0IsR0FBdkI7QUFDRDs7O3dCQUNnQjtBQUNmLGFBQU8sS0FBSyxVQUFMLENBQWdCLFVBQXZCO0FBQ0Q7Ozt3QkFDZTtBQUNkLGFBQU8sS0FBSyxVQUFMLENBQWdCLFNBQXZCO0FBQ0Q7Ozs7OztBQXFHSCxPQUFPLE9BQVAsR0FBaUIsTUFBakI7Ozs7Ozs7OztBQ3BPQSxJQUFJLEtBQUssUUFBUSxvQkFBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDtBQUNBLElBQUksbUJBQW1CLFFBQVEsc0JBQVIsQ0FBdkI7QUFDQTtBQUNBO0FBQ0EsSUFBSSxpQkFBaUIsUUFBUSxtQkFBUixDQUFyQjtBQUNBLElBQU0sZ0JBQWdCLFFBQVEsVUFBUixDQUF0QjtBQUNBLElBQU0sUUFBUSxRQUFRLFdBQVIsQ0FBZDs7SUFFTSxjO0FBQ0osZ0NBQXNFO0FBQUEsUUFBekQsTUFBeUQsUUFBekQsTUFBeUQ7QUFBQSxRQUFqRCxLQUFpRCxRQUFqRCxLQUFpRDtBQUFBLFFBQTFDLFFBQTBDLFFBQTFDLFFBQTBDO0FBQUEsUUFBaEMsUUFBZ0MsUUFBaEMsUUFBZ0M7QUFBQSxvQ0FBdEIsZUFBc0I7QUFBQSxRQUF0QixlQUFzQix3Q0FBSixFQUFJOztBQUFBOztBQUNwRSxTQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0EsU0FBSyxRQUFMLEdBQWlCLFFBQWpCO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QixlQUF4QjtBQUNBLFNBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFNBQUssU0FBTCxHQUFpQixRQUFqQjtBQUNBLFNBQUssT0FBTCxHQUFlLE1BQWY7QUFDQSxTQUFLLE9BQUwsR0FBZSxjQUFjLG1CQUFkLENBQWtDLGVBQWpEO0FBQ0Q7Ozs7MkJBRUssQ0FFTDs7OzRCQUNNO0FBQ0wsV0FBSyxXQUFMLEdBQW1CLFNBQW5CO0FBQ0EsV0FBSyxpQkFBTCxHQUF5QixTQUF6QjtBQUNBLFdBQUssWUFBTCxHQUFvQixTQUFwQjtBQUNBLFdBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNEOzs7bUNBRWMsWSxFQUFjO0FBQzNCLFdBQUssWUFBTCxHQUFvQixZQUFwQjtBQUNBLFdBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFVBQUcsaUJBQWlCLFNBQWpCLElBQStCLGFBQWEsS0FBYixDQUFtQixNQUFuQixJQUE2QixLQUFLLEtBQXBFLEVBQTJFO0FBQ3pFLGFBQUssVUFBTCxHQUFrQixhQUFhLEtBQWIsQ0FBbUIsTUFBbkIsR0FBNEIsS0FBSyxLQUFuRDtBQUNBLGFBQUssS0FBTCxHQUFhLGFBQWEsS0FBYixDQUFtQixLQUFLLFVBQXhCLENBQWI7QUFDQSxhQUFLLGVBQUwsQ0FBcUIsS0FBSyxLQUExQixFQUFpQyxLQUFLLHlCQUFMLENBQStCLElBQS9CLENBQW9DLElBQXBDLENBQWpDO0FBQ0QsT0FKRCxNQUtJO0FBQ0YsYUFBSyxrQkFBTDtBQUNEO0FBQ0Y7Ozs4Q0FReUIsVSxFQUFXO0FBQ25DLFdBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFVBQUksUUFBUSxLQUFLLEtBQWpCO0FBQ0EsVUFBSSxPQUFPLEtBQUssS0FBaEI7QUFDQSxVQUFJLGNBQWMsS0FBSyxPQUFMLENBQWEsUUFBYixDQUFzQixJQUF0QixDQUFsQjtBQUNBLFdBQUssV0FBTCxHQUFtQixLQUFLLE9BQUwsQ0FBYSxZQUFiLENBQTBCLElBQTFCLEVBQWdDLFVBQWhDLENBQW5CO0FBQ0EsVUFBRyxLQUFLLFdBQVIsRUFBb0I7QUFDbEIsYUFBSyxpQkFBTCxHQUF5QixLQUFLLHFCQUFMLEVBQXpCO0FBQ0EsYUFBSyw4QkFBTCxDQUFvQyxJQUFwQyxFQUEwQyxLQUExQyxFQUFpRCxXQUFqRDtBQUNEO0FBQ0QsV0FBSyxrQkFBTDtBQUNEOzs7eUNBQ21CO0FBQ2xCLFVBQUcsS0FBSyxTQUFSLEVBQWtCO0FBQ2hCLGFBQUssU0FBTCxDQUFlLElBQUksY0FBSixDQUFtQixLQUFLLFdBQXhCLEVBQXFDLEtBQUssWUFBMUMsQ0FBZixFQUF3RSxLQUFLLE9BQTdFO0FBQ0Q7QUFDRjs7O21EQUM4QixJLEVBQU0sSyxFQUFPLFcsRUFBWTtBQUN0RCxVQUFHLEtBQUssaUJBQUwsS0FBMkIsU0FBOUIsRUFBd0M7QUFDdEM7QUFDRDs7QUFFRCxVQUFHLEtBQUssWUFBTCxDQUFrQixLQUFsQixDQUFILEVBQTZCO0FBQzNCLGFBQUssbUJBQUwsQ0FBeUIsV0FBekI7QUFDRCxPQUZELE1BR0k7QUFDRjtBQUNBLFlBQUksYUFBYSxLQUFLLGVBQUwsQ0FBcUIsS0FBckIsQ0FBakI7QUFDQSxZQUFJLFlBQVksS0FBSyxZQUFMLENBQWtCLEtBQWxCLENBQXdCLFVBQXhCLENBQWhCO0FBQ0EsWUFBSSxnQkFBZ0IsS0FBSyxPQUFMLENBQWEsVUFBYixDQUF3QixTQUF4QixDQUFwQjtBQUNBLFlBQUksa0JBQWtCLEtBQUssZUFBTCxDQUFxQixLQUFLLGlCQUExQixFQUE2QyxhQUE3QyxDQUF0QjtBQUNBLFlBQUcsZUFBSCxFQUFtQjtBQUNqQix3QkFBYyxnQkFBZ0IsTUFBTSxLQUFOLENBQVksS0FBNUIsQ0FBZDtBQUNBLGVBQUssaUJBQUwsR0FBeUIsZ0JBQWdCLE1BQU0sS0FBTixDQUFZLFVBQTVCLENBQXpCO0FBQ0EsZUFBSyw4QkFBTCxDQUFvQyxTQUFwQyxFQUErQyxLQUEvQyxFQUFzRCxXQUF0RDtBQUNEO0FBQ0Y7QUFDRjs7O29DQUNlLFUsRUFBWSxhLEVBQWM7QUFDeEMsVUFBRyxDQUFDLGFBQUosRUFBa0I7QUFDaEIsZUFBTyxTQUFQO0FBQ0Q7QUFDRCxVQUFJLHVCQUF1QixFQUFFLElBQUYsQ0FBTyxVQUFQLEVBQW1CLFVBQUMsSUFBRCxFQUFTO0FBQ3JELGVBQVEsS0FBSyxNQUFMLEdBQWEsQ0FBZCxJQUFxQixLQUFLLE1BQU0sS0FBTixDQUFZLFNBQWpCLE1BQWdDLGFBQTVEO0FBQ0QsT0FGMEIsQ0FBM0I7QUFHQSxVQUFJLHdCQUF3QixxQkFBcUIsTUFBckIsR0FBOEIsTUFBTSxLQUFOLENBQVksVUFBbEUsSUFBZ0YsTUFBTSxPQUFOLENBQWMsb0JBQWQsQ0FBcEYsRUFBd0g7QUFDdEgsZUFBTyxvQkFBUCxDQURzSCxDQUN4RjtBQUMvQjtBQUNGOzs7b0NBQ2UsSyxFQUFNO0FBQ3BCLGFBQU8sS0FBSyxZQUFMLENBQWtCLEtBQWxCLENBQXdCLE1BQXhCLEdBQWlDLEtBQXhDO0FBQ0Q7OztpQ0FDWSxLLEVBQU07QUFDakIsYUFBTyxVQUFVLENBQWpCO0FBQ0Q7OztrQ0FDWTtBQUNYLGFBQU8sSUFBUDtBQUNEOzs7d0NBQ21CLFcsRUFBWTtBQUM5QixVQUFJLG1CQUFtQixLQUFLLGlCQUE1QjtBQUNBLFVBQUcsRUFBRSxvQkFBb0IsaUJBQWlCLE1BQWpCLEdBQTBCLENBQWhELENBQUgsRUFBc0Q7QUFDcEQ7QUFDRDs7QUFFRCxXQUFJLElBQUksSUFBRyxDQUFYLEVBQWMsS0FBSyxXQUFMLENBQWlCLE1BQWpCLEdBQTBCLEtBQUssZUFBL0IsSUFBa0QsSUFBSSxpQkFBaUIsTUFBdkUsSUFBaUYsaUJBQWlCLENBQWpCLEVBQW9CLE1BQXBCLEdBQTZCLENBQTVILEVBQStILEdBQS9ILEVBQW1JO0FBQ2pJLFlBQUcsQ0FBQyxLQUFLLGtCQUFMLENBQXdCLGlCQUFpQixDQUFqQixDQUF4QixDQUFKLEVBQWtEO0FBQ2hEO0FBQ0Q7QUFDRCxZQUFJLGNBQWMsS0FBSyxtQkFBTCxDQUF5QixpQkFBaUIsQ0FBakIsQ0FBekIsRUFBOEMsV0FBOUMsQ0FBbEI7QUFDQSxhQUFLLHlCQUFMLENBQStCLFdBQS9CO0FBQ0Q7QUFDRjs7OzhDQUN5QixXLEVBQVk7QUFBQTs7QUFDcEMsUUFBRSxJQUFGLENBQU8sV0FBUCxFQUFvQixVQUFDLFVBQUQsRUFBZ0I7QUFDbEMsWUFBRyxlQUFlLFNBQWxCLEVBQTRCO0FBQzFCLGdCQUFLLFdBQUwsQ0FBaUIsSUFBakIsQ0FBc0IsVUFBdEI7QUFDRDtBQUNGLE9BSkQ7QUFLRDs7O21DQUNjLFUsRUFBVztBQUN4QixhQUFPLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsV0FBVyxNQUFNLEtBQU4sQ0FBWSxTQUF2QixDQUF4QixDQUFQO0FBQ0Q7Ozt1Q0FFa0IsVSxFQUFXO0FBQzVCLFVBQUcsS0FBSyxZQUFMLENBQWtCLFdBQXJCLEVBQWlDO0FBQy9CLGVBQU8sSUFBUDtBQUNEO0FBQ0QsVUFBSSxZQUFZLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsV0FBVyxNQUFNLEtBQU4sQ0FBWSxTQUF2QixDQUF4QixDQUFoQjtBQUNBO0FBQ0EsVUFBRyxDQUFDLFNBQUosRUFBZTtBQUNiLGVBQU8sS0FBUDtBQUNEO0FBQ0QsVUFBSSxPQUFPLFVBQVUsTUFBTSxHQUFOLENBQVUsSUFBcEIsQ0FBWDtBQUNBLGFBQU8sS0FBSyxZQUFMLENBQWtCLGNBQWxCLENBQWlDLElBQWpDLENBQVA7QUFDRDs7O3dDQUNtQixVLEVBQVksVyxFQUFZO0FBQzFDLFVBQUksVUFBVSxJQUFJLGdCQUFKLENBQXFCLEVBQUMsUUFBTyxLQUFLLE9BQWIsRUFBc0IsWUFBVyxVQUFqQyxFQUE2Qyx3QkFBN0MsRUFBMEQsY0FBYSxLQUFLLFlBQTVFLEVBQTBGLFlBQVcsS0FBSyxXQUExRyxFQUFyQixDQUFkO0FBQ0EsYUFBUSxRQUFRLG1CQUFSLENBQTRCLFNBQTVCLEVBQXVDLFNBQXZDLEVBQWtELFNBQWxELEVBQTZELEtBQUssT0FBbEUsQ0FBUjtBQUNEOzs7NENBRXNCO0FBQUU7QUFDdkIsVUFBRyxLQUFLLFlBQUwsQ0FBa0IsVUFBbEIsSUFBZ0MsS0FBSyxXQUFMLENBQWlCLE1BQWpCLEdBQTBCLENBQTdELEVBQStEO0FBQzdELGVBQU8sS0FBSyxXQUFMLENBQWlCLENBQWpCLENBQVA7QUFDRCxPQUZELE1BR0k7QUFDRixlQUFPLEtBQUssV0FBTCxDQUFpQixDQUFqQixDQUFQO0FBQ0Q7QUFDRjs7O29DQUVlLEksRUFBTSxVLEVBQVc7QUFDL0IsVUFBSSxhQUFhLEtBQUssY0FBTCxDQUFvQixJQUFwQixDQUFqQjtBQUNBLFdBQUssT0FBTCxDQUFhLFNBQWIsQ0FBdUIsVUFBdkIsRUFBbUMsVUFBbkM7QUFDRDs7O21DQUVjLEksRUFBSztBQUNsQixhQUFPLEtBQUssT0FBTCxDQUFhLGNBQWIsQ0FBNEIsSUFBNUIsQ0FBUDtBQUNEOzs7c0JBM0htQixRLEVBQVM7QUFDM0IsV0FBSyxlQUFMLEdBQXVCLFFBQXZCO0FBQ0QsSzt3QkFDb0I7QUFDbkIsYUFBTyxLQUFLLGdCQUFaO0FBQ0Q7Ozs7OztBQXlISCxPQUFPLE9BQVAsR0FBaUIsY0FBakI7Ozs7Ozs7QUN4S0E7Ozs7Ozs7O0lBQ00sVTtBQUNKLHNCQUFZLElBQVosRUFBa0IsV0FBbEIsRUFBK0IsS0FBL0IsRUFBc0MsTUFBdEMsRUFBNkM7QUFBQTs7QUFDM0MsU0FBSyxXQUFMLEdBQW1CLFdBQW5CO0FBQ0EsU0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQWI7QUFDQSxTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0Q7Ozs7MEJBQ0ssUSxFQUFVO0FBQ2QsV0FBSyxXQUFMLElBQW9CLFNBQVMsV0FBN0I7QUFDQSxXQUFLLEtBQUwsR0FBYSxLQUFLLEdBQUwsQ0FBUyxLQUFLLEtBQWQsRUFBcUIsU0FBUyxLQUE5QixDQUFiO0FBQ0Q7Ozs0QkFDTyxLLEVBQU87QUFDYixhQUFPLE1BQU0sV0FBTixHQUFvQixLQUFLLFdBQWhDO0FBQ0Q7OzswQkFDSyxLLEVBQU87QUFDWCxhQUFPLGdCQUFhLGFBQWIsQ0FBMkIsTUFBTSxJQUFqQyxFQUF1QyxLQUFLLElBQTVDLE1BQXNELENBQTdEO0FBQ0Q7Ozs7OztBQUdILE9BQU8sT0FBUCxHQUFpQixVQUFqQjs7Ozs7Ozs7O0FDcEJBLElBQUksYUFBYSxRQUFRLGNBQVIsQ0FBakI7QUFDQSxJQUFJLGVBQWUsUUFBUSxTQUFSLENBQW5CO0FBQ0EsSUFBTSxRQUFRLFFBQVEsV0FBUixDQUFkO0FBQ0EsSUFBSSxjQUFjLFFBQVEsZ0JBQVIsQ0FBbEI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLFVBQVIsQ0FBdEI7O0lBR00sZ0I7QUFDSixrQ0FBd0U7QUFBQSxRQUEzRCxNQUEyRCxRQUEzRCxNQUEyRDtBQUFBLFFBQW5ELFVBQW1ELFFBQW5ELFVBQW1EO0FBQUEsUUFBdkMsV0FBdUMsUUFBdkMsV0FBdUM7QUFBQSxRQUExQixZQUEwQixRQUExQixZQUEwQjtBQUFBLFFBQVosVUFBWSxRQUFaLFVBQVk7O0FBQUE7O0FBQ3RFLFNBQUssV0FBTCxHQUFtQixVQUFuQjtBQUNBLFNBQUssWUFBTCxHQUFvQixnQkFBZ0IsSUFBSSxXQUFKLENBQWdCLEVBQWhCLENBQXBDO0FBQ0EsU0FBSyxLQUFMO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLFdBQXBCO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLGNBQWMsS0FBSyxXQUF0QztBQUNBLFNBQUssWUFBTCxHQUFvQixLQUFLLFVBQXpCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLEVBQXBCO0FBQ0EsU0FBSyxpQkFBTCxHQUF5QixLQUF6QjtBQUNBLFNBQUssT0FBTCxHQUFlLE1BQWY7QUFDRDs7Ozs0QkFFTTtBQUNMLFdBQUssSUFBTCxHQUFZLEVBQVo7QUFDQSxXQUFLLFdBQUwsR0FBbUIsQ0FBbkI7QUFDQSxXQUFLLFdBQUwsR0FBbUIsSUFBbkI7QUFDQSxXQUFLLFlBQUwsR0FBb0IsS0FBcEI7QUFDQSxXQUFLLE1BQUwsR0FBYyxDQUFkO0FBQ0Q7OztrQ0FFYSxTLEVBQVcsWSxFQUFjLFEsRUFBVSxNLEVBQU87QUFDdEQsV0FBSyxTQUFMLEdBQWlCLFNBQWpCO0FBQ0EsV0FBSyxZQUFMLEdBQW9CLFlBQXBCO0FBQ0EsV0FBSyxRQUFMLEdBQWdCLFFBQWhCO0FBQ0EsV0FBSyxNQUFMLEdBQWMsTUFBZDtBQUNBLFVBQUcsS0FBSyxZQUFSLEVBQXFCO0FBQ25CLGFBQUssMEJBQUwsQ0FBZ0MsS0FBSyxXQUFyQztBQUNEO0FBQ0QsV0FBSyxpQkFBTCxDQUF1QixLQUFLLFdBQTVCLEVBQXlDLFNBQXpDO0FBQ0EsYUFBTyxLQUFLLGlCQUFMLEVBQVA7QUFDRDs7O3dDQUNtQixTLEVBQVcsWSxFQUFjLFEsRUFBVSxNLEVBQU87QUFDNUQsV0FBSyxpQkFBTCxHQUF5QixJQUF6QjtBQUNBLFdBQUssU0FBTCxHQUFpQixTQUFqQjtBQUNBLFdBQUssWUFBTCxHQUFvQixZQUFwQjtBQUNBLFdBQUssUUFBTCxHQUFnQixRQUFoQjtBQUNBLFdBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxVQUFHLEtBQUssWUFBUixFQUFxQjtBQUNuQixhQUFLLDBCQUFMLENBQWdDLEtBQUssV0FBckM7QUFDRDtBQUNELFdBQUssaUJBQUwsQ0FBdUIsS0FBSyxXQUE1QixFQUF5QyxTQUF6QztBQUNBLGFBQU8sS0FBSyxZQUFaO0FBQ0Q7OztxQ0FFZ0IsVSxFQUFXO0FBQzFCLFVBQUksT0FBTyxLQUFLLFFBQUwsQ0FBYyxVQUFkLEVBQTBCLEtBQUssU0FBL0IsQ0FBWDtBQUNBLFVBQUcsSUFBSCxFQUFRO0FBQ04sWUFBRyxLQUFLLFlBQUwsQ0FBa0IsZ0JBQWxCLENBQW1DLElBQW5DLENBQUgsRUFBNkM7QUFDM0MsaUJBQU8sSUFBUDtBQUNEO0FBQ0Y7QUFDRCxhQUFPLEtBQVA7QUFDRDs7OytDQUMwQixVLEVBQVc7QUFDcEMsVUFBSSxnQkFBZ0IsS0FBSyxnQkFBTCxDQUFzQixVQUF0QixDQUFwQjtBQUNBLFVBQUcsQ0FBQyxhQUFKLEVBQW1CO0FBQ2pCO0FBQ0Q7QUFDRCxVQUFJLHNCQUFzQixLQUFLLHVCQUFMLENBQTZCLGFBQTdCLENBQTFCO0FBQ0EsVUFBRyxzQkFBc0IsY0FBYyxvQkFBdkMsRUFBNEQ7QUFDMUQsYUFBSyxtQkFBTCxDQUF5QixhQUF6QjtBQUNEO0FBQ0Y7OztxQ0FDZ0IsVSxFQUFXO0FBQzFCLFVBQUksaUJBQWlCLGFBQWEsc0JBQWIsQ0FBb0MsVUFBcEMsRUFBZ0QsSUFBaEQsQ0FBckI7QUFDQSxVQUFHLGNBQUgsRUFBa0I7QUFDaEIsWUFBSSxnQkFBZ0IsYUFBYSxjQUFiLENBQTRCLGNBQTVCLEVBQTRDLENBQTVDLENBQXBCO0FBQ0EsZUFBTyxhQUFQO0FBQ0Q7QUFDRjs7O3dDQUNtQixVLEVBQVc7QUFDN0IsVUFBSSxPQUFPLEtBQUssUUFBTCxDQUFjLFVBQWQsQ0FBWDtBQUNBLFVBQUcsSUFBSCxFQUFRO0FBQ04sWUFBRyxLQUFLLFlBQUwsQ0FBa0IsYUFBbEIsQ0FBZ0MsSUFBaEMsQ0FBSCxFQUEwQztBQUN4QztBQUNEO0FBQ0QsYUFBSyxJQUFMLEdBQVksS0FBSyxZQUFMLENBQWtCLGVBQWxCLENBQWtDLElBQWxDLENBQVo7QUFDQSxhQUFLLFdBQUwsR0FBbUIsS0FBbkI7QUFDRDtBQUNGOzs7d0NBQ2tCO0FBQ2pCLFVBQUcsS0FBSyxJQUFMLEtBQWMsRUFBakIsRUFBb0I7QUFDbEIsWUFBSSxrQkFBa0IsS0FBSyxZQUFMLENBQWtCLGtCQUFsQixDQUFxQyxLQUFLLElBQTFDLENBQXRCO0FBQ0EsZUFBTyxJQUFJLFVBQUosQ0FBZSxlQUFmLEVBQWdDLEtBQUssV0FBckMsRUFBa0QsQ0FBbEQsRUFBcUQsS0FBSyxNQUExRCxDQUFQO0FBQ0Q7QUFDRjs7O3NDQUVpQixVLEVBQVc7QUFDM0IsV0FBSyxXQUFMLEdBQW1CLEtBQUssV0FBTCxHQUFtQixLQUFLLHFCQUFMLENBQTJCLFVBQTNCLENBQXRDO0FBQ0EsV0FBSyxZQUFMLENBQWtCLFVBQWxCO0FBQ0EsVUFBRyxLQUFLLHVCQUFMLENBQTZCLFVBQTdCLENBQUgsRUFBNEM7QUFDMUMsYUFBSyxZQUFMLENBQWtCLElBQWxCLENBQXVCLEtBQUssaUJBQUwsRUFBdkI7QUFDRDtBQUNELFVBQUcsS0FBSyxXQUFMLENBQWlCLFVBQWpCLENBQUgsRUFBZ0M7QUFDOUIsWUFBSSxhQUFhLEtBQUssVUFBTCxDQUFnQixVQUFoQixDQUFqQjtBQUNBLGFBQUssWUFBTCxHQUFvQixLQUFLLFNBQUwsQ0FBZSxVQUFmLENBQXBCO0FBQ0EsYUFBSyxNQUFMO0FBQ0EsYUFBSyxXQUFMLEdBQW1CLEtBQW5CO0FBQ0EsYUFBSyxZQUFMLEdBQW9CLEtBQXBCO0FBQ0EsYUFBSyxTQUFMLEdBQWlCLFNBQWpCO0FBQ0EsWUFBRyxVQUFILEVBQWM7QUFDWixlQUFLLGlCQUFMLENBQXVCLFVBQXZCO0FBQ0Q7QUFDRjtBQUNGOzs7NENBQ3VCLGEsRUFBYztBQUNwQyxVQUFJLGNBQWUsS0FBSyxTQUFMLENBQWUsS0FBSyxVQUFwQixDQUFuQjtBQUNBLFVBQUksUUFBUSxhQUFhLGlCQUFiLENBQStCLGFBQS9CLENBQVo7QUFDQSxhQUFPLFFBQU0sV0FBYjtBQUNEOzs7aUNBQ1ksVSxFQUFXO0FBQ3RCLFVBQUcsS0FBSyxZQUFMLENBQWtCLFVBQXJCLEVBQWdDO0FBQzlCLGFBQUssSUFBTCxHQUFZLEtBQUssU0FBTCxDQUFlLFVBQWYsSUFBNkIsS0FBSyxJQUE5QztBQUNELE9BRkQsTUFHSTtBQUNGLGFBQUssSUFBTCxHQUFZLEtBQUssSUFBTCxHQUFZLEtBQUssU0FBTCxDQUFlLFVBQWYsQ0FBeEI7QUFDRDtBQUNGOzs7NkJBQ1EsVSxFQUFZLFMsRUFBVTtBQUM3QixrQkFBWSxhQUFhLEtBQUssY0FBTCxDQUFvQixVQUFwQixDQUF6QjtBQUNBLGFBQU8sYUFBYSxjQUFiLENBQTRCLFNBQTVCLEVBQXVDLE1BQU0sR0FBTixDQUFVLElBQWpELENBQVA7QUFDRDs7O21DQUVjLFUsRUFBVztBQUN4QixhQUFPLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsV0FBVyxNQUFNLEtBQU4sQ0FBWSxTQUF2QixDQUF4QixDQUFQO0FBQ0Q7OzsrQkFDVSxVLEVBQVc7QUFDcEIsVUFBSSxtQkFBSjtBQUNBLFVBQUcsS0FBSyxZQUFSLEVBQXFCO0FBQ25CLHFCQUFhLGFBQWEsc0JBQWIsQ0FBb0MsVUFBcEMsRUFBZ0QsS0FBSyxRQUFyRCxDQUFiO0FBQ0QsT0FGRCxNQUdJO0FBQ0YscUJBQWEsYUFBYSxZQUFiLENBQTBCLFVBQTFCLENBQWI7QUFDRDtBQUNELFVBQUcsY0FBYyxXQUFXLE1BQVgsR0FBcUIsQ0FBdEMsRUFBd0M7QUFDdEMsZUFBTyxhQUFhLGtCQUFiLENBQWdDLFVBQWhDLENBQVA7QUFDRDtBQUNGOzs7OEJBQ1MsVSxFQUFXO0FBQ25CLFVBQUksT0FBTyxLQUFLLFFBQUwsQ0FBYyxVQUFkLEVBQTBCLEtBQUssU0FBL0IsQ0FBWDtBQUNBLFVBQUcsSUFBSCxFQUFRO0FBQ04sZUFBUSxLQUFLLFdBQU4sR0FBcUIsS0FBSyxZQUFMLENBQWtCLFlBQWxCLENBQStCLElBQS9CLENBQXJCLEdBQTRELE1BQU0sSUFBekU7QUFDRDtBQUNELGFBQU8sRUFBUDtBQUNEOzs7MENBQ3FCLFUsRUFBVztBQUMvQixVQUFJLFFBQVEsS0FBSyxTQUFMLENBQWUsVUFBZixDQUFaO0FBQ0EsYUFBUSxRQUFRLEtBQUssWUFBckI7QUFDRDs7OzhCQUNTLFUsRUFBVztBQUNuQixVQUFHLEtBQUssU0FBUixFQUFrQjtBQUNoQixlQUFPLGFBQWEsb0JBQWIsQ0FBa0MsS0FBSyxTQUF2QyxDQUFQO0FBQ0QsT0FGRCxNQUdLO0FBQ0gsZUFBTyxhQUFhLGlCQUFiLENBQStCLFVBQS9CLENBQVA7QUFDRDtBQUNGOzs7NENBQ3VCLFUsRUFBVzs7QUFFakMsYUFBTyxLQUFLLGlCQUFMLElBQ0MsQ0FBQyxLQUFLLFdBQUwsQ0FBaUIsVUFBakIsQ0FERixJQUVDLENBQUMsS0FBSyxnQkFBTCxDQUFzQixVQUF0QixDQUZUO0FBR0Q7OztnQ0FDVyxVLEVBQVc7QUFDckIsVUFBSSxPQUFPLEtBQUssUUFBTCxDQUFjLFVBQWQsRUFBMEIsS0FBSyxTQUEvQixDQUFYO0FBQ0EsVUFBRyxDQUFDLElBQUosRUFBUztBQUNQLGVBQU8sS0FBUDtBQUNEO0FBQ0QsYUFBTyxLQUFLLE9BQUwsQ0FBYSxVQUFiLENBQXdCLElBQXhCLENBQVA7QUFDRDs7Ozs7O0FBRUgsT0FBTyxPQUFQLEdBQWlCLGdCQUFqQjs7Ozs7Ozs7O0lDbkxNLGM7QUFDSiwwQkFBWSxJQUFaLEVBQW1CLFlBQW5CLEVBQWdDO0FBQUE7O0FBQzlCLFNBQUssWUFBTCxHQUFvQixZQUFwQjtBQUNBLFNBQUssS0FBTCxHQUFhLFFBQVEsRUFBckI7QUFDRDs7OzsrQkFJVSxLLEVBQU8sYyxFQUFlO0FBQy9CLFVBQUcsS0FBSyxZQUFMLENBQWtCLFVBQXJCLEVBQWdDO0FBQzlCLGVBQVEsbUJBQW1CLFNBQXBCLElBQW1DLEtBQUssWUFBTCxDQUFrQixhQUFsQixLQUFvQyxlQUFlLGFBQTdGO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsZUFBTyxLQUFLLFlBQUwsQ0FBa0IsYUFBbEIsS0FBb0MsTUFBTSxhQUFqRDtBQUNEO0FBQ0Y7Ozs4QkFDUTtBQUNQLGFBQU8sS0FBSyxLQUFMLENBQVcsTUFBWCxLQUFzQixDQUE3QjtBQUNEOzs7d0JBYmlCO0FBQ2hCLGFBQU8sS0FBSyxLQUFaO0FBQ0Q7Ozs7OztBQWNILE9BQU8sT0FBUCxHQUFpQixjQUFqQjs7Ozs7Ozs7O0FDckJBLElBQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjtBQUNBLElBQU0sS0FBSyxRQUFRLG9CQUFSLENBQVg7QUFDQSxJQUFNLElBQUksR0FBRyxDQUFiO0FBQ0EsSUFBTSxtQkFBbUIsUUFBUSxxQkFBUixDQUF6QjtBQUNBLElBQU0saUJBQWlCLFFBQVEsbUJBQVIsQ0FBdkI7QUFDQSxJQUFNLG1CQUFtQixRQUFTLHFCQUFULENBQXpCO0FBQ0EsSUFBTSxZQUFZLFFBQVEsYUFBUixDQUFsQjtBQUNBLElBQU0sZ0JBQWdCLFFBQVEsVUFBUixDQUF0Qjs7QUFFQTs7SUFDTSxpQjtBQUNKLDZCQUFZLGNBQVosRUFBNEIsZUFBNUIsRUFBNEM7QUFBQTs7QUFDMUMsU0FBSyxlQUFMLEdBQXVCLGNBQXZCO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QixlQUF4QjtBQUNEOzs7O3FDQU1nQjtBQUNmLGFBQU8sRUFBRSxHQUFGLENBQU0sS0FBSyxZQUFYLEVBQXlCLFVBQUMsSUFBRCxFQUFVO0FBQ3hDLGVBQU8sSUFBSSxNQUFKLENBQVcsSUFBWCxDQUFQO0FBQ0QsT0FGTSxDQUFQO0FBR0Q7OztxQ0FDZ0IsSyxFQUFPLFMsRUFBVyxjLEVBQWU7QUFBQTs7QUFDaEQsV0FBSyxNQUFMLEdBQWMsS0FBZDtBQUNBLFdBQUssVUFBTCxHQUFrQixTQUFsQjtBQUNBLFdBQUssZUFBTCxHQUF1QixjQUF2QjtBQUNBLFVBQUksb0JBQW9CLElBQUksZ0JBQUosQ0FBcUIsS0FBSyxlQUExQixFQUEyQyxLQUFLLGdCQUFoRCxDQUF4QjtBQUNBLFdBQUssTUFBTCxDQUFZLGlCQUFaOztBQUVBLFVBQUksVUFBVSxLQUFLLGNBQUwsRUFBZDtBQUNBLFFBQUUsSUFBRixDQUFPLE9BQVAsRUFBZ0IsVUFBQyxNQUFELEVBQVk7QUFDMUIsZUFBTyxJQUFQLENBQVksTUFBSyxhQUFMLENBQW1CLElBQW5CLENBQXdCLEtBQXhCLENBQVo7QUFDRCxPQUZEO0FBR0Q7OztrQ0FDYSxNLEVBQU87QUFDbkIsV0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixLQUFLLE9BQU8sS0FBNUIsRUFBbUMsR0FBbkMsRUFBdUM7O0FBRXJDLFlBQUksTUFBTSxJQUFJLGNBQUosQ0FBbUIsRUFBQyxjQUFELEVBQVMsT0FBTSxDQUFmLEVBQWtCLFVBQVMsS0FBSyxnQkFBaEMsRUFBbkIsQ0FBVjtBQUNBLFlBQUksSUFBSjtBQUNBLGFBQUssTUFBTCxDQUFZLEdBQVo7QUFDRDtBQUNELFdBQUssSUFBSSxLQUFJLENBQWIsRUFBZ0IsTUFBSyxjQUFjLGFBQW5DLEVBQWtELElBQWxELEVBQXNEO0FBQ3BELFlBQUksT0FBTSxJQUFJLGNBQUosQ0FBbUIsRUFBQyxjQUFELEVBQVMsT0FBTSxFQUFmLEVBQWtCLFVBQVMsS0FBSyxnQkFBaEMsRUFBa0QsVUFBUyxJQUEzRCxFQUFuQixDQUFWO0FBQ0EsYUFBSSxJQUFKO0FBQ0EsYUFBSyxVQUFMLENBQWdCLElBQWhCO0FBQ0Q7O0FBRUQsVUFBSSxvQkFBb0IsSUFBSSxnQkFBSixDQUFxQixLQUFLLGdCQUExQixFQUE0QyxNQUE1QyxDQUF4QjtBQUNBLFdBQUssTUFBTCxDQUFZLGlCQUFaOztBQUVBLFVBQUksWUFBWSxJQUFJLFNBQUosQ0FBYyxNQUFkLEVBQXNCLEtBQUssZ0JBQTNCLENBQWhCO0FBQ0EsV0FBSyxlQUFMLENBQXFCLFNBQXJCO0FBRUQ7Ozt3QkF4Q2lCO0FBQ2hCLGFBQU8sR0FBRyxLQUFILENBQVMsR0FBVCxDQUFhLEdBQUcsTUFBSCxDQUFVLGtCQUFWLENBQWIsQ0FBUDtBQUNEOzs7Ozs7QUF3Q0gsT0FBTyxPQUFQLEdBQWlCLGlCQUFqQjs7Ozs7Ozs7O0FDMURBLElBQU0sS0FBSyxRQUFRLG9CQUFSLENBQVg7QUFDQSxJQUFNLElBQUksR0FBRyxDQUFiO0FBQ0EsSUFBTSxTQUFTLEdBQUcsTUFBbEI7QUFDQSxJQUFNLGlCQUFpQixRQUFRLGtCQUFSLENBQXZCO0FBQ0EsSUFBTSxjQUFjLFFBQVEsZ0JBQVIsQ0FBcEI7QUFDQSxJQUFNLGtCQUFrQixRQUFRLGtCQUFSLENBQXhCO0FBQ0EsSUFBTSxlQUFlLFFBQVEsaUJBQVIsQ0FBckI7QUFDQSxJQUFNLGVBQWUsUUFBUSxTQUFSLENBQXJCO0FBQ0EsSUFBTSxnQkFBZ0IsUUFBUSxVQUFSLENBQXRCO0FBQ0EsSUFBTSxhQUFhLFFBQVEsdUNBQVIsQ0FBbkI7QUFDQSxJQUFNLG1CQUFtQixRQUFRLHNCQUFSLENBQXpCO0FBQ0EsSUFBTSxnQkFBZ0IsUUFBUSxrQkFBUixDQUF0Qjs7QUFFQSxJQUFNLGtCQUFrQixDQUF4Qjs7SUFFTSxnQjtBQUNKLDRCQUFZLE1BQVosRUFBb0I7QUFBQTs7QUFBQTs7QUFDbEIsU0FBSyxNQUFMLEdBQWMsTUFBZDtBQUNBLFNBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFNBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFNBQUssb0JBQUwsR0FBNEIsRUFBNUI7QUFDQSxTQUFLLGlCQUFMO0FBQ0EsU0FBSyxlQUFMLEdBQXVCLGVBQXZCO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QixJQUFJLGVBQUosQ0FBb0IsRUFBcEIsQ0FBeEI7QUFDQSxXQUFPLEtBQVAsQ0FBYSxTQUFiLENBQXVCLE9BQU8sa0JBQVAsQ0FBdkIsRUFBbUQsWUFBTTtBQUN2RCxZQUFLLElBQUw7QUFDRCxLQUZEO0FBR0EsU0FBSyxjQUFMLEdBQXNCLElBQUksYUFBSixDQUFrQixNQUFsQixDQUF0QjtBQUNEOzs7OzJCQUNNO0FBQ0wsVUFBSSxlQUFlLEdBQUcsT0FBSCxDQUFXLEtBQVgsQ0FBaUIsT0FBTyxpQkFBUCxDQUFqQixDQUFuQjtBQUNBLHFCQUFlLFdBQWYsQ0FBMkIsWUFBM0I7QUFDQSxXQUFLLGlCQUFMO0FBQ0EsV0FBSyxNQUFMLENBQVksS0FBWixDQUFrQixVQUFsQixDQUE2Qiw2QkFBN0IsRUFBNEQsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixJQUEzQixDQUE1RDtBQUNBLFdBQUssTUFBTCxDQUFZLEtBQVosQ0FBa0IsVUFBbEIsQ0FBNkIsaUJBQTdCLEVBQWdELEtBQUssTUFBTCxDQUFZLElBQVosQ0FBaUIsSUFBakIsQ0FBaEQ7QUFHRDs7OzZCQUNRO0FBQ1AsVUFBSSxPQUFPLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsT0FBTyxpQkFBUCxDQUFoQixDQUFYO0FBQ0EsV0FBSyxjQUFMLENBQW9CLGlCQUFwQixDQUFzQyxJQUF0QztBQUNEOzs7d0NBQ21CO0FBQ2xCLFdBQUssV0FBTCxHQUFtQixFQUFuQjtBQUNBLFVBQUksb0JBQW9CLElBQUksZ0JBQUosQ0FBcUIsY0FBckIsRUFBcUMsS0FBSyxhQUFMLENBQW1CLElBQW5CLENBQXdCLElBQXhCLENBQXJDLENBQXhCO0FBQ0Esd0JBQWtCLGdCQUFsQixDQUFtQyxLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FBbkMsRUFDRSxLQUFLLGdCQUFMLENBQXNCLElBQXRCLENBQTJCLElBQTNCLENBREYsRUFFRSxLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FGRjtBQUdEOzs7aUNBQ1ksUyxFQUFXO0FBQ3RCLFdBQUssV0FBTCxDQUFpQixJQUFqQixDQUFzQixTQUF0QjtBQUNEOzs7cUNBQ2dCLFMsRUFBVztBQUMxQixXQUFLLG9CQUFMLENBQTBCLElBQTFCLENBQStCLFNBQS9CO0FBQ0Q7OztpQ0FDWSxTLEVBQVc7QUFDdEIsV0FBSyxXQUFMLENBQWlCLElBQWpCLENBQXNCLFNBQXRCO0FBQ0Q7OztvQ0FDZSxNLEVBQVE7QUFDdEIsV0FBSyxnQkFBTCxDQUFzQixNQUF0QjtBQUNBLFdBQUssc0JBQUw7QUFDRDs7O3FDQUVnQixNLEVBQVE7QUFDdkIsV0FBSyxXQUFMO0FBQ0EsV0FBSyxXQUFMLENBQWlCLE1BQWpCO0FBQ0EsV0FBSyxnQkFBTCxHQUF3QixJQUFJLFVBQUosQ0FBZSxLQUFLLGdCQUFMLENBQXNCLElBQXRCLENBQTJCLElBQTNCLENBQWYsQ0FBeEI7QUFDRDs7O2dDQUNXLE0sRUFBUTtBQUNsQixXQUFLLFlBQUwsR0FBb0IsSUFBSSxXQUFKLENBQWdCLE9BQU8sSUFBdkIsRUFBNkIsS0FBN0IsRUFBb0MsT0FBTyxRQUEzQyxFQUFxRCxLQUFyRCxDQUFwQjtBQUNBLFVBQUksYUFBYSxVQUFiLENBQXdCLE1BQXhCLENBQUosRUFBcUM7QUFDbkMsYUFBSyxlQUFMLEdBQXVCLElBQUksV0FBSixDQUFnQixPQUFPLElBQXZCLEVBQTZCLEtBQTdCLEVBQW9DLE9BQU8sUUFBM0MsRUFBcUQsSUFBckQsQ0FBdkI7QUFDRDtBQUNGOzs7NkNBQ3dCO0FBQUE7O0FBQ3ZCLFdBQUssZ0JBQUwsQ0FBc0IsSUFBdEIsQ0FBMkIsS0FBSyxlQUFMLEVBQTNCO0FBQ0EsUUFBRSxJQUFGLENBQU8sS0FBSyxXQUFaLEVBQXlCLFVBQUMsU0FBRCxFQUFlO0FBQ3RDLGtCQUFVLGNBQVYsQ0FBeUIsT0FBSyxZQUE5QjtBQUNELE9BRkQ7QUFHQSxVQUFJLEtBQUssZUFBVCxFQUEwQjtBQUN4QixVQUFFLElBQUYsQ0FBTyxLQUFLLG9CQUFaLEVBQWtDLFVBQUMsU0FBRCxFQUFlO0FBQy9DLG9CQUFVLGNBQVYsQ0FBeUIsT0FBSyxlQUE5QjtBQUNELFNBRkQ7QUFHRDtBQUNGOzs7dUNBQ2tCO0FBQ2pCLFFBQUUsSUFBRixDQUFPLEtBQUssV0FBWixFQUF5QixVQUFDLFNBQUQsRUFBZTtBQUN0QyxrQkFBVSxLQUFWO0FBQ0QsT0FGRDtBQUdBLFFBQUUsSUFBRixDQUFPLEtBQUssb0JBQVosRUFBa0MsVUFBQyxTQUFELEVBQWU7QUFDL0Msa0JBQVUsS0FBVjtBQUNELE9BRkQ7QUFHQSxRQUFFLElBQUYsQ0FBTyxLQUFLLFdBQVosRUFBeUIsVUFBQyxTQUFELEVBQWU7QUFDdEMsa0JBQVUsS0FBVjtBQUNELE9BRkQ7QUFHRDs7O3NDQUNpQjtBQUNoQixVQUFJLFFBQVEsS0FBSyxXQUFMLENBQWlCLE1BQTdCO0FBQ0EsVUFBSSxLQUFLLGVBQVQsRUFBMEI7QUFDeEIsaUJBQVMsS0FBSyxvQkFBTCxDQUEwQixNQUFuQztBQUNEO0FBQ0QsYUFBTyxLQUFQO0FBQ0Q7OztrQ0FDYTtBQUNaLFVBQUksS0FBSyxnQkFBVCxFQUEyQjtBQUN6QixhQUFLLGdCQUFMLENBQXNCLEtBQXRCO0FBQ0Q7QUFDRCxXQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLFVBQXBCLEVBQWdDLFNBQWhDO0FBQ0EsV0FBSyxlQUFMLEdBQXVCLFNBQXZCO0FBQ0EsV0FBSyxxQkFBTCxHQUE2QixLQUE3QjtBQUNEOzs7bUNBQ2M7QUFDYixXQUFLLGNBQUw7QUFDQSxXQUFLLGVBQUwsR0FBdUIsU0FBdkI7QUFDQSxXQUFLLFlBQUwsR0FBb0IsU0FBcEI7QUFDQSxXQUFLLGdCQUFMLEdBQXdCLFNBQXhCO0FBQ0EsV0FBSyxnQkFBTDtBQUNEOzs7d0NBRW1CO0FBQ2xCLFVBQUksY0FBYyxLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQWdCLE9BQU8sb0JBQVAsQ0FBaEIsQ0FBbEI7QUFDQSxhQUFPLGVBQWUsWUFBWSxNQUFaLEdBQXFCLENBQTNDO0FBQ0Q7OztrQ0FDYSxjLEVBQWdCLE0sRUFBUTtBQUNwQyxVQUFJLENBQUMsZUFBZSxVQUFmLENBQTBCLEtBQUssWUFBL0IsRUFBNkMsS0FBSyxlQUFsRCxDQUFMLEVBQXlFO0FBQ3ZFO0FBQ0Q7QUFDRCxVQUFJLENBQUMsZUFBZSxPQUFmLEVBQUwsRUFBK0I7QUFDN0IsYUFBSyxnQkFBTCxDQUFzQixLQUF0QixDQUE0QixlQUFlLFdBQTNDO0FBQ0EsWUFBSSxVQUFVLElBQUksWUFBSixDQUFpQixNQUFqQixDQUFkO0FBQ0EsYUFBSyxXQUFMLEdBQW1CLFFBQVEsYUFBUixDQUFzQixLQUFLLFdBQTNCLEVBQXdDLEtBQUssWUFBN0MsQ0FBbkI7QUFDRDtBQUNELFdBQUssZ0JBQUwsQ0FBc0IsTUFBdEI7QUFDRDs7O3VDQUNrQjtBQUNqQixVQUFJLEtBQUssY0FBTCxFQUFKLEVBQTJCO0FBQ3pCLGFBQUssWUFBTDtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUssV0FBTCxDQUFpQixNQUFqQixDQUF3QixLQUFLLGVBQTdCO0FBQ0EsYUFBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLG9CQUFQLENBQXBCLEVBQWtELEtBQUssV0FBdkQ7QUFDQSxhQUFLLFlBQUw7QUFDRDtBQUNGOzs7cUNBQ2dCO0FBQ2YsYUFBTyxDQUFDLEtBQUsscUJBQU4sSUFDTCxLQUFLLFdBQUwsQ0FBaUIsTUFBakIsS0FBNEIsQ0FEdkIsSUFFTCxLQUFLLFlBQUwsQ0FBa0IsV0FBbEIsS0FBa0MsRUFGcEM7QUFHRDs7O21DQUNjO0FBQUE7O0FBQ2IsV0FBSyxxQkFBTCxHQUE2QixJQUE3QjtBQUNBLFdBQUssZ0JBQUwsR0FBd0IsSUFBSSxVQUFKLENBQWUsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixJQUEzQixDQUFmLENBQXhCO0FBQ0EsV0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixLQUFLLFdBQUwsQ0FBaUIsTUFBNUM7QUFDQSxRQUFFLElBQUYsQ0FBTyxLQUFLLFdBQVosRUFBeUIsVUFBQyxTQUFELEVBQWU7QUFDdEMsa0JBQVUsY0FBVixDQUF5QixPQUFLLFlBQTlCO0FBQ0QsT0FGRDtBQUdEOzs7OEJBQ1MsRSxFQUFJO0FBQ1osVUFBSSxhQUFhLEtBQUssV0FBTCxDQUFpQixFQUFqQixDQUFqQjtBQUNBLFVBQUksZUFBZSxTQUFuQixFQUE4QjtBQUM1QixlQUFPLEtBQVA7QUFDRDtBQUNELGFBQU8sV0FBVyxNQUFYLEtBQXNCLGNBQWMsbUJBQWQsQ0FBa0MsaUJBQS9EO0FBQ0Q7OztpQ0FDWSxFLEVBQUk7QUFDZixVQUFJLGFBQWEsS0FBSyxXQUFMLENBQWlCLEVBQWpCLENBQWpCO0FBQ0EsV0FBSyxrQkFBTCxDQUF3QixXQUFXLElBQW5DO0FBQ0EsV0FBSyxpQkFBTCxDQUF1QixFQUF2QjtBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsaUJBQXBCLEVBQXVDLElBQXZDO0FBQ0Q7OztzQ0FFaUIsRSxFQUFJO0FBQ3BCLFdBQUssV0FBTCxDQUFpQixNQUFqQixDQUF3QixFQUF4QixFQUE0QixDQUE1QjtBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBTyxvQkFBUCxDQUFwQixFQUFrRCxLQUFLLFdBQXZEO0FBQ0Q7OztnQ0FDVyxFLEVBQUk7QUFDZCxVQUFJLGtCQUFrQixLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQWdCLGlCQUFoQixDQUF0QjtBQUNBLFVBQUksZUFBSixFQUFxQjtBQUNuQjtBQUNEO0FBQ0QsVUFBSSxhQUFhLEtBQUssV0FBTCxDQUFpQixFQUFqQixDQUFqQjtBQUNBLFVBQUksZUFBZSxTQUFuQixFQUE4QjtBQUM1QjtBQUNEOztBQUVELFVBQUksV0FBVyxXQUFXLElBQTFCO0FBQ0EsV0FBSyxhQUFMLENBQW1CLFFBQW5CO0FBQ0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLGlCQUFQLENBQXBCLEVBQStDLFFBQS9DO0FBQ0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixHQUFHLE1BQUgsQ0FBVSxpQkFBVixDQUFwQixFQUFrRCxJQUFsRDtBQUVEOzs7bUNBQ2MsRyxFQUFLLFMsRUFBVztBQUM3QixVQUFJLGtCQUFrQixLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQWdCLGlCQUFoQixDQUF0QjtBQUNBLFVBQUksQ0FBQyxlQUFMLEVBQXNCO0FBQ3BCLGFBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsR0FBcEIsRUFBeUIsS0FBekI7QUFDRCxPQUZELE1BRU87QUFDTCxhQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLGlCQUFwQixFQUF1QyxLQUF2QztBQUNBLGFBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsU0FBcEIsRUFBK0IsSUFBL0I7QUFDRDtBQUNGOzs7NENBQ3VCLE0sRUFBUSxJLEVBQU07QUFDcEMsYUFBTyxPQUFPLENBQVAsR0FBVyxTQUFTLENBQTNCO0FBQ0Q7OzsyQ0FTc0IsYSxFQUFlLE0sRUFBUSxJLEVBQU07QUFDbEQsVUFBSSxPQUFPLE9BQU8sQ0FBUCxHQUFXLFNBQVMsQ0FBL0I7QUFDQSxzQkFBaUIsa0JBQWtCLFNBQW5CLEdBQWdDLENBQWhDLEdBQW9DLGFBQXBEO0FBQ0Esc0JBQWdCLENBQUMsZ0JBQWdCLElBQWpCLElBQXlCLE1BQXpDO0FBQ0EsYUFBTyxhQUFQO0FBQ0Q7OzttQ0FFYyxNLEVBQVE7QUFDckIsVUFBSSxnQkFBZ0IsS0FBSyxNQUFMLENBQVksR0FBWixDQUFnQixVQUFoQixDQUFwQjtBQUNBLFVBQUksT0FBTyxPQUFPLE9BQVAsS0FBbUIsRUFBOUI7QUFDQSxVQUFJLFNBQVMsS0FBSyxvQkFBTCxFQUFiO0FBQ0EsVUFBSSxTQUFTLENBQWIsRUFBZ0I7QUFDZCxZQUFJLGtCQUFrQixTQUF0QixFQUFpQztBQUMvQiwwQkFBZ0IsS0FBSyx1QkFBTCxDQUE2QixNQUE3QixFQUFxQyxJQUFyQyxDQUFoQjtBQUNELFNBRkQsTUFFTztBQUNMLDBCQUFnQixLQUFLLHNCQUFMLENBQTRCLGFBQTVCLEVBQTJDLE1BQTNDLEVBQW1ELElBQW5ELENBQWhCO0FBQ0Q7QUFDRCxhQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLFVBQXBCLEVBQWdDLGFBQWhDO0FBQ0EsWUFBSSxXQUFXLEtBQUssZUFBTCxDQUFxQixLQUFLLE9BQUwsQ0FBYSxhQUFiLENBQXJCLENBQWY7QUFDQSxhQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLE9BQU8saUJBQVAsQ0FBcEIsRUFBK0MsUUFBL0M7QUFDRDtBQUNGOzs7b0NBRWUsVSxFQUFZO0FBQzFCLGFBQU8sV0FBVyxJQUFsQjtBQUNEOzs7MkNBRXNCO0FBQ3JCLFVBQUksZUFBSjtBQUNBLFdBQUssT0FBTCxHQUFlLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsT0FBTyxvQkFBUCxDQUFoQixDQUFmO0FBQ0EsVUFBSSxLQUFLLE9BQVQsRUFBa0I7QUFDaEIsaUJBQVMsS0FBSyxPQUFMLENBQWEsTUFBdEI7QUFDRDtBQUNELGFBQU8sTUFBUDtBQUNEOzs7dUNBRWtCO0FBQ2pCLFdBQUssWUFBTDtBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsVUFBcEIsRUFBZ0MsU0FBaEM7QUFDQSxXQUFLLHFCQUFMLEdBQTZCLFNBQTdCO0FBQ0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLG9CQUFQLENBQXBCLEVBQWtELEVBQWxEO0FBQ0Q7Ozt1Q0FDa0IsSSxFQUFNO0FBQ3ZCLHFCQUFlLE1BQWYsQ0FBc0IsSUFBdEI7QUFDQSxXQUFLLFlBQUw7QUFDRDs7O2tDQUNhLEksRUFBTTtBQUNsQixVQUFJLFFBQVEsU0FBUyxFQUFyQixFQUF5QjtBQUN2Qix1QkFBZSxHQUFmLENBQW1CO0FBQ2pCLGdCQUFNLEtBQUssSUFBTCxFQURXO0FBRWpCLGlCQUFPO0FBRlUsU0FBbkIsRUFEdUIsQ0FJbkI7QUFDSixhQUFLLFlBQUw7QUFDRDtBQUNGOzs7bUNBQ2M7QUFDYixTQUFHLE9BQUgsQ0FBVyxPQUFYLENBQW1CLE9BQU8saUJBQVAsQ0FBbkIsRUFBOEMsZUFBZSxVQUFmLEVBQTlDO0FBQ0Q7Ozt5Q0FDb0IsTSxFQUFRO0FBQzNCLFVBQUksT0FBTyxJQUFQLEtBQWdCLEVBQWhCLElBQXNCLGFBQWEsb0JBQWIsQ0FBa0MsTUFBbEMsTUFBOEMsS0FBeEUsRUFBK0U7QUFDN0UsYUFBSyxnQkFBTDtBQUNELE9BRkQsTUFFTztBQUNMLGFBQUssZUFBTCxDQUFxQixNQUFyQjtBQUNEO0FBQ0Y7OztpQ0FDWSxNLEVBQVE7QUFDbkIsVUFBSSxPQUFPLElBQVAsS0FBZ0IsRUFBcEIsRUFBd0I7QUFDdEIsYUFBSyxhQUFMLENBQW1CLE9BQU8sSUFBMUI7QUFDQSxhQUFLLGdCQUFMO0FBQ0EsYUFBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLGlCQUFQLENBQXBCLEVBQStDLE9BQU8sSUFBdEQ7QUFDQSxhQUFLLE1BQUwsQ0FBWSxPQUFaLENBQW9CLE9BQU8saUJBQVAsQ0FBcEIsRUFBK0MsSUFBL0M7QUFDRDtBQUNGOzs7bUNBQ2MsTyxFQUFTO0FBQ3RCLGFBQU8sQ0FBQyxFQUFELEVBQUssRUFBTCxFQUFTLEVBQVQsRUFBYSxPQUFiLENBQXFCLE9BQXJCLEtBQWlDLENBQXhDO0FBQ0Q7OztxQ0FDZ0I7QUFDZixXQUFLLHFCQUFMLEdBQTZCLFNBQTdCO0FBQ0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixVQUFwQixFQUFnQyxTQUFoQztBQUNEOzs7NENBQ3VCO0FBQ3RCLFVBQUksZ0JBQWdCLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsVUFBaEIsQ0FBcEI7QUFDQSxhQUFPLGtCQUFrQixTQUF6QjtBQUNEOzs7d0NBQ21CO0FBQ2xCLFdBQUssZUFBTCxHQUF1QjtBQUNyQixZQUFJLEtBQUssY0FBTCxDQUFvQixJQUFwQixDQUF5QixJQUF6QixDQURpQjtBQUVyQixjQUFNLEtBQUssY0FBTCxDQUFvQixJQUFwQixDQUF5QixJQUF6QixDQUZlO0FBR3JCLG1CQUFXLEtBQUssZUFBTCxDQUFxQixJQUFyQixDQUEwQixJQUExQixDQUhVO0FBSXJCLGdCQUFRLEtBQUssWUFBTCxDQUFrQixJQUFsQixDQUF1QixJQUF2QixDQUphO0FBS3JCLGlCQUFTLEtBQUssb0JBQUwsQ0FBMEIsSUFBMUIsQ0FBK0IsSUFBL0IsQ0FMWTtBQU1yQixnQkFBUSxLQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUIsSUFBdkIsQ0FOYTtBQU9yQixlQUFPLEtBQUssV0FBTCxDQUFpQixJQUFqQixDQUFzQixJQUF0QjtBQVBjLE9BQXZCO0FBU0Q7OztnQ0FFVyxNLEVBQVE7QUFDbEIsVUFBSSxDQUFDLEtBQUsscUJBQUwsRUFBTCxFQUFtQztBQUNqQyxhQUFLLGNBQUw7QUFDQSxlQUFPLEtBQUssb0JBQUwsQ0FBMEIsTUFBMUIsQ0FBUDtBQUNEO0FBQ0QsVUFBSSxhQUFhLGlCQUFiLENBQStCLE1BQS9CLENBQUosRUFBNEM7QUFDMUMsZUFBTyxJQUFQLElBQWUsR0FBZjtBQUNBLGVBQU8sUUFBUCxJQUFtQixDQUFuQjtBQUNBLGFBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBTyxpQkFBUCxDQUFwQixFQUErQyxPQUFPLElBQXREO0FBQ0Q7QUFDRCxXQUFLLGNBQUw7QUFDQSxXQUFLLG9CQUFMLENBQTBCLE1BQTFCO0FBQ0EsYUFBTyxLQUFQO0FBQ0Q7OztvQ0FDZSxNLEVBQVE7QUFDdEIsYUFBTyxLQUFLLG9CQUFMLENBQTBCLE1BQTFCLENBQVA7QUFDRDs7O21DQUNjO0FBQ2IsV0FBSyxnQkFBTDtBQUNEOzs7OEJBQ1MsSyxFQUFPOztBQUVmLFVBQUksVUFBVSxNQUFNLE9BQXBCO0FBQ0EsVUFBSSxTQUFTO0FBQ1gsaUJBQVMsT0FERTtBQUVYLGtCQUFVLE1BQU0sTUFBTixDQUFhLGNBRlo7QUFHWCxjQUFNLE1BQU0sTUFBTixDQUFhO0FBSFIsT0FBYjtBQUtBLFVBQUksQ0FBQyxLQUFLLGNBQUwsQ0FBb0IsT0FBcEIsQ0FBTCxFQUFtQztBQUNqQyxhQUFLLGNBQUw7QUFDRDtBQUNELFVBQUksUUFBUSxFQUFFLFdBQUYsQ0FBYyxPQUFkLENBQVo7O0FBRUEsVUFBSSxVQUFVLFNBQWQsRUFBeUI7QUFDdkIsZUFBTyxJQUFQO0FBQ0Q7QUFDRCxVQUFJLFdBQVcsS0FBSyxlQUFMLENBQXFCLEtBQXJCLENBQWY7QUFDQSxVQUFJLFFBQUosRUFBYztBQUNaLGVBQU8sU0FBUyxNQUFULENBQVA7QUFDRDtBQUNGOzs7d0JBL0lpQjtBQUNoQixhQUFPLEtBQUssZ0JBQUwsQ0FBc0IsS0FBN0I7QUFDRCxLO3NCQUNlLFcsRUFBYTtBQUMzQixXQUFLLGdCQUFMLEdBQXdCLElBQUksZUFBSixDQUFvQixXQUFwQixDQUF4QjtBQUNEOzs7Ozs7QUE2SUgsR0FBRyxVQUFILENBQWMsa0JBQWQsRUFBa0MsZ0JBQWxDOzs7Ozs7Ozs7SUM3Vk0sUztBQUNKLHFCQUFZLEdBQVosRUFBZ0I7QUFBQTs7QUFDZCxTQUFLLElBQUwsR0FBWSxPQUFPLEVBQW5CO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLEtBQXBCO0FBQ0Q7Ozs7OEJBQ1MsSyxFQUFNO0FBQ2QsVUFBRyxDQUFDLE1BQU0sT0FBTixDQUFjLEtBQWQsQ0FBSixFQUF5QjtBQUN2QixnQkFBUSxNQUFNLEdBQWQ7QUFDRDtBQUNELFVBQUksVUFBVyxFQUFmO0FBQ0EsVUFBSSxRQUFPLENBQVg7QUFDQSxVQUFJLElBQUksQ0FBUixDQUFXLElBQUksSUFBRyxDQUFQO0FBQ1gsYUFBTSxJQUFJLEtBQUssSUFBTCxDQUFVLE1BQWQsSUFBd0IsSUFBSSxNQUFNLE1BQXhDLEdBQWdEO0FBQzlDLFlBQUcsS0FBSyxJQUFMLENBQVUsQ0FBVixJQUFlLE1BQU0sQ0FBTixDQUFsQixFQUE0QjtBQUMxQjtBQUNELFNBRkQsTUFHSyxJQUFJLEtBQUssSUFBTCxDQUFVLENBQVYsSUFBZSxNQUFNLENBQU4sQ0FBbkIsRUFBNkI7QUFDaEM7QUFDRCxTQUZJLE1BR0E7QUFDSCxrQkFBUSxPQUFSLElBQW1CLEtBQUssSUFBTCxDQUFVLENBQVYsQ0FBbkI7QUFDQSxjQUFLO0FBQ047QUFDRjtBQUNELFdBQUssSUFBTCxHQUFZLE9BQVo7QUFDRDs7O21DQUNjLEssRUFBTTtBQUNuQixVQUFHLEtBQUssWUFBUixFQUFxQjtBQUNuQixhQUFLLFNBQUwsQ0FBZSxLQUFmO0FBQ0QsT0FGRCxNQUdJO0FBQ0YsWUFBRyxDQUFDLE1BQU0sT0FBTixDQUFjLEtBQWQsQ0FBSixFQUF5QjtBQUN2QixrQkFBUSxNQUFNLEdBQWQ7QUFDRDtBQUNELGFBQUssR0FBTCxHQUFXLEtBQVg7QUFDQSxhQUFLLFlBQUwsR0FBb0IsSUFBcEI7QUFDRDtBQUNGOzs7bUNBQ2MsSyxFQUFNO0FBQ25CLFVBQUcsQ0FBQyxNQUFNLE9BQU4sQ0FBYyxLQUFkLENBQUosRUFBeUI7QUFDdkIsZ0JBQVEsTUFBTSxHQUFkO0FBQ0Q7QUFDRCxVQUFJLFFBQVEsQ0FBWjtBQUNBLFVBQUksSUFBSSxDQUFSO0FBQ0EsVUFBSSxJQUFJLENBQVI7QUFDQSxhQUFNLElBQUksS0FBSyxJQUFMLENBQVUsTUFBZCxJQUF3QixJQUFJLE1BQU0sTUFBeEMsR0FBZ0Q7QUFDOUMsWUFBRyxLQUFLLElBQUwsQ0FBVSxDQUFWLElBQWUsTUFBTSxDQUFOLENBQWxCLEVBQTRCO0FBQzFCO0FBQ0QsU0FGRCxNQUdLLElBQUksS0FBSyxJQUFMLENBQVUsQ0FBVixJQUFlLE1BQU0sQ0FBTixDQUFuQixFQUE2QjtBQUNoQztBQUNELFNBRkksTUFHQTtBQUNIO0FBQ0EsY0FBSztBQUNOO0FBQ0Y7QUFDRCxhQUFPLEtBQVA7QUFDRDs7O3NCQUNPLEksRUFBSTtBQUNWLFdBQUssSUFBTCxHQUFZLFFBQU8sRUFBbkI7QUFDRCxLO3dCQUNRO0FBQ1AsYUFBTyxLQUFLLElBQVo7QUFDRDs7O3dCQUNXO0FBQ1YsYUFBTyxLQUFLLElBQUwsQ0FBVSxNQUFqQjtBQUNEOzs7Ozs7QUFHSCxPQUFPLE9BQVAsR0FBaUIsU0FBakI7Ozs7Ozs7OztBQ3RFQSxJQUFNLFlBQVksUUFBUSxjQUFSLENBQWxCO0FBQ0EsSUFBTSxTQUFTLFFBQVEsZ0JBQVIsQ0FBZjtBQUNBLElBQU0sYUFBYSxRQUFRLGNBQVIsQ0FBbkI7QUFDQSxJQUFNLEtBQUssUUFBUSxvQkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjtBQUNBLElBQU0sUUFBUSxRQUFRLFdBQVIsQ0FBZDs7SUFHTSxZO0FBQ0osd0JBQVksTUFBWixFQUFtQjtBQUFBOztBQUNqQixTQUFLLGNBQUwsR0FBc0IsRUFBdEI7QUFDQSxTQUFLLGFBQUwsR0FBcUIsSUFBSSxTQUFKLEVBQXJCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLElBQUksU0FBSixFQUFoQjtBQUNBLFNBQUssT0FBTCxHQUFlLE1BQWY7QUFDRDs7OztrQ0FDYSxXLEVBQWEsWSxFQUFhO0FBQUE7O0FBQ3RDLFdBQUssYUFBTCxHQUFxQixFQUFyQjtBQUNBLFdBQUssWUFBTCxHQUFvQixZQUFwQjtBQUNBLFFBQUUsSUFBRixDQUFPLFdBQVAsRUFBb0IsVUFBQyxVQUFELEVBQWdCO0FBQ2xDLGNBQUssb0JBQUwsQ0FBMEIsVUFBMUI7QUFDRCxPQUZEO0FBR0EsYUFBTyxLQUFLLGNBQVo7QUFDRDs7O3lDQUVvQixVLEVBQVc7QUFDOUIsVUFBSSxRQUFRLENBQVo7QUFDQSxVQUFHLEtBQUssT0FBTCxLQUFpQixTQUFwQixFQUE4QjtBQUM1QixhQUFLLG1CQUFMLENBQXlCLFVBQXpCO0FBQ0EsZ0JBQVEsS0FBSyxpQkFBTCxFQUFSO0FBQ0Q7QUFDRCxVQUFHLFFBQVEsQ0FBWCxFQUFhO0FBQ1gsWUFBSSxlQUFlLElBQUksVUFBSixDQUFlLFdBQVcsSUFBMUIsRUFBZ0MsV0FBVyxXQUEzQyxFQUF3RCxLQUF4RCxFQUErRCxXQUFXLE1BQTFFLENBQW5CO0FBQ0EsYUFBSyxjQUFMLENBQW9CLElBQXBCLENBQXlCLFlBQXpCO0FBQ0Q7QUFDRjs7O3dDQUNrQjtBQUNqQixhQUFPLEtBQUssYUFBTCxDQUFtQixHQUFuQixDQUF1QixNQUE5QjtBQUNEOzs7d0NBRW1CLFUsRUFBVztBQUFBOztBQUM3QixXQUFLLGFBQUwsR0FBcUIsSUFBSSxTQUFKLEVBQXJCO0FBQ0EsVUFBSSxvQkFBb0IsSUFBSSxNQUFKLENBQVcsV0FBVyxJQUF0QixFQUE0QixJQUE1QixDQUF4QjtBQUNBLFFBQUUsSUFBRixDQUFPLGtCQUFrQixLQUF6QixFQUFnQyxVQUFDLElBQUQsRUFBTyxLQUFQLEVBQWdCO0FBQzlDLGVBQUssYUFBTCxDQUFtQixJQUFuQixFQUF5QixPQUFLLGFBQTlCLEVBQTZDLEtBQTdDO0FBQ0QsT0FGRDtBQUdEOzs7OEJBRVMsWSxFQUFhO0FBQUE7O0FBQ3JCLFdBQUssUUFBTCxHQUFnQixJQUFJLFNBQUosRUFBaEI7QUFDQSxRQUFFLElBQUYsQ0FBTyxhQUFhLEtBQXBCLEVBQTJCLFVBQUMsSUFBRCxFQUFTO0FBQ2xDLGVBQUssYUFBTCxDQUFtQixJQUFuQixFQUF5QixPQUFLLFFBQTlCO0FBQ0QsT0FGRDtBQUdEOzs7a0NBRWEsSSxFQUFNLEcsRUFBSTtBQUN0QixVQUFHLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsSUFBeEIsQ0FBSCxFQUFrQztBQUNoQztBQUNEO0FBQ0QsVUFBSSxXQUFXLEtBQUssT0FBTCxDQUFhLGVBQWIsQ0FBNkIsSUFBN0IsQ0FBZjtBQUNBLFVBQUcsWUFBWSxTQUFTLE1BQVQsR0FBa0IsTUFBTSxHQUFOLENBQVUsTUFBM0MsRUFBa0Q7QUFDaEQsWUFBSSxjQUFKLENBQW1CLFNBQVMsTUFBTSxHQUFOLENBQVUsTUFBbkIsQ0FBbkI7QUFDRDtBQUNGOzs7Ozs7QUFHSCxPQUFPLE9BQVAsR0FBaUIsWUFBakI7Ozs7OztBQy9EQSxJQUFNLFFBQVEsUUFBUSxXQUFSLENBQWQ7O0FBRUEsSUFBSSxXQUFXO0FBQ2IsZ0JBQWMsc0JBQUMsVUFBRCxFQUFlOztBQUUzQixRQUFJLGNBQWUsTUFBTSxPQUFOLENBQWMsVUFBZCxDQUFmLElBQTRDLFdBQVcsTUFBWCxHQUFvQixNQUFNLEtBQU4sQ0FBWSxVQUFoRixFQUEyRjtBQUN6RixhQUFPLFdBQVcsTUFBTSxLQUFOLENBQVksVUFBdkIsQ0FBUDtBQUNEO0FBQ0YsR0FOWTtBQU9iLDBCQUF3QixnQ0FBQyxVQUFELEVBQWEsU0FBYixFQUEyQjtBQUNqRCxRQUFHLGNBQWMsTUFBTSxPQUFOLENBQWMsVUFBZCxDQUFqQixFQUEyQztBQUN6QyxVQUFJLENBQUMsU0FBRCxJQUFjLFdBQVcsTUFBWCxHQUFvQixNQUFNLGdCQUFOLENBQXVCLElBQTdELEVBQWtFO0FBQ2hFLGVBQU8sV0FBVyxNQUFNLGdCQUFOLENBQXVCLElBQWxDLENBQVA7QUFDRDtBQUNELFVBQUksYUFBYSxXQUFXLE1BQVgsR0FBb0IsTUFBTSxnQkFBTixDQUF1QixRQUE1RCxFQUFzRTtBQUNwRSxlQUFPLFdBQVcsTUFBTSxnQkFBTixDQUF1QixRQUFsQyxDQUFQO0FBQ0Q7QUFDRjtBQUNGLEdBaEJZOztBQWtCYixzQkFBb0IsNEJBQUMsVUFBRCxFQUFlO0FBQ2pDLFFBQUcsY0FBYyxNQUFNLE9BQU4sQ0FBYyxVQUFkLENBQWQsSUFBMkMsV0FBVyxNQUFYLEdBQW9CLENBQS9ELElBQW9FLE1BQU0sT0FBTixDQUFjLFdBQVcsQ0FBWCxDQUFkLENBQXZFLEVBQW9HO0FBQ2xHLGFBQU8sV0FBVyxDQUFYLENBQVA7QUFDRDtBQUNGLEdBdEJZO0FBdUJiLGVBdkJhLHlCQXVCQyxLQXZCRCxFQXVCUSxLQXZCUixFQXVCYztBQUN6QixRQUFHLE9BQU8sT0FBUCxLQUFtQixTQUF0QixFQUFnQztBQUM5QixhQUFPLE9BQU8sT0FBUCxDQUFlLEtBQWYsRUFBc0IsS0FBdEIsQ0FBUDtBQUNELEtBRkQsTUFHSTtBQUNGLGFBQVEsVUFBVSxLQUFYLEdBQW9CLENBQXBCLEdBQXdCLENBQUMsQ0FBaEM7QUFDRDtBQUNGLEdBOUJZO0FBK0JiLGlCQS9CYSwyQkErQkcsS0EvQkgsRUErQlUsS0EvQlYsRUErQmdCO0FBQzNCLFFBQUksWUFBWSxLQUFLLEdBQUwsQ0FBUyxNQUFNLE1BQWYsRUFBdUIsTUFBTSxNQUE3QixDQUFoQjtBQUNBLFFBQUksa0JBQWtCLENBQXRCO0FBQ0EsU0FBSSxJQUFJLElBQUUsQ0FBVixFQUFhLElBQUUsU0FBZixFQUEwQixHQUExQixFQUE4QjtBQUM1QixVQUFHLE1BQU0sQ0FBTixNQUFhLE1BQU0sQ0FBTixDQUFoQixFQUEwQjtBQUN4QjtBQUNEO0FBQ0Y7QUFDRCxRQUFHLE1BQU0sTUFBTixHQUFlLFNBQWxCLEVBQTZCO0FBQzNCLHlCQUFrQixNQUFNLE1BQU4sR0FBZSxTQUFqQztBQUNEO0FBQ0QsV0FBTyxlQUFQO0FBQ0QsR0EzQ1k7QUE0Q2IsWUE1Q2Esc0JBNENGLE1BNUNFLEVBNENLO0FBQ2hCLFdBQVEsT0FBTyxRQUFQLEdBQWtCLE9BQU8sSUFBUCxDQUFZLE1BQXRDO0FBQ0QsR0E5Q1k7QUErQ2Isc0JBL0NhLGdDQStDUSxNQS9DUixFQStDZTtBQUMxQixRQUFJLE9BQU8sT0FBTyxJQUFsQjtBQUNBLFFBQUksV0FBVyxPQUFPLFFBQXRCO0FBQ0EsUUFBRyxhQUFhLENBQWIsSUFBa0IsYUFBYSxLQUFLLE1BQXZDLEVBQThDO0FBQzVDLGFBQU8sSUFBUDtBQUNEO0FBQ0QsUUFBRyxLQUFLLE1BQUwsR0FBYyxDQUFqQixFQUFvQjtBQUFFO0FBQ3BCLGFBQU8sS0FBSyxRQUFMLE1BQW1CLEdBQW5CLElBQTBCLEtBQUssV0FBUyxDQUFkLE1BQXFCLEdBQXREO0FBQ0Q7QUFDRCxXQUFPLEtBQVA7QUFDRCxHQXpEWTtBQTBEYixtQkExRGEsNkJBMERLLE1BMURMLEVBMERZO0FBQ3ZCLFFBQUksT0FBTyxPQUFPLElBQWxCO0FBQ0EsUUFBSSxXQUFXLE9BQU8sUUFBdEI7QUFDQSxRQUFJLEtBQUssTUFBTCxHQUFjLENBQWQsSUFBbUIsYUFBYSxLQUFLLE1BQXpDLEVBQWdEO0FBQUM7QUFDL0MsYUFBTyxLQUFLLEtBQUssTUFBTCxHQUFhLENBQWxCLE1BQXlCLEdBQWhDO0FBQ0Q7QUFDRCxXQUFPLEtBQVA7QUFDRCxHQWpFWTtBQW1FYixnQkFuRWEsMEJBbUVFLEdBbkVGLEVBbUVPLEtBbkVQLEVBbUVhO0FBQ3hCLFFBQUcsT0FBTyxNQUFNLE9BQU4sQ0FBYyxHQUFkLENBQVAsSUFBNkIsSUFBSSxNQUFKLEdBQWEsS0FBN0MsRUFBb0Q7QUFDbEQsYUFBTyxJQUFJLEtBQUosQ0FBUDtBQUNEO0FBQ0YsR0F2RVk7QUF3RWIsbUJBeEVhLDZCQXdFSyxVQXhFTCxFQXdFZ0I7QUFDM0IsUUFBRyxNQUFNLE9BQU4sQ0FBYyxVQUFkLEtBQTZCLFdBQVcsTUFBWCxHQUFvQixNQUFNLEtBQU4sQ0FBWSxLQUFoRSxFQUF1RTtBQUNyRSxhQUFPLFdBQVcsTUFBTSxLQUFOLENBQVksS0FBdkIsQ0FBUDtBQUNEO0FBQ0QsV0FBTyxDQUFQO0FBQ0QsR0E3RVk7QUE4RWIsc0JBOUVhLGdDQThFUSxTQTlFUixFQThFa0I7QUFDN0IsUUFBRyxNQUFNLE9BQU4sQ0FBYyxTQUFkLEtBQTRCLFVBQVUsTUFBVixHQUFtQixNQUFNLEdBQU4sQ0FBVSxLQUE1RCxFQUFtRTtBQUNqRSxhQUFPLFVBQVUsTUFBTSxHQUFOLENBQVUsS0FBcEIsQ0FBUDtBQUNEO0FBQ0QsV0FBTyxDQUFQO0FBQ0Q7QUFuRlksQ0FBZjs7QUFzRkEsT0FBTyxPQUFQLEdBQWlCLFFBQWpCOzs7Ozs7Ozs7OztBQzFGQSxJQUFNLGlCQUFpQixRQUFRLG1CQUFSLENBQXZCO0FBQ0EsSUFBTSxLQUFLLFFBQVEsb0JBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxJQUFNLFNBQVMsR0FBRyxNQUFsQjtBQUNBLElBQU0sU0FBUyxRQUFRLGdCQUFSLENBQWY7QUFDQSxJQUFNLGVBQWUsUUFBUSxrQkFBUixDQUFyQjtBQUNBLElBQU0sYUFBYSxRQUFRLHFDQUFSLENBQW5CO0FBQ0EsSUFBTSxlQUFlLFFBQVEsVUFBUixDQUFyQjs7QUFFQSxPQUFPLE9BQVA7QUFDRSx5QkFBWSxNQUFaLEVBQXFDO0FBQUE7O0FBQUEsUUFBakIsV0FBaUIsdUVBQUosRUFBSTs7QUFBQTs7QUFDbkMsU0FBSyxNQUFMLEdBQWMsTUFBZDtBQUNBLFNBQUssUUFBTCxHQUFnQixLQUFoQjtBQUNBLFNBQUssV0FBTCxHQUFtQixXQUFuQjtBQUNBLFNBQUssZUFBTCxHQUF1QixFQUF2QjtBQUNBLFNBQUssTUFBTCxHQUFjLElBQUksWUFBSixDQUFpQixFQUFqQixDQUFkO0FBQ0EsU0FBSyxnQkFBTCxHQUF3QixJQUFJLFVBQUosQ0FBZSxLQUFLLGdCQUFMLENBQXNCLElBQXRCLENBQTJCLElBQTNCLENBQWYsQ0FBeEI7QUFDQSxTQUFLLE1BQUwsQ0FBWSxLQUFaLENBQWtCLFNBQWxCLENBQTRCLE9BQU8sa0JBQVAsQ0FBNUIsRUFBd0QsWUFBTTtBQUM1RCxZQUFLLElBQUw7QUFDRCxLQUZEO0FBR0Q7O0FBWEg7QUFBQTtBQUFBLDJCQWFTO0FBQUE7O0FBQ0wsVUFBSSxDQUFDLEtBQUssUUFBVixFQUFvQjtBQUNsQixZQUFJLFVBQVUsS0FBSyxjQUFMLEVBQWQ7QUFDQSxVQUFFLElBQUYsQ0FBTyxPQUFQLEVBQWdCLFVBQUMsTUFBRCxFQUFTLEVBQVQsRUFBZ0I7QUFDOUIsaUJBQU8sSUFBUCxDQUFZLEVBQVosRUFBZ0IsT0FBSyxhQUFMLENBQW1CLElBQW5CLENBQXdCLE1BQXhCLENBQWhCO0FBQ0QsU0FGRDtBQUdBLGFBQUssUUFBTCxHQUFnQixJQUFoQjtBQUNEO0FBQ0Y7QUFyQkg7QUFBQTtBQUFBLGtDQXVCZ0IsTUF2QmhCLEVBdUJ3QjtBQUNwQixXQUFLLGVBQUwsQ0FBcUIsSUFBckIsQ0FBMEIsSUFBSSxjQUFKLENBQW1CLE1BQW5CLENBQTFCO0FBQ0Q7QUF6Qkg7QUFBQTtBQUFBLHFDQThCbUI7QUFDZixhQUFPLEVBQUUsR0FBRixDQUFNLEtBQUssWUFBWCxFQUF5QixVQUFDLElBQUQsRUFBVTtBQUN4QyxlQUFPLElBQUksTUFBSixDQUFXLElBQVgsQ0FBUDtBQUNELE9BRk0sQ0FBUDtBQUdEO0FBbENIO0FBQUE7QUFBQSxzQ0FvQ29CLElBcENwQixFQW9DMEI7QUFBQTs7QUFDdEIsVUFBSSxhQUFhLEVBQUUsSUFBRixDQUFPLEtBQUssZUFBWixFQUE2QjtBQUFBLGVBQWEsVUFBVSxVQUFWLENBQXFCLElBQXJCLEVBQTJCLE9BQUssVUFBaEMsQ0FBYjtBQUFBLE9BQTdCLENBQWpCO0FBQ0EsVUFBRyxVQUFILEVBQWM7QUFDWixhQUFLLE1BQUwsR0FBYyxJQUFJLFlBQUosQ0FBaUIsRUFBakIsQ0FBZDtBQUNBLGFBQUssZ0JBQUwsR0FBd0IsSUFBSSxVQUFKLENBQWUsS0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixJQUEzQixDQUFmLENBQXhCO0FBQ0EsYUFBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixLQUFLLGNBQWhDO0FBQ0E7QUFDQTtBQUNBLFVBQUUsSUFBRixDQUFPLEtBQUssZUFBWixFQUE2QixxQkFBWTtBQUN2QyxvQkFBVSxNQUFWLENBQWlCLElBQWpCLEVBQXVCLE9BQUssVUFBNUIsRUFBd0MsT0FBSyxhQUFMLENBQW1CLElBQW5CLENBQXdCLE1BQXhCLENBQXhDLEVBQXVFLE9BQUssZUFBTCxDQUFxQixJQUFyQixDQUEwQixNQUExQixDQUF2RTtBQUNBLGNBQUksaUJBQWlCLFVBQVUsY0FBVixDQUF5QixJQUF6QixDQUFyQjtBQUNBLGlCQUFLLHNCQUFMLENBQTRCLElBQTVCLEVBQWtDLGNBQWxDO0FBQ0QsU0FKRDtBQUtEO0FBQ0Y7QUFsREg7QUFBQTtBQUFBLG9DQXlEa0IsSUF6RGxCLEVBeUR3QixZQXpEeEIsRUF5RHNDO0FBQ2xDLFdBQUssb0JBQUwsQ0FBMEIsSUFBMUIsRUFBZ0MsWUFBaEM7QUFDQSxXQUFLLGdCQUFMLENBQXNCLE1BQXRCO0FBQ0Q7QUE1REg7QUFBQTtBQUFBLHVDQThEcUI7QUFDakIsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixHQUFHLE1BQUgsQ0FBVSx3QkFBVixDQUFwQixFQUF5RCxLQUF6RCxFQUFnRTtBQUM5RCxjQUFNO0FBRHdELE9BQWhFO0FBR0EsVUFBSSxnQkFBZ0IsRUFBRSxrQkFBRixDQUFxQixFQUFFLE1BQUYsQ0FBUztBQUNoRCxrQkFBVSxLQUFLLElBRGlDLENBRWhELG9DQUZnRCxFQUFULENBQXJCLENBQXBCO0FBR0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLDBCQUFQLENBQXBCLEVBQXdELGFBQXhEO0FBQ0EsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixrQkFBcEIsRUFBd0MsS0FBSyxNQUFMLENBQVksS0FBcEQ7QUFDRDtBQXZFSDtBQUFBO0FBQUEsa0NBK0VnQixFQS9FaEIsRUErRW9CLE9BL0VwQixFQStFNkIsR0EvRTdCLEVBK0VrQztBQUM5QixXQUFLLE1BQUwsQ0FBWSxPQUFaLHNCQUF1QyxFQUF2QyxFQUE2QyxPQUE3QztBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosa0JBQW1DLEVBQW5DLEVBQXlDLEdBQXpDO0FBQ0Q7QUFsRkg7QUFBQTtBQUFBLDJDQW1GeUIsSUFuRnpCLEVBbUYrQixlQW5GL0IsRUFtRmdEO0FBQzVDLFVBQUksT0FBTyxtQkFBbUIsT0FBTyxJQUFQLENBQVksZUFBWixFQUE2QixDQUE3QixDQUE5QjtBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBTywwQkFBUCxDQUFwQixFQUF3RCxJQUF4RDtBQUNBLFdBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsT0FBTyxxQkFBUCxDQUFwQixFQUFtRCxnQkFBZ0IsSUFBaEIsQ0FBbkQ7QUFDRDtBQXZGSDtBQUFBO0FBQUEseUNBeUZ1QixJQXpGdkIsRUF5RjZCLFlBekY3QixFQXlGMkM7QUFDdkMsV0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFVBQUksa0JBQWtCLEVBQUUsR0FBRixDQUFNLFlBQU4sRUFBb0I7QUFBQSxlQUFVLElBQUksWUFBSixDQUFpQixNQUFqQixDQUFWO0FBQUEsT0FBcEIsQ0FBdEI7QUFDQSxXQUFLLE1BQUwsQ0FBWSxLQUFaLENBQWtCLGVBQWxCO0FBQ0Q7QUE3Rkg7QUFBQTtBQUFBLHdCQTBCcUI7QUFDakIsYUFBTyxHQUFHLEtBQUgsQ0FBUyxHQUFULENBQWEsR0FBRyxNQUFILENBQVUsa0JBQVYsQ0FBYixDQUFQO0FBQ0Q7QUE1Qkg7QUFBQTtBQUFBLHdCQXNEdUI7QUFDbkIsYUFBTyxLQUFLLGVBQUwsQ0FBcUIsTUFBNUI7QUFDRDtBQXhESDtBQUFBO0FBQUEsd0JBd0VtQjtBQUNmLGFBQU87QUFDTCxtQkFBVyxHQUFHLEtBQUgsQ0FBUyxHQUFULENBQWEsR0FBRyxNQUFILENBQVUsZ0JBQVYsQ0FBYixNQUE4QyxHQURwRDtBQUVMLGFBQUssR0FBRyxLQUFILENBQVMsSUFBVCxDQUFjLG9CQUFkLENBRkE7QUFHTCxnQkFBUSxHQUFHLEtBQUgsQ0FBUyxJQUFULENBQWMsa0JBQWQ7QUFISCxPQUFQO0FBS0Q7QUE5RUg7O0FBQUE7QUFBQTs7Ozs7Ozs7O0FDVEEsT0FBTyxPQUFQO0FBQ0UsMEJBQVksSUFBWixFQUFrQjtBQUFBOztBQUNoQixTQUFLLElBQUwsR0FBWSxLQUFLLEtBQUwsQ0FBVyxJQUFYLENBQVo7QUFDRDs7QUFISDtBQUFBO0FBQUEsaUNBVWUsRUFWZixFQVVtQjtBQUNmLGFBQU8sS0FBSyxTQUFMLENBQWUsRUFBZixDQUFQO0FBQ0Q7QUFaSDtBQUFBO0FBQUEsb0NBY2tCLEVBZGxCLEVBY3NCO0FBQ2xCLGFBQU8sS0FBSyxTQUFMLENBQWUsRUFBZixLQUFzQixLQUFLLFNBQUwsQ0FBZSxFQUFmLEVBQW1CLE9BQWhEO0FBQ0Q7QUFoQkg7QUFBQTtBQUFBLG1DQWtCaUIsRUFsQmpCLEVBa0JxQjtBQUNqQixhQUFPLEtBQUssU0FBTCxDQUFlLEVBQWYsS0FBc0IsS0FBSyxTQUFMLENBQWUsRUFBZixFQUFtQixJQUFoRDtBQUNEO0FBcEJIO0FBQUE7QUFBQSx3QkFJaUI7QUFDYixhQUFPLEtBQUssSUFBTCxDQUFVLFFBQWpCO0FBQ0Q7QUFOSDtBQUFBO0FBQUEsd0JBT2tCO0FBQ2QsYUFBTyxLQUFLLElBQUwsQ0FBVSxRQUFqQjtBQUNEO0FBVEg7QUFBQTtBQUFBLHdCQXNCZ0I7QUFDWixhQUFPLEtBQUssUUFBTCxDQUFjLE9BQXJCO0FBQ0Q7QUF4Qkg7QUFBQTtBQUFBLHdCQTBCZTtBQUNYLGFBQU8sS0FBSyxRQUFMLENBQWMsTUFBckI7QUFDRDtBQTVCSDs7QUFBQTtBQUFBOzs7Ozs7Ozs7QUNBQSxJQUFNLEtBQUssUUFBUSx1QkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjs7QUFFQSxPQUFPLE9BQVA7QUFDRSxxQkFBWSxNQUFaLEVBQW9CLE1BQXBCLEVBQTRCLFFBQTVCLEVBQXNDO0FBQUE7O0FBQ3BDLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLFFBQWhCO0FBQ0Q7O0FBTEg7QUFBQTtBQUFBLDJCQU1TLFFBTlQsRUFNbUI7QUFBQTs7QUFDZixhQUFPLEVBQUUsTUFBRixDQUFTLFFBQVQsRUFBbUIsVUFBQyxRQUFELEVBQVcsSUFBWDtBQUFBLGVBQW9CLFlBQVksTUFBSyxVQUFMLENBQWdCLElBQWhCLENBQWhDO0FBQUEsT0FBbkIsRUFBMEUsS0FBMUUsQ0FBUDtBQUNEO0FBUkg7QUFBQTtBQUFBLCtCQVNhLElBVGIsRUFTbUI7QUFDZixVQUFJLE1BQU0sS0FBSyxNQUFMLENBQVksSUFBWixDQUFWO0FBQ0EsYUFBTyxPQUFPLEtBQUssY0FBTCxDQUFvQixHQUFwQixDQUFkO0FBRUQ7QUFiSDtBQUFBO0FBQUEsbUNBY2lCLEdBZGpCLEVBY3NCO0FBQUE7O0FBQ2xCLFVBQUksTUFBTSxJQUFJLEtBQUosQ0FBVSxHQUFWLENBQVY7QUFDQSxhQUFPLENBQUMsRUFBRSxHQUFGLENBQU0sR0FBTixFQUFXLFVBQUMsRUFBRCxFQUFTO0FBQzFCLGVBQU8sRUFBRSxpQkFBRixDQUFvQixFQUFwQixFQUF3QixPQUFLLFFBQTdCLEVBQXVDLE9BQUssTUFBNUMsQ0FBUDtBQUNELE9BRk8sQ0FBUjtBQUtEO0FBckJIO0FBQUE7QUFBQSwyQkFzQlMsSUF0QlQsRUFzQmU7QUFDWCxhQUFPLFFBQVEsS0FBSyxVQUFiLElBQ0YsS0FBSyxVQUFMLENBQWdCLE1BQWhCLEdBQXlCLENBRHZCLElBQzRCLEVBQUUsR0FBRixDQUFNLEtBQUssVUFBWCxFQUF1QixnQkFBUTtBQUM5RCxlQUFPLEtBQUssS0FBWjtBQUNELE9BRmdDLEVBRTlCLElBRjhCLENBRXpCLEdBRnlCLENBRG5DO0FBSUQ7QUEzQkg7O0FBQUE7QUFBQTs7Ozs7Ozs7O0FDSEEsSUFBSSxPQUFPLFFBQVMsTUFBVCxDQUFYO0FBQ0EsSUFBSSxZQUFZLFFBQVEsd0JBQVIsQ0FBaEI7QUFDQSxJQUFNLEtBQUssUUFBUSx1QkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjs7QUFHQSxPQUFPLE9BQVA7QUFDRSxvQkFBWSxPQUFaLEVBQXFCLFFBQXJCLEVBQThCO0FBQUE7O0FBQzVCLFNBQUssSUFBTCxDQUFVLE9BQVYsRUFBbUIsUUFBbkI7QUFDRDs7QUFISDtBQUFBO0FBQUEseUJBSU8sT0FKUCxFQUkrQjtBQUFBLFVBQWYsUUFBZSx1RUFBSixFQUFJOztBQUMzQixXQUFLLFFBQUwsR0FBZ0IsUUFBaEI7QUFDQSxXQUFLLFVBQUw7QUFDQSxXQUFLLGlCQUFMO0FBQ0EsV0FBSyxZQUFMO0FBQ0EsV0FBSyxFQUFMLEdBQVUsS0FBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixPQUFoQixDQUFWO0FBQ0Q7QUFWSDtBQUFBO0FBQUEsd0NBV3NCO0FBQ2xCLFVBQUksbUJBQW1CLEtBQUssZUFBTCxDQUFxQixJQUFyQixDQUEwQixJQUExQixDQUF2QjtBQUNBLFVBQUksbUJBQW1CLEtBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsSUFBbkIsQ0FBdkI7O0FBRUEsV0FBSyxRQUFMLENBQWMsZ0JBQWQsQ0FBK0IsZ0JBQS9CLEVBQWlELGlCQUFqRDtBQUNBLFdBQUssUUFBTCxDQUFjLGdCQUFkLENBQStCLGdCQUEvQixFQUFpRCxVQUFqRDtBQUNEO0FBakJIO0FBQUE7QUFBQSxtQ0FrQmlCO0FBQ2IsV0FBSyxTQUFMLENBQWUsU0FBZixHQUEyQiwwQkFBM0I7QUFDRDtBQXBCSDtBQUFBO0FBQUEsaUNBcUJlO0FBQ1gsVUFBSSxrQkFBbUIsS0FBSyxRQUFMLElBQWlCLEtBQUssUUFBTCxDQUFjLFFBQWhDLElBQTZDLEVBQW5FO0FBQ0EsVUFBSSxXQUFXLElBQUksU0FBSixDQUFjLGVBQWQsQ0FBZjtBQUNBLFdBQUssUUFBTCxDQUFjLFNBQWQsR0FBMEIsU0FBUyxTQUFuQztBQUNEO0FBekJIO0FBQUE7QUFBQSw2QkEwQlcsS0ExQlgsRUEwQmtCO0FBQ2QsVUFBSSxPQUFPLE1BQU0sUUFBTixFQUFYO0FBQ0EsV0FBSyxVQUFMLENBQWdCLElBQWhCLENBQXFCLElBQXJCO0FBQ0EsV0FBSyxVQUFMLEdBQWtCLEVBQUUsTUFBRixDQUFTLEtBQUssVUFBZCxDQUFsQjtBQUNBLGFBQU8sS0FBUDtBQUNEO0FBL0JIO0FBQUE7QUFBQSxvQ0FnQ2tCLEtBaENsQixFQWdDeUI7QUFBQTs7QUFDckIsVUFBSSxPQUFPLE1BQU0sUUFBTixFQUFYO0FBQ0EsVUFBSSxPQUFPLEtBQUssUUFBTCxJQUFpQixLQUFLLFFBQUwsQ0FBYyxTQUEvQixJQUE0QyxLQUFLLFFBQUwsQ0FBYyxTQUFkLENBQXdCLElBQXhCLENBQXZEO0FBQ0EsVUFBSSxRQUFRLFNBQVMsSUFBckIsRUFBMkI7QUFDekIsZUFBTyxNQUFNLE1BQU4sQ0FBYSxZQUFNO0FBQUUsaUJBQU8sTUFBSyxRQUFMLENBQWMsU0FBZCxDQUF3QixJQUF4QixDQUFQO0FBQXNDLFNBQTNELENBQVA7QUFDRCxPQUZELE1BR0s7QUFDSCxlQUFPLEtBQVA7QUFDRDtBQUNGO0FBekNIO0FBQUE7QUFBQSxpQ0EwQ2UsS0ExQ2YsRUEwQ3NCLFNBMUN0QixFQTBDaUM7QUFDN0IsVUFBSSxTQUFKLEVBQWU7QUFDYixZQUFJLGlCQUFpQixLQUFLLHNCQUFMLENBQTRCLFNBQTVCLENBQXJCO0FBQ0EsY0FBTSxRQUFOLENBQWUsTUFBZixDQUFzQixLQUFLLGNBQTNCLEVBQTJDLGNBQTNDO0FBQ0EsY0FBTSxRQUFOLENBQWUsTUFBZixDQUFzQixLQUFLLGNBQTNCO0FBQ0Q7QUFDRjtBQWhESDtBQUFBO0FBQUEsMkJBaURTLEtBakRULEVBaURnQjtBQUFBOztBQUNaLFdBQUssVUFBTCxHQUFrQixFQUFsQjtBQUNBLFVBQUksU0FBUyxNQUFNLFNBQU4sQ0FBZ0IsS0FBSyxVQUFMLENBQWdCLElBQWhCLENBQXFCLElBQXJCLENBQWhCLEVBQTRDLElBQTVDLEVBQWI7QUFDQSxVQUFJLGlCQUFpQixHQUFHLENBQUgsQ0FBSyxhQUFMLENBQW1CLE1BQW5CLElBQTRCLEVBQTVCLEdBQWlDLEtBQUssRUFBTCxDQUFRLE1BQVIsQ0FBZSxNQUFmLENBQXREO0FBQ0EsYUFBUSxNQUFNLElBQVAsR0FDTCxFQUFFLE1BQUYsQ0FBUyxjQUFULEVBQXlCLFVBQUMsTUFBRDtBQUFBLGVBQVksT0FBSyxLQUFMLENBQVcsTUFBWCxFQUFtQixNQUFNLElBQXpCLENBQVo7QUFBQSxPQUF6QixDQURLLEdBRUgsY0FGSjtBQUdEO0FBeERIO0FBQUE7QUFBQSwwQkEwRFEsTUExRFIsRUEwRGdCLElBMURoQixFQTBEc0I7QUFBQTs7QUFDbEIsVUFBSSxTQUFTLElBQWI7QUFDQSxVQUFJLEtBQUssU0FBVCxFQUFvQjtBQUNsQixZQUFJLGdCQUFnQixVQUFVLE9BQU8sU0FBUCxDQUFpQixRQUEzQixJQUF1QyxFQUEzRDtBQUNBLFVBQUUsSUFBRixDQUFPLEtBQUssVUFBWixFQUF3QixVQUFDLElBQUQsRUFBVTtBQUNoQyxjQUFJLENBQUMsY0FBYyxJQUFkLENBQUQsSUFBd0IsQ0FBQyxPQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBN0IsRUFBb0Q7QUFDbEQscUJBQVMsS0FBVDtBQUNEO0FBQ0YsU0FKRDtBQUtEO0FBQ0QsYUFBTyxNQUFQO0FBQ0Q7QUFyRUg7QUFBQTtBQUFBLCtCQXVFYSxJQXZFYixFQXVFa0I7QUFDZCxhQUFPLEtBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsT0FBeEIsQ0FBZ0MsS0FBSyxXQUFMLEVBQWhDLE1BQXdELENBQUMsQ0FBaEU7QUFDRDtBQXpFSDtBQUFBO0FBQUEsbUNBMkVpQixLQTNFakIsRUEyRXdCO0FBQUE7O0FBQ3BCLFVBQUksV0FBWSxLQUFLLFFBQUwsSUFBaUIsS0FBSyxRQUFMLENBQWMsUUFBaEMsSUFBNkMsRUFBNUQ7QUFDQSxVQUFJLGNBQWMsS0FBSyxhQUFMLENBQW1CLEtBQW5CLENBQWxCO0FBQ0EsVUFBSSxpQkFBaUIsRUFBRSxNQUFGLENBQVMsUUFBVCxFQUFtQixVQUFDLE1BQUQsRUFBUyxVQUFULEVBQXFCLElBQXJCLEVBQTZCO0FBQ25FLFlBQUksWUFBWSxPQUFLLGFBQUwsQ0FBbUIsSUFBbkIsQ0FBaEI7QUFDQSxZQUFJLFlBQVksTUFBWixLQUF1QixVQUFVLE1BQWpDLElBQTJDLE9BQUssV0FBTCxDQUFpQixXQUFqQixFQUE4QixTQUE5QixDQUEvQyxFQUF5RjtBQUN2RixpQkFBTyxJQUFQLElBQWUsVUFBZjtBQUNEO0FBQ0QsZUFBTyxNQUFQO0FBQ0QsT0FOb0IsRUFNbEIsRUFOa0IsQ0FBckI7QUFPQSxhQUFPLGNBQVA7QUFDRDtBQXRGSDtBQUFBO0FBQUEsZ0NBd0ZjLElBeEZkLEVBd0ZvQixJQXhGcEIsRUF3RjBCO0FBQ3RCLFVBQUksVUFBVSxJQUFkO0FBQ0EsUUFBRSxJQUFGLENBQU8sSUFBUCxFQUFhLFVBQUMsS0FBRCxFQUFRLEtBQVIsRUFBa0I7QUFDN0IsWUFBSSxVQUFVLEtBQUssS0FBTCxDQUFkLEVBQTJCO0FBQ3pCLG9CQUFVLEtBQVY7QUFDRDtBQUNGLE9BSkQ7QUFLQSxhQUFPLE9BQVA7QUFDRDtBQWhHSDtBQUFBO0FBQUEsa0NBa0dnQixJQWxHaEIsRUFrR3NCO0FBQUE7O0FBQ2xCLFVBQUksU0FBUyxLQUFLLFNBQUwsQ0FBZSxJQUFmLENBQWI7QUFDQSxhQUFPLEVBQUUsR0FBRixDQUFNLE1BQU4sRUFBYyxVQUFDLEtBQUQsRUFBVztBQUM5QixZQUFJLE9BQU8sTUFBTSxRQUFOLEVBQVg7QUFDQSxlQUFPLE9BQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsSUFBeEIsS0FBaUMsSUFBeEM7QUFDRCxPQUhNLENBQVA7QUFJRDtBQXhHSDtBQUFBO0FBQUEsOEJBMEdVO0FBQ04sYUFBTyxLQUFLLEVBQUwsQ0FBUSxNQUFSLEVBQVA7QUFDRDtBQTVHSDs7QUFBQTtBQUFBOzs7Ozs7Ozs7QUNMQSxJQUFNLEtBQUssUUFBUSx1QkFBUixDQUFYO0FBQ0EsSUFBTSxJQUFJLEdBQUcsQ0FBYjtBQUNBLElBQU0sUUFBUSxRQUFRLG9CQUFSLENBQWQ7QUFDQSxPQUFPLE9BQVA7QUFDRSwwQkFBc0I7QUFBQSxRQUFWLElBQVUsdUVBQUgsRUFBRzs7QUFBQTs7QUFDcEIsU0FBSyxNQUFMLEdBQWMsSUFBSSxLQUFKLENBQVUsSUFBVixDQUFkO0FBQ0Q7O0FBSEg7QUFBQTtBQUFBLHlCQUlPLEVBSlAsRUFJVyxVQUpYLEVBSXVCO0FBQ25CLFdBQUssRUFBTCxHQUFVLEVBQVY7QUFDQSxpQkFBVyxJQUFYO0FBQ0Q7QUFQSDtBQUFBO0FBQUEsMkJBUVMsVUFSVCxFQVFvQjtBQUNoQixVQUFJLE9BQU8sS0FBSyxNQUFMLENBQVksbUJBQVosRUFBWDtBQUNBLFFBQUUsVUFBRixDQUFhLElBQWIsRUFBbUIsSUFBbkIsRUFBeUIsWUFBTTtBQUM3QixZQUFJLE9BQU8sRUFBRSxPQUFGLEVBQVg7QUFDQSxZQUFHLFVBQUgsRUFBYztBQUNaLHFCQUFXLElBQVg7QUFDRDtBQUNGLE9BTEQsRUFLRyxJQUxIO0FBTUQ7QUFoQkg7QUFBQTtBQUFBLDBCQWtCUSxFQWxCUixFQWtCWTtBQUNSLGFBQVUsS0FBSyxFQUFmLFNBQXFCLEVBQXJCO0FBQ0Q7QUFwQkg7QUFBQTtBQUFBLDJCQXFCUyxHQXJCVCxFQXFCYztBQUNWLGFBQU8sS0FBSyxNQUFMLENBQVksZ0JBQVosQ0FBNkIsR0FBN0IsQ0FBUDtBQUNEO0FBdkJIO0FBQUE7QUFBQSxpQ0F3QmUsVUF4QmYsRUF3QjBCO0FBQ3RCLFVBQUksT0FBTyxLQUFLLE1BQUwsQ0FBWSxtQkFBWixFQUFYO0FBQ0EsUUFBRSxVQUFGLENBQWEsSUFBYixFQUFtQixJQUFuQixFQUF5QixZQUFNO0FBQzdCLFlBQUksT0FBTyxFQUFFLE9BQUYsRUFBWDtBQUNBLFlBQUcsVUFBSCxFQUFjO0FBQ1oscUJBQVcsSUFBWDtBQUNEO0FBQ0YsT0FMRCxFQUtHLElBTEg7QUFNRDtBQWhDSDtBQUFBO0FBQUEsaUNBa0NlLEtBbENmLEVBa0NzQixFQWxDdEIsRUFrQzBCLFVBbEMxQixFQWtDc0M7QUFDbEMsVUFBSSxPQUFPLEtBQUssTUFBTCxDQUFZLGVBQVosQ0FBNEIsRUFBNUIsQ0FBWDtBQUNBLFFBQUUsVUFBRixDQUFhLElBQWIsRUFBbUIsSUFBbkIsRUFBeUIsWUFBTTtBQUM3QixZQUFJLE9BQU8sRUFBRSxPQUFGLEVBQVg7QUFDQSxZQUFJLFVBQUosRUFBZ0I7QUFDZCxxQkFBVyxLQUFYLEVBQWtCLEVBQWxCLEVBQXNCLElBQXRCO0FBQ0Q7QUFDRixPQUxELEVBS0csSUFMSDtBQU1EO0FBMUNIOztBQUFBO0FBQUE7Ozs7Ozs7OztBQ0pBLElBQU0sV0FBVyxRQUFTLE1BQVQsQ0FBakI7QUFDQSxJQUFNLFFBQVEsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFNLFVBQVUsUUFBUSxXQUFSLENBQWhCO0FBQ0EsSUFBTSxLQUFLLFFBQVEsdUJBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxJQUFNLGFBQWEsUUFBUSx3Q0FBUixDQUFuQjtBQUNBLElBQU0sYUFBYSxRQUFRLGdCQUFSLENBQW5CO0FBQ0EsSUFBTSxpQkFBaUIsUUFBUSxhQUFSLENBQXZCO0FBQ0EsSUFBTSxZQUFZLFFBQVEsT0FBUixDQUFsQjs7QUFFQSxPQUFPLE9BQVA7QUFDRSwyQkFBWSxNQUFaLEVBQW1CO0FBQUE7O0FBQUE7O0FBQ2pCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLGNBQUwsR0FBc0IsS0FBSyxRQUFMLEdBQWdCLEtBQXRDO0FBQ0EsU0FBSyxNQUFMLENBQVksTUFBWixDQUFtQixVQUFDLFNBQUQsRUFBYTtBQUM5QixZQUFLLE1BQUwsQ0FBWSxTQUFaO0FBQ0QsS0FGRDtBQUdBLFNBQUssTUFBTCxDQUFZLFlBQVosQ0FBeUIsVUFBQyxRQUFELEVBQVk7QUFDbkMsWUFBSyxZQUFMLENBQWtCLFFBQWxCO0FBQ0QsS0FGRDtBQUdEOztBQVZIO0FBQUE7QUFBQSxpQ0FZZSxRQVpmLEVBWXlCO0FBQ3JCLFdBQUssY0FBTCxHQUFzQixJQUF0QjtBQUNBLFdBQUssUUFBTCxHQUFnQixJQUFJLGNBQUosQ0FBbUIsUUFBbkIsQ0FBaEI7O0FBRUEsVUFBSSxDQUFDLEtBQUssSUFBTixJQUFjLEtBQUssU0FBdkIsRUFBa0M7QUFDaEMsYUFBSyxNQUFMLENBQVksS0FBSyxTQUFqQjtBQUNBLGFBQUssU0FBTCxHQUFpQixJQUFqQjtBQUNEO0FBQ0Y7QUFwQkg7QUFBQTtBQUFBLDJCQXNCUyxTQXRCVCxFQXNCb0I7QUFDaEIsVUFBRyxLQUFLLGNBQVIsRUFBdUI7QUFDckIsYUFBSyxFQUFMLEdBQVUsSUFBSSxRQUFKLENBQWEsU0FBYixFQUF3QixLQUFLLFFBQUwsQ0FBYyxRQUF0QyxDQUFWO0FBQ0EsYUFBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFlBQUksS0FBSyxPQUFULEVBQWtCO0FBQ2hCLGVBQUssT0FBTCxHQUFlLEtBQWY7QUFDQSxlQUFLLFVBQUw7QUFDRDtBQUNGLE9BUEQsTUFRSztBQUNILGFBQUssU0FBTCxHQUFpQixTQUFqQjtBQUNEO0FBQ0Y7QUFsQ0g7QUFBQTtBQUFBLG1DQW1DaUI7QUFDYixVQUFJLEtBQUssV0FBVCxFQUFzQjtBQUNwQixhQUFLLE1BQUw7QUFDRDtBQUNGO0FBdkNIO0FBQUE7QUFBQSwrQkF5Q2EsSUF6Q2IsRUF5Q21CLElBekNuQixFQXlDd0I7QUFDcEIsVUFBSSxRQUFRLEtBQUssVUFBTCxDQUFnQixJQUFoQixFQUFzQixJQUF0QixDQUFaO0FBQ0EsYUFBTyxDQUFDLEtBQUssS0FBTixJQUFlLENBQUMsS0FBSyxLQUFMLENBQVcsT0FBWCxDQUFtQixLQUFuQixDQUF2QjtBQUNEO0FBNUNIO0FBQUE7QUFBQSwyQkE4Q1MsSUE5Q1QsRUE4Q2UsSUE5Q2YsRUE4Q3FCLFFBOUNyQixFQThDK0IsZUE5Qy9CLEVBOENnRDtBQUM1QyxVQUFJLFFBQVEsS0FBSyxVQUFMLENBQWdCLElBQWhCLEVBQXNCLElBQXRCLENBQVo7QUFDQSxVQUFHLEtBQUssVUFBTCxDQUFnQixJQUFoQixFQUFzQixJQUF0QixDQUFILEVBQWdDO0FBQzlCLGFBQUssSUFBTCxHQUFZLElBQVo7QUFDQSxhQUFLLFVBQUwsR0FBa0IsSUFBSSxVQUFKLENBQWUsS0FBSyxZQUFMLENBQWtCLElBQWxCLENBQXVCLElBQXZCLENBQWYsQ0FBbEI7QUFDQSxhQUFLLEtBQUwsR0FBYSxLQUFiO0FBQ0EsYUFBSyxhQUFMLEdBQXFCLFFBQXJCO0FBQ0EsYUFBSyxJQUFMLEdBQVksSUFBWjtBQUNBLGFBQUssU0FBTCxHQUFpQixFQUFqQjtBQUNBLGFBQUssZUFBTCxHQUF1QixlQUF2QjtBQUNBLGFBQUssV0FBTCxHQUFtQixLQUFLLEtBQUwsQ0FBVyxVQUE5QjtBQUNBLGFBQUssVUFBTDtBQUNEO0FBQ0Y7QUEzREg7QUFBQTtBQUFBLDZCQTZEVztBQUFBOztBQUNQLFVBQUksUUFBUSxLQUFLLEtBQUwsQ0FBVyxXQUF2QjtBQUNBLFdBQUssT0FBTCxHQUFlLEVBQUUsTUFBRixDQUFTLEtBQUssT0FBZCxFQUF1QixVQUFDLE1BQUQsRUFBWTtBQUNoRCxZQUFJLFlBQVksT0FBSyxlQUFMLENBQXFCLE9BQU8sRUFBNUIsRUFBZ0MsU0FBaEQ7QUFDQSxlQUFPLE9BQUssWUFBTCxDQUFrQixLQUFsQixFQUF5QixTQUF6QixFQUFvQyxPQUFPLEVBQTNDLENBQVA7QUFDRCxPQUhjLENBQWY7QUFJQSxXQUFLLGVBQUwsQ0FBcUIsS0FBSyxLQUFMLENBQVcsSUFBaEMsRUFBc0MsS0FBSyxPQUEzQztBQUNBLFdBQUssY0FBTDtBQUNEO0FBckVIO0FBQUE7QUFBQSxxQ0F1RWtCO0FBQUE7O0FBQ2QsUUFBRSxJQUFGLENBQU8sS0FBSyxPQUFaLEVBQXFCLGtCQUFVO0FBQzdCLFlBQUksS0FBSyxPQUFPLEVBQWhCO0FBQ0EsZUFBSyxhQUFMLENBQW1CLE9BQUssTUFBTCxDQUFZLEtBQVosQ0FBa0IsRUFBbEIsQ0FBbkIsRUFBMEMsT0FBSyxTQUFMLENBQWUsRUFBZixDQUExQyxFQUE4RCxPQUFLLFNBQUwsQ0FBZSxFQUFmLEVBQW1CLE9BQUssS0FBTCxDQUFXLFdBQTlCLENBQTlEO0FBQ0QsT0FIRDtBQUlEO0FBNUVIO0FBQUE7QUFBQSxpQ0E4RWUsS0E5RWYsRUE4RXNCLElBOUV0QixFQThFNEIsRUE5RTVCLEVBOEVnQztBQUFBOztBQUM1QixVQUFJLFFBQVEsS0FBWjtBQUNBLFFBQUUsSUFBRixDQUFPLEtBQVAsRUFBYyxnQkFBUTtBQUNwQixZQUFJLE1BQU0sS0FBSyxXQUFMLEdBQW1CLE9BQW5CLENBQTJCLElBQTNCLENBQVY7QUFDQSxZQUFJLFFBQVEsQ0FBQyxDQUFiLEVBQWdCO0FBQ2QsaUJBQUssVUFBTCxDQUFnQixFQUFoQixFQUFvQixJQUFwQixFQUEwQixHQUExQixFQUErQixJQUEvQjtBQUNBLGtCQUFRLElBQVI7QUFDRDtBQUNGLE9BTkQ7QUFPQSxhQUFPLEtBQVA7QUFDRDtBQXhGSDtBQUFBO0FBQUEsK0JBMEZhLEVBMUZiLEVBMEZpQixJQTFGakIsRUEwRnVCLEdBMUZ2QixFQTBGNEIsSUExRjVCLEVBMEZrQztBQUM5QixVQUFJLFVBQVcsS0FBSyxRQUFMLENBQWMsZUFBZCxDQUE4QixFQUE5QixDQUFmO0FBQ0EsVUFBSSxLQUFLLFFBQUwsQ0FBYyxPQUFkLElBQXlCLE9BQTdCLEVBQXNDO0FBQ3BDLGFBQUssU0FBTCxDQUFlLEVBQWYsSUFBcUIsT0FBckI7QUFDRCxPQUZELE1BR0s7QUFDSCxZQUFJLG1CQUFtQixJQUFJLE9BQUosQ0FBWSxLQUFLLFFBQUwsQ0FBYyxTQUExQixFQUFzQyxLQUFLLFFBQUwsQ0FBYyxPQUFwRCxDQUF2QjtBQUNBLGFBQUssU0FBTCxDQUFlLEVBQWYsSUFBcUIsaUJBQWlCLGNBQWpCLENBQWdDLElBQWhDLEVBQXNDLEdBQXRDLEVBQTJDLEtBQUssTUFBaEQsRUFBd0QsSUFBeEQsQ0FBckI7QUFDRDtBQUNGO0FBbkdIO0FBQUE7QUFBQSxpQ0FxR2U7QUFDWCxVQUFJLENBQUMsS0FBSyxJQUFWLEVBQWdCO0FBQ2QsYUFBSyxPQUFMLEdBQWUsSUFBZjtBQUNBO0FBQ0Q7QUFDRCxXQUFLLE9BQUwsR0FBZSxLQUFLLE9BQUwsRUFBZjtBQUNBLFVBQUksS0FBSyxlQUFULEVBQTBCO0FBQ3hCLGFBQUssWUFBTDtBQUNEOztBQUVELFVBQUksQ0FBQyxLQUFLLFdBQVYsRUFBdUI7QUFDckIsYUFBSyxlQUFMLENBQXFCLEtBQUssS0FBTCxDQUFXLElBQWhDLEVBQXNDLEtBQUssT0FBM0M7QUFDRDtBQUNELFVBQUksS0FBSyxXQUFMLElBQW9CLEtBQUssT0FBTCxDQUFhLE1BQWIsS0FBd0IsQ0FBaEQsRUFBbUQ7QUFDakQsYUFBSyxlQUFMLENBQXFCLEtBQUssS0FBTCxDQUFXLElBQWhDLEVBQXNDLEtBQUssT0FBM0M7QUFDRDtBQUNGO0FBckhIO0FBQUE7QUFBQSxtQ0E2SGdCO0FBQ1osV0FBSyxLQUFMLEdBQWEsS0FBSyxVQUFMLENBQWdCLEtBQUssS0FBTCxDQUFXLElBQTNCLEVBQWlDLEVBQUUsTUFBRixDQUFTLEtBQUssSUFBZCxFQUFvQixFQUFFLE9BQU8sSUFBVCxFQUFwQixDQUFqQyxDQUFiO0FBQ0EsV0FBSyxPQUFMLEdBQWUsS0FBSyxPQUFMLEVBQWY7QUFDRDtBQWhJSDtBQUFBO0FBQUEsbUNBa0lpQixJQWxJakIsRUFrSXVCO0FBQ25CLFVBQUksUUFBUSxLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBWjtBQUNBLGFBQU8sS0FBSyxlQUFMLENBQXFCLEtBQXJCLENBQVA7QUFDRDtBQXJJSDtBQUFBO0FBQUEsK0JBdUlhLElBdkliLEVBdUltQixJQXZJbkIsRUF1SXdCO0FBQ3BCLGFBQU8sSUFBSSxLQUFKLENBQVUsSUFBVixFQUFpQixLQUFLLFFBQUwsQ0FBYyxRQUEvQixFQUF5QyxJQUF6QyxFQUErQyxLQUFLLFVBQUwsQ0FBZ0IsSUFBaEIsQ0FBcUIsSUFBckIsQ0FBL0MsQ0FBUDtBQUNEO0FBeklIO0FBQUE7QUFBQSw4QkEySVk7QUFBQTs7QUFDUixXQUFLLGVBQUwsR0FBdUIsRUFBdkI7QUFDQSxVQUFJLGdCQUFnQixLQUFLLEVBQUwsQ0FBUSxNQUFSLENBQWUsS0FBSyxLQUFwQixDQUFwQjtBQUNBLFdBQUssVUFBTCxDQUFnQixJQUFoQixDQUFxQixjQUFjLE1BQW5DO0FBQ0EsUUFBRSxJQUFGLENBQVEsYUFBUixFQUF3QixVQUFDLE1BQUQsRUFBWTtBQUNsQyxZQUFJLFlBQVksT0FBSyxRQUFMLENBQWMsWUFBZCxDQUEyQixPQUFPLEdBQWxDLENBQWhCO0FBQ0EsZUFBSyxlQUFMLENBQXFCLE9BQU8sR0FBNUIsSUFBbUMsT0FBTyxTQUFQLENBQWlCLFFBQXBEO0FBQ0EsZUFBSyxNQUFMLENBQVksWUFBWixDQUF5QixPQUFLLEtBQTlCLEVBQXFDLE9BQU8sR0FBNUMsRUFBaUQsT0FBSyxnQkFBTCxDQUFzQixJQUF0QixDQUEyQixNQUEzQixDQUFqRDtBQUNBLFVBQUUsTUFBRixDQUFTLE1BQVQsRUFBaUIsU0FBakI7QUFDQSxlQUFPLEVBQVAsR0FBWSxPQUFPLEdBQW5CO0FBQ0EsZUFBTyxHQUFQLEdBQWEsT0FBSyxNQUFMLENBQVksS0FBWixDQUFrQixPQUFPLEdBQXpCLENBQWI7QUFDRCxPQVBEO0FBUUEsYUFBTyxhQUFQO0FBQ0Q7QUF4Skg7QUFBQTtBQUFBLG9DQXlKa0IsS0F6SmxCLEVBeUp5QjtBQUNyQixhQUFPLEtBQUssRUFBTCxDQUFRLGNBQVIsQ0FBdUIsTUFBTSxJQUE3QixDQUFQO0FBQ0Q7QUEzSkg7QUFBQTtBQUFBLHFDQTZKbUIsS0E3Sm5CLEVBNkowQixFQTdKMUIsRUE2SjhCLElBN0o5QixFQTZKb0M7QUFDaEMsVUFBSSxDQUFDLEtBQUssS0FBTCxDQUFXLE9BQVgsQ0FBbUIsS0FBbkIsQ0FBTCxFQUFnQztBQUM5QjtBQUNEO0FBQ0QsVUFBSSxjQUFjLEtBQUssZUFBTCxDQUFxQixFQUFyQixDQUFsQjtBQUNBLFVBQUksV0FBSixFQUFpQjtBQUNmLFlBQUksV0FBVyxFQUFmO0FBQ0EsWUFBSSxtQkFBbUIsSUFBSSxPQUFKLENBQVksS0FBSyxRQUFMLENBQWMsU0FBMUIsRUFBcUMsS0FBSyxRQUFMLENBQWMsT0FBbkQsQ0FBdkI7QUFDQSxZQUFJLFVBQVUsaUJBQWlCLFVBQWpCLENBQTRCLEVBQTVCLEVBQWdDLFdBQWhDLEVBQTZDLFFBQTdDLEVBQXVELElBQXZELENBQWQ7QUFDQSxrQkFBVSxRQUFRLE9BQVIsQ0FBZ0IsT0FBaEIsRUFBeUIsR0FBekIsRUFBOEIsSUFBOUIsRUFBVjtBQUNBLGFBQUssZUFBTCxDQUFxQixFQUFyQixFQUF5QixTQUF6QixHQUFxQyxLQUFLLFVBQUwsQ0FBZ0IsRUFBaEIsRUFBb0IsSUFBcEIsQ0FBckM7QUFDQSxZQUFHLENBQUMsS0FBSyxXQUFULEVBQXNCO0FBQ3BCLGVBQUssYUFBTCxDQUFtQixLQUFLLEtBQUwsQ0FBVyxFQUFYLENBQW5CLEVBQW1DLE9BQW5DLEVBQTRDLEtBQUssU0FBTCxDQUFlLEVBQWYsRUFBbUIsUUFBbkIsQ0FBNUM7QUFDRDtBQUNGO0FBQ0QsV0FBSyxVQUFMLENBQWdCLE1BQWhCO0FBQ0Q7QUE3S0g7QUFBQTtBQUFBLCtCQStLYSxPQS9LYixFQStLc0IsS0EvS3RCLEVBK0s2QjtBQUN6QixVQUFJLFlBQVksS0FBSyxRQUFMLENBQWMsY0FBZCxDQUE2QixPQUE3QixDQUFoQjtBQUNBLFVBQUksU0FBUyxJQUFJLFVBQUosQ0FBZSxTQUFmLEVBQTBCLEtBQTFCLEVBQWlDLEtBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsSUFBbkIsQ0FBakMsQ0FBYjtBQUNBLGFBQU8sT0FBTyxPQUFQLEVBQVA7QUFDRDtBQW5MSDtBQUFBO0FBQUEsNkJBcUxXLEVBckxYLEVBcUxjO0FBQ1YsVUFBSSxTQUFTLEtBQUssUUFBTCxDQUFjLE1BQTNCO0FBQ0EsVUFBSSxZQUFZLE9BQU8sRUFBUCxDQUFoQjtBQUNBLGFBQU8sS0FBSyxVQUFMLENBQWdCLFNBQWhCLENBQVA7QUFDRDtBQXpMSDtBQUFBO0FBQUEsK0JBMkxhLFNBM0xiLEVBMkx3QjtBQUNwQixVQUFJLFNBQVMsS0FBSyxRQUFMLENBQWMsTUFBM0I7QUFDQSxVQUFJLFNBQVMsSUFBSSxTQUFKLENBQWMsTUFBZCxFQUFzQixLQUFLLElBQUwsQ0FBVSxNQUFoQyxFQUF3QyxLQUFLLElBQUwsQ0FBVSxHQUFsRCxDQUFiO0FBQ0EsYUFBTyxhQUFhLE9BQU8sTUFBUCxDQUFjLFNBQWQsQ0FBcEI7QUFDRDtBQS9MSDtBQUFBO0FBQUEsMEJBaU1RLEVBak1SLEVBaU1ZO0FBQ1IsYUFBTyxLQUFLLE1BQUwsQ0FBWSxLQUFaLENBQWtCLEVBQWxCLENBQVA7QUFDRDtBQW5NSDtBQUFBO0FBQUEsOEJBcU1ZLEVBck1aLEVBcU1nQixRQXJNaEIsRUFxTTBCO0FBQ3RCLFVBQUksT0FBTyxLQUFLLFFBQUwsQ0FBYyxZQUFkLENBQTJCLEVBQTNCLENBQVg7QUFDQSxVQUFJLFNBQVMsS0FBSyxXQUFMLFNBQXVCLFNBQVMsQ0FBVCxDQUF2QixTQUF3QyxRQUFyRDtBQUNBLFVBQUksSUFBSixFQUFVO0FBQ1IsWUFBSSxnQkFBZ0IsTUFBTSxFQUFFLGtCQUFGLENBQXFCO0FBQzdDLG9CQUFVLEtBQUssS0FBTCxDQUFXLFlBRHdCO0FBRTdDLG9CQUFVO0FBRm1DLFNBQXJCLENBQTFCO0FBSUEsb0JBQVUsS0FBSyxNQUFMLENBQVksTUFBWixDQUFtQixLQUFLLE1BQXhCLENBQVYsR0FBNEMsYUFBNUM7QUFDRDtBQUNGO0FBL01IO0FBQUE7QUFBQSx3QkF1SHlCO0FBQ3JCLGFBQU8sS0FBSyxPQUFMLENBQWEsTUFBYixLQUF3QixDQUF4QixJQUNELEtBQUssUUFBTCxDQUFjLFFBQWQsQ0FBdUIsS0FEdEIsSUFFRixDQUFDLEtBQUssS0FBTCxDQUFXLFVBRmpCO0FBR0Q7QUEzSEg7O0FBQUE7QUFBQTs7Ozs7Ozs7O0FDVkEsSUFBTSxLQUFLLFFBQVEsdUJBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxJQUFNLFlBQVksUUFBUSxPQUFSLENBQWxCO0FBQ0EsSUFBTSxPQUFPLFFBQVEsTUFBUixDQUFiO0FBQ0EsT0FBTyxPQUFQO0FBQ0UsdUJBQVksSUFBWixFQUFrQixRQUFsQixFQUE0QixJQUE1QixFQUFrQztBQUFBOztBQUNoQyxTQUFLLFlBQUwsR0FBb0IsS0FBSyxJQUFMLEVBQXBCO0FBQ0EsU0FBSyxJQUFMLEdBQVksS0FBSyxZQUFMLENBQWtCLFdBQWxCLEVBQVo7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsWUFBWSxFQUE1QjtBQUNBLFNBQUssSUFBTCxHQUFZLFFBQVEsRUFBcEI7QUFDQSxTQUFLLGVBQUw7QUFDRDs7QUFQSDtBQUFBO0FBQUEsMkJBUVMsUUFSVCxFQVFtQjtBQUNmLFVBQUksU0FBUyxJQUFJLFNBQUosQ0FBYyxLQUFLLFFBQUwsQ0FBYyxNQUE1QixFQUFvQyxLQUFLLElBQUwsQ0FBVSxNQUE5QyxFQUFzRCxLQUFLLElBQUwsQ0FBVSxHQUFoRSxDQUFiO0FBQ0EsYUFBUSxPQUFPLE1BQVAsQ0FBYyxRQUFkLENBQVI7QUFDRDtBQVhIO0FBQUE7QUFBQSw4QkFZWSxZQVpaLEVBWTBCO0FBQ3RCLFdBQUssVUFBTCxHQUFrQixZQUFsQjtBQUNBLGtCQUFVLEtBQUssV0FBZjtBQUNEO0FBZkg7QUFBQTtBQUFBLDRCQWlCVSxLQWpCVixFQWlCaUI7QUFDYixVQUFHLEtBQUssSUFBTCxLQUFjLE1BQU0sSUFBcEIsSUFBNEIsS0FBSyxZQUFMLEtBQXNCLE1BQU0sWUFBM0QsRUFBeUU7QUFDdkUsZUFBTyxLQUFQO0FBQ0Q7QUFDRCxhQUFPLEVBQUUsT0FBRixDQUFVLEtBQUssSUFBZixFQUFxQixNQUFNLElBQTNCLENBQVA7QUFDRDtBQXRCSDtBQUFBO0FBQUEsaUNBd0JlLEVBeEJmLEVBd0JtQixLQXhCbkIsRUF3QjBCLEtBeEIxQixFQXdCaUM7QUFDN0IsVUFBSSxLQUFLLFVBQUwsQ0FBZ0IsS0FBaEIsQ0FBSixFQUE0QjtBQUMxQixlQUFPLEVBQVA7QUFDRDtBQUNELGFBQVEsS0FBSyxJQUFMLENBQVUsS0FBWCxHQUFzQixFQUF0QixTQUE0QixLQUE1QixXQUF1QyxLQUF2QyxHQUFtRCxFQUFuRCxTQUF5RCxLQUF6RCxTQUFrRSxLQUF6RTtBQUNEO0FBN0JIO0FBQUE7QUFBQSxzQ0ErQm9CO0FBQ2hCLFVBQUksS0FBSyxhQUFULEVBQXdCO0FBQ3RCLGFBQUssWUFBTCxHQUFvQixJQUFwQjtBQUNBLGFBQUssSUFBTCxHQUFZLEtBQUssSUFBTCxDQUFVLFNBQVYsQ0FBb0IsQ0FBcEIsRUFBdUIsS0FBSyxJQUFMLENBQVUsTUFBVixHQUFpQixDQUF4QyxDQUFaO0FBQ0Q7QUFDRjtBQXBDSDtBQUFBO0FBQUEsa0NBdURnQixLQXZEaEIsRUF1RHVCO0FBQ25CLGFBQU8sRUFBRSxNQUFGLENBQVMsS0FBVCxFQUFnQixVQUFDLEdBQUQsRUFBTSxJQUFOLEVBQWU7QUFDcEMsZUFBUSxRQUFRLEtBQUssS0FBYixJQUFzQixLQUFLLEtBQUwsR0FBYSxHQUFwQyxHQUEyQyxLQUFLLEtBQWhELEdBQXdELEdBQS9EO0FBQ0QsT0FGTSxFQUVKLENBRkksQ0FBUDtBQUdEO0FBM0RIO0FBQUE7QUFBQSx3QkFzQ3NCO0FBQ2xCLGFBQVEsS0FBSyxJQUFMLENBQVUsTUFBVixHQUFtQixDQUFwQixJQUNGLEtBQUssVUFBTCxDQUFnQixPQUFoQixDQUF3QixLQUFLLElBQUwsQ0FBVSxDQUFWLENBQXhCLE1BQTBDLENBQUMsQ0FEekMsSUFFRixLQUFLLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBd0IsS0FBSyxJQUFMLENBQVUsS0FBSyxJQUFMLENBQVUsTUFBVixHQUFrQixDQUE1QixDQUF4QixNQUE2RCxDQUFDLENBRm5FO0FBR0Q7QUExQ0g7QUFBQTtBQUFBLHdCQTRDbUI7QUFDZixhQUFPLEtBQUssWUFBWjtBQUNEO0FBOUNIO0FBQUE7QUFBQSx3QkFnRG9CO0FBQ2hCLGFBQU8sQ0FBQyxLQUFLLElBQU4sQ0FBUDtBQUNEO0FBbERIO0FBQUE7QUFBQSx3QkFvRG1CO0FBQ2YsYUFBTyxDQUFDLElBQUQsRUFBTyxJQUFQLENBQVA7QUFDRDtBQXRESDtBQUFBO0FBQUEsd0JBNkRvQjtBQUFBOztBQUNoQixVQUFJLGFBQWEsRUFBakI7QUFDQSxRQUFFLElBQUYsQ0FBTyxLQUFLLFFBQUwsQ0FBYyxNQUFyQixFQUE2QixVQUFDLElBQUQsRUFBTyxFQUFQLEVBQWM7QUFDekMsWUFBSSxDQUFDLE1BQUssTUFBTCxDQUFZLElBQVosQ0FBTCxFQUF3QjtBQUN0QixjQUFJLFNBQVMsRUFBRSxHQUFGLENBQU0sS0FBSyxTQUFMLENBQWUsTUFBSyxJQUFwQixDQUFOLEVBQWlDO0FBQUEsbUJBQVMsTUFBTSxHQUFmO0FBQUEsV0FBakMsQ0FBYjtBQUNBLGNBQUksUUFBUSxNQUFLLGFBQUwsQ0FBbUIsSUFBbkIsQ0FBWjtBQUNBLFlBQUUsSUFBRixDQUFPLE1BQVAsRUFBZSxpQkFBUztBQUN0Qix5QkFBZ0IsVUFBaEIsU0FBOEIsTUFBSyxZQUFMLENBQWtCLEVBQWxCLEVBQXNCLEtBQXRCLEVBQTZCLEtBQTdCLENBQTlCO0FBQ0QsV0FGRDtBQUdEO0FBQ0YsT0FSRDtBQVNBLGFBQU8sVUFBUDtBQUNEO0FBekVIOztBQUFBO0FBQUE7Ozs7Ozs7OztBQ0pBLElBQU0sS0FBSyxRQUFRLHVCQUFSLENBQVg7QUFDQSxJQUFNLGFBQWEsUUFBUSxnQkFBUixDQUFuQjtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxPQUFPLE9BQVA7QUFDRSx5QkFBWSxTQUFaLEVBQXVCLE9BQXZCLEVBQWdDO0FBQUE7O0FBQzlCLFNBQUssU0FBTCxHQUFpQixTQUFqQjtBQUNBLFNBQUssT0FBTCxHQUFlLE9BQWY7QUFDRDs7QUFKSDtBQUFBO0FBQUEsa0NBS2dCO0FBQ1o7QUFDRDtBQVBIO0FBQUE7QUFBQSwrQkFTYSxFQVRiLEVBU2lCLFdBVGpCLEVBUzhCLFFBVDlCLEVBU3dDLElBVHhDLEVBUzhDO0FBQUE7O0FBQzFDLFVBQUksS0FBSyxPQUFULEVBQWtCO0FBQ2hCLFlBQUksV0FBVSxLQUFLLFNBQUwsQ0FBZSxFQUFmLEtBQXNCLEtBQUssU0FBTCxDQUFlLEVBQWYsRUFBbUIsT0FBdkQ7QUFDQSxZQUFJLFFBQUosRUFBYTtBQUNYLGlCQUFPLFFBQVA7QUFDRDtBQUNGO0FBQ0QsVUFBSSxZQUFZLEVBQUUsR0FBRixDQUFNLFdBQU4sRUFBbUIsVUFBQyxRQUFELEVBQWM7QUFDL0MsZUFBTyxFQUFFLEtBQUYsQ0FBUSxRQUFSLEVBQWtCLFVBQUMsT0FBRCxFQUFVLE9BQVYsRUFBc0I7QUFDN0MsaUJBQU8sRUFBRSxLQUFGLENBQVEsUUFBUSxRQUFoQixFQUEwQixVQUFDLFFBQUQsRUFBYztBQUM3QyxnQkFBSSxRQUFRLEtBQUssT0FBTCxDQUFaO0FBQ0EsZ0JBQUksU0FBUyxJQUFJLFVBQUosRUFBYjtBQUNBLGdCQUFJLE9BQU8sT0FBTyxZQUFQLENBQW9CLEtBQXBCLENBQVg7QUFDQSxnQkFBSSxPQUFPLEtBQUssU0FBTCxDQUFlLFNBQVMsQ0FBVCxDQUFmLEVBQTRCLFNBQVMsQ0FBVCxJQUFjLFNBQVMsQ0FBVCxDQUExQyxDQUFYO0FBQ0EsbUJBQU8sS0FBSyxXQUFMLEVBQVA7QUFDQSxnQkFBSSxTQUFTLE9BQVQsQ0FBaUIsSUFBakIsTUFBMkIsQ0FBQyxDQUFoQyxFQUFtQztBQUNqQyx1QkFBUyxJQUFULENBQWMsSUFBZDtBQUNEO0FBQ0QsbUJBQU8sTUFBSyxjQUFMLENBQW9CLElBQXBCLEVBQTBCLFNBQVMsQ0FBVCxDQUExQixFQUF1QyxTQUFTLENBQVQsQ0FBdkMsRUFBb0QsSUFBcEQsQ0FBUDtBQUNELFdBVk0sQ0FBUDtBQVdELFNBWk0sQ0FBUDtBQWFELE9BZGUsQ0FBaEI7QUFlQSxVQUFJLFVBQVUsRUFBZDtBQUNBLFFBQUUsSUFBRixDQUFPLFVBQVUsQ0FBVixLQUFnQixFQUF2QixFQUEyQixhQUFLO0FBQzlCLFlBQUksRUFBRSxNQUFGLEdBQVcsUUFBUSxNQUF2QixFQUErQjtBQUM3QixvQkFBVSxDQUFWO0FBQ0Q7QUFDRixPQUpEO0FBS0EsYUFBTyxPQUFQO0FBQ0Q7QUF0Q0g7QUFBQTtBQUFBLG1DQTBDaUIsSUExQ2pCLEVBMEN1QixHQTFDdkIsRUEwQzRCLE1BMUM1QixFQTBDb0MsSUExQ3BDLEVBMEN5QztBQUNyQyxVQUFJLFdBQVcsS0FBSyxTQUFMLENBQWUsQ0FBZixFQUFrQixHQUFsQixDQUFmO0FBQ0EsVUFBSSxZQUFZLEtBQUssU0FBTCxDQUFlLE1BQU0sTUFBckIsQ0FBaEI7O0FBRUEsYUFBVSxLQUFLLFFBQUwsQ0FBYyxRQUFkLENBQVYsV0FBdUMsSUFBdkMsNEJBQ1ksS0FBSyxTQUFMLENBQWUsU0FBZixDQURaO0FBRUQ7QUFoREg7QUFBQTtBQUFBLDZCQWlEVyxRQWpEWCxFQWlEcUI7QUFDakIsVUFBSSxVQUFVLFNBQVMsT0FBVCxDQUFpQixHQUFqQixFQUFzQixTQUFTLE1BQVQsR0FBa0IsRUFBeEMsQ0FBZDtBQUNBLGlCQUFXLFNBQVMsU0FBVCxDQUFtQixPQUFuQixFQUE0QixTQUFTLE1BQXJDLENBQVg7QUFDQSxhQUFPLFNBQVMsU0FBVCxFQUFQO0FBQ0Q7QUFyREg7QUFBQTtBQUFBLDhCQXNEWSxTQXREWixFQXNEdUI7QUFDbkIsVUFBSSxXQUFXLFVBQVUsT0FBVixDQUFrQixHQUFsQixFQUF1QixFQUF2QixDQUFmO0FBQ0EsaUJBQVksYUFBYSxDQUFDLENBQWYsR0FBb0IsVUFBVSxNQUE5QixHQUF1QyxRQUFsRDtBQUNBLGtCQUFZLFVBQVUsU0FBVixDQUFvQixDQUFwQixFQUF1QixRQUF2QixDQUFaO0FBQ0EsYUFBTyxVQUFVLE9BQVYsRUFBUDtBQUNEO0FBM0RIOztBQUFBO0FBQUE7Ozs7Ozs7QUNIQTs7Ozs7Ozs7QUFDQSxPQUFPLE9BQVA7QUFDRSx3QkFBWSxNQUFaLEVBQW9CO0FBQUE7O0FBQ2xCLFNBQUssUUFBTCxHQUFnQixPQUFPLEtBQXZCO0FBQ0EsU0FBSyxNQUFMLEdBQWMsQ0FBZDtBQUNBLFNBQUssVUFBTCx3QkFBcUMsT0FBTyxHQUE1QztBQUNBLFNBQUssUUFBTCxHQUFnQixPQUFPLEtBQXZCO0FBQ0EsU0FBSyxNQUFMLG9CQUE2QixPQUFPLEdBQXBDO0FBQ0EsU0FBSyxjQUFMLEdBQXNCLE9BQU8sTUFBN0I7QUFDRDs7QUFSSDtBQUFBO0FBQUEsMEJBU1EsUUFUUixFQVNrQjtBQUNkLFdBQUssUUFBTCxJQUFpQixTQUFTLFFBQTFCO0FBQ0Q7QUFYSDtBQUFBO0FBQUEsNEJBWVUsS0FaVixFQVlpQjtBQUNiLGFBQU8sTUFBTSxRQUFOLEdBQWlCLEtBQUssUUFBN0I7QUFDRDtBQWRIO0FBQUE7QUFBQSwwQkFlUSxLQWZSLEVBZWU7QUFDWCxhQUFPLGdCQUFhLGFBQWIsQ0FBMkIsTUFBTSxNQUFqQyxFQUF5QyxLQUFLLE1BQTlDLE1BQTBELENBQWpFO0FBQ0Q7QUFqQkg7O0FBQUE7QUFBQTs7Ozs7Ozs7O0FDREEsSUFBTSxLQUFLLFFBQVEsb0JBQVIsQ0FBWDtBQUNBLElBQU0sSUFBSSxHQUFHLENBQWI7QUFDQSxPQUFPLE9BQVA7QUFDRSw0QkFBWSxTQUFaLEVBQXVCLEtBQXZCLEVBQThCLE1BQTlCLEVBQXNDO0FBQUE7O0FBQ3BDLFNBQUssU0FBTCxHQUFpQixTQUFqQjtBQUNBLFNBQUssS0FBTCxHQUFhLEtBQWI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsR0FBakI7QUFDQSxTQUFLLE1BQUwsR0FBYyxVQUFVLEtBQUssYUFBN0I7QUFDRDs7QUFOSDtBQUFBO0FBQUEseUJBT08sRUFQUCxFQU9XLEtBUFgsRUFPa0IsR0FQbEIsRUFPdUI7QUFDbkIsVUFBSSxRQUFRLEVBQVo7QUFDQSxXQUFLLElBQUksSUFBSSxLQUFiLEVBQW9CLEtBQUssR0FBekIsRUFBOEIsR0FBOUIsRUFBa0M7QUFDaEMsWUFBSSxLQUFLLEtBQUwsQ0FBVyxFQUFYLEVBQWUsQ0FBZixDQUFKLEVBQXVCO0FBQ3JCLGdCQUFNLElBQU4sQ0FBVyxLQUFLLEtBQUwsQ0FBVyxFQUFYLEVBQWUsQ0FBZixDQUFYO0FBQ0Q7QUFDRjtBQUNELGFBQU8sTUFBTSxJQUFOLENBQVcsS0FBSyxTQUFoQixDQUFQO0FBQ0Q7QUFmSDtBQUFBO0FBQUEsb0NBZ0JrQjtBQUNkLGFBQU8sS0FBUDtBQUNEO0FBbEJIO0FBQUE7QUFBQSxpQ0FtQmUsS0FuQmYsRUFtQnNCO0FBQ2xCLGFBQU8sTUFBTSxJQUFOLENBQVcsS0FBSyxTQUFoQixFQUEyQixPQUEzQixDQUFtQyxNQUFuQyxFQUEyQyxLQUFLLFNBQWhELEVBQTJELElBQTNELEVBQVA7QUFDRDtBQXJCSDtBQUFBO0FBQUEsOEJBc0JZO0FBQUE7O0FBQ1IsVUFBSSxRQUFRLEVBQVo7QUFDQSxRQUFFLElBQUYsQ0FBTyxLQUFLLFNBQVosRUFBdUIsZ0JBQVE7QUFDN0IsWUFBSSxDQUFDLE1BQUssTUFBTCxDQUFZLEtBQUssQ0FBTCxDQUFaLENBQUwsRUFBMkI7QUFDekIsZ0JBQU0sSUFBTixDQUFXLE1BQUssSUFBTCxDQUFVLEtBQUssQ0FBTCxDQUFWLEVBQW1CLEtBQUssQ0FBTCxDQUFuQixFQUE0QixLQUFLLENBQUwsQ0FBNUIsQ0FBWDtBQUNEO0FBQ0YsT0FKRDtBQUtBLGFBQU8sTUFBTSxJQUFOLENBQVcsS0FBSyxTQUFoQixDQUFQO0FBQ0Q7QUE5Qkg7O0FBQUE7QUFBQTs7Ozs7Ozs7O0FDRkEsSUFBSSxLQUFLLFFBQVEsY0FBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDtBQUNBLElBQUksU0FBUyxHQUFHLE1BQWhCOztJQUNNLHNCO0FBRUosa0NBQVksTUFBWixFQUFvQjtBQUFBOztBQUNsQixTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0Q7Ozs7NEJBRU8sRyxFQUFLO0FBQ1gsVUFBSSxZQUFZLEdBQWhCO0FBQ0EsVUFBSSxpQkFBaUIsS0FBSyxNQUFMLENBQVksR0FBWixDQUFnQixPQUFPLDBCQUFQLENBQWhCLENBQXJCO0FBQ0EsVUFBSSxhQUFhLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsT0FBTyxpQkFBUCxDQUFoQixDQUFqQjtBQUNBLFVBQUksa0JBQWtCLEVBQXRCO0FBQ0EsVUFBRyxjQUFlLGVBQWUsRUFBakMsRUFBcUM7QUFDbkMsWUFBSSxNQUFNLE9BQU8sb0JBQVAsQ0FBVjtBQUNBLFlBQUksZ0JBQWdCLEVBQXBCO0FBQ0Esc0JBQWMsR0FBZCxJQUFxQixVQUFyQjtBQUNBLDBCQUFrQixFQUFFLGtCQUFGLENBQXFCLGFBQXJCLENBQWxCO0FBQ0Q7QUFDRCxVQUFHLG1CQUFtQixTQUFuQixJQUFnQyxtQkFBbUIsRUFBdEQsRUFBeUQ7QUFDdkQsb0JBQVksWUFBWSxjQUFaLEdBQTZCLEdBQTdCLEdBQW1DLGVBQS9DO0FBQ0QsT0FGRCxNQUdLLElBQUcsb0JBQW9CLEVBQXZCLEVBQTBCO0FBQzdCLG9CQUFZLFlBQVksR0FBWixHQUFrQixlQUE5QjtBQUNEO0FBQ0QsYUFBTyxTQUFQO0FBQ0Q7Ozs7OztBQUdILEdBQUcsVUFBSCxDQUFjLHdCQUFkLEVBQXdDLHNCQUF4Qzs7Ozs7Ozs7O0FDOUJBLElBQUksS0FBSyxRQUFRLGNBQVIsQ0FBVDtBQUNBLElBQUksSUFBSSxHQUFHLENBQVg7QUFDQSxJQUFJLFNBQVMsR0FBRyxNQUFoQjtBQUNBOztJQUVNLHdCO0FBRUosb0NBQVksTUFBWixFQUFvQjtBQUFBOztBQUNsQixTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0E7QUFDRDs7OzsyQkFDTSxFLEVBQUksRyxFQUFJO0FBQ2IsV0FBSyxNQUFMLENBQVksT0FBWixDQUFvQixPQUFPLHFCQUFQLENBQXBCLEVBQ0UsRUFBQyxNQUFNLEVBQVAsRUFBWSxPQUFPLEdBQW5CLEVBREY7QUFFRDs7OzRCQUNPLEUsRUFBRztBQUNULFVBQUcsRUFBSCxFQUFNO0FBQ0osWUFBSSxjQUFjLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsT0FBTyxxQkFBUCxDQUFoQixDQUFsQjtBQUNBLFlBQUksT0FBTyxZQUFZLEVBQVosQ0FBWDtBQUNBLFlBQUcsUUFBUSxLQUFLLE1BQWhCLEVBQXVCO0FBQ3JCLGlCQUFPLEtBQUssR0FBWjtBQUNEO0FBQ0Y7QUFDRjs7OzZCQUNRLEssRUFBTTtBQUNiLFVBQUcsS0FBSCxFQUFTO0FBQ1AsWUFBSSxjQUFjLEtBQUssTUFBTCxDQUFZLEdBQVosQ0FBZ0IsT0FBTyxxQkFBUCxDQUFoQixDQUFsQjtBQUNBLFlBQUksT0FBTyxZQUFZLEtBQVosQ0FBWDtBQUNBLFlBQUcsUUFBUSxDQUFDLEtBQUssTUFBakIsRUFBd0I7QUFDdEIsWUFBRSxRQUFGLENBQVcsRUFBQyxTQUFTLEtBQUssRUFBZixFQUFYO0FBQ0Q7QUFDRjtBQUNGOzs7Ozs7QUFHSCxHQUFHLFVBQUgsQ0FBYywwQkFBZCxFQUEwQyx3QkFBMUM7Ozs7Ozs7OztBQ25DQSxJQUFJLEtBQUssUUFBUSxpQkFBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDtBQUNBLElBQUksa0JBQWtCLFFBQXRCO0FBQ0EsSUFBSSxnQkFBZ0IseUNBQXBCOztJQUVNLFE7QUFDSixvQkFBWSxNQUFaLEVBQW9CLElBQXBCLEVBQTBCO0FBQUE7O0FBQUE7O0FBQ3hCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLElBQUwsR0FBWSxLQUFLLE1BQUwsQ0FBWSxJQUF4QjtBQUNBLFNBQUssR0FBTCxHQUFXLENBQVg7QUFDQSxPQUFHLEtBQUgsQ0FBUyxhQUFULENBQXVCLEdBQUcsTUFBSCxDQUFVLEtBQUssR0FBZixDQUF2QixFQUE0QyxZQUFNO0FBQ2hELFlBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsZUFBcEIsRUFBcUMsSUFBckM7QUFDRCxLQUZEO0FBR0EsT0FBRyxLQUFILENBQVMsU0FBVCxDQUFtQixHQUFHLE1BQUgsQ0FBVSxZQUFWLENBQW5CLEVBQTRDLFlBQU07QUFDaEQsWUFBSyxJQUFMLENBQVUsTUFBSyxHQUFmLEVBQW9CLENBQXBCO0FBQ0QsS0FGRDtBQUdBLE9BQUcsS0FBSCxDQUFTLFNBQVQsQ0FBbUIsS0FBSyxHQUFMLEdBQVMsU0FBNUIsRUFBdUMsVUFBQyxRQUFELEVBQWM7QUFDbkQsWUFBSyxJQUFMLENBQVUsTUFBSyxTQUFMLEVBQVYsRUFBNEIsU0FBUyxHQUFyQztBQUNELEtBRkQ7QUFHRDs7Ozt5QkFFSSxJLEVBQU0sRSxFQUFJO0FBQUE7O0FBQ2IsV0FBSyxHQUFMLEdBQVcsRUFBWDtBQUNBLFdBQUssWUFBTCxHQUFvQixFQUFFLElBQUYsQ0FBTyxLQUFLLElBQVosRUFBa0IsV0FBbEIsRUFBK0IsQ0FBL0IsQ0FBcEI7QUFDQSxXQUFLLFdBQUwsQ0FBaUIsSUFBakI7QUFDQSxTQUFHLENBQUgsQ0FBSyxLQUFMLENBQVcsWUFBTTtBQUNmLGVBQUssTUFBTCxDQUFZLE9BQVosQ0FBb0IsZUFBcEIsRUFBcUMsSUFBckM7QUFDRCxPQUZELEVBRUcsSUFGSDtBQUdEOzs7OEJBRVM7QUFDUixXQUFLLFlBQUwsR0FBb0IsRUFBRSxJQUFGLENBQU8sS0FBSyxJQUFaLEVBQWtCLFdBQWxCLEVBQStCLENBQS9CLENBQXBCO0FBQ0EsVUFBSSxXQUFXLEVBQUUsSUFBRixDQUFPLEVBQUUsSUFBRixDQUFPLEtBQUssSUFBWixFQUFrQixXQUFsQixFQUErQixDQUEvQixDQUFQLEVBQTBDLGFBQTFDLENBQWY7QUFDQSxpQkFBWSxZQUFZLFNBQVMsTUFBVCxHQUFrQixDQUEvQixHQUFtQyxTQUFTLFNBQVMsTUFBVCxHQUFrQixDQUEzQixDQUFuQyxHQUFtRSxJQUE5RTtBQUNBLGFBQU8sU0FBUyxVQUFULEdBQXNCLEtBQUssWUFBTCxDQUFrQixVQUF4QyxHQUFxRCxLQUFLLFlBQUwsQ0FBa0IsV0FBOUU7QUFDRDs7O2tDQUVhO0FBQ1osVUFBSSxVQUFVLFdBQVcsS0FBSyxHQUFMLEdBQVMsRUFBcEIsR0FBeUIsT0FBekIsR0FBbUMsS0FBSyxHQUFMLEdBQVMsR0FBNUMsR0FBa0QsSUFBaEU7QUFDQSxRQUFFLEdBQUYsQ0FBTSxLQUFLLFlBQVgsRUFBeUIsTUFBekIsRUFBaUMsT0FBakM7QUFDRDs7OzJCQUVNO0FBQ0wsV0FBSyxJQUFMLENBQVUsS0FBSyxHQUFmLEVBQW9CLEtBQUssR0FBTCxHQUFTLENBQTdCO0FBQ0Q7OztnQ0FFVztBQUNWLGFBQU8sS0FBSyxHQUFaO0FBQ0Q7OzsrQkFFVTtBQUNULFdBQUssSUFBTCxDQUFVLEtBQUssR0FBZixFQUFvQixLQUFLLEdBQUwsR0FBUyxDQUE3QjtBQUNEOzs7b0NBRWUsQ0FFZjs7Ozs7O0FBR0gsR0FBRyxVQUFILENBQWMsVUFBZCxFQUEwQixRQUExQjs7Ozs7QUMzREEsSUFBSSxLQUFLLFFBQVEsY0FBUixDQUFUO0FBQ0EsSUFBSSxJQUFJLEdBQUcsQ0FBWDtBQUNBLE9BQU8sT0FBUCxHQUFpQjs7QUFFZixZQUFVO0FBQ1Isa0JBQWMsQ0FETjtBQUVSLG9CQUFnQixDQUZSO0FBR1IsZUFBVyxDQUhIO0FBSVIsd0JBQW9CLENBSlo7QUFLUiwyQkFBdUIsQ0FMZjtBQU1SLGlCQUFhLENBTkw7QUFPUixpQ0FBNkIsQ0FQckI7QUFRUixrQkFBYyxDQVJOO0FBU1IsbUJBQWUsQ0FUUDtBQVVSLHdCQUFvQixFQVZaO0FBV1IsNEJBQXdCLEVBWGhCO0FBWVIsbUJBQWU7QUFaUCxHQUZLOztBQWlCZixhQWpCZSx1QkFpQkgsSUFqQkcsRUFpQm1DO0FBQUEsUUFBaEMsTUFBZ0MsdUVBQXZCLEtBQUssVUFBTCxDQUFnQixJQUFoQixDQUF1Qjs7QUFDaEQsV0FBTyxVQUFVLE9BQU8sV0FBakIsSUFBZ0MsT0FBTyxXQUFQLENBQW1CLElBQW5CLENBQXZDO0FBQ0QsR0FuQmM7QUFvQmYsYUFwQmUsdUJBb0JILE1BcEJHLEVBb0JLLE9BcEJMLEVBb0JjO0FBQzNCLFdBQU8sVUFBVSxPQUFPLFdBQWpCLElBQWdDLE9BQU8sV0FBUCxDQUFtQixPQUFuQixDQUF2QztBQUNELEdBdEJjO0FBdUJmLFlBdkJlLHNCQXVCSixJQXZCSSxFQXVCRTtBQUNmLFdBQU8sUUFBUSxLQUFLLFVBQXBCO0FBQ0QsR0F6QmM7QUEwQmYsWUExQmUsc0JBMEJKLElBMUJJLEVBMEJFO0FBQ2YsV0FBTyxRQUFRLEtBQUssVUFBYixJQUEyQixFQUFsQztBQUNELEdBNUJjO0FBNkJmLFlBN0JlLHNCQTZCSixJQTdCSSxFQTZCRTtBQUNmLFdBQU8sS0FBSyxVQUFMLENBQWdCLEVBQUUsYUFBRixDQUFnQixLQUFoQixFQUF1QixJQUF2QixDQUFoQixDQUFQO0FBQ0QsR0EvQmM7QUFnQ2YsV0FoQ2UscUJBZ0NMLElBaENLLEVBZ0NDO0FBQ2QsV0FBTyxRQUFRLEtBQUssU0FBYixJQUEwQixFQUFqQztBQUNELEdBbENjO0FBbUNmLGFBbkNlLHVCQW1DSCxJQW5DRyxFQW1DRyxPQW5DSCxFQW1DVztBQUN4QixXQUFPLEtBQUssVUFBTCxDQUFnQixZQUFoQixDQUE2QixPQUE3QixFQUFzQyxLQUFLLFdBQTNDLENBQVA7QUFDRCxHQXJDYztBQXNDZixPQXRDZSxpQkFzQ1QsSUF0Q1MsRUFzQ0g7QUFDVixXQUFPLFFBQVEsS0FBSyxTQUFwQjtBQUNELEdBeENjO0FBeUNmLE1BekNlLGdCQXlDVixJQXpDVSxFQXlDSjtBQUNULFdBQU8sUUFBUSxLQUFLLFFBQXBCO0FBQ0QsR0EzQ2M7QUE0Q2YsTUE1Q2UsZ0JBNENWLElBNUNVLEVBNENKO0FBQ1QsV0FBTyxRQUFRLEtBQUssUUFBcEI7QUFDRCxHQTlDYztBQStDZixlQS9DZSx5QkErQ0QsSUEvQ0MsRUErQ0s7QUFDbEIsV0FBTyxLQUFLLElBQUwsQ0FBVSxJQUFWLE1BQW9CLEtBQUssUUFBTCxDQUFjLFlBQXpDO0FBQ0QsR0FqRGM7QUFrRGYsWUFsRGUsc0JBa0RKLElBbERJLEVBa0RFO0FBQ2YsV0FBTyxLQUFLLElBQUwsQ0FBVSxJQUFWLE1BQW9CLEtBQUssUUFBTCxDQUFjLFNBQXpDO0FBQ0Q7QUFwRGMsQ0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCB7IHJoIH0gPSB3aW5kb3c7XHJcbmNvbnN0IHsgXyB9ID0gcmg7XHJcbmNvbnN0IHsgJCB9ID0gcmg7XHJcbmNvbnN0IHsgY29uc3RzIH0gPSByaDtcclxuY29uc3QgeyBtb2RlbCB9ID0gcmg7XHJcblxyXG5jb25zdCBIQVNIX0tFWV9SSF9TRUFSQ0ggPSBjb25zdHMoJ0hBU0hfS0VZX1JIX1NFQVJDSCcpO1xyXG5jb25zdCBIQVNIX0tFWV9UT1BJQyA9IGNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKTtcclxuY29uc3QgSEFTSF9LRVlfVUlNT0RFID0gY29uc3RzKCdIQVNIX0tFWV9VSU1PREUnKTtcclxuY29uc3QgSEFTSF9LRVlfUkhfVE9DSUQgPSBjb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyk7XHJcbmNvbnN0IEhBU0hfS0VZX1JIX0hJR0hMSUdIVCA9IGNvbnN0cygnSEFTSF9LRVlfUkhfSElHSExJR0hUJyk7XHJcbmNvbnN0IEhBU0hfS0VZX1JBTkRPTSA9IGNvbnN0cygnSEFTSF9LRVlfUkFORE9NJyk7XHJcbmNvbnN0IGhhc2hRdWVyeUtleXMgPSBbXHJcbiAgSEFTSF9LRVlfUkhfSElHSExJR0hULFxyXG4gIGNvbnN0cygnSEFTSF9LRVlfUkhfU1lOUycpLFxyXG4gIEhBU0hfS0VZX1JIX1RPQ0lEXHJcbiAgXTtcclxuXHJcbi8vIEhlbHBlciBtZXRob2RzXHJcbmNvbnN0IGdldE1lcmdlZFBhcmFtc01hcCA9IGZ1bmN0aW9uKHRvcGljVXJsKSB7XHJcbiAgY29uc3QgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcodG9waWNVcmwpKTtcclxuICBjb25zdCBoYXNoTWFwICA9IF8uaGFzaFBhcmFtcyhfLmV4dHJhY3RIYXNoU3RyaW5nKHRvcGljVXJsKSk7XHJcbiAgcmV0dXJuIF8uZXh0ZW5kKHBhcmFtc01hcCwgaGFzaE1hcCk7XHJcbn07XHJcblxyXG5jb25zdCBnZXRUb3BpY1VSTCA9IGZ1bmN0aW9uKG5ld01hcCwgdG9waWNVcmwpIHtcclxuICB0b3BpY1VybCA9IHRvcGljVXJsO1xyXG4gIGNvbnN0IGZpbGVQYXRoID0gXy5maWxlUGF0aCh0b3BpY1VybCk7XHJcbiAgbGV0IGJvb2tNYXJrID0gXy5leHRyYWN0SGFzaFN0cmluZyh0b3BpY1VybCk7XHJcbiAgaWYgKGJvb2tNYXJrLmxlbmd0aCA+IDApIHsgYm9va01hcmsgPSBgIyR7Ym9va01hcmt9YDsgfVxyXG5cclxuICBjb25zdCBwYXJhbXNNYXAgPSBfLnVybFBhcmFtcyhfLmV4dHJhY3RQYXJhbVN0cmluZyh0b3BpY1VybCkpO1xyXG4gIGZvciAobGV0IGtleSBvZiBBcnJheS5mcm9tKGhhc2hRdWVyeUtleXMpKSB7IGlmIChuZXdNYXBba2V5XSAhPSBudWxsKSB7IHBhcmFtc01hcFtrZXldID0gbmV3TWFwW2tleV07IH0gfVxyXG4gIGlmIChtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0NSRUVOX0lPUycpKSkge1xyXG4gICAgcGFyYW1zTWFwW0hBU0hfS0VZX1JBTkRPTV0gPSAoXy51bmlxdWVJZCkoKTtcclxuICB9XHJcbiAgbGV0IHBhcmFtcyA9IF8ubWFwVG9FbmNvZGVkU3RyaW5nKHBhcmFtc01hcCk7XHJcbiAgaWYgKHBhcmFtcy5sZW5ndGggPiAwKSB7IHBhcmFtcyA9IGA/JHtwYXJhbXN9YDsgfVxyXG5cclxuICByZXR1cm4gYCR7ZmlsZVBhdGh9JHtwYXJhbXN9JHtib29rTWFya31gO1xyXG59O1xyXG5cclxuY29uc3QgeyBxdWV1ZVVwZGF0ZUhhc2hNYXAgfSA9IF87XHJcblxyXG5jb25zdCBmaXhIYXNoTWFwRm9yVG9waWMgPSBmdW5jdGlvbihoYXNoTWFwKSB7XHJcbiAgaWYgKGhhc2hNYXAgPT0gbnVsbCkgeyBoYXNoTWFwID0ge307IH1cclxuICBoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0gPSBudWxsO1xyXG4gIGhhc2hNYXBbSEFTSF9LRVlfUkFORE9NXSA9IG51bGw7XHJcbiAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSkgeyBoYXNoTWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSA9IG51bGw7IH1cclxuICBpZiAoIWhhc2hNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSkgeyBoYXNoTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0gPSBudWxsOyB9XHJcbiAgcmV0dXJuIGhhc2hNYXA7XHJcbn07XHJcblxyXG5cclxuXHJcbmNvbnN0IHNob3dUb3BpYyA9IGZ1bmN0aW9uKHJlbFVybCwgYWRkVG9IaXN0b3J5KSB7XHJcbiAgcmVsVXJsID0gXy5maXhSZWxhdGl2ZVVybChyZWxVcmwpO1xyXG4gIGxldCBoYXNoTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcocmVsVXJsKSk7XHJcbiAgaGFzaE1hcFtIQVNIX0tFWV9UT1BJQ10gPSBfLnN0cmlwUGFyYW0ocmVsVXJsKTtcclxuICBoYXNoTWFwID0gZml4SGFzaE1hcEZvclRvcGljKGhhc2hNYXApO1xyXG4gIHJldHVybiBxdWV1ZVVwZGF0ZUhhc2hNYXAoaGFzaE1hcCwgYWRkVG9IaXN0b3J5KTtcclxufTtcclxuXHJcblxyXG5jb25zdCBzaG93Tm9uVG9waWMgPSBmdW5jdGlvbih1cmwsIGFkZFRvSGlzdG9yeSkge1xyXG4gIGxldCBoYXNoTWFwID0ge307XHJcbiAgaGFzaE1hcFtIQVNIX0tFWV9UT1BJQ10gPSAgdXJsO1xyXG4gIGhhc2hNYXAgPSBmaXhIYXNoTWFwRm9yVG9waWMoaGFzaE1hcCk7XHJcbiAgcmV0dXJuIHF1ZXVlVXBkYXRlSGFzaE1hcChoYXNoTWFwLCBhZGRUb0hpc3RvcnkpO1xyXG59O1xyXG5cclxuKHtpc1NhbWVUb3BpYyh1cmwxLCB1cmwyKSB7fX0pO1xyXG5cclxuLy9FdmVudCBIYW5kbGVyc1xyXG5cclxuY29uc3QgaGFzaENoYW5nZWQgPSBmdW5jdGlvbihvYmopIHtcclxuICBsZXQgc2VhcmNoVGVybUNoYW5nZWQ7XHJcbiAgY29uc3QgeyBuZXdNYXAgfSA9IG9iajtcclxuICBjb25zdCB7IG9sZE1hcCB9ID0gb2JqO1xyXG4gIGNvbnN0IG9sZFVpTW9kZSA9IG9sZE1hcFtIQVNIX0tFWV9VSU1PREVdO1xyXG4gIGNvbnN0IHVpTW9kZSA9IG5ld01hcFtIQVNIX0tFWV9VSU1PREVdO1xyXG5cclxuICBpZiAoSEFTSF9LRVlfUkhfU0VBUkNIIGluIG5ld01hcCkge1xyXG4gICAgY29uc3Qgc2VhcmNoVGVybSA9IG5ld01hcFtIQVNIX0tFWV9SSF9TRUFSQ0hdO1xyXG4gICAgc2VhcmNoVGVybUNoYW5nZWQgPSBzZWFyY2hUZXJtICE9PSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0VBUkNIRURfVEVSTScpKTtcclxuICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSwgc2VhcmNoVGVybSwge3N5bmM6IHRydWV9KTtcclxuICB9XHJcblxyXG4gIGlmICh1aU1vZGUgPT09ICdzZWFyY2gnKSB7XHJcbiAgICBpZiAoc2VhcmNoVGVybUNoYW5nZWQgJiYgd2luZG93LmdIb3N0KSB7XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfUVVFUllfU0VBUkNIX1JFU1VMVFMnKSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoIXVpTW9kZSB8fCBuZXdNYXBbSEFTSF9LRVlfVE9QSUNdKSB7XHJcbiAgICBsZXQgdG9waWNVcmw7XHJcbiAgICBjb25zdCBvbGRUb3BpY1VybCA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSk7XHJcbiAgICBpZiAoSEFTSF9LRVlfVE9QSUMgaW4gbmV3TWFwKSB7IHRvcGljVXJsID0gbmV3TWFwW0hBU0hfS0VZX1RPUElDXTsgfVxyXG4gICAgaWYgKCF0b3BpY1VybCkge1xyXG4gICAgICB0b3BpY1VybCA9IG9sZFRvcGljVXJsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZmVhdHVyZSA9IHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9GRUFUVVJFJykpO1xyXG4gICAgaWYgKCF0b3BpY1VybCAmJiAoIWZlYXR1cmUgfHwgZmVhdHVyZS5zaG93RGVmVG9waWMgIT09IGZhbHNlKSkge1xyXG4gICAgICB0b3BpY1VybCA9IHdpbmRvdy5nRGVmYXVsdFRvcGljICE9IG51bGwgPyB3aW5kb3cuZ0RlZmF1bHRUb3BpYy5zdWJzdHJpbmcoMSkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjaGFuZ2VkID0gdG9waWNVcmwgJiYgKCAodG9waWNVcmwgIT09IG9sZFRvcGljVXJsKSB8fFxyXG4gICAgICAgICAgICAgKG9sZFVpTW9kZSAhPT0gdWlNb2RlKSB8fFxyXG4gICAgICAgICAgICAgKG9sZE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdICE9PSBuZXdNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSkgfHxcclxuICAgICAgICAgICAgIChvbGRNYXBbSEFTSF9LRVlfUkhfVE9DSURdICE9PSBuZXdNYXBbSEFTSF9LRVlfUkhfVE9DSURdKSApO1xyXG4gICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgaWYgKF8uc3RyaXBCb29rbWFyayh0b3BpY1VybCkgIT09IF8uc3RyaXBCb29rbWFyayhvbGRUb3BpY1VybCkpIHtcclxuICAgICAgICBfLnJ1blRvcGljTG9hZGluZ0FuaW1hdGlvbih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RPUElDX0lOX0lGUkFNRScpLCB0b3BpY1VybCk7XHJcbiAgICAgIHdpbmRvdy5sb2FkVG9waWMoZ2V0VG9waWNVUkwobmV3TWFwLCB0b3BpY1VybCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVUlfTU9ERScpLCBuZXdNYXBbSEFTSF9LRVlfVUlNT0RFXSk7XHJcbn07XHJcblxyXG5jb25zdCB0b3BpY0NoYW5nZWQgPSBmdW5jdGlvbih0b3BpY1VybCkge1xyXG4gIGNvbnN0IGhhc2hNYXAgPSBfLmhhc2hQYXJhbXMoKTtcclxuICBpZiAodG9waWNVcmwgJiYgIWhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSkge1xyXG4gICAgY29uc3QgZGVjb2RlZFVSSSA9IGRlY29kZVVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGNvbnN0IHJlbFVybCA9IHdpbmRvdy5fZ2V0UmVsYXRpdmVGaWxlTmFtZShkZWNvZGVkVVJJLCB0b3BpY1VybCk7XHJcbiAgICBjb25zdCBvbGRVcmwgPSBoYXNoTWFwW0hBU0hfS0VZX1RPUElDXTtcclxuICAgIGlmICghb2xkVXJsIHx8IChfLmZpbGVQYXRoKHJlbFVybCkgIT09IF8uZmlsZVBhdGgob2xkVXJsKSkpIHtcclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgcmVsVXJsKTtcclxuICAgICAgcmV0dXJuIHNob3dUb3BpYyhyZWxVcmwsIGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBuYXZpZ2F0ZVRvVXJsID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgbGV0IHVybCA9IG9iai5hYnNVcmw7XHJcbiAgaWYgKF8uaXNSb290VXJsKCkpIHtcclxuICAgIGlmIChfLmlzVXJsQWxsb3dkSW5JZnJhbWUodXJsKSkge1xyXG4gICAgICB1cmwgPSBfLm1ha2VSZWxhdGl2ZVVybChfLmZpeFJlbGF0aXZlVXJsKHVybCkpO1xyXG4gICAgICBpZihfLmlzSG9tZVVybCh1cmwpKXtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybFxyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gdXJsICYmIF8uZmlsZVBhdGgodXJsKTtcclxuICAgICAgaWYgKGZpbGVOYW1lID09PSBjb25zdHMoJ1NUQVJUX0ZJTEVQQVRIJykpIHtcclxuICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKGZpbGVOYW1lLmxlbmd0aCk7IC8vbmV2ZXIgcGFzcyBzdGFydCBmaWxlIGluc2lkZSBpZnJhbWVcclxuICAgICAgfSBlbHNlIGlmICghdXJsKSB7XHJcbiAgICAgICAgdXJsID0gJyN1eCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICgodXJsWzBdID09PSAnIycpIHx8ICh1cmxbMF0gPT09ICc/JykpIHtcclxuICAgICAgICBjb25zdCBoYXNoTWFwID0gXy5oYXNoUGFyYW1zKF8uZXh0cmFjdEhhc2hTdHJpbmcodXJsKSk7XHJcbiAgICAgICAgaWYgKCEoSEFTSF9LRVlfVUlNT0RFIGluIGhhc2hNYXApKSB7IGhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSA9IG51bGw7IH1cclxuICAgICAgICByZXR1cm4gcXVldWVVcGRhdGVIYXNoTWFwKGhhc2hNYXAsIHRydWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHVybCkge1xyXG4gICAgICAgIHJldHVybiBzaG93VG9waWModXJsLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHNob3dOb25Ub3BpYyh1cmwsIHRydWUpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAoIV8uaXNSb290VXJsKHVybCkpIHtcclxuICAgICAgbGV0IHBhcmFtcywgcmVsVXJsO1xyXG4gICAgICBjb25zdCByb290VXJsID0gXy5nZXRSb290VXJsKCk7XHJcbiAgICAgIGlmIChfLmlzRXh0ZXJuYWxVcmwodXJsKSkge1xyXG4gICAgICAgIHJlbFVybCA9IHVybDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwYXJhbXMgPSBfLmdldFBhcmFtc0ZvclJvb3QodXJsKTtcclxuICAgICAgICByZWxVcmwgPSBfLmZpeFJlbGF0aXZlVXJsKF8ubWFrZVJlbGF0aXZlUGF0aCh1cmwsIHJvb3RVcmwpKTtcclxuICAgICAgfVxyXG4gICAgICB1cmwgPSBgJHtyb290VXJsfSR7cGFyYW1zfSN0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlbFVybCl9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9XSURHRVRfTE9BREVEJyksIGZ1bmN0aW9uKCkge1xyXG4gIF8uYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ2NsaWNrJywgXy5ob29rQ2xpY2spO1xyXG5cclxuICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfSEFTSF9DSEFOR0UnKSwgaGFzaENoYW5nZWQpO1xyXG5cclxuICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfVE9QSUNfVVJMJyksIHRvcGljQ2hhbmdlZCk7XHJcblxyXG4gIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9OQVZJR0FURV9UT19VUkwnKSwgbmF2aWdhdGVUb1VybCk7XHJcblxyXG4gIC8vIGNhbGwgdG8gdXBkYXRlIG9sZCBsYXlvdXQgc3BlY2lmaWMgdmFyaWFibGVzXHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RPUElDX0lOX0lGUkFNRScpLCBmdW5jdGlvbih0b3BpY1VybCkge1xyXG4gICAgaWYgKGAke3dpbmRvdy5nSG9zdH0ke3dpbmRvdy5nSG9zdFBhdGh9YCAhPT0gJy8nKSB7IC8vIHdhaXQgdG8gcmVzb2x2ZSBnSG9zdFBhdGhcclxuICAgICAgaWYgKHdpbmRvdy5zZXRUb3BpYykgeyAod2luZG93LnNldFRvcGljKSgpOyB9XHJcbiAgICAgIGlmICh3aW5kb3cuY2hhbmdlVG9waWNMaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5jaGFuZ2VUb3BpY0xpbmsoZG9jdW1lbnQubG9jYXRpb24udG9TdHJpbmcoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1RPUElDX0xPQURFRCcpLCAoKSA9PiBfLnJ1blRvcGljTG9hZGluZ0FuaW1hdGlvbihmYWxzZSkpO1xyXG5cclxuICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX0lOU0lERV9JRlJBTUVfRE9NX0NPTlRFTlRMT0FERUQnKSwgKCkgPT4gXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24oZmFsc2UpKTtcclxufSk7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcbmxldCB7IGh0dHAgfSA9IHJoO1xyXG5cclxuXHJcbnZhciBHbG9zc2FyeUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IGVudHJ5cyA9IHVuZGVmaW5lZDtcclxuICBHbG9zc2FyeUNvbnRyb2xsZXIgPSBjbGFzcyBHbG9zc2FyeUNvbnRyb2xsZXIgZXh0ZW5kcyByaC5OYXZDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcbiAgXHJcbiAgICAgIGVudHJ5cyA9ICdlbnRyeXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0KSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICB0aGlzLmNodW5rQ291bnQgPSAwO1xyXG4gICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgdGhpcy5rZXlzID0gJyc7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgdGhpcy5sb2FkTmF2RGF0YSgnZ2xvJyk7XHJcbiAgICAgIHRoaXMuZmlsdGVyID0gJyc7XHJcbiAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKCdzaG93Jywge30pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEVsZW1lbnQoZWxlbWVudHMsIGxpc3QpIHtcclxuICAgICAgcmV0dXJuICgoKSA9PiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIF8uZWFjaChlbGVtZW50c1tlbnRyeXNdLCAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9va3VwKGxpc3QsIGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGlzdC5wdXNoKGVsZW1lbnQpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaCh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBleGlzdHMobmFtZSkge1xyXG4gICAgICBsZXQgY2ggPSB0aGlzLmFscGhhVGV4dChuYW1lKTtcclxuICAgICAgaWYgKHRoaXMuYWxocGFiZXQuaW5kZXhPZihjaCkgPiAtMSkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICB0aGlzLmFsaHBhYmV0ICs9IGNoO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaWx0ZXJlZChuYW1lLCBtb2RlbEtleSkge1xyXG4gICAgICBsZXQgZmlsdGVyID0gbW9kZWxLZXkgPyBtb2RlbC5nZXQobW9kZWxLZXkpIDogdGhpcy5maWx0ZXI7XHJcbiAgICAgIHJldHVybiBmaWx0ZXIgJiZcclxuICAgICAgIChuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIudG9Mb2NhbGVMb3dlckNhc2UoKSkgPT09IC0xKTtcclxuICAgIH1cclxuXHJcbiAgICBhbHBoYVRleHQobmFtZSkge1xyXG4gICAgICByZXR1cm4gbmFtZS50b1VwcGVyQ2FzZSgpLmNoYXJBdCgwKTtcclxuICAgIH1cclxuXHJcbiAgICBmaWx0ZXJHbG8odmFsdWUpIHtcclxuICAgICAgdGhpcy5maWx0ZXIgPSB2YWx1ZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xyXG4gICAgICB0aGlzLmFsaHBhYmV0ID0gJyc7XHJcbiAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnUFJPSkVDVF9HTE9TU0FSWV9EQVRBJyksXHJcbiAgICAgICBtb2RlbC5nZXQoY29uc3RzKCdQUk9KRUNUX0dMT1NTQVJZX0RBVEEnKSkpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgR2xvc3NhcnlDb250cm9sbGVyLmluaXRDbGFzcygpO1xyXG4gIHJldHVybiBHbG9zc2FyeUNvbnRyb2xsZXI7XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0dsb3NzYXJ5Q29udHJvbGxlcicsIEdsb3NzYXJ5Q29udHJvbGxlcik7IiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgbW9kZWwgfSA9IHJoO1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgaHR0cCB9ID0gcmg7XHJcbmxldCB7IHJocyB9ID0gcmg7XHJcbmxldCB0b3BpY3MgPSAndG9waWNzJztcclxuXHJcblxyXG5jbGFzcyBOYXZDb250cm9sbGVyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMudXBkYXRlRGF0YSA9IHRoaXMudXBkYXRlRGF0YS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgbG9va3VwKGNoaWxkcmVuLCBrZXkpIHtcclxuICAgIGxldCBlbGVtZW50O1xyXG4gICAgaWYgKChjaGlsZHJlbiAhPSBudWxsKSAmJiAoa2V5ICE9IG51bGwpKSB7XHJcbiAgICAgIF8uYW55KGNoaWxkcmVuLCAoY2hpbGQpID0+ICB7XHJcbiAgICAgICAgaWYgKGNoaWxkICE9IG51bGwpIHtcclxuICAgICAgICAgIGlmICgoa2V5LnR5cGUgPT09IGNoaWxkLnR5cGUpICYmIChrZXkubmFtZSA9PT0gY2hpbGQubmFtZSkgJiZcclxuICAgICAgICAgIF8uaXNFcXVhbChrZXkudXJsLCBjaGlsZC51cmwpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBjaGlsZDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBlbGVtZW50ICE9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0aGlzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgc29ydChhcnJheSkge1xyXG4gICAgcmV0dXJuIGFycmF5LnNvcnQoKGZpcnN0LCBzZWNvbmQpID0+IHdpbmRvdy5jb21wYXJlKGZpcnN0Lm5hbWUsIHNlY29uZC5uYW1lKSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVEYXRhKGNvbnN0S2V5LCBwcm9qZWN0VXJsKSB7XHJcbiAgICBsZXQgY3VyRGF0YSA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSkgfHwgW107XHJcbiAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RFTVBfREFUQScpKTtcclxuICAgIHRoaXMuYWRkRWxlbWVudChjdXJEYXRhLCB0aGlzLmRhdGEsIHByb2plY3RVcmwsIHRoaXMua2V5cyk7XHJcbiAgICBpZiAoKC0tdGhpcy5jaHVua0NvdW50ID09PSAwKSAmJiAodGhpcy5jb3VudCA9PT0gMCkpIHtcclxuICAgICAgdGhpcy5zb3J0KHRoaXMuZGF0YSk7XHJcbiAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cyhjb25zdEtleSksIHRoaXMuZGF0YSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRDaHVua0RhdGEocHJvamVjdFVybCwga2V5KSB7XHJcbiAgICB0aGlzLmNvdW50LS07XHJcbiAgICBsZXQgYXJyID0gX19ndWFyZF9fKG1vZGVsLmdldChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSksIHggPT4geFsnY2h1bmtpbmZvcyddKSB8fCBbXTtcclxuICAgIHRoaXMuY2h1bmtDb3VudCArPSBhcnIubGVuZ3RoO1xyXG4gICAgcmV0dXJuIF8uZWFjaChhcnIsIGZ1bmN0aW9uKGNodW5rKSB7XHJcbiAgICAgIGlmIChwcm9qZWN0VXJsKSB7IHByb2plY3RVcmwgPSBfLmVuc3VyZVNsYXNoKHByb2plY3RVcmwpOyB9XHJcbiAgICAgIHJldHVybiBfLmxvYWRTY3JpcHQoYCR7cHJvamVjdFVybH13aHhkYXRhLyR7Y2h1bmsubm9kZX0ubmV3LmpzYCxcclxuICAgICAgICBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlRGF0YShrZXksIHByb2plY3RVcmwpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgICwgdGhpcyk7XHJcbiAgfVxyXG5cclxuICBsb2FkTmF2RGF0YSh0eXBlKSB7XHJcbiAgICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCBsaXN0ID0+IHtcclxuICAgICAgdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICB0aGlzLmNvdW50ICs9IGxpc3QubGVuZ3RoO1xyXG4gICAgICByZXR1cm4gXy5lYWNoKGxpc3QsIGZ1bmN0aW9uKHByb2plY3RVcmwpIHtcclxuICAgICAgICBpZiAocHJvamVjdFVybCkgeyBwcm9qZWN0VXJsID0gXy5lbnN1cmVTbGFzaChwcm9qZWN0VXJsKTsgfVxyXG4gICAgICAgIHJldHVybiBfLmxvYWRTY3JpcHQoYCR7cHJvamVjdFVybH13aHhkYXRhL1xcXHJcbiR7dHlwZSA9PT0gJ25keCcgPyAnaWR4JyA6ICdnbG8nfS5uZXcuanNgLCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2h1bmtEYXRhKHByb2plY3RVcmwsIHR5cGUgPT09ICduZHgnID8gJ1BST0pFQ1RfSU5ERVhfREFUQSdcclxuICAgICAgICAgIDogJ1BST0pFQ1RfR0xPU1NBUllfREFUQSdcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLCB0aGlzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxucmguTmF2Q29udHJvbGxlciA9IE5hdkNvbnRyb2xsZXI7XHJcblxyXG52YXIgSW5kZXhDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBkZWZQcm9qZWN0ID0gdW5kZWZpbmVkO1xyXG4gIEluZGV4Q29udHJvbGxlciA9IGNsYXNzIEluZGV4Q29udHJvbGxlciBleHRlbmRzIHJoLk5hdkNvbnRyb2xsZXIge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuICAgICAgZGVmUHJvamVjdCA9ICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0KSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICB0aGlzLmNodW5rQ291bnQgPSAwO1xyXG4gICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICB0aGlzLmZpbHRlciA9ICcnO1xyXG4gICAgICB0aGlzLmtleXMgPSAna2V5cyc7XHJcbiAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG5cclxuICAgICAgbW9kZWwuc3Vic2NyaWJlT25jZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkTmF2RGF0YSgnbmR4Jyk7XHJcbiAgICAgICAgKHRoaXMuZ2V0SW5kZXhEYXRhKSgpO1xyXG4gICAgICAgIHJldHVybiBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfSU5ERVhfRklMVEVSJyksICgpID0+IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmFsaHBhYmV0ID0gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhZGRFbGVtZW50KGVsZW1lbnQsIGxpc3QsIHByb2plY3RVcmwsIGRhdGEpIHtcclxuICAgICAgaWYgKGVsZW1lbnRbZGF0YV0gIT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiAoKCkgPT4ge1xyXG4gICAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgXy5lYWNoKGVsZW1lbnRbZGF0YV0sIChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQgIT0gbnVsbCkge3ZhciBleGlzdGluZztcclxuXHJcbiAgICAgICAgICAgICAgaWYgKCEoZXhpc3RpbmcgPSB0aGlzLmxvb2t1cChsaXN0LCBjaGlsZCkpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqID0ge3R5cGU6IGNoaWxkLnR5cGUsIG5hbWU6IGNoaWxkLm5hbWV9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkWydkYXRhLXJodGFncyddKSB7XHJcbiAgICAgICAgICAgICAgICAgIG9ialsnZGF0YS1yaHRhZ3MnXSA9IGAke2NoaWxkWydkYXRhLXJodGFncyddfSske3Byb2plY3RVcmx9YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghY2hpbGQudXJsKSB7IG9ialt0b3BpY3NdID0gW107IH1cclxuICAgICAgICAgICAgICAgIGxldCByZWxVcmwgPSBfLm1ha2VSZWxhdGl2ZVVybChgJHtwcm9qZWN0VXJsfWAsIGRlZlByb2plY3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLnVybCAhPSBudWxsKSB7IG9iai51cmwgPSBgJHtlbmNvZGVVUkkocmVsVXJsKX0ke2NoaWxkLnVybH1gOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKGNoaWxkLnVybCA9PSBudWxsKSkgeyBvYmpbdGhpcy5rZXlzXSA9IFtdOyB9XHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2gob2JqKTtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gbGlzdFtsaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoY2hpbGQsIGV4aXN0aW5nW3RoaXMua2V5c10sIHByb2plY3RVcmwsIHRoaXMua2V5cyk7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5hZGRFbGVtZW50KGNoaWxkLCBleGlzdGluZ1t0b3BpY3NdLCBwcm9qZWN0VXJsLCB0b3BpY3MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc2hvd0l0ZW0obmFtZSkge1xyXG4gICAgICBsZXQgZmlsdGVyID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX0lOREVYX0ZJTFRFUicpKTtcclxuICAgICAgcmV0dXJuICFmaWx0ZXIgfHxcclxuICAgICAgIChuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIudG9Mb2NhbGVMb3dlckNhc2UoKSkgIT09IC0xKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q2F0ZWdvcnkobmFtZSwgbGV2ZWwpIHtcclxuICAgICAgaWYgKGxldmVsID4gMCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgbGV0IGNoID0gdGhpcy5hbHBoYVRleHQobmFtZSk7XHJcbiAgICAgIGlmICh0aGlzLmFsaHBhYmV0LmluZGV4T2YoY2gpID4gLTEpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgKz0gY2g7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dOZXh0TGV2ZWwobm9kZSkge1xyXG4gICAgICBsZXQgaWQgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleGlkJyk7XHJcbiAgICAgIGxldCBvbGQgPSB0aGlzLndpZGdldC5nZXQoYHNob3cuJHtpZH1gKTtcclxuICAgICAgbGV0IGNoaWxkRGF0YSA9IHtbaWRdOiAhb2xkfTtcclxuICAgICAgd2hpbGUgKGlkKSB7XHJcbiAgICAgICAgaWQgPSBpZC5zdWJzdHIoMCwgaWQubGFzdEluZGV4T2YoJ18nKSk7XHJcbiAgICAgICAgY2hpbGREYXRhW2lkXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ3Nob3cnLCBjaGlsZERhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIGFscGhhVGV4dChuYW1lKSB7XHJcbiAgICAgIHJldHVybiBuYW1lLnRvVXBwZXJDYXNlKCkuY2hhckF0KDApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluZGV4RGF0YSgpIHtcclxuICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgbGV0IGJhc2VVcmwgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpKTtcclxuICAgICAgICAgIGxldCBob3N0ID0gZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luO1xyXG4gICAgICAgICAgbGV0IGJhc2VDb250ZXh0ID0gYmFzZVVybC5zdWJzdHIoaG9zdC5sZW5ndGgpO1xyXG4gICAgICAgICAgbGV0IHBhcmVudFBhdGggPSBfLnBhcmVudFBhdGgoXy5maWxlUGF0aChfLmdldFJvb3RVcmwoKSkpO1xyXG4gICAgICAgICAgaWYgKGJhc2VDb250ZXh0ICYmICFfLmlzRW1wdHlTdHJpbmcoYmFzZUNvbnRleHQpKSB7XHJcbiAgICAgICAgICAgIGxldCBoYXNoU3RyaW5nID0gXy5tYXBUb0VuY29kZWRTdHJpbmcoXy5leHRlbmQoXy5hZGRQYXRoTmFtZUtleSh7YXJlYTogcmhzLmFyZWEoKSxcclxuICAgICAgICAgICAgcHJqOiByaHMucHJvamVjdCgpLCB0eXBlOiAocmhzLnR5cGUpKCksIGFndDogJ25keCcsIG1ncjogJ2FnbSdcclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBodHRwLmdldChgJHtiYXNlQ29udGV4dH0/JHtoYXNoU3RyaW5nfWApLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTtcclxuICAgICAgICAgICAgICBsZXQgcm9vdFByanMgPSBbXTtcclxuICAgICAgICAgICAgICBsZXQgcHJvamVjdHMgPSBkYXRhLmFsbFByb2plY3RzO1xyXG4gICAgICAgICAgICAgIGxldCB7IG1hc3RlclByb2plY3RzIH0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgIGlmIChwcm9qZWN0cy5sZW5ndGgpIHsgcHJvamVjdHNbMF0gPSBfLmVuc3VyZVNsYXNoKHByb2plY3RzWzBdKTsgfVxyXG4gICAgICAgICAgICAgIGxldCBtYWtlbGlzdCA9IChwcm9qZWN0TGlzdCwgb3V0TGlzdCkgPT5cclxuICAgICAgICAgICAgICAgIF8uZWFjaChwcm9qZWN0TGlzdCwgaXRlbSA9PiBvdXRMaXN0LnB1c2goXy5tYWtlUmVsYXRpdmVVcmwoaXRlbSwgcHJvamVjdHNbMF0pKSlcclxuICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgbWFrZWxpc3QocHJvamVjdHMsIGxpc3QpO1xyXG4gICAgICAgICAgICAgIG1ha2VsaXN0KG1hc3RlclByb2plY3RzLCByb290UHJqcyk7XHJcbiAgICAgICAgICAgICAgdmFyIHVwZGF0ZUxpc3QgPSBmdW5jdGlvbihpdGVtLGluZGV4LGxpc3QpIHtcclxuICAgICAgICAgICAgICAgIGlmKF8uaXNFbXB0eVN0cmluZyhpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICBsaXN0W2luZGV4XSA9ICcuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIF8uZWFjaChsaXN0LCB1cGRhdGVMaXN0KTtcclxuICAgICAgICAgICAgICBfLmVhY2gocm9vdFByanMsIHVwZGF0ZUxpc3QpO1xyXG4gICAgICAgICAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksIGxpc3QpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX01BU1RFUl9QUk9KRUNUX0xJU1QnKSwgcm9vdFByanMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGlmIChyaC5fZGVidWcpIHsgcmV0dXJuIHJoLl9kKCd3YXJuJywgZXJyLm1lc3NhZ2UpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG4gIEluZGV4Q29udHJvbGxlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gSW5kZXhDb250cm9sbGVyO1xyXG59KSgpO1xyXG5cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0luZGV4Q29udHJvbGxlcicsIEluZGV4Q29udHJvbGxlcik7XHJcblxyXG5mdW5jdGlvbiBfX2d1YXJkX18odmFsdWUsIHRyYW5zZm9ybSkge1xyXG4gIHJldHVybiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSAhPT0gbnVsbCkgPyB0cmFuc2Zvcm0odmFsdWUpIDogdW5kZWZpbmVkO1xyXG59XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvbGliL3JoXCIpXHJcbmxldCBfID0gcmguXztcclxuXHJcbl8uZmluZEVkaXREaXN0ID0gKGZpcnN0LCBzZWNvbmQpID0+e1xyXG4gICAgaWYoZmlyc3QgPT0gc2Vjb25kKVxyXG4gICAgICByZXR1cm4gMDtcclxuICAgIGxldCBwcmV2RGlzdD1bXTtcclxuICAgIGxldCBkaXN0PVtdO1xyXG4gICAgZm9yKHZhciBpPTA7aTxzZWNvbmQubGVuZ3RoKzE7aSsrKVxyXG4gICAge1xyXG4gICAgICBwcmV2RGlzdC5wdXNoKGkpO1xyXG4gICAgICBkaXN0LnB1c2goMCk7ICAgICAgIC8vanVzdCB0byBjcmVhdGUgYSBhcnJheSBvZiBzaXplIHNlY29uZC5sZW5ndGgrMVxyXG4gICAgfVxyXG5cclxuICBmb3IodmFyIGk9MDtpPGZpcnN0Lmxlbmd0aDtpKyspXHJcbiAge1xyXG4gICAgZGlzdFswXT1pKzE7XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZWNvbmQubGVuZ3RoOyBqKyspXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGN1cnI7XHJcbiAgICAgICAgaWYoZmlyc3RbaV09PXNlY29uZFtqXSlcclxuICAgICAgICAgIGN1cnI9MDtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjdXJyPTE7XHJcblxyXG4gICAgICAgIGRpc3RbaiArIDFdID0gTWF0aC5taW4oZGlzdFtqXSArIDEsIHByZXZEaXN0W2ogKyAxXSArIDEsIHByZXZEaXN0W2pdICsgY3Vycik7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBwcmV2RGlzdC5sZW5ndGg7IGorKykgICAgICAgICBcclxuICAgICAgcHJldkRpc3Rbal0gPSBkaXN0W2pdO1xyXG4gIH0gICBcclxuICByZXR1cm4gIGRpc3RbZGlzdC5sZW5ndGgtMV1cclxufTsiLCJjb25zdCBiaW5kID0gKGZuLCBtZSkgPT4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9O1xyXG5cclxubGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL3NyYy9saWIvcmhcIilcclxubGV0IG5vZGVVdGlsID0gcmVxdWlyZSgnLi4vLi4vc3JjL3Jlc3BvbnNpdmVfaGVscC91dGlscy9ub2RlX3V0aWxzJylcclxubGV0IF8gPSByaC5fO1xyXG5sZXQgJCA9IHJoLiQ7XHJcbmxldCBtb2RlbCA9IHJoLm1vZGVsO1xyXG5sZXQgY29uc3RzID0gcmguY29uc3RzO1xyXG5sZXQgS0VZX1RPQ19EUklMTF9ET1dOID0gY29uc3RzKCdLRVlfVE9DX0RSSUxMX0RPV04nKTtcclxubGV0IEFOSU1fVElNRSA9IDcwMDtcclxubGV0IFN5bmNUb2M7XHJcbmxldCBUb2NDb250cm9sbGVyO1xyXG5cclxuU3luY1RvYyA9ICgoKCkgPT4ge1xyXG4gIGNsYXNzIFN5bmNUb2Mge1xyXG4gICAgc3luYyh0YywgaW5mbykge1xyXG4gICAgICBsZXQgbm9kZTtcclxuICAgICAgdGMudXBkYXRlQWN0aXZlQm9va0luZm8oMCwgJ18nKTtcclxuXHJcbiAgICAgIG5vZGUgPSB0Yy53aWRnZXQubm9kZTtcclxuICAgICAgLy90Yy51cGRhdGVCcmVhZGNydW1iSW5mbyh0Yy53aWRnZXQubm9kZSk7XHJcblxyXG4gICAgICB0aGlzLnJlc2V0KGluZm8pO1xyXG4gICAgICByZXR1cm4gdGhpcy5zeW5jVG9Qcm9qZWN0VG9jKHRjLCBub2RlLmNoaWxkcmVuLCAoKF90aGlzID0+IG5vZGVzID0+IF90aGlzLnN5bmNUb1RvY0l0ZW0odGMsIG5vZGVzKSkpKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldChpbmZvKSB7XHJcbiAgICAgIGxldCBpZHg7XHJcbiAgICAgIHRoaXMucGFyc2VUb2NJbmZvKGluZm8pO1xyXG4gICAgICBpZHggPSB0aGlzLm9yZGVyLmxhc3RJbmRleE9mKCdAJyk7XHJcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudE9yZGVyID0gaWR4ICE9PSAtMSA/IHRoaXMub3JkZXIuc3Vic3RyaW5nKDAsIGlkeCkgOiAnJztcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRvY0luZm8oaW5mbykge1xyXG4gICAgICBsZXQgcGF0aDtcclxuICAgICAgdGhpcy5vcmRlciA9IGluZm8uY2hpbGRPcmRlciB8fCAnJztcclxuICAgICAgcGF0aCA9IF8uc3BsaXRBbmRUcmltKGluZm8uY2hpbGRQcmVmaXgsICcuJyk7XHJcbiAgICAgIHRoaXMudG9jUGF0aCA9IF8ucmVkdWNlKHBhdGgsIChyZXN1bHQsIHByZWZpeCkgPT4ge1xyXG4gICAgICAgIGxldCBhcnIsIGJvb2tObztcclxuICAgICAgICBhcnIgPSBfLnNwbGl0QW5kVHJpbShwcmVmaXgsICdAJyk7XHJcbiAgICAgICAgaWYgKGJvb2tObyA9IGFyci5zaGlmdCgpKSB7XHJcbiAgICAgICAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgICAgICAgIGJvb2tObzogXy5wYXJzZUludChib29rTm8sIDApLFxyXG4gICAgICAgICAgICBvcmRlcjogYXJyLmxlbmd0aCA+IDAgPyBgQCR7YXJyLmpvaW4oJ0AnKX1gIDogJydcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9LCBbXSk7XHJcbiAgICAgIHBhdGggPSBfLnNwbGl0QW5kVHJpbShpbmZvLnRvcGljSUQgfHwgJzAnLCAnXycpO1xyXG4gICAgICB0aGlzLmJvb2tOb3MgPSBfLm1hcChwYXRoLnNoaWZ0KCkuc3BsaXQoJy4nKSwgaXRlbSA9PiBfLnBhcnNlSW50KGl0ZW0sIDApKTtcclxuICAgICAgcmV0dXJuIHRoaXMucGFnZU5vID0gXy5wYXJzZUludChwYXRoLnNoaWZ0KCksIDApO1xyXG4gICAgfVxyXG5cclxuICAgIHN5bmNUb1Byb2plY3RUb2ModGMsIG5vZGVzLCBzdWNjZXNzKSB7XHJcbiAgICAgIGxldCBjdXJCb29rTm8sIGlkeCwgcGF0aDtcclxuICAgICAgaWYgKHRoaXMudG9jUGF0aC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY3VyQm9va05vID0gMDtcclxuICAgICAgICBwYXRoID0gdGhpcy50b2NQYXRoLnNoaWZ0KCk7XHJcbiAgICAgICAgaWR4ID0gXy5maW5kSW5kZXgobm9kZXMsIGNoaWxkID0+IHtcclxuICAgICAgICAgIGxldCBjaGlsZE9yZGVyO1xyXG4gICAgICAgICAgY2hpbGRPcmRlciA9ICQuZGF0YXNldChjaGlsZCwgJ2NoaWxkb3JkZXInKSB8fCAnJztcclxuICAgICAgICAgIGlmIChjaGlsZE9yZGVyID09PSBwYXRoLm9yZGVyICYmIHRjLmlzQm9va05vZGUoY2hpbGQpKSB7XHJcbiAgICAgICAgICAgIGN1ckJvb2tObysrO1xyXG4gICAgICAgICAgICBpZiAoY3VyQm9va05vID09PSBwYXRoLmJvb2tObykge1xyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgIHJldHVybiB0Yy5vcGVuQm9vayhub2Rlc1tpZHhdLCB0cnVlLCAoKF90aGlzID0+ICgpID0+IF8uZGVmZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQsIGNoaWxkTm9kZXM7XHJcbiAgICAgICAgICAgIGNoaWxkID0gbm9kZXNbaWR4ICsgMV07XHJcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzID0gY2hpbGQuY2hpbGRyZW4gJiYgY2hpbGQuY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY1RvUHJvamVjdFRvYyh0YywgY2hpbGROb2Rlcy5jaGlsZHJlbiwgc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pKSkodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3Mobm9kZXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3luY1RvVG9jSXRlbSh0Yywgbm9kZXMsIHdhaXQpIHtcclxuICAgICAgbGV0IGN1ckJvb2tObywgY3VyUGFnZU5vLCBsYXN0Qm9va05vZGU7XHJcbiAgICAgIGlmICh3YWl0ID09IG51bGwpIHtcclxuICAgICAgICB3YWl0ID0gMTtcclxuICAgICAgfVxyXG4gICAgICBjdXJQYWdlTm8gPSAwO1xyXG4gICAgICBjdXJCb29rTm8gPSAwO1xyXG4gICAgICBsYXN0Qm9va05vZGUgPSBudWxsO1xyXG4gICAgICByZXR1cm4gXy5hbnkobm9kZXMsICgoX3RoaXMgPT4gY2hpbGQgPT4ge1xyXG4gICAgICAgIGxldCBib29rTm9kZSwgY2hpbGRPcmRlciwgaGFzQ2hpbGQsIHBhZ2VOb2RlLCB0b3BpY05vZGU7XHJcbiAgICAgICAgY2hpbGRPcmRlciA9ICQuZGF0YXNldChjaGlsZCwgJ2NoaWxkb3JkZXInKSB8fCAnJztcclxuICAgICAgICBpZiAoY2hpbGRPcmRlciAhPT0gX3RoaXMub3JkZXIpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRjLmlzQm9va05vZGUoY2hpbGQpKSB7XHJcbiAgICAgICAgICBib29rTm9kZSA9IGNoaWxkO1xyXG4gICAgICAgICAgbGFzdEJvb2tOb2RlID0gYm9va05vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChib29rTm9kZSkge1xyXG4gICAgICAgICAgY3VyQm9va05vKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfdGhpcy5ib29rTm9zWzBdICE9PSBjdXJCb29rTm8pIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRjLmlzUGFnZU5vZGUoY2hpbGQpKSB7XHJcbiAgICAgICAgICBwYWdlTm9kZSA9IGNoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFnZU5vZGUpIHtcclxuICAgICAgICAgIGN1clBhZ2VObysrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3RoaXMuYm9va05vcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgIGlmIChfdGhpcy5wYWdlTm8gPT09IDApIHtcclxuICAgICAgICAgICAgdG9waWNOb2RlID0gY2hpbGQ7XHJcbiAgICAgICAgICAgIGlmIChsYXN0Qm9va05vZGUpIHtcclxuICAgICAgICAgICAgICB0Yy5vcGVuQm9vayhsYXN0Qm9va05vZGUsIHRydWUsICgpID0+IHRjLnVwZGF0ZUJvb2tJbmZvKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2VOb2RlICYmIGN1clBhZ2VObyA9PT0gX3RoaXMucGFnZU5vKSB7XHJcbiAgICAgICAgICAgIHRvcGljTm9kZSA9IGNoaWxkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGMudXBkYXRlQm9va0luZm8oKTtcclxuICAgICAgICAgIGlmICh0b3BpY05vZGUpIHtcclxuICAgICAgICAgICAgdGMuc2VsZWN0TGluayh0b3BpY05vZGUsIHRydWUsIHdhaXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobGFzdEJvb2tOb2RlICYmIChoYXNDaGlsZCA9ICQuaGFzQ2xhc3MoY2hpbGQsICdjaGlsZCcpKSkge1xyXG4gICAgICAgICAgX3RoaXMuYm9va05vcy5zaGlmdCgpO1xyXG4gICAgICAgICAgdGMub3BlbkJvb2sobGFzdEJvb2tOb2RlLCB0cnVlLCAoKSA9PiBfLmRlZmVyKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGNoaWxkTm9kZXM7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzID0gY2hpbGQuY2hpbGRyZW4gJiYgY2hpbGQuY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY1RvVG9jSXRlbSh0YywgY2hpbGROb2Rlcy5jaGlsZHJlbiwgQU5JTV9USU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b3BpY05vZGUgIT0gbnVsbDtcclxuICAgICAgfSkpKHRoaXMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBTeW5jVG9jO1xyXG59KSkoKTtcclxuXHJcblRvY0NvbnRyb2xsZXIgPSAoKCgpID0+IHtcclxuICBsZXQgQUNUSVZFX0NMQVNTLCBDT0xMQVBTSU5HX0NMQVNTLCBFWFBBTkRFRF9DTEFTUywgRVhQQU5ESU5HX0NMQVNTLCBLRVlfQUNUSVZFX0JPT0tJRCwgS0VZX0FDVElWRV9CT09LX0xFVkVMLCBLRVlfQk9PS0lELCBLRVlfQk9PS19MRVZFTCwgS0VZX1NIT1dfQ0hJTEQsIEtFWV9UT0MsIExPQURJTkdfQk9PSywgU0VMRUNURURfQ0xBU1M7XHJcblxyXG4gIEVYUEFOREVEX0NMQVNTID0gJ2V4cGFuZGVkJztcclxuXHJcbiAgQUNUSVZFX0NMQVNTID0gJ2FjdGl2ZSc7XHJcblxyXG4gIENPTExBUFNJTkdfQ0xBU1MgPSAnY29sbGFwc2luZyc7XHJcblxyXG4gIEVYUEFORElOR19DTEFTUyA9ICdleHBhbmRpbmcnO1xyXG5cclxuICBMT0FESU5HX0JPT0sgPSAnbG9hZGluZy1ib29rJztcclxuXHJcbiAgU0VMRUNURURfQ0xBU1MgPSAnc2VsZWN0ZWQnO1xyXG5cclxuICBLRVlfU0hPV19DSElMRCA9ICdzaG93X2NoaWxkJztcclxuXHJcbiAgS0VZX0JPT0tJRCA9ICdib29raWQnO1xyXG5cclxuICBLRVlfQUNUSVZFX0JPT0tJRCA9ICdhY3RpdmVfYm9va2lkJztcclxuXHJcbiAgS0VZX0JPT0tfTEVWRUwgPSAnbGV2ZWwnO1xyXG5cclxuICBLRVlfQUNUSVZFX0JPT0tfTEVWRUwgPSAnYWN0aXZlX2xldmVsJztcclxuXHJcbiAgS0VZX1RPQyA9ICcucC50b2MnO1xyXG4gIGxldCBDVVJSRU5UX1RPQ19LRVkgPSAnY3VydG9jJywgVE9DX0lURU1fQVRUUiA9ICdkYXRhLXRvY2l0ZW0nO1xyXG5cclxuICBsZXQgS0VZX0JSRUFEQ1JVTUJTID0gY29uc3RzKCdLRVlfVE9DX0JSRUFEQ1JVTUJTJyk7XHJcblxyXG5cclxuICBjbGFzcyBUb2NDb250cm9sbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgICAgdGhpcy5zdWJzY3JpYmVUb3BpY0lEID0gYmluZCh0aGlzLnN1YnNjcmliZVRvcGljSUQsIHRoaXMpO1xyXG5cclxuICAgICAgdGhpcy5vbkNsaWNrID0gYmluZCh0aGlzLm9uQ2xpY2ssIHRoaXMpO1xyXG4gICAgICB0aGlzLnVwZGF0ZUJvb2tJbmZvID0gYmluZCh0aGlzLnVwZGF0ZUJvb2tJbmZvLCB0aGlzKTtcclxuICAgICAgdGhpcy5fZGF0YSA9IHt9O1xyXG4gICAgICB0aGlzLnByb2plY3RBYnNSZWYgPSBbXTtcclxuICAgICAgaWYgKHRoaXMuc3luY1RvYyA9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5zeW5jVG9jID0gbmV3IFN5bmNUb2M7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChLRVlfQk9PS19MRVZFTCwgMCk7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0JPT0tJRCwgJ18nKTtcclxuICAgICAgcmgubW9kZWwuc3Vic2NyaWJlKEtFWV9UT0MsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChDVVJSRU5UX1RPQ19LRVksIGRhdGEpO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ2N1cmxldmVsJywgMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLndpZGdldC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfVE9DX1NFTEVDVF9JVEVNJyksIHRoaXMuc2VsZWN0VG9jSXRlbS5iaW5kKHRoaXMpKTtcclxuICAgICAgbW9kZWwuc3Vic2NyaWJlT25jZShbY29uc3RzKCdFVlRfUFJPSkVDVF9MT0FERUQnKSwgY29uc3RzKCdLRVlfVE9DX09SREVSJyldLCAoKF90aGlzID0+ICgpID0+IHtcclxuICAgICAgICBpZiAobW9kZWwuZ2V0KGNvbnN0cygnS0VZX1BVQkxJU0hfTU9ERScpKSkge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLmdldFRPQ0RhdGEoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLmxvYWRUb2MoS0VZX1RPQywgJycsICgpID0+IHtcclxuICAgICAgICAgICAgX3RoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdFVlRfVE9DX0xPQURFRCcpLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIF8uZGVmZXIoKCkgPT4gX3RoaXMud2lkZ2V0LnN1YnNjcmliZShyaC5jb25zdHMoJ0tFWV9UT1BJQ19JRCcpLCBfdGhpcy5zdWJzY3JpYmVUb3BpY0lEKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwYW5kQm9vayhsZXZlbCwgaWQsIG5vZGUsIGl0ZW0pIHtcclxuICAgICAgdGhpcy5zZWxlY3RUb2NJdGVtKHsnaWQnOiBpZH0pO1xyXG4gICAgICBsZXQga2V5ID0gJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2RhdGEtaXRlbWtleScpO1xyXG4gICAgICByaC5tb2RlbC5wdWJsaXNoKCdFVlRfVE9DX0xPQURFRCcrJ2dvdG90YWInLFxyXG4gICAgICAgIHsndGFiJzogMCwgJ2tleSc6IGtleSwgJ2l0ZW0nOiBpdGVtfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQm9va0luZm8oKSB7XHJcbiAgICAgIGxldCBpZCwgbmV3TGV2ZWw7XHJcbiAgICAgIGlkID0gdGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfQk9PS0lEKTtcclxuICAgICAgaWYgKChpZCAhPSBudWxsKSAmJiBpZCAhPT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9CT09LSUQpKSB7XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChLRVlfQk9PS0lELCBpZCk7XHJcbiAgICAgIH1cclxuICAgICAgbmV3TGV2ZWwgPSB0aGlzLndpZGdldC5nZXQoS0VZX0FDVElWRV9CT09LX0xFVkVMKTtcclxuICAgICAgaWYgKChuZXdMZXZlbCAhPSBudWxsKSAmJiBuZXdMZXZlbCAhPT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9CT09LX0xFVkVMKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9CT09LX0xFVkVMLCBuZXdMZXZlbCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVBY3RpdmVCb29rSW5mbyhsZXZlbCwgaWQpIHtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX0JPT0tJRCwgaWQpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9CT09LX0xFVkVMLCBsZXZlbCk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgX2FkZEJvb2ttYXJrKG5vZGUpe1xyXG4gICAgICBsZXQgdGhhdCA9IHRoaXMudGhpcztcclxuICAgICAgaWYoIUFycmF5LmlzQXJyYXkodGhpcy5wYXRoKSB8fCB0aGlzLnBhdGgubGVuZ3RoID09PSAwKXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgaWYodGhhdC5pc1RPQ0l0ZW0obm9kZSkpe1xyXG4gICAgICAgIGlmKHRoaXMuY3VyckluZGV4ID09PSB0aGlzLnBhdGhbMF0pe1xyXG4gICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wYXRoLnNoaWZ0KCk7XHJcbiAgICAgICAgICB0aGlzLmN1cnJfcGF0aCArPSAodGhpcy5jdXJyX3BhdGggPT09IFwiXCIpPyBpbmRleC50b1N0cmluZygpIDogXCJfXCIgKyBpbmRleC50b1N0cmluZygpO1xyXG4gICAgICAgICAgbGV0IHRleHQgPSB0aGF0LmdldFRleHQobm9kZSk7XHJcbiAgICAgICAgICB0aGlzLmJvb2ttYXJrcy5wdXNoKHt0ZXh0OiB0ZXh0LCBwYXRoOiB0aGlzLmN1cnJfcGF0aCB9KTtcclxuICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgIC8vdHJhdmVyc2VDaGlsZCA9ZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLmN1cnJJbmRleCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgKi9cclxuICAgIGdldFRleHQobm9kZSl7XHJcbiAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50LnRyaW0oKTtcclxuICAgIH1cclxuICAgIF9nZXRQcmV2aW91c0l0ZW1Ob2RlKG5vZGUpe1xyXG4gICAgICBsZXQgcGlkID0gdGhpcy5waWQoJC5nZXRBdHRyaWJ1dGUobm9kZSwgJ2RhdGEtaXRlbWlkJykpXHJcbiAgICAgIHJldHVybiAkLmZpbmQodGhpcy53aWRnZXQubm9kZSwgJ1tkYXRhLWl0ZW1pZD1cXFwiJyArIHBpZCArJ1xcXCJdJylbMF1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCcmVhZGNydW1iSW5mbyhub2RlKXtcclxuICAgICAgbGV0ICRsZWFmbm9kZSA9IG5vZGU7XHJcbiAgICAgIGxldCAkbm9kZVxyXG4gICAgICBsZXQgYnJlYWRjcnVtYnMgPSBbXVxyXG4gICAgICBpZighdGhpcy5pc1RPQ0l0ZW0obm9kZSkpe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBicmVhZGNydW1icy5wdXNoKHRoaXMuX2NyZWF0ZUJyZWFkY3J1bWJJdGVtKCRsZWFmbm9kZSkpXHJcbiAgICAgIHdoaWxlKCRub2RlID0gdGhpcy5fZ2V0UHJldmlvdXNJdGVtTm9kZSgkbGVhZm5vZGUpKXtcclxuICAgICAgICBicmVhZGNydW1icy5wdXNoKHRoaXMuX2NyZWF0ZUJyZWFkY3J1bWJJdGVtKCRub2RlKSk7XHJcbiAgICAgICAgJGxlYWZub2RlID0gJG5vZGVcclxuICAgICAgfVxyXG4gICAgICBicmVhZGNydW1icy5yZXZlcnNlKCk7XHJcbiAgICAgIGlmKGJyZWFkY3J1bWJzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgIGJyZWFkY3J1bWJzW2JyZWFkY3J1bWJzLmxlbmd0aC0xXS5sYXN0Tm9kZSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWRjcnVtYnMuY3VybGV2ZWwgPSB0aGlzLndpZGdldC5nZXQoXCJjdXJsZXZlbFwiKTtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChLRVlfQlJFQURDUlVNQlMsIGJyZWFkY3J1bWJzKTtcclxuICAgIH1cclxuICAgIF9jcmVhdGVCcmVhZGNydW1iSXRlbShub2RlKXtcclxuICAgICAgbGV0IGxpbmtOb2RlID0gbm9kZVxyXG4gICAgICBpZighdGhpcy5oYXNUT0NJdGVtTGluayhub2RlKSl7XHJcbiAgICAgICAgbGlua05vZGUgPSB0aGlzLl9maW5kRmlyc3RMaW5rKG5vZGUpXHJcbiAgICAgIH1cclxuICAgICAgbGV0IHVybCA9IChsaW5rTm9kZSAmJiAoJC5nZXRBdHRyaWJ1dGUobGlua05vZGUsJ2hyZWYnKVxyXG4gICAgICAgIHx8ICQuZ2V0QXR0cmlidXRlKGxpbmtOb2RlLCdsaW5rJykpKVxyXG4gICAgICAgIHx8ICcjJztcclxuICAgICAgcmV0dXJuIHtpZDokLmdldEF0dHJpYnV0ZShub2RlLCdkYXRhLWl0ZW1pZCcpLFxyXG4gICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0VGV4dChub2RlKSxcclxuICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICBoYXNVcmw6IHRoaXMuaGFzVE9DSXRlbUxpbmsobm9kZSksXHJcbiAgICAgICAgICAgICAgbGFzdE5vZGU6ZmFsc2V9O1xyXG4gICAgfVxyXG4gICAgaXNUT0NJdGVtKG5vZGUpe1xyXG5cclxuICAgICAgcmV0dXJuICQubm9kZU5hbWUobm9kZSkgPT09ICdMSSdcclxuICAgICAgICB8fCAkLmdldEF0dHJpYnV0ZShub2RlLCBUT0NfSVRFTV9BVFRSKVxyXG4gICAgfVxyXG5cclxuICAgIF9maW5kRmlyc3RMaW5rKGJvb2tOb2RlKXtcclxuICAgICAgbGV0IGNvbnRleHQgPSB7dGhhdDp0aGlzfTtcclxuXHJcbiAgICAgIGxldCBub2RlID0gbm9kZVV0aWwucGFyZW50Tm9kZShib29rTm9kZSk7XHJcbiAgICAgIGNvbnRleHQuYm9va2lkID0gJC5nZXRBdHRyaWJ1dGUoYm9va05vZGUsICdkYXRhLWl0ZW1pZCcpXHJcbiAgICAgICQudHJhdmVyc2VOb2RlKG5vZGUsIHRoaXMuX2ZpbmRMaW5rRm4sIG51bGwsIG51bGwsIGNvbnRleHQpO1xyXG4gICAgICByZXR1cm4gY29udGV4dC5saW5rTm9kZVxyXG4gICAgfVxyXG4gICAgX2lzUGFyZW50VG9jSXRlbShub2RlKXtcclxuICAgICAgcmV0dXJuIHRoaXMuYm9va05vZGUgIT09IG5vZGUgJiYgdGhpcy50aGF0LmlzVE9DSXRlbShub2RlKVxyXG4gICAgfVxyXG5cclxuICAgIF9maW5kTGlua0ZuKG5vZGUpe1xyXG4gICAgICBsZXQgaWQgPSAkLmdldEF0dHJpYnV0ZShub2RlLCAnZGF0YS1pdGVtaWQnKVxyXG4gICAgICBpZihpZCA9PT0gdGhpcy5ib29raWQpe1xyXG4gICAgICAgIHRoaXMuYm9va0ZvdW5kID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5ib29rRm91bmQgJiYgdGhpcy50aGF0Lmhhc1RPQ0l0ZW1MaW5rKG5vZGUpICYmIHRoaXMubGlua05vZGUgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5saW5rTm9kZSA9IG5vZGU7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgbmV4dExldmVsKG5vZGUpIHtcclxuICAgICAgbGV0IGxldmVsO1xyXG4gICAgICBsZXZlbCA9IF8ucGFyc2VJbnQoJC5kYXRhc2V0KG5vZGUsICdpdGVtbGV2ZWwnKSwgMCk7XHJcbiAgICAgIGlmICgkLmhhc0NsYXNzKG5vZGUsIEVYUEFOREVEX0NMQVNTKSkge1xyXG4gICAgICAgIHJldHVybiBsZXZlbDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbGV2ZWwgKyAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljayhldmVudCkge1xyXG4gICAgICBsZXQgY2xpY2tOb2RlLCBoYXNMaW5rLCBub2RlLCB0b3BOb2RlO1xyXG4gICAgICB0b3BOb2RlID0gZXZlbnQuY3VycmVudFRhcmdldDtcclxuICAgICAgY2xpY2tOb2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICBoYXNMaW5rID0gdGhpcy5oYXNMaW5rKGNsaWNrTm9kZSk7XHJcbiAgICAgIG5vZGUgPSB0aGlzLmdldEl0ZW1Ob2RlKGNsaWNrTm9kZSwgdG9wTm9kZSk7XHJcbiAgICAgIGlmICh0aGlzLmlzQm9va05vZGUobm9kZSkpIHtcclxuICAgICAgICBpZiAoIShoYXNMaW5rICYmIHRoaXMuc2VsZWN0ZWROb2RlICE9PSBub2RlICYmIHRoaXMuaXNPcGVuQm9vayhub2RlKSkpIHtcclxuICAgICAgICAgIHRoaXMudG9nZ2xlQm9vayhub2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZUJyZWFkY3J1bWJJbmZvKG5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCEoIWhhc0xpbmsgfHwgdGhpcy5pc1VybE5vZGUobm9kZSkgJiYgdGhpcy5oYXNFeHRlcm5hbExpbmsoY2xpY2tOb2RlKSkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RMaW5rKG5vZGUsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZWxlY3RMaW5rKG5vZGUsIHNjcm9sbEludG9WaWV3LCB3YWl0KSB7XHJcbiAgICAgIGlmICh3YWl0ID09IG51bGwpIHtcclxuICAgICAgICB3YWl0ID0gQU5JTV9USU1FO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm9kZSkge1xyXG4gICAgICAgICQucmVtb3ZlQ2xhc3ModGhpcy5zZWxlY3RlZE5vZGUsIFNFTEVDVEVEX0NMQVNTKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2Nyb2xsSW50b1ZpZXcgJiYgdGhpcy5zZWxlY3RlZE5vZGUgIT09IG5vZGUpIHtcclxuICAgICAgICBfLmRlbGF5KCgoKSA9PiBub2RlLnNjcm9sbEludG9WaWV3KGZhbHNlKSksIHdhaXQpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWROb2RlID0gbm9kZTtcclxuICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUJyZWFkY3J1bWJJbmZvKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiAkLmFkZENsYXNzKG5vZGUsIFNFTEVDVEVEX0NMQVNTKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdFRvY0l0ZW0odG9jT2JqKXtcclxuICAgICAgbGV0IGlkID0gdG9jT2JqLmlkICsgJ18wJ1xyXG4gICAgICBpZihpZCl7XHJcbiAgICAgICAgbGV0IGNoaWxkRGF0YSA9IHt9LCBsZXZlbCA9IC0xO1xyXG4gICAgICAgIHdoaWxlKGlkKXtcclxuICAgICAgICAgIGxldmVsKys7XHJcbiAgICAgICAgICBjaGlsZERhdGFbaWRdID0gdHJ1ZTtcclxuICAgICAgICAgIGlkID0gaWQuc3Vic3RyKDAsIGlkLmxhc3RJbmRleE9mKCdfJykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwic2hvd19jaGlsZFwiLCBjaGlsZERhdGEpO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goXCJjdXJsZXZlbFwiLCBsZXZlbCk7XHJcbiAgICAgICAgaWYodG9jT2JqLnVybClcclxuICAgICAgICAgIHJoLm1vZGVsLnB1Ymxpc2goJ0VWVF9UT0NfTE9BREVEJysnZ290b3RhYicsXHJcbiAgICAgICAgICAgICAgeyd0YWInOiAwLCAnaXRlbSc6IHsndXJsJzogdG9jT2JqLnVybH19KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1Ob2RlKG5vZGUsIHRvcE5vZGUpIHtcclxuICAgICAgcmV0dXJuIF8uZmluZFBhcmVudE5vZGUobm9kZSwgdG9wTm9kZSwgdGhpcy5pc1RPQ0l0ZW0pO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2hpbGRJdGVtTm9kZShub2RlLCBpbmRleCkge1xyXG4gICAgICByZXR1cm4gJC5maW5kKG5vZGUsICBub2RlID0+ICQubm9kZU5hbWUobm9kZSkgPT09ICdMSSdcclxuICAgICAgICB8fCAkLmdldEF0dHJpYnV0ZShub2RlLCBUT0NfSVRFTV9BVFRSKSk7XHJcbiAgICB9XHJcbiAgICBoYXNUT0NJdGVtTGluayhub2RlKXtcclxuICAgICAgbGV0IGhyZWYgPSAkLmdldEF0dHJpYnV0ZShub2RlLCAnZGF0YS1oYXNsaW5rJyk7XHJcbiAgICAgIHJldHVybiBocmVmID09PSAndHJ1ZSc7XHJcbiAgICB9XHJcbiAgICBoYXNMaW5rKG5vZGUpIHtcclxuICAgICAgbGV0IGhyZWY7XHJcbiAgICAgIGhyZWYgPSAkLmdldEF0dHJpYnV0ZShub2RlLCAnaHJlZicpO1xyXG4gICAgICByZXR1cm4gaHJlZiAmJiBocmVmICE9PSAnIyc7XHJcbiAgICB9XHJcblxyXG4gICAgaXNCb29rTm9kZShub2RlKSB7XHJcbiAgICAgIHJldHVybiAkLmhhc0NsYXNzKG5vZGUsICdib29rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNUb3BpY05vZGUobm9kZSkge1xyXG4gICAgICByZXR1cm4gJC5oYXNDbGFzcyhub2RlLCAnaXRlbScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVXJsTm9kZShub2RlKSB7XHJcbiAgICAgIHJldHVybiAkLmhhc0NsYXNzKG5vZGUsICd1cmwnKTtcclxuICAgIH1cclxuXHJcbiAgICBpc1BhZ2VOb2RlKG5vZGUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaXNUb3BpY05vZGUobm9kZSkgfHwgdGhpcy5pc1VybE5vZGUobm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNPcGVuQm9vayhub2RlKSB7XHJcbiAgICAgIGlmICh0aGlzLndpZGdldC5nZXQoS0VZX1RPQ19EUklMTF9ET1dOKSkge1xyXG4gICAgICAgIHJldHVybiAkLmhhc0NsYXNzKG5vZGUsIEFDVElWRV9DTEFTUyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICQuaGFzQ2xhc3Mobm9kZSwgRVhQQU5ERURfQ0xBU1MpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRXh0ZXJuYWxMaW5rKG5vZGUpIHtcclxuICAgICAgbGV0IGhyZWY7XHJcbiAgICAgIGhyZWYgPSAkLmdldEF0dHJpYnV0ZShub2RlLCAnaHJlZicpO1xyXG4gICAgICBpZiAoIShocmVmICYmICFfLmlzUmVsYXRpdmVVcmwoaHJlZikpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAhXy5pc1VybEFsbG93ZEluSWZyYW1lKGhyZWYpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJvb2tOb2RlKG5vZGUsIHRvcE5vZGUpIHtcclxuICAgICAgbGV0IGl0ZW1Ob2RlO1xyXG4gICAgICBpdGVtTm9kZSA9IHRoaXMuZ2V0SXRlbU5vZGUobm9kZSwgdG9wTm9kZSk7XHJcbiAgICAgIGlmICh0aGlzLmlzQm9va05vZGUoaXRlbU5vZGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1Ob2RlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYW5pbWF0ZUNvbGxhcHNlKGJvb2tOb2RlKSB7XHJcbiAgICAgIHJldHVybiBfLmVhY2goW2Jvb2tOb2RlLCBib29rTm9kZS5uZXh0RWxlbWVudFNpYmxpbmddLCBub2RlID0+IHtcclxuICAgICAgICAkLmFkZENsYXNzKG5vZGUsIENPTExBUFNJTkdfQ0xBU1MpO1xyXG4gICAgICAgIHJldHVybiBfLmRlbGF5KCgpID0+ICQucmVtb3ZlQ2xhc3Mobm9kZSwgQ09MTEFQU0lOR19DTEFTUyksIEFOSU1fVElNRSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGVFeHBhbmQoYm9va05vZGUpIHtcclxuICAgICAgcmV0dXJuIF8uZWFjaChbYm9va05vZGUsIGJvb2tOb2RlLm5leHRFbGVtZW50U2libGluZ10sIG5vZGUgPT4ge1xyXG4gICAgICAgICQuYWRkQ2xhc3Mobm9kZSwgRVhQQU5ESU5HX0NMQVNTKTtcclxuICAgICAgICByZXR1cm4gXy5kZWxheSgoKSA9PiAkLnJlbW92ZUNsYXNzKG5vZGUsIEVYUEFORElOR19DTEFTUyksIEFOSU1fVElNRSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUJvb2soYm9va05vZGUsIHNjcm9sbEludG9WaWV3KSB7XHJcbiAgICAgIGlmIChzY3JvbGxJbnRvVmlldyA9PSBudWxsKSB7XHJcbiAgICAgICAgc2Nyb2xsSW50b1ZpZXcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmlzT3BlbkJvb2soYm9va05vZGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VCb29rKGJvb2tOb2RlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVuQm9vayhib29rTm9kZSwgc2Nyb2xsSW50b1ZpZXcpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VCb29rKG5vZGUpIHtcclxuICAgICAgbGV0IGlkLCBrZXlTaG93O1xyXG4gICAgICBpZCA9ICQuZGF0YXNldChub2RlLCAnaXRlbWlkJyk7XHJcbiAgICAgIGtleVNob3cgPSBgJHtLRVlfU0hPV19DSElMRH0ke2lkfWA7XHJcbiAgICAgIGlmIChmYWxzZSAhPT0gdGhpcy53aWRnZXQuZ2V0KGtleVNob3cpKSB7XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChrZXlTaG93LCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51cGRhdGVBY3RpdmVCb29rSW5mbyh0aGlzLm5leHRMZXZlbChub2RlKSwgdGhpcy5waWQoaWQpKTtcclxuICAgICAgdGhpcy51cGRhdGVCb29rSW5mbygpO1xyXG4gICAgICBpZiAoJC5oYXNDbGFzcyhub2RlLCBFWFBBTkRFRF9DTEFTUykpIHtcclxuICAgICAgICAkLnJlbW92ZUNsYXNzKG5vZGUsIEVYUEFOREVEX0NMQVNTKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRlQ29sbGFwc2Uobm9kZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuQm9vayhub2RlLCBzY3JvbGxJbnRvVmlldywgc3VjY2Vzcykge1xyXG4gICAgICBsZXQgY2hpbGRPcmRlciwgaWQsIGtleSwga2V5U2hvdztcclxuICAgICAgaWYgKHN1Y2Nlc3MgPT0gbnVsbCkge1xyXG4gICAgICAgIHN1Y2Nlc3MgPSB0aGlzLnVwZGF0ZUJvb2tJbmZvO1xyXG4gICAgICB9XHJcbiAgICAgIGtleSA9ICQuZGF0YXNldChub2RlLCAnaXRlbWtleScpO1xyXG4gICAgICBpZCA9ICQuZGF0YXNldChub2RlLCAnaXRlbWlkJyk7XHJcbiAgICAgIGNoaWxkT3JkZXIgPSAkLmRhdGFzZXQobm9kZSwgJ2NoaWxkb3JkZXInKTtcclxuICAgICAga2V5U2hvdyA9IGAke0tFWV9TSE9XX0NISUxEfSR7aWR9YDtcclxuICAgICAgaWYgKHRydWUgIT09IHRoaXMud2lkZ2V0LmdldChrZXlTaG93KSkge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goa2V5U2hvdywgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy51cGRhdGVBY3RpdmVCb29rSW5mbyh0aGlzLm5leHRMZXZlbChub2RlKSwgaWQpO1xyXG4gICAgICBpZiAodGhpcy53aWRnZXQuZ2V0KGtleSkpIHtcclxuICAgICAgICBpZiAoISQuaGFzQ2xhc3Mobm9kZSwgRVhQQU5ERURfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAkLmFkZENsYXNzKG5vZGUsIEVYUEFOREVEX0NMQVNTKTtcclxuICAgICAgICAgIHRoaXMuYW5pbWF0ZUV4cGFuZChub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkLmFkZENsYXNzKG5vZGUsIExPQURJTkdfQk9PSyk7XHJcbiAgICAgICAgaWYgKHNjcm9sbEludG9WaWV3KSB7XHJcbiAgICAgICAgICBub2RlLnNjcm9sbEludG9WaWV3KGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFRvYyhrZXksIGNoaWxkT3JkZXIsICgoX3RoaXMgPT4gKCkgPT4ge1xyXG4gICAgICAgICAgJC5yZW1vdmVDbGFzcyhub2RlLCBMT0FESU5HX0JPT0spO1xyXG4gICAgICAgICAgJC5hZGRDbGFzcyhub2RlLCBFWFBBTkRFRF9DTEFTUyk7XHJcbiAgICAgICAgICBfdGhpcy5hbmltYXRlRXhwYW5kKG5vZGUpO1xyXG4gICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKTtcclxuICAgICAgICB9KSkodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXh0cmFjdFRlbXBEYXRhKCkge1xyXG4gICAgICBsZXQgdGVtcEl0ZW1zO1xyXG4gICAgICB0ZW1wSXRlbXMgPSB0aGlzLndpZGdldC5nZXQocmguY29uc3RzKCdLRVlfVEVNUF9EQVRBJykpO1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnS0VZX1RFTVBfREFUQScpKTtcclxuICAgICAgcmV0dXJuIHRlbXBJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBsb2FkVG9jKGZ1bGxLZXksIHBhcmVudE9yZGVyLCBzdWNjZXNzKSB7XHJcbiAgICAgIGxldCBhYnNSZWYsIGtleSwgcGFyZW50UGF0aCwgcmVmMTtcclxuICAgICAgcmVmMSA9IHRoaXMucGFyc2VLZXkoZnVsbEtleSksIGFic1JlZiA9IHJlZjEuYWJzUmVmLCBrZXkgPSByZWYxLmtleTtcclxuICAgICAgcGFyZW50UGF0aCA9IGFic1JlZiA/IGAke2Fic1JlZn0vYCA6ICcnO1xyXG4gICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KGAke3BhcmVudFBhdGh9d2h4ZGF0YS8ke2tleX0ubmV3LmpzYCwgdHJ1ZSwgKChfdGhpcyA9PiAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRlbXBJdGVtcztcclxuICAgICAgICB0ZW1wSXRlbXMgPSBfdGhpcy5leHRyYWN0VGVtcERhdGEoKSB8fCBbXTtcclxuICAgICAgICBfLmVhY2godGVtcEl0ZW1zLCBpdGVtID0+IHtcclxuICAgICAgICAgIGl0ZW0uYWJzUmVmID0gYWJzUmVmO1xyXG4gICAgICAgICAgaWYgKHBhcmVudE9yZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmNoaWxkT3JkZXIgPSBwYXJlbnRPcmRlcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gX3RoaXMubG9hZFJlZlRvYyh0ZW1wSXRlbXMsIGl0ZW1zID0+IHtcclxuICAgICAgICAgIF90aGlzLndpZGdldC5wdWJsaXNoKGZ1bGxLZXksIGl0ZW1zKTtcclxuICAgICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFJlZlRvYyhpdGVtcywgc3VjY2Vzcykge1xyXG4gICAgICBsZXQgYWJzUmVmLCBpbmRleCwgaXRlbTtcclxuICAgICAgaWYgKGl0ZW1zID09IG51bGwpIHtcclxuICAgICAgICBpdGVtcyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIGluZGV4ID0gXy5maW5kSW5kZXgoaXRlbXMsIGl0ZW0gPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnJlZikge1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGl0ZW0gPSBpdGVtc1tpbmRleF07XHJcbiAgICAgICAgYWJzUmVmID0gaXRlbS5hYnNSZWYgfHwgJyc7XHJcbiAgICAgICAgaWYgKGFic1JlZikge1xyXG4gICAgICAgICAgYWJzUmVmICs9ICcvJztcclxuICAgICAgICB9XHJcbiAgICAgICAgYWJzUmVmICs9IGl0ZW0ucmVmO1xyXG4gICAgICAgIGxldCBwcmpPcmRlciA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9UT0NfT1JERVInKSlcclxuICAgICAgICBsZXQgY2hpbGRPcmRlciA9IHByak9yZGVyW2Fic1JlZl0ub3JkZXJcclxuICAgICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KGAke2Fic1JlZn0vd2h4ZGF0YS90b2MubmV3LmpzYCwgdHJ1ZSwgKChfdGhpcyA9PiAoKSA9PiB7XHJcbiAgICAgICAgICBsZXQgdGVtcEl0ZW1zO1xyXG4gICAgICAgICAgdGVtcEl0ZW1zID0gX3RoaXMuZXh0cmFjdFRlbXBEYXRhKCkgfHwgW107XHJcbiAgICAgICAgICBfLmVhY2godGVtcEl0ZW1zLCBpdGVtID0+IHtcclxuICAgICAgICAgICAgaXRlbS5hYnNSZWYgPSBhYnNSZWY7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZE9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uY2hpbGRPcmRlciA9IGNoaWxkT3JkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShpdGVtcywgW2luZGV4LCAxXS5jb25jYXQodGVtcEl0ZW1zKSk7XHJcbiAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZFJlZlRvYyhpdGVtcywgc3VjY2Vzcyk7XHJcbiAgICAgICAgfSkpKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoaXRlbXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VE9DRGF0YSgpIHtcclxuICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpLCAoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgZXJyO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgZnVuY3Rpb24oYWxsUHJvamVjdHMpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX01BU1RFUl9QUk9KRUNUX0xJU1QnKSwgZnVuY3Rpb24obGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zLCBsZW47XHJcbiAgICAgICAgICAgICAgICBsZW4gPSBsaXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5lYWNoKGxpc3QsIGZ1bmN0aW9uKHByaikge1xyXG4gICAgICAgICAgICAgICAgICBwcmogPSBfLm1ha2VSZWxhdGl2ZVVybChwcmosIGFsbFByb2plY3RzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHByaikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaiA9IHByaiArIFwiL1wiO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBfLmxvYWRTY3JpcHQocHJqICsgXCJ3aHhkYXRhL3RvYy5uZXcuanNcIiwgdHJ1ZSwgKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBJdGVtcztcclxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBJdGVtcyA9IF90aGlzLmV4dHJhY3RUZW1wRGF0YSgpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHRlbXBJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hYnNSZWYgPSBwcmpcclxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvYWRSZWZUb2ModGVtcEl0ZW1zLCBmdW5jdGlvbihyZXNvbHZlZEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChyZXNvbHZlZEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLndpZGdldC5wdWJsaXNoKEtFWV9UT0MsIGl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0VWVF9UT0NfTE9BREVEJyksIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy53aWRnZXQuc3Vic2NyaWJlKHJoLmNvbnN0cygnS0VZX1RPUElDX0lEJyksIF90aGlzLnN1YnNjcmliZVRvcGljSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICB9KSh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBfdGhpcyk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZXJyID0gZXJyb3I7XHJcbiAgICAgICAgICAgIGlmIChyaC5fZGVidWcpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcmguX2QoJ3dhcm4nLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmV4dENoaWxkT3JkZXIoY2hpbGRPcmRlcikge1xyXG4gICAgICBsZXQgb3JkZXJzO1xyXG4gICAgICBvcmRlcnMgPSBjaGlsZE9yZGVyLnNwbGl0KCdAJyk7XHJcbiAgICAgIG9yZGVyc1tvcmRlcnMubGVuZ3RoIC0gMV0gPSAxICsgXy5wYXJzZUludChvcmRlcnNbb3JkZXJzLmxlbmd0aCAtIDFdLCAwKTtcclxuICAgICAgcmV0dXJuIG9yZGVycy5qb2luKCdAJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hpbGRPcmRlcihwYXJlbnRPcmRlcikge1xyXG4gICAgICBpZiAocGFyZW50T3JkZXIpIHtcclxuICAgICAgICByZXR1cm4gYCR7cGFyZW50T3JkZXJ9QDFgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnQDEnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGlkKGlkKSB7XHJcbiAgICAgIGxldCBwYXRoO1xyXG4gICAgICBwYXRoID0gaWQuc3BsaXQoJ18nKTtcclxuICAgICAgcGF0aC5wb3AoKTtcclxuICAgICAgcmV0dXJuIHBhdGguam9pbignXycpIHx8ICdfJztcclxuICAgIH1cclxuXHJcbiAgICBrZXkoYWJzUmVmLCBrZXkpIHtcclxuICAgICAgbGV0IGlkeDtcclxuICAgICAgaWYgKGFic1JlZiA9PSBudWxsKSB7XHJcbiAgICAgICAgYWJzUmVmID0gJyc7XHJcbiAgICAgIH1cclxuICAgICAgaWR4ID0gXy5maW5kSW5kZXgodGhpcy5wcm9qZWN0QWJzUmVmLCByZWYgPT4gcmVmID09PSBhYnNSZWYpO1xyXG4gICAgICBpZiAoaWR4ID09PSAtMSkge1xyXG4gICAgICAgIGlkeCA9IHRoaXMucHJvamVjdEFic1JlZi5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0QWJzUmVmLnB1c2goYWJzUmVmKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYC5wLmNoaWxkX3RvYy4ke2lkeH0uJHtrZXl9YDtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZUtleShrZXkpIHtcclxuICAgICAgbGV0IGFic1JlZiwga2V5cywgbGFzdEtleTtcclxuICAgICAga2V5ID0ga2V5LnN1YnN0cmluZygzKTtcclxuICAgICAga2V5cyA9IGtleS5zcGxpdCgnLicpO1xyXG4gICAgICBsYXN0S2V5ID0ga2V5cy5wb3AoKTtcclxuICAgICAgYWJzUmVmID0gdGhpcy5wcm9qZWN0QWJzUmVmW2tleXMucG9wKCldIHx8ICcnO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleTogbGFzdEtleSxcclxuICAgICAgICBhYnNSZWZcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB1cmwoaXRlbSwgaWQpIHtcclxuICAgICAgbGV0IGJvb2tNYXJrLCBmaWxlUGF0aCwgcGFyYW1zLCBwYXJlbnRQYXRoLCB1cmw7XHJcbiAgICAgIGlmICghaXRlbS51cmwpIHtcclxuICAgICAgICByZXR1cm4gJyMnO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdyZW1vdGVpdGVtJykge1xyXG4gICAgICAgIHJldHVybiBlbmNvZGVVUkkoaXRlbS51cmwpO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcmVudFBhdGggPSBpdGVtLmFic1JlZiA/IF8uZW5zdXJlU2xhc2goaXRlbS5hYnNSZWYpIDogJyc7XHJcbiAgICAgIHVybCA9IGAke3BhcmVudFBhdGh9JHtpdGVtLnVybH1gO1xyXG4gICAgICBib29rTWFyayA9IF8uZXh0cmFjdEhhc2hTdHJpbmcodXJsKTtcclxuICAgICAgaWYgKGJvb2tNYXJrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBib29rTWFyayA9IGAjJHtib29rTWFya31gO1xyXG4gICAgICAgIGZpbGVQYXRoID0gXy5maWxlUGF0aCh1cmwpO1xyXG4gICAgICAgIHBhcmFtcyA9IF8uZXh0cmFjdFBhcmFtU3RyaW5nKHVybCk7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBwYXJhbXMgPSBgJHtwYXJhbXN9JmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhcmFtcyA9IGA/JHtwYXJhbXN9cmh0b2NpZD0ke2lkfWA7XHJcbiAgICAgICAgdXJsID0gYCR7ZmlsZVBhdGh9JHtwYXJhbXN9JHtib29rTWFya31gO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlbmNvZGVVUkkodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICB0YWdzKGl0ZW0pIHtcclxuICAgICAgbGV0IHBhcmVudFBhdGg7XHJcbiAgICAgIHBhcmVudFBhdGggPSBpdGVtLmFic1JlZiA/IGArJHtpdGVtLmFic1JlZn1gIDogJyc7XHJcbiAgICAgIGlmIChpdGVtWydkYXRhLXJodGFncyddKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1bJ2RhdGEtcmh0YWdzJ10gKyBwYXJlbnRQYXRoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZVRvcGljSUQodG9jSW5mbykge1xyXG4gICAgICBsZXQgcGF0aCwgdG9jaWQ7XHJcbiAgICAgIGlmICh0b2NJbmZvID09IG51bGwpIHtcclxuICAgICAgICB0b2NJbmZvID0ge307XHJcbiAgICAgIH1cclxuICAgICAgdG9jaWQgPSBfLmhhc2hQYXJhbXMoKVsncmh0b2NpZCddO1xyXG4gICAgICBpZiAodG9jaWQpIHtcclxuICAgICAgICBwYXRoID0gdGhpcy5nZXRQYXRoZnJvbUlkKHRvY2lkKTtcclxuICAgICAgICB0aGlzLnNlbGVjdFRvY0J5SWQocGF0aCwgdGhpcy53aWRnZXQubm9kZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmgubW9kZWwuc3Vic2NyaWJlKHJoLmNvbnN0cygnS0VZX01BU1RFUl9QUk9KRUNUX0xJU1QnKSwgKGxpc3QpID0+IHtcclxuICAgICAgICAgIGlmKGxpc3QgJiYgbGlzdC5sZW5ndGggPCAyKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zeW5jVG9jLnN5bmModGhpcywgdG9jSW5mbyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZUJvb2tJZChib29rSWQpIHtcclxuICAgICAgLy8gc3VrdW1hcjogVE9ETyByZW1vdmUgdGhpcyBsaW5lXHJcbiAgICAgIGxldCBib29rcztcclxuICAgICAgbGV0IHBhdGg7XHJcbiAgICAgIGlmIChib29rSWQpIHtcclxuICAgICAgICBwYXRoID0gdGhpcy5nZXRQYXRoZnJvbUlkKGJvb2tJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0VG9jQnlJZChwYXRoLCB0aGlzLndpZGdldC5ub2RlLCBudWxsLCBib29rcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXRoZnJvbUlkKGlkKXtcclxuICAgICAgbGV0IHBhdGg7XHJcbiAgICAgIHBhdGggPSBpZC5zcGxpdCgnXycpO1xyXG4gICAgICBwYXRoLnNoaWZ0KCk7XHJcbiAgICAgIHBhdGggPSBfLm1hcChwYXRoLCBpdGVtID0+IF8ucGFyc2VJbnQoaXRlbSwgMCkpO1xyXG4gICAgICByZXR1cm4gcGF0aDtcclxuXHJcbiAgICB9XHJcbiAgICBzZWxlY3RUb2NCeUlkKHBhdGgsIG5vZGUsIHdhaXQsIGJvb2tzKSB7XHJcbiAgICAgIGxldCBjaGlsZCwgaW5kZXg7XHJcbiAgICAgIGlmICh3YWl0ID09IG51bGwpIHtcclxuICAgICAgICB3YWl0ID0gMTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIShub2RlICYmIG5vZGUuY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGluZGV4ID0gcGF0aC5zaGlmdCgpO1xyXG4gICAgICBjaGlsZCA9IF8uZmluZChub2RlLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQm9va05vZGUoY2hpbGQpIHx8IHRoaXMuaXNQYWdlTm9kZShjaGlsZCkpIHtcclxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSwgdGhpcyk7XHJcbiAgICAgIGlmICghY2hpbGQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0TGluayhjaGlsZCwgdHJ1ZSwgd2FpdCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuaXNCb29rTm9kZShjaGlsZCkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVuQm9vayhjaGlsZCwgdHJ1ZSwgKChfdGhpcyA9PiAoKSA9PiBfLmRlZmVyKCgpID0+IHtcclxuICAgICAgICAgIGxldCBjaGlsZE5vZGUsIHBhcmVudE5vZGU7XHJcbiAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZUJvb2tJbmZvKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIHBhcmVudE5vZGUgPSBjaGlsZE5vZGUuY2hpbGRyZW4gJiYgY2hpbGROb2RlLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0VG9jQnlJZChwYXRoLCBwYXJlbnROb2RlLCBBTklNX1RJTUUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pKSkodGhpcykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUJvb2tJbmZvKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIFRvY0NvbnRyb2xsZXIucHJvdG90eXBlW1wiY2xhc3NcIl0gPSBpdGVtID0+IHtcclxuICAgIGlmIChpdGVtLnR5cGUgPT09ICdyZW1vdGVpdGVtJykge1xyXG4gICAgICByZXR1cm4gJ3VybCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gaXRlbS50eXBlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiBUb2NDb250cm9sbGVyO1xyXG59KSkoKTtcclxuXHJcbnJoLmNvbnRyb2xsZXIoJ1RvY0NvbnRyb2xsZXInLCBUb2NDb250cm9sbGVyKTtcclxuIiwibGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL3NyYy9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5sZXQgJCA9IHJoLiQ7XHJcbmxldCBtb2RlbCA9IHJoLm1vZGVsO1xyXG5sZXQgY29uc3RzID0gcmguY29uc3RzO1xyXG5cclxuY2xhc3MgVE9DTGV2ZWwge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5kYXRhID0geycnIDoge29yZGVyOiAnJywgbmV4dENoaWxkOiAwfX1cclxuICAgIG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksIGFsbFByb2plY3RzID0+IHtcclxuICAgICAgXy5lYWNoKGFsbFByb2plY3RzLCBwcmogPT4ge1xyXG4gICAgICAgIHByaiA9IF8ubWFrZVJlbGF0aXZlVXJsKHRoaXMudHJpbUZpcnN0KHByaiwgJy4nKSwgYWxsUHJvamVjdHNbMF0pO1xyXG4gICAgICAgIHRoaXMuY2hpbGRPcmRlcihwcmopXHJcbiAgICAgIH0pXHJcbiAgICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfVE9DX09SREVSJyksIHRoaXMuZGF0YSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB0cmltRmlyc3QocGF0aCwgY2hhcikge1xyXG4gICAgcmV0dXJuIHBhdGggPSAocGF0aC5sZW5ndGggJiYgcGF0aFswXSA9PT0gY2hhciAmJiBwYXRoWzFdICE9PSBjaGFyKT8gcGF0aC5zdWJzdHJpbmcoMSkgOiBwYXRoXHJcbiAgfVxyXG5cclxuICBjaGlsZE9yZGVyKGFic1JlZikge1xyXG4gICAgYWJzUmVmID0gdGhpcy50cmltRmlyc3QoYWJzUmVmLCAnLycpXHJcbiAgICBpZighdGhpcy5kYXRhW2Fic1JlZl0pIHtcclxuICAgICAgbGV0IHBhdGggPSBhYnNSZWZcclxuICAgICAgcGF0aCA9ICBwYXRoLnN1YnN0cmluZygwLCBwYXRoLmxhc3RJbmRleE9mKCcvJykpXHJcbiAgICAgIHBhdGggPSAgcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sYXN0SW5kZXhPZignLycpKVxyXG4gICAgICBsZXQgcGFyZW50ID0gdGhpcy5kYXRhW3BhdGhdXHJcbiAgICAgIHBhcmVudC5uZXh0Q2hpbGQrK1xyXG4gICAgICB0aGlzLmRhdGFbYWJzUmVmXSA9IHtvcmRlcjogcGFyZW50Lm9yZGVyICsgJ0AnICsgcGFyZW50Lm5leHRDaGlsZCwgbmV4dENoaWxkOiAwfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YVthYnNSZWZdLm9yZGVyXHJcbiAgfVxyXG59XHJcblxyXG5uZXcgVE9DTGV2ZWwiLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcblxyXG5jbGFzcyBCcm93c2VTZXF1ZW5jZUJ1aWxkZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICBsZXQgaGFuZGxlVG9waWNDaGFuZ2UgPSBmdW5jdGlvbihkb05vdFVzZSkge1xyXG4gICAgICBsZXQgYnJzTWFwID0gcmgubW9kZWwuZ2V0KCd0LmJyc21hcCcpO1xyXG4gICAgICBpZiAoYnJzTWFwICE9IG51bGwpIHtcclxuICAgICAgICBsZXQgbmV4dCA9IChicnNNYXBbJ24nXSAmJiBicnNNYXBbJ24nXVswXSkgfHwgJyc7XHJcbiAgICAgICAgbGV0IHByZXYgPSAoYnJzTWFwWydwJ10gJiYgYnJzTWFwWydwJ11bMF0pIHx8ICcnO1xyXG4gICAgICAgIGxldCBkZWNvZGVkVVJJID0gd2luZG93LmRlY29kZVVSSShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuXHJcbiAgICAgICAgaWYgKCFfLmlzRW1wdHlTdHJpbmcobmV4dCkpIHtcclxuICAgICAgICAgIG5leHQgPSB3aW5kb3cuX2dldFJlbGF0aXZlRmlsZU5hbWUoZGVjb2RlZFVSSSwgbmV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghXy5pc0VtcHR5U3RyaW5nKSB7XHJcbiAgICAgICAgICBwcmV2ID0gd2luZG93Ll9nZXRSZWxhdGl2ZUZpbGVOYW1lKGRlY29kZWRVUkksIHByZXYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmgubW9kZWwucHVibGlzaCgnbC5icnNCYWNrJywgcHJldik7XHJcbiAgICAgICAgcmV0dXJuIHJoLm1vZGVsLnB1Ymxpc2goJ2wuYnJzTmV4dCcsIG5leHQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCB1cGRhdGVTaG93QnJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCB1aU1vZGUgPSByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfVUlfTU9ERScpKTtcclxuICAgICAgbGV0IHByZXYgPSByaC5tb2RlbC5nZXQoJ2wuYnJzQmFjaycpO1xyXG4gICAgICBsZXQgbmV4dCA9IHJoLm1vZGVsLmdldCgnbC5icnNOZXh0Jyk7XHJcbiAgICAgIGxldCBzaG93QnJzID0gIXVpTW9kZSAmJiAocHJldiB8fCBuZXh0KSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgcmV0dXJuIHJoLm1vZGVsLnB1Ymxpc2goJ2wuc2hvd19icnMnLCBzaG93QnJzKTtcclxuICAgIH07XHJcblxyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKCd0LnRvcGljdXJsJywgXy5kZWJvdW5jZShoYW5kbGVUb3BpY0NoYW5nZSwgMjAwKSk7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUoJ3QuYnJzbWFwJywgXy5kZWJvdW5jZShoYW5kbGVUb3BpY0NoYW5nZSwgMjAwKSk7XHJcblxyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKCdsLmJyc0JhY2snLCB1cGRhdGVTaG93QnJzKTtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZSgnbC5icnNOZXh0JywgdXBkYXRlU2hvd0Jycyk7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUocmguY29uc3RzKCdLRVlfVUlfTU9ERScpLCAgdXBkYXRlU2hvd0Jycyk7XHJcbiAgfVxyXG59XHJcblxyXG4vL1RPRE86IG1vdmUgaXQgdG8gY29udHJvbGxlclxyXG5yaC53aWRnZXRzLkJyb3dzZVNlcXVlbmNlQnVpbGRlciA9IEJyb3dzZVNlcXVlbmNlQnVpbGRlcjtcclxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjkuMVxyXG4oKCkgPT4ge1xyXG4gIHZhciAkLCBIQVNIX0tFWV9SQU5ET00sIEhBU0hfS0VZX1JIX0hJR0hMSUdIVCwgSEFTSF9LRVlfUkhfU0VBUkNILCBIQVNIX0tFWV9SSF9UT0NJRCwgSEFTSF9LRVlfVE9QSUMsIEhBU0hfS0VZX1VJTU9ERSwgXywgY29uc3RzLCBmaXhIYXNoTWFwRm9yUm9vdCwgZml4SGFzaE1hcEZvclRvcGljLCBnZXRIYXNoTWFwRm9yUm9vdCwgZ2V0TWVyZ2VkUGFyYW1zTWFwLCBnZXRQYXJhbXNGb3JSb290LCBnZXRUb3BpY1VSTCwgaGFzaENoYW5nZWQsIGhhc2hRdWVyeUtleXMsIG1vZGVsLCBuYXZpZ2F0ZVRvVXJsLCBxdWV1ZVVwZGF0ZUhhc2hNYXAsIHJoLCBzaG93Tm9uVG9waWMsIHNob3dUb3BpYywgdG9waWNDaGFuZ2VkO1xyXG5cclxuICByaCA9IHdpbmRvdy5yaDtcclxuXHJcbiAgXyA9IHJoLl87XHJcblxyXG4gICQgPSByaC4kO1xyXG5cclxuICBjb25zdHMgPSByaC5jb25zdHM7XHJcblxyXG4gIG1vZGVsID0gcmgubW9kZWw7XHJcblxyXG4gIEhBU0hfS0VZX1JIX1NFQVJDSCA9IGNvbnN0cygnSEFTSF9LRVlfUkhfU0VBUkNIJyk7XHJcblxyXG4gIEhBU0hfS0VZX1RPUElDID0gY29uc3RzKCdIQVNIX0tFWV9UT1BJQycpO1xyXG5cclxuICBIQVNIX0tFWV9VSU1PREUgPSBjb25zdHMoJ0hBU0hfS0VZX1VJTU9ERScpO1xyXG5cclxuICBIQVNIX0tFWV9SSF9UT0NJRCA9IGNvbnN0cygnSEFTSF9LRVlfUkhfVE9DSUQnKTtcclxuXHJcbiAgSEFTSF9LRVlfUkhfSElHSExJR0hUID0gY29uc3RzKCdIQVNIX0tFWV9SSF9ISUdITElHSFQnKTtcclxuXHJcbiAgSEFTSF9LRVlfUkFORE9NID0gY29uc3RzKCdIQVNIX0tFWV9SQU5ET00nKTtcclxuXHJcbiAgaGFzaFF1ZXJ5S2V5cyA9IFtIQVNIX0tFWV9SSF9ISUdITElHSFQsIGNvbnN0cygnSEFTSF9LRVlfUkhfU1lOUycpLCBIQVNIX0tFWV9SSF9UT0NJRF07XHJcblxyXG4gIGdldE1lcmdlZFBhcmFtc01hcCA9IHRvcGljVXJsID0+IHtcclxuICAgIHZhciBoYXNoTWFwLCBwYXJhbXNNYXA7XHJcbiAgICBwYXJhbXNNYXAgPSBfLnVybFBhcmFtcyhfLmV4dHJhY3RQYXJhbVN0cmluZyh0b3BpY1VybCkpO1xyXG4gICAgaGFzaE1hcCA9IF8uaGFzaFBhcmFtcyhfLmV4dHJhY3RIYXNoU3RyaW5nKHRvcGljVXJsKSk7XHJcbiAgICByZXR1cm4gXy5leHRlbmQocGFyYW1zTWFwLCBoYXNoTWFwKTtcclxuICB9O1xyXG5cclxuICBnZXRUb3BpY1VSTCA9IChuZXdNYXAsIHRvcGljVXJsKSA9PiB7XHJcbiAgICB2YXIgYm9va01hcmssIGZpbGVQYXRoLCBpLCBrZXksIGxlbiwgcGFyYW1zLCBwYXJhbXNNYXA7XHJcbiAgICB0b3BpY1VybCA9IHRvcGljVXJsO1xyXG4gICAgZmlsZVBhdGggPSBfLmZpbGVQYXRoKHRvcGljVXJsKTtcclxuICAgIGJvb2tNYXJrID0gXy5leHRyYWN0SGFzaFN0cmluZyh0b3BpY1VybCk7XHJcbiAgICBpZiAoYm9va01hcmsubGVuZ3RoID4gMCkge1xyXG4gICAgICBib29rTWFyayA9IFwiI1wiICsgYm9va01hcms7XHJcbiAgICB9XHJcbiAgICBwYXJhbXNNYXAgPSBfLnVybFBhcmFtcyhfLmV4dHJhY3RQYXJhbVN0cmluZyh0b3BpY1VybCkpO1xyXG4gICAgZm9yIChpID0gMCwgbGVuID0gaGFzaFF1ZXJ5S2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBrZXkgPSBoYXNoUXVlcnlLZXlzW2ldO1xyXG4gICAgICBpZiAobmV3TWFwW2tleV0gIT0gbnVsbCkge1xyXG4gICAgICAgIHBhcmFtc01hcFtrZXldID0gbmV3TWFwW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0NSRUVOX0lPUycpKSkge1xyXG4gICAgICBwYXJhbXNNYXBbSEFTSF9LRVlfUkFORE9NXSA9IF8udW5pcXVlSWQoKTtcclxuICAgIH1cclxuICAgIHBhcmFtcyA9IF8ubWFwVG9FbmNvZGVkU3RyaW5nKHBhcmFtc01hcCk7XHJcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgcGFyYW1zID0gXCI/XCIgKyBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIiArIGZpbGVQYXRoICsgcGFyYW1zICsgYm9va01hcms7XHJcbiAgfTtcclxuXHJcbiAgcXVldWVVcGRhdGVIYXNoTWFwID0gXy5xdWV1ZVVwZGF0ZUhhc2hNYXA7XHJcblxyXG4gIGZpeEhhc2hNYXBGb3JUb3BpYyA9IGhhc2hNYXAgPT4ge1xyXG4gICAgaWYgKGhhc2hNYXAgPT0gbnVsbCkge1xyXG4gICAgICBoYXNoTWFwID0ge307XHJcbiAgICB9XHJcbiAgICBoYXNoTWFwW0hBU0hfS0VZX1VJTU9ERV0gPSBudWxsO1xyXG4gICAgaGFzaE1hcFtIQVNIX0tFWV9SQU5ET01dID0gbnVsbDtcclxuICAgIGlmICghaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0pIHtcclxuICAgICAgaGFzaE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0pIHtcclxuICAgICAgaGFzaE1hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdID0gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBoYXNoTWFwO1xyXG4gIH07XHJcblxyXG4gIGZpeEhhc2hNYXBGb3JSb290ID0gaGFzaE1hcCA9PiB7XHJcbiAgICBpZiAoaGFzaE1hcCA9PSBudWxsKSB7XHJcbiAgICAgIGhhc2hNYXAgPSB7fTtcclxuICAgIH1cclxuICAgIGlmICghaGFzaE1hcFtIQVNIX0tFWV9VSU1PREVdKSB7XHJcbiAgICAgIGhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBoYXNoTWFwW0hBU0hfS0VZX1JBTkRPTV0gPSBudWxsO1xyXG4gICAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSkge1xyXG4gICAgICBoYXNoTWFwW0hBU0hfS0VZX1JIX1RPQ0lEXSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhc2hNYXBbSEFTSF9LRVlfUkhfSElHSExJR0hUXSkge1xyXG4gICAgICBoYXNoTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFoYXNoTWFwW0hBU0hfS0VZX1JIX1NFQVJDSF0pIHtcclxuICAgICAgaGFzaE1hcFtIQVNIX0tFWV9SSF9TRUFSQ0hdID0gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBoYXNoTWFwO1xyXG4gIH07XHJcblxyXG4gIHNob3dUb3BpYyA9IChyZWxVcmwsIGFkZFRvSGlzdG9yeSkgPT4ge1xyXG4gICAgdmFyIGhhc2hNYXA7XHJcbiAgICByZWxVcmwgPSBfLmZpeFJlbGF0aXZlVXJsKHJlbFVybCk7XHJcbiAgICBoYXNoTWFwID0gXy51cmxQYXJhbXMoXy5leHRyYWN0UGFyYW1TdHJpbmcocmVsVXJsKSk7XHJcbiAgICBoYXNoTWFwW0hBU0hfS0VZX1RPUElDXSA9IF8uc3RyaXBQYXJhbShyZWxVcmwpO1xyXG4gICAgaGFzaE1hcCA9IGZpeEhhc2hNYXBGb3JUb3BpYyhoYXNoTWFwKTtcclxuICAgIHJldHVybiBxdWV1ZVVwZGF0ZUhhc2hNYXAoaGFzaE1hcCwgYWRkVG9IaXN0b3J5KTtcclxuICB9O1xyXG5cclxuICBnZXRIYXNoTWFwRm9yUm9vdCA9IHJlbFVybCA9PiB7XHJcbiAgICB2YXIgaGFzaE1hcDtcclxuICAgIHJlbFVybCA9IF8uZml4UmVsYXRpdmVVcmwocmVsVXJsKTtcclxuICAgIGhhc2hNYXAgPSBfLnVybFBhcmFtcyhfLmV4dHJhY3RQYXJhbVN0cmluZyhyZWxVcmwpKTtcclxuICAgIGhhc2hNYXAgPSBmaXhIYXNoTWFwRm9yUm9vdChoYXNoTWFwKTtcclxuICAgIHJldHVybiBoYXNoTWFwO1xyXG4gIH07XHJcblxyXG4gIGdldFBhcmFtc0ZvclJvb3QgPSByZWxVcmwgPT4ge1xyXG4gICAgdmFyIHF1ZXJ5TWFwO1xyXG4gICAgcXVlcnlNYXAgPSBnZXRIYXNoTWFwRm9yUm9vdChyZWxVcmwpO1xyXG4gICAgaWYgKF8uaXNFbXB0eU9iamVjdChxdWVyeU1hcCkpIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFwiP1wiICsgKF8ubWFwVG9FbmNvZGVkU3RyaW5nKHF1ZXJ5TWFwKSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2hvd05vblRvcGljID0gKHVybCwgYWRkVG9IaXN0b3J5KSA9PiB7XHJcbiAgICB2YXIgaGFzaE1hcDtcclxuICAgIGhhc2hNYXAgPSB7fTtcclxuICAgIGhhc2hNYXBbSEFTSF9LRVlfVE9QSUNdID0gdXJsO1xyXG4gICAgaGFzaE1hcCA9IGZpeEhhc2hNYXBGb3JUb3BpYyhoYXNoTWFwKTtcclxuICAgIHJldHVybiBxdWV1ZVVwZGF0ZUhhc2hNYXAoaGFzaE1hcCwgYWRkVG9IaXN0b3J5KTtcclxuICB9O1xyXG5cclxuICAoe1xyXG4gICAgaXNTYW1lVG9waWM6IGZ1bmN0aW9uKHVybDEsIHVybDIpIHt9XHJcbiAgfSk7XHJcblxyXG4gIGhhc2hDaGFuZ2VkID0gb2JqID0+IHtcclxuICAgIHZhciBjaGFuZ2VkLCBuZXdNYXAsIG9sZE1hcCwgb2xkVG9waWNVcmwsIG9sZFVpTW9kZSwgcmVmLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtQ2hhbmdlZCwgdG9waWNVcmwsIHVpTW9kZTtcclxuICAgIG5ld01hcCA9IG9iai5uZXdNYXA7XHJcbiAgICBvbGRNYXAgPSBvYmoub2xkTWFwO1xyXG4gICAgb2xkVWlNb2RlID0gb2xkTWFwW0hBU0hfS0VZX1VJTU9ERV07XHJcbiAgICB1aU1vZGUgPSBuZXdNYXBbSEFTSF9LRVlfVUlNT0RFXTtcclxuICAgIGlmIChIQVNIX0tFWV9SSF9TRUFSQ0ggaW4gbmV3TWFwKSB7XHJcbiAgICAgIHNlYXJjaFRlcm0gPSBuZXdNYXBbSEFTSF9LRVlfUkhfU0VBUkNIXTtcclxuICAgICAgc2VhcmNoVGVybUNoYW5nZWQgPSBzZWFyY2hUZXJtICE9PSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0VBUkNIRURfVEVSTScpKTtcclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCBzZWFyY2hUZXJtLCB7XHJcbiAgICAgICAgc3luYzogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICh1aU1vZGUgPT09ICdzZWFyY2gnKSB7XHJcbiAgICAgIGlmIChzZWFyY2hUZXJtQ2hhbmdlZCAmJiB3aW5kb3cuZ0hvc3QpIHtcclxuICAgICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX1FVRVJZX1NFQVJDSF9SRVNVTFRTJyksIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIXVpTW9kZSB8fCBuZXdNYXBbSEFTSF9LRVlfVE9QSUNdKSB7XHJcbiAgICAgIG9sZFRvcGljVXJsID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1RPUElDX0lOX0lGUkFNRScpKTtcclxuICAgICAgaWYgKEhBU0hfS0VZX1RPUElDIGluIG5ld01hcCkge1xyXG4gICAgICAgIHRvcGljVXJsID0gbmV3TWFwW0hBU0hfS0VZX1RPUElDXTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRvcGljVXJsKSB7XHJcbiAgICAgICAgdG9waWNVcmwgPSBvbGRUb3BpY1VybDtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZmVhdHVyZSA9IHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9GRUFUVVJFJykpXHJcbiAgICAgIGlmICghdG9waWNVcmwgJiYgKCFmZWF0dXJlIHx8IGZlYXR1cmUuc2hvd0RlZlRvcGljICE9PSBmYWxzZSkpIHtcclxuICAgICAgICB0b3BpY1VybCA9IChyZWYgPSB3aW5kb3cuZ0RlZmF1bHRUb3BpYykgIT0gbnVsbCA/IHJlZi5zdWJzdHJpbmcoMSkgOiB2b2lkIDA7XHJcbiAgICAgIH1cclxuICAgICAgY2hhbmdlZCA9IHRvcGljVXJsICYmICh0b3BpY1VybCAhPT0gb2xkVG9waWNVcmwgfHwgb2xkVWlNb2RlICE9PSB1aU1vZGUgfHwgb2xkTWFwW0hBU0hfS0VZX1JIX0hJR0hMSUdIVF0gIT09IG5ld01hcFtIQVNIX0tFWV9SSF9ISUdITElHSFRdIHx8IG9sZE1hcFtIQVNIX0tFWV9SSF9UT0NJRF0gIT09IG5ld01hcFtIQVNIX0tFWV9SSF9UT0NJRF0pO1xyXG4gICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgIGlmIChfLnN0cmlwQm9va21hcmsodG9waWNVcmwpICE9PSBfLnN0cmlwQm9va21hcmsob2xkVG9waWNVcmwpKSB7XHJcbiAgICAgICAgICBfLnJ1blRvcGljTG9hZGluZ0FuaW1hdGlvbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9UT1BJQ19JTl9JRlJBTUUnKSwgdG9waWNVcmwpO1xyXG4gICAgICAgIHdpbmRvdy5sb2FkVG9waWMoZ2V0VG9waWNVUkwobmV3TWFwLCB0b3BpY1VybCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9VSV9NT0RFJyksIG5ld01hcFtIQVNIX0tFWV9VSU1PREVdKTtcclxuICB9O1xyXG5cclxuICB0b3BpY0NoYW5nZWQgPSB0b3BpY1VybCA9PiB7XHJcbiAgICB2YXIgZGVjb2RlZFVSSSwgaGFzaE1hcCwgb2xkVXJsLCByZWxVcmw7XHJcbiAgICBoYXNoTWFwID0gXy5oYXNoUGFyYW1zKCk7XHJcbiAgICBpZiAodG9waWNVcmwgJiYgIWhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSkge1xyXG4gICAgICBkZWNvZGVkVVJJID0gZGVjb2RlVVJJKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICByZWxVcmwgPSB3aW5kb3cuX2dldFJlbGF0aXZlRmlsZU5hbWUoZGVjb2RlZFVSSSwgdG9waWNVcmwpO1xyXG4gICAgICBvbGRVcmwgPSBoYXNoTWFwW0hBU0hfS0VZX1RPUElDXTtcclxuICAgICAgaWYgKCFvbGRVcmwgfHwgXy5maWxlUGF0aChyZWxVcmwpICE9PSBfLmZpbGVQYXRoKG9sZFVybCkpIHtcclxuICAgICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RPUElDX0lOX0lGUkFNRScpLCByZWxVcmwpO1xyXG4gICAgICAgIHJldHVybiBzaG93VG9waWMocmVsVXJsLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBuYXZpZ2F0ZVRvVXJsID0gb2JqID0+IHtcclxuICAgIHZhciBmaWxlTmFtZSwgaGFzaE1hcCwgcGFyYW1zLCByZWxVcmwsIHJvb3RVcmwsIHVybDtcclxuICAgIHVybCA9IG9iai5hYnNVcmw7XHJcbiAgICBpZiAoXy5pc1Jvb3RVcmwoKSkge1xyXG4gICAgICBpZiAoXy5pc1VybEFsbG93ZEluSWZyYW1lKHVybCkpIHtcclxuICAgICAgICB1cmwgPSBfLm1ha2VSZWxhdGl2ZVVybChfLmZpeFJlbGF0aXZlVXJsKHVybCkpO1xyXG4gICAgICAgIGZpbGVOYW1lID0gdXJsICYmIF8uZmlsZVBhdGgodXJsKTtcclxuICAgICAgICBpZiAoZmlsZU5hbWUgPT09IGNvbnN0cygnU1RBUlRfRklMRVBBVEgnKSkge1xyXG4gICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZyhmaWxlTmFtZS5sZW5ndGgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXVybCkge1xyXG4gICAgICAgICAgdXJsID0gJyN1eCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1cmxbMF0gPT09ICcjJyB8fCB1cmxbMF0gPT09ICc/Jykge1xyXG4gICAgICAgICAgaGFzaE1hcCA9IF8uaGFzaFBhcmFtcyhfLmV4dHJhY3RIYXNoU3RyaW5nKHVybCkpO1xyXG4gICAgICAgICAgaWYgKCEoSEFTSF9LRVlfVUlNT0RFIGluIGhhc2hNYXApKSB7XHJcbiAgICAgICAgICAgIGhhc2hNYXBbSEFTSF9LRVlfVUlNT0RFXSA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcXVldWVVcGRhdGVIYXNoTWFwKGhhc2hNYXAsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodXJsKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2hvd1RvcGljKHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzaG93Tm9uVG9waWModXJsLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCFfLmlzUm9vdFVybCh1cmwpKSB7XHJcbiAgICAgICAgcm9vdFVybCA9IF8uZ2V0Um9vdFVybCgpO1xyXG4gICAgICAgIGlmIChfLmlzRXh0ZXJuYWxVcmwodXJsKSkge1xyXG4gICAgICAgICAgcmVsVXJsID0gdXJsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBwYXJhbXMgPSBnZXRQYXJhbXNGb3JSb290KHVybCk7XHJcbiAgICAgICAgICByZWxVcmwgPSBfLmZpeFJlbGF0aXZlVXJsKF8ubWFrZVJlbGF0aXZlUGF0aCh1cmwsIHJvb3RVcmwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXJsID0gXCJcIiArIHJvb3RVcmwgKyBwYXJhbXMgKyBcIiN0PVwiICsgKGVuY29kZVVSSUNvbXBvbmVudChyZWxVcmwpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfV0lER0VUX0xPQURFRCcpLCAoKSA9PiB7XHJcbiAgICBfLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdjbGljaycsIF8uaG9va0NsaWNrKTtcclxuICAgIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9IQVNIX0NIQU5HRScpLCBoYXNoQ2hhbmdlZCk7XHJcbiAgICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfVE9QSUNfVVJMJyksIHRvcGljQ2hhbmdlZCk7XHJcbiAgICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfTkFWSUdBVEVfVE9fVVJMJyksIG5hdmlnYXRlVG9VcmwpO1xyXG4gICAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RPUElDX0lOX0lGUkFNRScpLCB0b3BpY1VybCA9PiB7XHJcbiAgICAgIGlmICgoXCJcIiArIHdpbmRvdy5nSG9zdCArIHdpbmRvdy5nSG9zdFBhdGgpICE9PSAnLycpIHtcclxuICAgICAgICBpZiAod2luZG93LnNldFRvcGljKSB7XHJcbiAgICAgICAgICB3aW5kb3cuc2V0VG9waWMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdpbmRvdy5jaGFuZ2VUb3BpY0xpbmspIHtcclxuICAgICAgICAgIHJldHVybiB3aW5kb3cuY2hhbmdlVG9waWNMaW5rKGRvY3VtZW50LmxvY2F0aW9uLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfVE9QSUNfTE9BREVEJyksICgpID0+IF8ucnVuVG9waWNMb2FkaW5nQW5pbWF0aW9uKGZhbHNlKSk7XHJcbiAgICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX0lOU0lERV9JRlJBTUVfRE9NX0NPTlRFTlRMT0FERUQnKSwgKCkgPT4gXy5ydW5Ub3BpY0xvYWRpbmdBbmltYXRpb24oZmFsc2UpKTtcclxuICB9KTtcclxuXHJcbn0pLmNhbGwodGhpcyk7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyAkIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgc3RvcmFnZSB9ID0gcmg7XHJcbmxldCB1cmxGaWx0ZXIgPSByaC5fcGFyYW1zLmZpbHRlcjtcclxuXHJcbnZhciBFeHByZXNzaW9uQnVpbGRlciA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgR1JQX1NFUEFSQVRPUiA9IHVuZGVmaW5lZDtcclxuICBsZXQgVEFHX1NFUEFSQVRPUiA9IHVuZGVmaW5lZDtcclxuICBsZXQgRUxFTUVOVF9TRVBBUkFUT1IgPSB1bmRlZmluZWQ7XHJcbiAgRXhwcmVzc2lvbkJ1aWxkZXIgPSBjbGFzcyBFeHByZXNzaW9uQnVpbGRlciB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gICAgXHJcbiAgICAgIEdSUF9TRVBBUkFUT1IgPSAnOic7XHJcbiAgICAgIFRBR19TRVBBUkFUT1IgPSAnOyc7XHJcbiAgICAgIEVMRU1FTlRfU0VQQVJBVE9SID0gJywnO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgIHRoaXMuZ2V0VW5jaGVja2VkID0gdGhpcy5nZXRVbmNoZWNrZWQuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5oYW5kbGVUYWdTdGF0ZXMgPSB0aGlzLmhhbmRsZVRhZ1N0YXRlcy5iaW5kKHRoaXMpO1xyXG4gICAgICBzdG9yYWdlLmluaXQoY29uc3RzKCdIRUxQX0lEJykpO1xyXG4gICAgXHJcbiAgICAgIHRoaXMuYWxsVGFnTmFtZXMgPSB0aGlzLmNvbXB1dGVOYW1lcyhyaC5tb2RlbC5nZXQoY29uc3RzKCdLRVlfTUVSR0VEX0ZJTFRFUl9LRVknKSkpO1xyXG4gICAgXHJcbiAgICAgIHRoaXMucHJlcGFyZVRhZ1N0YXRlcygpO1xyXG4gICAgXHJcbiAgICAgIHRoaXMuaGFuZGxlVGFnU3RhdGVzKHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19TVEFURVMnKSkpO1xyXG4gICAgXHJcbiAgICAgIHJoLm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19TVEFURVMnKSxcclxuICAgICAgICBfLmRlYm91bmNlKHRoaXMuaGFuZGxlVGFnU3RhdGVzLCAzMDApLFxyXG4gICAgICAgIHtpbml0RG9uZTogdHJ1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXB1dGVOYW1lcyh0YWdzKSB7XHJcbiAgICAgIHJldHVybiBfLnJlZHVjZSh0YWdzLCBmdW5jdGlvbihyZXN1bHQsIHRhZykge1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKHRhZy5jaGlsZHJlbiA/IHRoaXMuY29tcHV0ZU5hbWVzKHRhZy5jaGlsZHJlbikgOiB0YWcubmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgICAsIFtdLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVbmNoZWNrZWQoaW5kZXgsIGNoZWNrZWQpIHtcclxuICAgICAgcmV0dXJuIF8uZmlsdGVyKHRoaXMuYWxsVGFnTmFtZXNbaW5kZXhdLCBpdGVtID0+IC0xID09PSBjaGVja2VkLmluZGV4T2YoaXRlbSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXB1dGVFeHByZXNzaW9uKHN0YXRlcykge1xyXG4gICAgICBpZiAoIXN0YXRlcyB8fCAhdGhpcy5hbGxUYWdOYW1lcykge1xyXG4gICAgICAgIHJldHVybiByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RBR19FWFBSRVNTSU9OJyksIFtdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGdyb3VwRXhwcnMgPSBfLnJlZHVjZShzdGF0ZXMsIGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xyXG4gICAgICAgIGlmIChfLmlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgICAgcmVzdWx0LnB1c2goe2M6IFt2YWx1ZV0sIHU6IFtdfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICBsZXQgdmFsaWRWYWx1ZXM7XHJcbiAgICAgICAgICBpZiAoKHZhbGlkVmFsdWVzID0gXy5jb21wYWN0KHZhbHVlKSkgJiYgKHZhbGlkVmFsdWVzLmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICBjOiB2YWxpZFZhbHVlcyxcclxuICAgICAgICAgICAgICB1OiB0aGlzLmdldFVuY2hlY2tlZChrZXksIHZhbGlkVmFsdWVzKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgICAsIFtdLCB0aGlzKTtcclxuXHJcbiAgICAgIHJldHVybiByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1RBR19FWFBSRVNTSU9OJyksIGdyb3VwRXhwcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVRhZ1N0YXRlcyhzdGF0ZXMpIHtcclxuICAgICAgaWYgKHN0YXRlcyA9PSBudWxsKSB7IHN0YXRlcyA9IHt9OyB9XHJcbiAgICAgIHRoaXMuY29tcHV0ZUV4cHJlc3Npb24oc3RhdGVzKTtcclxuICAgIFxyXG4gICAgICAvLyBQZXJzaXN0IG5ldyB0YWcgc3RhdGUgaW4gbG9jYWxEQiBvciBjb29raWVzXHJcbiAgICAgIHJldHVybiBzdG9yYWdlLnBlcnNpc3QoJ3RhZ19zdGF0ZXMnLCBzdGF0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBhcmVUYWdTdGF0ZXMoKSB7XHJcbiAgICAgIHJldHVybiByaC5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfUFJPSkVDVF9GSUxURVJfVFlQRScpLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRhZ1N0YXRlcztcclxuICAgICAgICBpZiAodXJsRmlsdGVyKSB7XHJcbiAgICAgICAgICBsZXQgZmlsdGVyID0gcmgubW9kZWwuZ2V0KGNvbnN0cygnS0VZX01FUkdFRF9GSUxURVJfS0VZJykpO1xyXG4gICAgICAgICAgdGFnU3RhdGVzID0gdGhpcy5wYXJzZVVybEZpbHRlcihmaWx0ZXIsIHVybEZpbHRlci5zcGxpdChFTEVNRU5UX1NFUEFSQVRPUikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXRhZ1N0YXRlcykgeyB0YWdTdGF0ZXMgPSBzdG9yYWdlLmZldGNoKCd0YWdfc3RhdGVzJyk7IH1cclxuICAgICAgXHJcbiAgICAgICAgaWYgKCF0YWdTdGF0ZXMpIHtcclxuICAgICAgICAgIHRhZ1N0YXRlcyA9IF8uY2xvbmUocmgubW9kZWwuZ2V0KGNvbnN0cygnS0VZX0RFRkFVTFRfRklMVEVSJykpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0YWdTdGF0ZXMpIHsgcmV0dXJuIHJoLm1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfUFJPSkVDVF9UQUdfU1RBVEVTJyksIHRhZ1N0YXRlcyk7IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VGaWx0ZXJFbGVtbnQoZmlsdGVyLCBlbGVtZW50KSB7XHJcbiAgICAgIGxldCB0ZW1wID0gZWxlbWVudC5zcGxpdChHUlBfU0VQQVJBVE9SKTtcclxuICAgICAgbGV0IG5hbWUgPSB0ZW1wWzBdO1xyXG4gICAgICBsZXQgZWxlbWVudHMgPSB0ZW1wWzFdICYmIHRlbXBbMV0uc3BsaXQoVEFHX1NFUEFSQVRPUik7XHJcbiAgICAgIGxldCBpbmRleCA9IF8uZmluZEluZGV4KGZpbHRlciwgaXRlbSA9PiAoKGVsZW1lbnRzICE9IG51bGwpID09PSAoaXRlbS5jaGlsZHJlbiAhPSBudWxsKSkgJiYgKGl0ZW0uZGlzcGxheSA9PT0gbmFtZSkpO1xyXG4gICAgICByZXR1cm4ge2luZGV4LCBlbGVtZW50c307XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VVcmxGaWx0ZXIoZmlsdGVyLCBhcnJheSkge1xyXG4gICAgICBpZiAoIWFycmF5ICYmICFhcnJheS5sZW5ndGgpIHsgcmV0dXJuOyB9XHJcbiAgICAgIGxldCByYWRpb01vZGUgPSByaC5tb2RlbC5nZXQoY29uc3RzKCdLRVlfUFJPSkVDVF9GSUxURVJfVFlQRScpKSA9PT0gJ3JhZGlvJztcclxuICAgICAgbGV0IGZpcnN0U3RyaW5nID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIF8ucmVkdWNlKGFycmF5LCBmdW5jdGlvbihyZXN1bHQsIGVsZW1lbnQsIGluZGV4KSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnRzO1xyXG4gICAgICAgICh7aW5kZXgsIGVsZW1lbnRzfSA9IHRoaXMucGFyc2VGaWx0ZXJFbGVtbnQoZmlsdGVyLCBlbGVtZW50KSk7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgbGV0IG5vZGUgPSBmaWx0ZXJbaW5kZXhdO1xyXG4gICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IHRoaXMucGFyc2VVcmxGaWx0ZXIobm9kZS5jaGlsZHJlbiwgZWxlbWVudHMpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghcmFkaW9Nb2RlIHx8IGZpcnN0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGZpcnN0U3RyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJlc3VsdFtpbmRleF0gPSBub2RlLm5hbWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgICAgLCB7fSwgdGhpcyk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBFeHByZXNzaW9uQnVpbGRlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gRXhwcmVzc2lvbkJ1aWxkZXI7XHJcbn0pKCk7XHJcbiAgXHJcbnJoLndpZGdldHMuRXhwcmVzc2lvbkJ1aWxkZXIgPSBFeHByZXNzaW9uQnVpbGRlcjsiLCJsZXQgeyByaCB9ID0gd2luZG93O1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgJCB9ID0gcmg7XHJcbmxldCB7IGNvbnN0cyB9ID0gcmg7XHJcblxyXG52YXIgRmlsdGVyQ29udHJvbGxlciA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgR1JPVVBfQ0xBU1MgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IElURU1fQ0xBU1MgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEtFWV9QUk9KRUNUX0ZJTFRFUl9UWVBFID0gdW5kZWZpbmVkO1xyXG4gIEZpbHRlckNvbnRyb2xsZXIgPSBjbGFzcyBGaWx0ZXJDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcbiAgXHJcbiAgICAgIEdST1VQX0NMQVNTID0gJ2dyb3VwJztcclxuICAgICAgSVRFTV9DTEFTUyA9ICdpdGVtJztcclxuICAgICAgS0VZX1BST0pFQ1RfRklMVEVSX1RZUEUgPSBjb25zdHMoJ0tFWV9QUk9KRUNUX0ZJTFRFUl9UWVBFJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0KSB7XHJcbiAgICAgIHRoaXMuY2xpY2sgPSB0aGlzLmNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgfVxyXG4gIFxyXG4gICAgY2xpY2soZSkge1xyXG4gICAgICBsZXQgdG9wTm9kZSA9IGUuY3VycmVudFRhcmdldDtcclxuICAgICAgbGV0IGNsaWNrTm9kZSA9IGUudGFyZ2V0O1xyXG4gICAgICBsZXQgbm9kZSA9IHRoaXMuZ2V0SXRlbU5vZGUoY2xpY2tOb2RlLCB0b3BOb2RlKTtcclxuICAgICAgbGV0IHNlbFRhZ0V4cHJzUGF0aCA9IGAke2NvbnN0cygnS0VZX1BST0pFQ1RfVEFHX1NUQVRFUycpfSR7dGhpcy5nZXRJdGVtS2V5KG5vZGUpfWA7XHJcbiAgICAgIGxldCBzZWxUYWdFeHBycyA9IHRoaXMud2lkZ2V0LmdldChzZWxUYWdFeHByc1BhdGgpO1xyXG4gICAgICBpZiAodGhpcy5maWx0ZXJUeXBlKCkgIT09ICdyYWRpbycpIHtcclxuICAgICAgICB0aGlzLmhhbmRsZUNoZWNrYm94Q2xpY2sobm9kZSwgc2VsVGFnRXhwcnNQYXRoLCBzZWxUYWdFeHBycyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVSYWRpb0NsaWNrKG5vZGUsIHNlbFRhZ0V4cHJzUGF0aCwgc2VsVGFnRXhwcnMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBfLnByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVJhZGlvQ2xpY2sobm9kZSwgc2VsVGFnRXhwcnNQYXRoLCBzZWxUYWdFeHBycykge1xyXG4gICAgICBpZiAoIXRoaXMuaXNHcm91cE5vZGUobm9kZSkgJiYgIXNlbFRhZ0V4cHJzKSB7XHJcbiAgICAgICAgbGV0IHtwYXJlbnRLZXksIGtleX0gPSBfLnNwbGl0S2V5KHNlbFRhZ0V4cHJzUGF0aCk7XHJcbiAgICAgICAgbGV0IG5ld1ZhbHVlID0ge307XHJcbiAgICAgICAgbmV3VmFsdWVba2V5XSA9IHRoaXMuZ2V0SXRlbVZhbHVlKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKHBhcmVudEtleSwgbmV3VmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2hlY2tib3hDbGljayhub2RlLCBzZWxUYWdFeHByc1BhdGgsIHNlbFRhZ0V4cHJzKSB7XHJcbiAgICAgIGxldCBuZXdWYWx1ZTtcclxuICAgICAgaWYgKHRoaXMuaXNHcm91cE5vZGUobm9kZSkpIHtcclxuICAgICAgICBsZXQgY2hlY2tlZCA9IF8uYW55KHNlbFRhZ0V4cHJzLCB0YWdFeHByID0+IHRhZ0V4cHIpO1xyXG4gICAgICAgIG5ld1ZhbHVlID0gY2hlY2tlZCA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0R3JvdXBJdGVtRXhwcnMobm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goc2VsVGFnRXhwcnNQYXRoLCBuZXdWYWx1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbmV3VmFsdWUgPSBzZWxUYWdFeHBycyA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0SXRlbVZhbHVlKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKHNlbFRhZ0V4cHJzUGF0aCwgbmV3VmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbU5vZGUobm9kZSwgdG9wTm9kZSkge1xyXG4gICAgICByZXR1cm4gXy5maW5kUGFyZW50Tm9kZShub2RlLCB0b3BOb2RlLCBub2RlID0+ICQubm9kZU5hbWUobm9kZSkgPT09ICdMSScpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1WYWx1ZShub2RlKSB7IHJldHVybiAkLmRhdGFzZXQobm9kZSwgJ2l0ZW12YWx1ZScpOyB9XHJcblxyXG4gICAgZ2V0R3JvdXBJdGVtRXhwcnMobm9kZSkge1xyXG4gICAgICBsZXQga2V5ID0gJC5kYXRhc2V0KG5vZGUsICdpdGVta2V5Jyk7XHJcbiAgICAgIGxldCBncm91cFRhZyA9IHRoaXMud2lkZ2V0LmdldChgJHt0aGlzLndpZGdldC5rZXl9JHtrZXl9YCk7XHJcbiAgICAgIHJldHVybiBfLm1hcChncm91cFRhZy5jaGlsZHJlbiwgdGFnID0+IHRhZy5uYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJdGVtS2V5KG5vZGUpIHsgcmV0dXJuICQuZGF0YXNldChub2RlLCAnaXRlbWtleScpOyB9XHJcblxyXG4gICAgaXNHcm91cE5vZGUobm9kZSkgeyByZXR1cm4gJC5oYXNDbGFzcyhub2RlLCBHUk9VUF9DTEFTUyk7IH1cclxuXHJcbiAgICBpc0l0ZW1Ob2RlKG5vZGUpIHsgcmV0dXJuICQuaGFzQ2xhc3Mobm9kZSwgSVRFTV9DTEFTUyk7IH1cclxuXHJcbiAgICBjbGFzcyhpdGVtKSB7IGlmIChpdGVtLmNoaWxkcmVuKSB7IHJldHVybiBHUk9VUF9DTEFTUzsgfSBlbHNlIHsgcmV0dXJuIElURU1fQ0xBU1M7IH0gfVxyXG5cclxuICAgIHZhbHVlKGl0ZW0pIHsgaWYgKGl0ZW0uY2hpbGRyZW4pIHsgcmV0dXJuIG51bGw7IH0gZWxzZSB7IHJldHVybiBpdGVtLm5hbWU7IH0gfVxyXG5cclxuICAgIGZpbHRlclR5cGUoKSB7IHJldHVybiB0aGlzLndpZGdldC5nZXQoS0VZX1BST0pFQ1RfRklMVEVSX1RZUEUpIHx8ICdjaGVja2JveCc7IH1cclxuXHJcbiAgICBpbnB1dFR5cGUoaXRlbSkge1xyXG4gICAgICBsZXQgdHlwZSA9IHRoaXMuZmlsdGVyVHlwZSgpO1xyXG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbiAmJiAodHlwZSA9PT0gJ3JhZGlvJykpIHsgdHlwZSA9IHVuZGVmaW5lZDsgfVxyXG4gICAgICByZXR1cm4gdHlwZTtcclxuICAgIH1cclxuICB9O1xyXG4gIEZpbHRlckNvbnRyb2xsZXIuaW5pdENsYXNzKCk7XHJcbiAgcmV0dXJuIEZpbHRlckNvbnRyb2xsZXI7XHJcbn0pKCk7XHJcblxyXG5yaC5jb250cm9sbGVyKCdGaWx0ZXJDb250cm9sbGVyJywgRmlsdGVyQ29udHJvbGxlcik7IiwiY29uc3QgeyByaCB9ID0gd2luZG93O1xyXG5jb25zdCB7IG1vZGVsIH0gPSByaDtcclxuY29uc3QgeyBfIH0gPSByaDtcclxuY29uc3QgeyBjb25zdHMgfSA9IHJoO1xyXG5jb25zdCB7IGh0dHAgfSA9IHJoO1xyXG5jb25zdCB7IHJocyB9ID0gcmg7XHJcblxyXG5cclxudmFyIEZpbHRlclJlcG9ydCA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgZ2V0UG9zdFVybCA9IHVuZGVmaW5lZDtcclxuICBGaWx0ZXJSZXBvcnQgPSBjbGFzcyBGaWx0ZXJSZXBvcnQge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuXHJcblxyXG4gICAgICBnZXRQb3N0VXJsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgaG9zdCA9IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICBjb25zdCBiYXNlQ29udGV4dCA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9QVUJMSVNIX0JBU0VfVVJMJykpLnN1YnN0cihob3N0Lmxlbmd0aCk7XHJcbiAgICAgICAgaWYgKGJhc2VDb250ZXh0ICYmICFfLmlzRW1wdHlTdHJpbmcoYmFzZUNvbnRleHQpKSB7XHJcbiAgICAgICAgICBjb25zdCBoYXNoU3RyaW5nID0gXy5tYXBUb0VuY29kZWRTdHJpbmcoXy5leHRlbmQoXy5hZGRQYXRoTmFtZUtleSh7YXJlYTogcmhzLmFyZWEoKSxcclxuICAgICAgICAgIHByajogcmhzLnByb2plY3QoKSwgdHlwZTogKHJocy50eXBlKSgpLCBhZ3Q6ICdmbHRScHQnLCBtZ3I6ICdhZ20nXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgICByZXR1cm4gYCR7YmFzZUNvbnRleHR9PyR7aGFzaFN0cmluZ31gO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgY29uc3QgdGltZXIgPSAzMDAwO1xyXG4gICAgICBtb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksICgpID0+XHJcbiAgICAgICAgbW9kZWwuc3Vic2NyaWJlT25jZShjb25zdHMoJ0tFWV9QVUJMSVNIX01PREUnKSwgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICBpZiAoIXZhbCkgeyByZXR1cm47IH1cclxuICAgICAgICAgIHZhciB1cmwgPSB1cmwgfHwgZ2V0UG9zdFVybCgpO1xyXG4gICAgICAgICAgbGV0IGNrVGFncyA9IFtdO1xyXG4gICAgICAgICAgY29uc3QgcG9zdFRvU2VydmVyID0gXy5kZWJvdW5jZSgoKSA9PlxyXG4gICAgICAgICAgICBodHRwLnBvc3QodXJsLCBKU09OLnN0cmluZ2lmeShja1RhZ3MpKVxyXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHJoLl9kZWJ1ZykgeyByZXR1cm4gcmguX2QoJ2Vycm9yJywgJ0ZpbHRlciByZXBvcnQgc3RhdHVzICcsIHN0YXR1cyk7IH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAsIHRpbWVyLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLCAgZnVuY3Rpb24oZXhwcikge1xyXG4gICAgICAgICAgICBja1RhZ3MgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyRGF0YSA9IHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9NRVJHRURfRklMVEVSX0tFWScpKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgdGFncyBvZiBBcnJheS5mcm9tKGV4cHIpKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIEFycmF5LmZyb20odGFncy5jKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZ0RhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFnRGF0YSA9IHJoLmZpbHRlck9iamVjdC5sb29rdXAoZmlsdGVyRGF0YSwgdGFnLCBmYWxzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgY2tUYWdzLnB1c2godGFnRGF0YS5kaXNwbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNrVGFncy5sZW5ndGggPiAwKSB7IHJldHVybiBwb3N0VG9TZXJ2ZXIoKTsgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9O1xyXG4gIEZpbHRlclJlcG9ydC5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gRmlsdGVyUmVwb3J0O1xyXG59KSgpO1xyXG5cclxubmV3IEZpbHRlclJlcG9ydDtcclxuIiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgbW9kZWwgfSA9IHJoO1xyXG5sZXQgeyBfIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgaHR0cCB9ID0gcmg7XHJcblxyXG5cclxudmFyIEdsb3NzYXJ5Q29udHJvbGxlciA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgZW50cnlzID0gdW5kZWZpbmVkO1xyXG4gIEdsb3NzYXJ5Q29udHJvbGxlciA9IGNsYXNzIEdsb3NzYXJ5Q29udHJvbGxlciBleHRlbmRzIHJoLk5hdkNvbnRyb2xsZXIge1xyXG4gICAgc3RhdGljIGluaXRDbGFzcygpIHtcclxuICBcclxuICAgICAgZW50cnlzID0gJ2VudHJ5cyc7XHJcbiAgICB9XHJcbiAgICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgIHRoaXMuY2h1bmtDb3VudCA9IDA7XHJcbiAgICAgIHRoaXMuY291bnQgPSAwO1xyXG4gICAgICB0aGlzLmtleXMgPSAnJztcclxuICAgICAgdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICB0aGlzLmxvYWROYXZEYXRhKCdnbG8nKTtcclxuICAgICAgdGhpcy5maWx0ZXIgPSAnJztcclxuICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ3Nob3cnLCB7fSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRWxlbWVudChlbGVtZW50cywgbGlzdCkge1xyXG4gICAgICByZXR1cm4gKCgpID0+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBBcnJheS5mcm9tKGVsZW1lbnRzW2VudHJ5c10pKSB7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sb29rdXAobGlzdCwgZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICByZXN1bHQucHVzaChsaXN0LnB1c2goZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBleGlzdHMobmFtZSkge1xyXG4gICAgICBsZXQgY2ggPSB0aGlzLmFscGhhVGV4dChuYW1lKTtcclxuICAgICAgaWYgKHRoaXMuYWxocGFiZXQuaW5kZXhPZihjaCkgPiAtMSkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICB0aGlzLmFsaHBhYmV0ICs9IGNoO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaXNGaWx0ZXJlZChuYW1lKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlciAmJiAobmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5maWx0ZXIpID09PSAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWxwaGFUZXh0KG5hbWUpIHtcclxuICAgICAgcmV0dXJuIG5hbWUudG9VcHBlckNhc2UoKS5jaGFyQXQoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyR2xvKHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuZmlsdGVyID0gdmFsdWUudG9Mb2NhbGVMb3dlckNhc2UoKTtcclxuICAgICAgdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ1BST0pFQ1RfR0xPU1NBUllfREFUQScpLFxyXG4gICAgICAgbW9kZWwuZ2V0KGNvbnN0cygnUFJPSkVDVF9HTE9TU0FSWV9EQVRBJykpKTtcclxuICAgIH1cclxuICB9O1xyXG4gIEdsb3NzYXJ5Q29udHJvbGxlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gR2xvc3NhcnlDb250cm9sbGVyO1xyXG59KSgpO1xyXG5cclxuXHJcblxyXG5yaC5jb250cm9sbGVyKCdHbG9zc2FyeUNvbnRyb2xsZXInLCBHbG9zc2FyeUNvbnRyb2xsZXIpOyIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS45LjFcclxuKCgpID0+IHtcclxuICB2YXIgSW5kZXhDb250cm9sbGVyLCBOYXZDb250cm9sbGVyLCBfLCBjb25zdHMsIGh0dHAsIG1vZGVsLCByaCwgcmhzLCB0b3BpY3MsXHJcbiAgICBiaW5kID0gKGZuLCBtZSkgPT4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9LFxyXG4gICAgZXh0ZW5kID0gKGNoaWxkLCBwYXJlbnQpID0+IHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcclxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcclxuXHJcbiAgcmggPSB3aW5kb3cucmg7XHJcblxyXG4gIG1vZGVsID0gcmgubW9kZWw7XHJcblxyXG4gIF8gPSByaC5fO1xyXG5cclxuICBjb25zdHMgPSByaC5jb25zdHM7XHJcblxyXG4gIGh0dHAgPSByaC5odHRwO1xyXG5cclxuICByaHMgPSByaC5yaHM7XHJcblxyXG4gIHRvcGljcyA9ICd0b3BpY3MnO1xyXG5cclxuICBOYXZDb250cm9sbGVyID0gKCgoKSA9PiB7XHJcbiAgICBmdW5jdGlvbiBOYXZDb250cm9sbGVyKCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZURhdGEgPSBiaW5kKHRoaXMudXBkYXRlRGF0YSwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgTmF2Q29udHJvbGxlci5wcm90b3R5cGUubG9va3VwID0gKGNoaWxkcmVuLCBrZXkpID0+IHtcclxuICAgICAgdmFyIGNoaWxkLCBlbGVtZW50LCBpLCBsZW47XHJcbiAgICAgIGlmICgoY2hpbGRyZW4gIT0gbnVsbCkgJiYgKGtleSAhPSBudWxsKSkge1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgaWYgKCEoY2hpbGQgIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoa2V5LnR5cGUgPT09IGNoaWxkLnR5cGUgJiYga2V5Lm5hbWUgPT09IGNoaWxkLm5hbWUgJiYgXy5pc0VxdWFsKGtleS51cmwsIGNoaWxkLnVybCkgJiYgXy5pc0VxdWFsKGtleVt0b3BpY3NdLCBjaGlsZFt0b3BpY3NdKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gY2hpbGQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH07XHJcblxyXG4gICAgTmF2Q29udHJvbGxlci5wcm90b3R5cGUuc29ydCA9IGFycmF5ID0+IGFycmF5LnNvcnQoKGZpcnN0LCBzZWNvbmQpID0+IHdpbmRvdy5jb21wYXJlKGZpcnN0Lm5hbWUsIHNlY29uZC5uYW1lKSk7XHJcblxyXG4gICAgTmF2Q29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlRGF0YSA9IGZ1bmN0aW9uKGNvbnN0S2V5LCBwcm9qZWN0VXJsKSB7XHJcbiAgICAgIHZhciBjdXJEYXRhO1xyXG4gICAgICBjdXJEYXRhID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1RFTVBfREFUQScpKSB8fCBbXTtcclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSk7XHJcbiAgICAgIHRoaXMuYWRkRWxlbWVudChjdXJEYXRhLCB0aGlzLmRhdGEsIHByb2plY3RVcmwsIHRoaXMua2V5cyk7XHJcbiAgICAgIGlmICgtLXRoaXMuY2h1bmtDb3VudCA9PT0gMCAmJiB0aGlzLmNvdW50ID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5zb3J0KHRoaXMuZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKGNvbnN0S2V5KSwgdGhpcy5kYXRhKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBOYXZDb250cm9sbGVyLnByb3RvdHlwZS5nZXRDaHVua0RhdGEgPSBmdW5jdGlvbihwcm9qZWN0VXJsLCBrZXkpIHtcclxuICAgICAgdmFyIGFyciwgcmVmO1xyXG4gICAgICB0aGlzLmNvdW50LS07XHJcbiAgICAgIGFyciA9ICgocmVmID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1RFTVBfREFUQScpKSkgIT0gbnVsbCA/IHJlZlsnY2h1bmtpbmZvcyddIDogdm9pZCAwKSB8fCBbXTtcclxuICAgICAgdGhpcy5jaHVua0NvdW50ICs9IGFyci5sZW5ndGg7XHJcbiAgICAgIHJldHVybiBfLmVhY2goYXJyLCBmdW5jdGlvbihjaHVuaykge1xyXG4gICAgICAgIGlmIChwcm9qZWN0VXJsKSB7XHJcbiAgICAgICAgICBwcm9qZWN0VXJsID0gXy5lbnN1cmVTbGFzaChwcm9qZWN0VXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF8ubG9hZFNjcmlwdChwcm9qZWN0VXJsICsgXCJ3aHhkYXRhL1wiICsgY2h1bmsubm9kZSArIFwiLm5ldy5qc1wiLCBmYWxzZSwgKChfdGhpcyA9PiAoKSA9PiBfdGhpcy51cGRhdGVEYXRhKGtleSwgcHJvamVjdFVybCkpKSh0aGlzKSk7XHJcbiAgICAgIH0sIHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBOYXZDb250cm9sbGVyLnByb3RvdHlwZS5sb2FkTmF2RGF0YSA9IGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgKChfdGhpcyA9PiBsaXN0ID0+IHtcclxuICAgICAgICBfdGhpcy5hbGhwYWJldCA9ICcnO1xyXG4gICAgICAgIF90aGlzLmNvdW50ICs9IGxpc3QubGVuZ3RoO1xyXG4gICAgICAgIHJldHVybiBfLmVhY2gobGlzdCwgZnVuY3Rpb24ocHJvamVjdFVybCkge1xyXG4gICAgICAgICAgaWYgKHByb2plY3RVcmwpIHtcclxuICAgICAgICAgICAgcHJvamVjdFVybCA9IF8uZW5zdXJlU2xhc2gocHJvamVjdFVybCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gXy5sb2FkU2NyaXB0KHByb2plY3RVcmwgKyBcIndoeGRhdGEvXCIgKyAodHlwZSA9PT0gJ25keCcgPyAnaWR4JyA6ICdnbG8nKSArIFwiLm5ldy5qc1wiLCBmYWxzZSwgKChfdGhpcyA9PiAoKSA9PiBfdGhpcy5nZXRDaHVua0RhdGEocHJvamVjdFVybCwgdHlwZSA9PT0gJ25keCcgPyAnUFJPSkVDVF9JTkRFWF9EQVRBJyA6ICdQUk9KRUNUX0dMT1NTQVJZX0RBVEEnKSkpKHRoaXMpKTtcclxuICAgICAgICB9LCBfdGhpcyk7XHJcbiAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBOYXZDb250cm9sbGVyO1xyXG5cclxuICB9KSkoKTtcclxuXHJcbiAgcmguTmF2Q29udHJvbGxlciA9IE5hdkNvbnRyb2xsZXI7XHJcblxyXG4gIEluZGV4Q29udHJvbGxlciA9ICgoc3VwZXJDbGFzcyA9PiB7XHJcbiAgICB2YXIgZGVmUHJvamVjdDtcclxuXHJcbiAgICBleHRlbmQoSW5kZXhDb250cm9sbGVyLCBzdXBlckNsYXNzKTtcclxuXHJcbiAgICBkZWZQcm9qZWN0ID0gJyc7XHJcblxyXG4gICAgZnVuY3Rpb24gSW5kZXhDb250cm9sbGVyKHdpZGdldCkge1xyXG4gICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgdGhpcy5jaHVua0NvdW50ID0gMDtcclxuICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgdGhpcy5maWx0ZXIgPSAnJztcclxuICAgICAgdGhpcy5rZXlzID0gJ2tleXMnO1xyXG4gICAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgICAgbW9kZWwuc3Vic2NyaWJlT25jZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCAoKF90aGlzID0+ICgpID0+IHtcclxuICAgICAgICBfdGhpcy5sb2FkTmF2RGF0YSgnbmR4Jyk7XHJcbiAgICAgICAgX3RoaXMuZ2V0SW5kZXhEYXRhKCk7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9JTkRFWF9GSUxURVInKSwgKCkgPT4ge1xyXG4gICAgICAgICAgX3RoaXMuYWxocGFiZXQgPSAnJztcclxuICAgICAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnUFJPSkVDVF9JTkRFWF9EQVRBJyksIG1vZGVsLmdldChjb25zdHMoJ1BST0pFQ1RfSU5ERVhfREFUQScpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pKSh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5hZGRFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCwgbGlzdCwgcHJvamVjdFVybCwgZGF0YSkge1xyXG4gICAgICB2YXIgY2hpbGQsIGV4aXN0aW5nLCBpLCBsZW4sIG9iaiwgcmVmLCByZWxVcmwsIHJlc3VsdHM7XHJcbiAgICAgIGlmIChlbGVtZW50W2RhdGFdICE9IG51bGwpIHtcclxuICAgICAgICByZWYgPSBlbGVtZW50W2RhdGFdO1xyXG4gICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIGNoaWxkID0gcmVmW2ldO1xyXG4gICAgICAgICAgaWYgKCEoY2hpbGQgIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIShleGlzdGluZyA9IHRoaXMubG9va3VwKGxpc3QsIGNoaWxkKSkpIHtcclxuICAgICAgICAgICAgb2JqID0ge1xyXG4gICAgICAgICAgICAgIHR5cGU6IGNoaWxkLnR5cGUsXHJcbiAgICAgICAgICAgICAgbmFtZTogY2hpbGQubmFtZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRbJ2RhdGEtcmh0YWdzJ10pIHtcclxuICAgICAgICAgICAgICBvYmpbJ2RhdGEtcmh0YWdzJ10gPSBjaGlsZFsnZGF0YS1yaHRhZ3MnXSArIFwiK1wiICsgcHJvamVjdFVybDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNoaWxkLnVybCkge1xyXG4gICAgICAgICAgICAgIG9ialt0b3BpY3NdID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVsVXJsID0gXy5tYWtlUmVsYXRpdmVVcmwoXCJcIiArIHByb2plY3RVcmwsIGRlZlByb2plY3QpO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQudXJsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBvYmoudXJsID0gXCJcIiArIChlbmNvZGVVUkkocmVsVXJsKSkgKyBjaGlsZC51cmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoaWxkLnVybCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgb2JqW3RoaXMua2V5c10gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsaXN0LnB1c2gob2JqKTtcclxuICAgICAgICAgICAgZXhpc3RpbmcgPSBsaXN0W2xpc3QubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoY2hpbGQsIGV4aXN0aW5nW3RoaXMua2V5c10sIHByb2plY3RVcmwsIHRoaXMua2V5cyk7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5hZGRFbGVtZW50KGNoaWxkLCBleGlzdGluZ1t0b3BpY3NdLCBwcm9qZWN0VXJsLCB0b3BpY3MpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgSW5kZXhDb250cm9sbGVyLnByb3RvdHlwZS5zaG93SXRlbSA9IG5hbWUgPT4ge1xyXG4gICAgICB2YXIgZmlsdGVyO1xyXG4gICAgICBmaWx0ZXIgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfSU5ERVhfRklMVEVSJykpO1xyXG4gICAgICByZXR1cm4gIWZpbHRlciB8fCBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXIudG9Mb2NhbGVMb3dlckNhc2UoKSkgIT09IC0xO1xyXG4gICAgfTtcclxuXHJcbiAgICBJbmRleENvbnRyb2xsZXIucHJvdG90eXBlLnNob3dDYXRlZ29yeSA9IGZ1bmN0aW9uKG5hbWUsIGxldmVsKSB7XHJcbiAgICAgIHZhciBjaDtcclxuICAgICAgaWYgKGxldmVsID4gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBjaCA9IHRoaXMuYWxwaGFUZXh0KG5hbWUpO1xyXG4gICAgICBpZiAodGhpcy5hbGhwYWJldC5pbmRleE9mKGNoKSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYWxocGFiZXQgKz0gY2g7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBJbmRleENvbnRyb2xsZXIucHJvdG90eXBlLnNob3dOZXh0TGV2ZWwgPSBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgIHZhciBjaGlsZERhdGEsIGlkLCBvYmoxLCBvbGQ7XHJcbiAgICAgIGlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXhpZCcpO1xyXG4gICAgICBvbGQgPSB0aGlzLndpZGdldC5nZXQoJ3Nob3cuJyArIGlkKTtcclxuICAgICAgY2hpbGREYXRhID0gKFxyXG4gICAgICAgIG9iajEgPSB7fSxcclxuICAgICAgICBvYmoxW1wiXCIgKyBpZF0gPSAhb2xkLFxyXG4gICAgICAgIG9iajFcclxuICAgICAgKTtcclxuICAgICAgd2hpbGUgKGlkKSB7XHJcbiAgICAgICAgaWQgPSBpZC5zdWJzdHIoMCwgaWQubGFzdEluZGV4T2YoJ18nKSk7XHJcbiAgICAgICAgY2hpbGREYXRhW2lkXSA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ3Nob3cnLCBjaGlsZERhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICBJbmRleENvbnRyb2xsZXIucHJvdG90eXBlLmFscGhhVGV4dCA9IG5hbWUgPT4gbmFtZS50b1VwcGVyQ2FzZSgpLmNoYXJBdCgwKTtcclxuXHJcbiAgICBJbmRleENvbnRyb2xsZXIucHJvdG90eXBlLmdldEluZGV4RGF0YSA9ICgpID0+IG1vZGVsLnN1YnNjcmliZU9uY2UoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpLCAoKSA9PiB7XHJcbiAgICAgIHZhciBiYXNlQ29udGV4dCwgYmFzZVVybCwgZXJyLCBoYXNoU3RyaW5nLCBob3N0LCBwYXJlbnRQYXRoO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGJhc2VVcmwgPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFVCTElTSF9CQVNFX1VSTCcpKTtcclxuICAgICAgICBob3N0ID0gZG9jdW1lbnQubG9jYXRpb24ub3JpZ2luO1xyXG4gICAgICAgIGJhc2VDb250ZXh0ID0gYmFzZVVybC5zdWJzdHIoaG9zdC5sZW5ndGgpO1xyXG4gICAgICAgIHBhcmVudFBhdGggPSBfLnBhcmVudFBhdGgoXy5maWxlUGF0aChfLmdldFJvb3RVcmwoKSkpO1xyXG4gICAgICAgIGlmIChiYXNlQ29udGV4dCAmJiAhXy5pc0VtcHR5U3RyaW5nKGJhc2VDb250ZXh0KSkge1xyXG4gICAgICAgICAgaGFzaFN0cmluZyA9IF8ubWFwVG9FbmNvZGVkU3RyaW5nKF8uZXh0ZW5kKHtcclxuICAgICAgICAgICAgYXJlYTogcmhzLmFyZWEoKSxcclxuICAgICAgICAgICAgcHJqOiByaHMucHJvamVjdCgpLFxyXG4gICAgICAgICAgICB0eXBlOiByaHMudHlwZSgpLFxyXG4gICAgICAgICAgICBhZ3Q6ICduZHgnLFxyXG4gICAgICAgICAgICBtZ3I6ICdhZ20nXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICByZXR1cm4gaHR0cC5nZXQoYmFzZUNvbnRleHQgKyBcIj9cIiArIGhhc2hTdHJpbmcpLnN1Y2Nlc3MoKGRhdGEsIHN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbGlzdDtcclxuICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICAgICAgICAgIGxpc3QgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKGRhdGEsIGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgIGRhdGFbMF0gPSBfLmVuc3VyZVNsYXNoKGRhdGFbMF0pO1xyXG4gICAgICAgICAgICAgIHJldHVybiBsaXN0LnB1c2goXy5tYWtlUmVsYXRpdmVVcmwoaXRlbSwgZGF0YVswXSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksIGxpc3QpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICBlcnIgPSBfZXJyb3I7XHJcbiAgICAgICAgaWYgKHJoLl9kZWJ1Zykge1xyXG4gICAgICAgICAgcmV0dXJuIHJoLl9kKCd3YXJuJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEluZGV4Q29udHJvbGxlcjtcclxuXHJcbiAgfSkpKHJoLk5hdkNvbnRyb2xsZXIpO1xyXG5cclxuICByaC5jb250cm9sbGVyKCdJbmRleENvbnRyb2xsZXInLCBJbmRleENvbnRyb2xsZXIpO1xyXG5cclxufSkuY2FsbCh0aGlzKTtcclxuIiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7ICQgfSA9IHJoO1xyXG5sZXQgeyBjb25zdHMgfSA9IHJoO1xyXG5sZXQgeyBtb2RlbCB9ID0gcmg7XHJcblxyXG5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1NIT1dfVEFHUycpLCByaC5fcGFyYW1zLnNob3d0YWdzID09PSAndHJ1ZScpO1xyXG5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX0lGUkFNRV9FVkVOVFMnKSwge2NsaWNrOiB0cnVlfSk7XHJcblxyXG5sZXQgb2xkSGFzaE1hcCA9IHt9O1xyXG5sZXQgaGFzaENoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICBsZXQgbmV3SGFzaE1hcCA9IF8uaGFzaFBhcmFtcygpO1xyXG4gIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfSEFTSF9DSEFOR0UnKSxcclxuICAgIHtvbGRNYXA6IG9sZEhhc2hNYXAsIG5ld01hcDogbmV3SGFzaE1hcH0sXHJcbiAgICB7c3luYzogdHJ1ZX0pO1xyXG4gIHJldHVybiBvbGRIYXNoTWFwID0gbmV3SGFzaE1hcDtcclxufTtcclxuXHJcbmxldCByZWRpcmVjdFRvRGVmYXVsdFRvcGljID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgcGFyYW1zU3RyID0gXy5leHRyYWN0UGFyYW1TdHJpbmcoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XHJcbiAgICBsZXQgcGFyYW1zTWFwID0gXy51cmxQYXJhbXMocGFyYW1zU3RyKTtcclxuICAgIGxldCBoYXNoU3RyID0gXy5leHRyYWN0SGFzaFN0cmluZyhkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGxldCBoYXNoTWFwID0gXy5oYXNoUGFyYW1zKGhhc2hTdHIpO1xyXG4gICAgbGV0IG1hcG5vYXR0ciA9IGNvbnN0cygnUkhNQVBOTycpO1xyXG4gICAgbGV0IHRvcGljS2V5ID0gY29uc3RzKCdIQVNIX0tFWV9UT1BJQycpO1xyXG4gICAgaWYgKCEobWFwbm9hdHRyIGluIHBhcmFtc01hcCkgJiYgISh0b3BpY0tleSBpbiBoYXNoTWFwKSkge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24gPSBjb25zdHMoJ0RFRkFVTFRfVE9QSUMnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXy5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2hhc2hjaGFuZ2UnLCBoYXNoQ2hhbmdlZCk7XHJcblxyXG5fLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnb3JpZW50YXRpb25jaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9PUklFTlRBVElPTl9DSEFOR0UnKSwgbnVsbCk7XHJcbiAgaWYgKG1vZGVsLmdldChjb25zdHMoJ0tFWV9TQ1JFRU5fSVBBRCcpKSkge1xyXG4gICAgbGV0IHRvcGljRnJhbWU7XHJcbiAgICBpZiAodG9waWNGcmFtZSA9IF8uZ2V0VG9waWNGcmFtZSgpKSB7XHJcbiAgICAgIGxldCB7IGRpc3BsYXkgfSA9IHRvcGljRnJhbWUuc3R5bGU7XHJcbiAgICAgIHRvcGljRnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgdG9waWNGcmFtZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgIHJldHVybiBfLmRlZmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRvcGljRnJhbWUuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgICAgICAgcmV0dXJuIF8uZGVsYXkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB0b3BpY0ZyYW1lLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgIHJldHVybiBfLmRlbGF5KCgpID0+IC8vIExldCB0cnkgb25jZSBtb3JlXHJcbiAgICAgICAgICAgIHRvcGljRnJhbWUub2Zmc2V0SGVpZ2h0XHJcbiAgICAgICAgICBcclxuICAgICAgICAgICwgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLCAyMDApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG4gICBcclxuXHJcbi8vIFRPRE9cclxuLy9tb2RlbC5zdWJzY3JpYmUgY29uc3RzKCdFVlRfT1JJRU5UQVRJT05fQ0hBTkdFJyksIF8uZGVib3VuY2UgLT5cclxuLy8gIG1ldGEgPSAkKCdtZXRhW25hbWU9dmlld3BvcnRdJywgMClcclxuLy8gIG1ldGEuY29udGVudCA9IFwid2lkdGg9I3t3aW5kb3cuaW5uZXJXaWR0aH0sIGluaXRpYWwtc2NhbGU9MSxcclxuLy8gIG1heGltdW0tc2NhbGU9MywgdXNlci1zY2FsYWJsZT15ZXNcIlxyXG4vLyAgaWYgbW9kZWwuZ2V0IGNvbnN0cyAnS0VZX1NDUkVFTl9JT1MnXHJcbi8vICAgIG1vZGVsLnB1Ymxpc2ggY29uc3RzKCdFVlRfUkVMT0FEX1RPUElDJyksIG51bGxcclxuLy8sIDI1MFxyXG5cclxubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1dJREdFVF9MT0FERUQnKSwgZnVuY3Rpb24oKSB7XHJcbiAgLy8gQ3JlYXRlIEV4cHJlc3Npb25CdWlsZGVyIHdpZGdldCBvbiBldmVyeSBwYWdlXHJcbiAgbGV0IHRvcGljRnJhbWU7XHJcbiAgbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX01FUkdFRF9GSUxURVJfS0VZJyksICgpID0+IG5ldyByaC53aWRnZXRzLkV4cHJlc3Npb25CdWlsZGVyKCkpO1xyXG5cclxuICAvLyBDcmVhdGUgQnJvd3NlU2VxdWVuY2VCdWlsZGVyIHdpZGdldCBvbiBldmVyeSBwYWdlXHJcbiAgbmV3IHJoLndpZGdldHMuQnJvd3NlU2VxdWVuY2VCdWlsZGVyKCk7XHJcblxyXG4gIGhhc2hDaGFuZ2VkKCk7XHJcblxyXG4gIC8vIHJlcGxhY2UgZGVmYXVsdCBwcmludCBtZXRob2QgdG8gc3VwcG9ydCBpRnJhbWVcclxuICByaC5sYXlvdXRQcmludCA9IHdpbmRvdy5wcmludDtcclxuICB3aW5kb3cucHJpbnQgPSAoKSA9PlxyXG4gICAgLy8gcHVibGlzaCBpdCB3aXRoIG51bGwgdmFsdWUsIHRvIHN0b3AgdGhlIGF1dG1hdGljIHN1YnNjcmliZSBjYWxsc1xyXG4gICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9QUklOVF9UT1BJQycpLCBudWxsKVxyXG4gIDtcclxuXHJcbiAgbGV0IHRvcGljRmlsZU5hbWUgPSBfLmdldEZpbGVOYW1lKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xyXG4gIGlmICh0b3BpY0ZpbGVOYW1lID09PSBjb25zdHMoJ1RPUElDX0ZJTEUnKSkge1xyXG4gICAgbGV0IHJlZGlyZWN0VXJsID0gcmVkaXJlY3RUb0RlZmF1bHRUb3BpYygpO1xyXG4gICAgaWYgKHJlZGlyZWN0VXJsKSB7IHJldHVybiByZWRpcmVjdFVybDsgfVxyXG4gIH1cclxuXHJcbiAgaWYgKHRvcGljRnJhbWUgPSBfLmdldFRvcGljRnJhbWUoKSkge1xyXG4gICAgcmV0dXJuIHRvcGljRnJhbWUub25sb2FkID0gKCkgPT4gbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9UT1BJQ19MT0FERUQnKSwgbnVsbCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxldCBwYXJhbXNTdHIgPSBfLmV4dHJhY3RQYXJhbVN0cmluZyhkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGxldCBwYXJhbXNNYXAgPSBfLnVybFBhcmFtcyhwYXJhbXNTdHIpO1xyXG4gICAgbGV0IG1hcG5vYXR0ciA9IGNvbnN0cygnUkhNQVBOTycpO1xyXG4gICAgaWYoIG1hcG5vYXR0ciBpbiBwYXJhbXNNYXAgKSB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5sb2NhdGlvbiA9IGNvbnN0cygnVE9QSUNfRklMRScpICsgXCI/XCIgKyBwYXJhbXNTdHI7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxubW9kZWwuc3Vic2NyaWJlKGAke2NvbnN0cygnRVZUX0JPT0tNQVJLJyl9I2NvbnRlbnRfdG9wX3BsYWNlaG9sZGVyYCwgKCkgPT5cclxuICAvLyBIYWNrICNjb250ZW50X3RvcF9saW5rIGNsaWNrcyBhbmQgc2VuZCB0aGVtIHRvIGNvbnRlbnQgaWZyYW1lXHJcbiAgbW9kZWwucHVibGlzaChjb25zdHMoJ0VWVF9TQ1JPTExfVE9fVE9QJyksIG51bGwpXHJcbik7XHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJyksICgpID0+IHJoLmZpbHRlck9iamVjdCA9IG5ldyByaC5NZXJnZVByb2opO1xyXG5cclxubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksIGZ1bmN0aW9uKCkge1xyXG4gIGxldCBkZXZpY2VSZWFkeSA9IFwiZGV2aWNlcmVhZHlcIjtcclxuICByZXR1cm4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkZXZpY2VSZWFkeSwgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAod2luZG93LmNvcmRvdmEgIT0gbnVsbCkgeyByZXR1cm4gbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9NT0JJTEVfQVBQX01PREUnKSwgdHJ1ZSk7IH1cclxuICB9KTtcclxufSk7XHJcbiIsInZhciBKc0xvYWRpbmdDb250cm9sbGVyID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCByaCA9IHVuZGVmaW5lZDtcclxuICBsZXQgJCA9IHVuZGVmaW5lZDtcclxuICBsZXQgXyA9IHVuZGVmaW5lZDtcclxuICBKc0xvYWRpbmdDb250cm9sbGVyID0gY2xhc3MgSnNMb2FkaW5nQ29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gICAgICAoeyByaCB9ID0gd2luZG93KTtcclxuICAgICAgKHsgJCB9ID0gcmgpO1xyXG4gICAgICAoeyBfIH0gPSByaCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0LCBvcHRzKSB7XHJcbiAgICAgIGxldCByZW1vdmVDbGFzc2VzID0gKG9wdHMgIT0gbnVsbCA/IG9wdHMucmVtb3ZlQ2xhc3NlcyA6IHVuZGVmaW5lZCkgfHwgWydoaWRlLWNoaWxkcmVuJywgJ2xvYWRpbmcnXTtcclxuICAgICAgXy5lYWNoKHJlbW92ZUNsYXNzZXMsIGNsYXNzTmFtZSA9PiAkLnJlbW92ZUNsYXNzKHdpZGdldC5ub2RlLCBjbGFzc05hbWUpKTtcclxuICAgICAgXy5lYWNoKG9wdHMgIT0gbnVsbCA/IG9wdHMuYWRkQ2xhc3NlcyA6IHVuZGVmaW5lZCwgY2xhc3NOYW1lID0+ICQuYWRkQ2xhc3Mod2lkZ2V0Lm5vZGUsIGNsYXNzTmFtZSkpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgSnNMb2FkaW5nQ29udHJvbGxlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gSnNMb2FkaW5nQ29udHJvbGxlcjtcclxufSkoKTtcclxuXHJcbndpbmRvdy5yaC5jb250cm9sbGVyKCdKc0xvYWRpbmdDb250cm9sbGVyJywgSnNMb2FkaW5nQ29udHJvbGxlcik7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyAkIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxuXHJcbnJoLm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9XSURHRVRfQkVGT1JFTE9BRCcpLCBmdW5jdGlvbigpIHtcclxuICBpZiAoJCgnYS53U2hvdycsIDApICE9PSBudWxsKSB7XHJcbiAgICBsZXQgY29udGVudERpdiA9ICQoJy5jb250ZW50dG9waWMnLCAwKTtcclxuICAgICQuc2V0QXR0cmlidXRlKGNvbnRlbnREaXYsICdkYXRhLXJod2lkZ2V0JywgJ0Jhc2ljJyk7XHJcbiAgICByZXR1cm4gJC5zZXRBdHRyaWJ1dGUoY29udGVudERpdiwgJ2RhdGEtY2xhc3MnLFxyXG4gICAgICAnZ292dF9jc2g6QC5sLmNzaF9tb2RlO2dvdnRfbm9jc2g6IUAubC5jc2hfbW9kZScpO1xyXG4gIH1cclxufSk7IiwibGV0IHsgcmggfSA9IHdpbmRvdztcclxubGV0IHsgXyB9ID0gcmg7XHJcbmxldCB7IG1vZGVsIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxuXHJcbnZhciBQcm9qZWN0cyA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgcHJvamVjdExpc3QgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IHByb2plY3RRdWV1ZSA9IHVuZGVmaW5lZDtcclxuICBsZXQgcHJvakRhdGFGaWxlID0gdW5kZWZpbmVkO1xyXG4gIGxldCBSRU1PVEVOT0RFID0gdW5kZWZpbmVkO1xyXG4gIGxldCBQUk9KTk9ERSA9IHVuZGVmaW5lZDtcclxuICBsZXQgVVJMID0gdW5kZWZpbmVkO1xyXG4gIGxldCBsb2FkZWQgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IGxvYWRQcm9qZWN0RmlsZSA9IHVuZGVmaW5lZDtcclxuICBsZXQgZ2V0UHJvamVjdExpc3QgPSB1bmRlZmluZWQ7XHJcbiAgUHJvamVjdHMgPSBjbGFzcyBQcm9qZWN0cyB7XHJcbiAgICBzdGF0aWMgaW5pdENsYXNzKCkge1xyXG4gICAgICBwcm9qZWN0TGlzdCA9IFtdO1xyXG4gICAgICBwcm9qZWN0UXVldWUgPSBbXTtcclxuICAgICAgcHJvakRhdGFGaWxlID0gJ3Byb2plY3RkYXRhLmpzJztcclxuICAgICAgUkVNT1RFTk9ERSA9ICdyZW1vdGUnO1xyXG4gICAgICBQUk9KTk9ERSA9ICdwcm9qZWN0JztcclxuICAgICAgVVJMID0gJ3VybCc7XHJcbiAgICAgIGxvYWRlZCA9IDA7XHJcbiAgXHJcbiAgICAgIGxvYWRQcm9qZWN0RmlsZSA9IGZ1bmN0aW9uKGN1clByb2pQYXRoKSB7IFxyXG4gICAgICAgIGxldCBjdXJQcm9qRGF0YUZpbGUgPSBjdXJQcm9qUGF0aCArICcvJyArIHByb2pEYXRhRmlsZTtcclxuICAgICAgICByZXR1cm4gd2luZG93LnhtbEpzUmVhZGVyLmxvYWRGaWxlKGN1clByb2pEYXRhRmlsZSwgZnVuY3Rpb24oeG1sRG9jLCBjdXJQcm9qUGF0aCkge1xyXG4gICAgICAgICAgbGV0IHJlbW90ZU5vZGVzO1xyXG4gICAgICAgICAgbGV0IGxlbiA9IDA7XHJcbiAgICAgICAgICBsb2FkZWQrKztcclxuICAgICAgICAgIGlmICh4bWxEb2MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgcHJvalhtbE5vZGUgPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoUFJPSk5PREUpWzBdO1xyXG4gICAgICAgICAgICByZW1vdGVOb2RlcyA9IHByb2pYbWxOb2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFJFTU9URU5PREUpO1xyXG4gICAgICAgICAgICBsZW4gPSByZW1vdGVOb2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBfLmVhY2gocmVtb3RlTm9kZXMsIGZ1bmN0aW9uKHJlbW90ZU5vZGUpIHtcclxuICAgICAgICAgICAgbGV0IHBhdGggPSBjdXJQcm9qUGF0aCArICcvJyArIHJlbW90ZU5vZGUuZ2V0QXR0cmlidXRlKFVSTCk7XHJcbiAgICAgICAgICAgIHByb2plY3RMaXN0LnB1c2gocGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0UXVldWUucHVzaChwYXRoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZ2V0UHJvamVjdExpc3QoKTtcclxuICAgICAgICAgIGlmICgocHJvamVjdFF1ZXVlLmxlbmd0aCA9PT0gMCkgJiYgKGxvYWRlZCA9PT0gcHJvamVjdExpc3QubGVuZ3RoKSkge1xyXG4gICAgICAgICAgICBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX1BST0pFQ1RfTElTVCcpLCBwcm9qZWN0TGlzdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX01BU1RFUl9QUk9KRUNUX0xJU1QnKSwgW1wiLlwiXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwgY3VyUHJvalBhdGgpO1xyXG4gICAgICB9O1xyXG4gIFxyXG4gICAgICBnZXRQcm9qZWN0TGlzdCA9ICgpID0+XHJcbiAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICAgIHdoaWxlIChwcm9qZWN0UXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgcHJvamVjdCA9IHByb2plY3RRdWV1ZS5zcGxpY2UoMCwgMSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxvYWRQcm9qZWN0RmlsZShwcm9qZWN0KSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pKClcclxuICAgICAgO1xyXG4gICAgfVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHByb2plY3RMaXN0LnB1c2goJy4nKTtcclxuICAgICAgcHJvamVjdFF1ZXVlLnB1c2goJy4nKTtcclxuICAgICAgZ2V0UHJvamVjdExpc3QoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFByb2plY3RzLmluaXRDbGFzcygpO1xyXG4gIHJldHVybiBQcm9qZWN0cztcclxufSkoKTtcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCAoKSA9PlxyXG4gIF8uZGVmZXIoZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoIW1vZGVsLmdldChjb25zdHMoJ0tFWV9QVUJMSVNIX01PREUnKSkgJiYgIXdpbmRvdy5nYlByZXZpZXdNb2RlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvamVjdHM7XHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuIiwidmFyIE1vZGVybkxheW91dENvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKSB7XHJcbiAgbGV0IHJoID0gdW5kZWZpbmVkO1xyXG4gIGxldCBfID0gdW5kZWZpbmVkO1xyXG4gIGxldCAkID0gdW5kZWZpbmVkO1xyXG4gIGxldCBjb25zdHMgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEtFWV9GRUFUVVJFID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfRklMVEVSX0xPQ0FUSU9OID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfU0VBUkNIX0xPQ0FUSU9OID0gdW5kZWZpbmVkO1xyXG4gIGxldCBLRVlfQUNUSVZFX1RBQiA9IHVuZGVmaW5lZDtcclxuICBsZXQgS0VZX1VJX01PREUgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEtFWV9NT0JJTEVfVE9DX0RSSUxMX0RPV04gPSB1bmRlZmluZWQ7XHJcbiAgbGV0IEtFWV9UT0NfRFJJTExfRE9XTiA9IHVuZGVmaW5lZDtcclxuICBsZXQgREVTS1RPUCA9IHVuZGVmaW5lZDtcclxuICBsZXQgVEFCTEVUID0gdW5kZWZpbmVkO1xyXG4gIGxldCBQSE9ORSA9IHVuZGVmaW5lZDtcclxuICBsZXQgU0hPV19GSUxURVJfVUkgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IHRhYnMgPSB1bmRlZmluZWQ7XHJcbiAgbGV0IHNpZGVCYXJUYWJzID0gdW5kZWZpbmVkO1xyXG4gIGxldCBkZWxheUxvYWRUYWJzID0gdW5kZWZpbmVkO1xyXG4gIE1vZGVybkxheW91dENvbnRyb2xsZXIgPSBjbGFzcyBNb2Rlcm5MYXlvdXRDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyBpbml0Q2xhc3MoKSB7XHJcbiAgXHJcbiAgICAgICh7IHJoIH0gPSB3aW5kb3cpO1xyXG4gICAgICAoeyBfIH0gPSByaCk7XHJcbiAgICAgICh7ICQgfSA9IHJoKTtcclxuICAgICAgKHsgY29uc3RzIH0gPSByaCk7XHJcbiAgICAgIEtFWV9GRUFUVVJFID0gY29uc3RzKCdLRVlfRkVBVFVSRScpO1xyXG4gICAgICBLRVlfRklMVEVSX0xPQ0FUSU9OID0gY29uc3RzKCdLRVlfRklMVEVSX0xPQ0FUSU9OJyk7XHJcbiAgICAgIEtFWV9TRUFSQ0hfTE9DQVRJT04gPSBjb25zdHMoJ0tFWV9TRUFSQ0hfTE9DQVRJT04nKTtcclxuICAgICAgS0VZX0FDVElWRV9UQUIgPSBjb25zdHMoJ0tFWV9BQ1RJVkVfVEFCJyk7XHJcbiAgICAgIEtFWV9VSV9NT0RFID0gY29uc3RzKCdLRVlfVUlfTU9ERScpO1xyXG4gICAgICBLRVlfTU9CSUxFX1RPQ19EUklMTF9ET1dOID0gY29uc3RzKCdLRVlfTU9CSUxFX1RPQ19EUklMTF9ET1dOJyk7XHJcbiAgICAgIEtFWV9UT0NfRFJJTExfRE9XTiA9IGNvbnN0cygnS0VZX1RPQ19EUklMTF9ET1dOJyk7XHJcbiAgICAgIERFU0tUT1AgPSAnZGVza3RvcCc7XHJcbiAgICAgIFRBQkxFVCA9ICd0YWJsZXQnO1xyXG4gICAgICBQSE9ORSA9ICdwaG9uZSc7XHJcbiAgICAgIFNIT1dfRklMVEVSX1VJID0gcmguX3BhcmFtcy5oaWRlVUkgIT09ICdmaWx0ZXInO1xyXG4gICAgICB0YWJzID0ge1xyXG4gICAgICAgIGRlc2t0b3A6IFsndG9jJywgJ2lkeCcsICdnbG8nLCAnZmlsdGVyJywgJ2Z0cyddLFxyXG4gICAgICAgIHRhYmxldDogWyd0b2MnLCAnaWR4JywgJ2dsbycsICdmaWx0ZXInLCAnZnRzJ10sXHJcbiAgICAgICAgcGhvbmU6IFsndG9jJywgJ2lkeCcsICdnbG8nLCAnZmlsdGVyJywgJ2Z0cyddXHJcbiAgICAgIH07XHJcbiAgXHJcbiAgICAgIHNpZGVCYXJUYWJzID0ge1xyXG4gICAgICAgIGRlc2t0b3A6IFsndG9jJywgJ2lkeCcsICdnbG8nLCAnZmlsdGVyJywgJ2Z0cyddLFxyXG4gICAgICAgIHRhYmxldDogWyd0b2MnLCAnaWR4JywgJ2dsbycsICdmaWx0ZXInLCAnZnRzJ10sXHJcbiAgICAgICAgcGhvbmU6IFsndG9jJywgJ2lkeCcsICdnbG8nXVxyXG4gICAgICB9O1xyXG4gICAgICBkZWxheUxvYWRUYWJzID0ge1xyXG4gICAgICAgICdpZHgnOiB7ZXZ0OiAnRVZUX0xPQURfSURYJywgZl9rZXk6ICdkZWxheV9sb2FkX2lkeCd9LFxyXG4gICAgICAgICdnbG8nOiB7ZXZ0OiAnRVZUX0xPQURfR0xPJywgZl9rZXk6ICdkZWxheV9sb2FkX2dsbyd9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkZ2V0KSB7XHJcbiAgICAgIHRoaXMudHJpZ2dlckRlbGF5TG9hZFdpZGdldHMgPSB0aGlzLnRyaWdnZXJEZWxheUxvYWRXaWRnZXRzLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgICAodGhpcy5pbml0KSgpO1xyXG4gICAgICAodGhpcy5zdWJzY3JpYmVBY3RpdmVUYWIpKCk7XHJcbiAgICAgICh0aGlzLnN1YnNjcmliZVRvTG9jYXRpb25zKSgpO1xyXG4gICAgICAodGhpcy5zdWJzY3JpYmVTY3JlZW5zKSgpO1xyXG4gICAgICBcclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksICgpID0+IHtcclxuICAgICAgICAodGhpcy5zdWJzY3JpYmVVSU1vZGUpKCk7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJlTWVyZ2VkRmlsdGVyKSgpO1xyXG4gICAgICAgICh0aGlzLnN1YnNjcmliZVRvcGljQ2xpY2spKCk7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJlVG9waWNTY3JvbGwpKCk7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJGb3JTZWFyY2hSZXN1bHQpKCk7XHJcbiAgICAgICAgKHRoaXMuc3Vic2NyaWJlVG9waWNOYXZpZ2F0ZSkoKTtcclxuICAgICAgICAodGhpcy5zdWJzY3JpYmVUb0RlbGF5TG9hZEV2ZW50cykoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9JRlJBTUVfRVZFTlRTJyksIHtjbGljazogdHJ1ZSwgc2Nyb2xsOiBmYWxzZX0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgICB0aGlzLnNjcmVlbnMgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfU0NSRUVOX05BTUVTJykpO1xyXG4gICAgICByaC5zdG9yYWdlLmluaXQoY29uc3RzKCdIRUxQX0lEJykpO1xyXG4gICAgICB0aGlzLmFjdGl2ZVNjcmVlbiA9IF8uZmluZCh0aGlzLnNjcmVlbnMsIGZ1bmN0aW9uKHNjcmVlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5nZXQoYCR7Y29uc3RzKCdLRVlfU0NSRUVOJyl9LiR7c2NyZWVufS5hdHRhY2hlZGApO1xyXG4gICAgICB9XHJcbiAgICAgICwgdGhpcyk7XHJcbiAgICAgIGlmICh0aGlzLmFjdGl2ZVNjcmVlbiA9PSBudWxsKSB7IHRoaXMuYWN0aXZlU2NyZWVuID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX0RFRkFVTFRfU0NSRUVOJykpOyB9XHJcblxyXG4gICAgICB0aGlzLmFzc3VyZUxvY2F0aW9ucyh0aGlzLmFjdGl2ZVNjcmVlbik7XHJcblxyXG4gICAgICAodGhpcy5pbml0RGVmYXVscykoKTtcclxuXHJcbiAgICAgIHJldHVybiAodGhpcy5pbml0QWN0aXZlVGFiKSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXREZWZhdWxzKCkge1xyXG4gICAgICBsZXQgZGVmYXVsdFRhYiA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9ERUZBVUxUX1RBQicpKTtcclxuICAgICAgaWYgKCF0aGlzLmhhc0ZlYXR1cmUoZGVmYXVsdFRhYikpIHsgZGVmYXVsdFRhYiA9IG51bGw7IH1cclxuICAgIFxyXG4gICAgICB0aGlzLmRlZmF1bHRUYWJzID0ge307XHJcblxyXG4gICAgICByZXR1cm4gXy5lYWNoKHRoaXMuc2NyZWVucywgZnVuY3Rpb24oc2NyZWVuKSB7XHJcbiAgICAgICAgdGFic1tzY3JlZW5dID0gXy5maWx0ZXIodGFic1tzY3JlZW5dLCAoZnVuY3Rpb24odGFiKSB7IHJldHVybiB0aGlzLmhhc0ZlYXR1cmUodGFiKTsgfSksIHRoaXMpO1xyXG4gICAgICBcclxuICAgICAgICBzaWRlQmFyVGFic1tzY3JlZW5dID0gXy5maWx0ZXIoc2lkZUJhclRhYnNbc2NyZWVuXSwgZnVuY3Rpb24odGFiKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXNGZWF0dXJlKHRhYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICwgdGhpcyk7XHJcbiAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRUYWJzW3NjcmVlbl0gPVxyXG4gICAgICAgICAgZGVmYXVsdFRhYiAmJiAoLTEgIT09IHRhYnNbc2NyZWVuXS5pbmRleE9mKGRlZmF1bHRUYWIpKSA/XHJcbiAgICAgICAgICAgIGRlZmF1bHRUYWJcclxuICAgICAgICAgIDpcclxuICAgICAgICAgICAgdGFic1tzY3JlZW5dWzBdO1xyXG4gICAgICB9XHJcbiAgICAgICwgdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdEFjdGl2ZVRhYigpIHtcclxuICAgICAgbGV0IGFjdGl2ZVRhYiA9IHJoLnN0b3JhZ2UuZmV0Y2goJ2FjdGl2ZXRhYicpO1xyXG4gICAgICBpZiAoKGFjdGl2ZVRhYiAhPT0gdW5kZWZpbmVkKSAmJiBhY3RpdmVUYWIgJiYgdGhpcy5oYXNGZWF0dXJlKGFjdGl2ZVRhYikpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQiwgYWN0aXZlVGFiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWRUYWIodGFiLCBzY3JlZW4pIHtcclxuICAgICAgaWYgKHNjcmVlbiA9PSBudWxsKSB7IHNjcmVlbiA9IHRoaXMuYWN0aXZlU2NyZWVuOyB9XHJcbiAgICAgIGlmICghdGFiIHx8ICF0aGlzLmhhc0ZlYXR1cmUodGFiKSkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgIGlmIChzY3JlZW4gPT09IERFU0tUT1ApIHtcclxuICAgICAgICBpZiAoKCh0YWIgPT09ICdmaWx0ZXInKSAmJiAoJ2NvbnRlbnQnID09PSB0aGlzLndpZGdldC5nZXQoS0VZX0ZJTFRFUl9MT0NBVElPTikpKSB8fFxyXG4gICAgICAgICgodGFiID09PSAnZnRzJykgJiYgKCdjb250ZW50JyA9PT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9TRUFSQ0hfTE9DQVRJT04pKSkpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICByZXR1cm4gLTEgIT09IHRhYnNbc2NyZWVuXS5pbmRleE9mKHRhYik7XHJcbiAgICB9XHJcblxyXG4gICAgZGVmYXVsdFRhYihzY3JlZW4pIHtcclxuICAgICAgaWYgKHNjcmVlbiA9PSBudWxsKSB7IHNjcmVlbiA9IHRoaXMuYWN0aXZlU2NyZWVuOyB9XHJcbiAgICAgIGxldCBkZWZhdWx0VGFiID0gdGhpcy5kZWZhdWx0VGFic1tzY3JlZW5dO1xyXG4gICAgICBpZiAoIXRoaXMuaXNWYWxpZFRhYihkZWZhdWx0VGFiKSkge1xyXG4gICAgICAgIGRlZmF1bHRUYWIgPSBfLmZpbmQodGFic1tzY3JlZW5dLCAoZnVuY3Rpb24odGFiKSB7IHJldHVybiB0aGlzLmlzVmFsaWRUYWIodGFiKTsgfSksIHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkZWZhdWx0VGFiO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc3VyZVZhbGlkQWN0aXZlVGFiKHNjcmVlbikge1xyXG4gICAgICBpZiAoc2NyZWVuID09IG51bGwpIHsgc2NyZWVuID0gdGhpcy5hY3RpdmVTY3JlZW47IH1cclxuICAgICAgbGV0IGFjdGl2ZXRhYiA9IHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX1RBQik7XHJcbiAgICAgIGlmICgoc2NyZWVuID09PSBERVNLVE9QKSB8fCBhY3RpdmV0YWIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZFRhYihhY3RpdmV0YWIpKSB7IGFjdGl2ZXRhYiA9IHRoaXMuZGVmYXVsdFRhYigpOyB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsIGFjdGl2ZXRhYik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVTaWRlQmFyKCkge1xyXG4gICAgICBpZiAodGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfVEFCKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLCBudWxsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQiwgdGhpcy5sYXN0TW9iaWxlVGFiIHx8IHRoaXMuZGVmYXVsdFRhYigpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUFjdGl2ZVRhYih0YWIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsXHJcbiAgICAgICAgIXRoaXMuaXNEZXNrdG9wU2NyZWVuKCkgJiYgKHRhYiA9PT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfVEFCKSkgPyBudWxsXHJcbiAgICAgICAgOiB0YWJcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0cmlnZ2VyRGVsYXlMb2FkV2lkZ2V0cyh0YWIpIHtcclxuICAgICAgbGV0IHRhYk9iaiA9IGRlbGF5TG9hZFRhYnNbdGFiXTtcclxuICAgICAgaWYgKHRhYk9iaiAmJiB0aGlzLmhhc0ZlYXR1cmUodGFiT2JqLmZfa2V5KSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cyh0YWJPYmouZXZ0KSwgdHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVUb0RlbGF5TG9hZEV2ZW50cygpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShLRVlfQUNUSVZFX1RBQiwgdGhpcy50cmlnZ2VyRGVsYXlMb2FkV2lkZ2V0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyRG9uZSgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX0FDVElWRV9UQUIsIHRoaXMuc2VhcmNoTW9kZSA/ICdmdHMnIDogbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFzRmVhdHVyZShmZWF0dXJlKSB7XHJcbiAgICAgIHJldHVybiAoZmVhdHVyZSA9PT0gdW5kZWZpbmVkKSB8fCAoZmFsc2UgIT09IHRoaXMud2lkZ2V0LmdldChgJHtLRVlfRkVBVFVSRX0uJHtmZWF0dXJlfWApKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVVSU1vZGUoKSB7XHJcbiAgICAgIGxldCBzZXRTZWFyY2hUYWIgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRUYWIoJ2Z0cycpKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0Rlc2t0b3BTY3JlZW4oKSB8fCAoJ3RhYmJhcicgPT09IHRoaXMud2lkZ2V0LmdldChLRVlfU0VBUkNIX0xPQ0FUSU9OKSkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLCAnZnRzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKEtFWV9VSV9NT0RFLCBtb2RlID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaCgnYWN0aXZlX2NvbnRlbnQnLCBtb2RlKTtcclxuICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKCdhY3RpdmVfY29udGVudCcsIG1vZGUgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTW9iaWxlU2NyZWVuKCkgJiYgIW1vZGUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9BQ1RJVkVfVEFCLCBudWxsKTtcclxuICAgICAgICB9IGVsc2UgaWYgKCdzZWFyY2gnID09PSBtb2RlKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2V0U2VhcmNoVGFiKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgICwge2luaXREb25lOiB0cnVlfSk7XHJcbiAgICAgIGlmICgnc2VhcmNoJyA9PT0gdGhpcy53aWRnZXQuZ2V0KCdhY3RpdmVfY29udGVudCcpKSB7IHJldHVybiBzZXRTZWFyY2hUYWIoKTsgfVxyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZU1lcmdlZEZpbHRlcigpIHtcclxuICAgICAgbGV0IGZlYXR1cmVGaWx0ZXJLZXk7XHJcbiAgICAgIGlmICh0aGlzLndpZGdldC5nZXQoZmVhdHVyZUZpbHRlcktleSA9IGAke0tFWV9GRUFUVVJFfS5maWx0ZXJgKSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfTUVSR0VEX0ZJTFRFUl9LRVknKSwgdGFncyA9PiB7XHJcbiAgICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGZlYXR1cmVGaWx0ZXJLZXksXHJcbiAgICAgICAgICAgIHRhZ3MgJiYgdGFncy5sZW5ndGggJiYgU0hPV19GSUxURVJfVUkgPyB0cnVlIDogZmFsc2UpO1xyXG4gICAgICAgICAgcmV0dXJuICh0aGlzLmFzc3VyZVZhbGlkQWN0aXZlVGFiKSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN1YnNjcmliZVRvcGljQ2xpY2soKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfQ0xJQ0tfSU5TSURFX0lGUkFNRScpLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZVNjcmVlbiA9PT0gUEhPTkUpICYmIHRoaXMud2lkZ2V0LmdldChLRVlfQUNUSVZFX1RBQikpIHtcclxuICAgICAgICAgIHJldHVybiAodGhpcy50b2dnbGVTaWRlQmFyKSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlVG9waWNOYXZpZ2F0ZSgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShjb25zdHMoJ0VWVF9OQVZJR0FURV9UT19VUkwnKSwgb2JqID0+IHtcclxuICAgICAgICBpZiAob2JqLmFic1VybCAmJiBfLmlzVXJsQWxsb3dkSW5JZnJhbWUob2JqLmFic1VybCkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKCdhY3RpdmVfY29udGVudCcsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBzdWJzY3JpYmVUb3BpY1Njcm9sbCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShjb25zdHMoJ0VWVF9TQ1JPTExfSU5TSURFX0lGUkFNRScpLCBpbmZvID0+IHtcclxuICAgICAgICBsZXQgaGlkZV9oZWFkZXIgPSAoaW5mby5kaXIgPT09ICdkb3duJykgfHwgKGluZm8uc2Nyb2xsVG9wID4gMTApO1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goJ2hpZGVfaGVhZGVyJywgaGlkZV9oZWFkZXIpO1xyXG5cclxuICAgICAgICBsZXQgaGlkZV9tb2JpbGVfZnVuY3Rpb25zID0gKGluZm8uZGlyID09PSAnZG93bicpICYmIChpbmZvLnNjcm9sbFRvcCA+IDEwKTtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaCgnaGlkZV9tb2JpbGVfZnVuY3Rpb25zJywgaGlkZV9tb2JpbGVfZnVuY3Rpb25zKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlQWN0aXZlVGFiKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3Vic2NyaWJlKEtFWV9BQ1RJVkVfVEFCLCBhY3RpdmVUYWIgPT4ge1xyXG4gICAgICAgIHJoLnN0b3JhZ2UucGVyc2lzdCgnYWN0aXZldGFiJywgYWN0aXZlVGFiKTtcclxuICAgICAgICBpZiAodGhpcy5pc01vYmlsZVNjcmVlbigpKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5pc1NpZGViYXJUYWIoYWN0aXZlVGFiKSkgeyB0aGlzLmxhc3RNb2JpbGVUYWIgPSBhY3RpdmVUYWI7IH1cclxuICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaE1vZGUgPVxyXG4gICAgICAgICAgICAoYWN0aXZlVGFiID09PSAnZnRzJykgfHwgKHRoaXMuc2VhcmNoTW9kZSAmJiAoYWN0aXZlVGFiID09PSAnZmlsdGVyJykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zZWFyY2hNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJzY3JpYmVTY3JlZW5zKCkge1xyXG4gICAgICByZXR1cm4gXy5lYWNoKHRoaXMuc2NyZWVucywgZnVuY3Rpb24oc2NyZWVuKSB7XHJcbiAgICAgICAgbGV0IGtleSA9IGAke2NvbnN0cygnS0VZX1NDUkVFTicpfS4ke3NjcmVlbn0uYXR0YWNoZWRgO1xyXG4gICAgICAgIGlmICh0aGlzLndpZGdldC5nZXQoa2V5KSkgeyB0aGlzLmhhbmRsZVNjcmVlbih0cnVlLCBzY3JlZW4pOyB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2lkZ2V0LnN1YnNjcmliZShrZXksIGF0dGFjaGVkID0+IHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVNjcmVlbihhdHRhY2hlZCwgc2NyZWVuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLCB7aW5pdERvbmU6IHRydWV9KTtcclxuICAgICAgfVxyXG4gICAgICAsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliZVRvTG9jYXRpb25zKCkge1xyXG4gICAgICB0aGlzLndpZGdldC5zdWJzY3JpYmUoS0VZX1NFQVJDSF9MT0NBVElPTiwgKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc3VyZVZhbGlkQWN0aXZlVGFiKHRoaXMuYWN0aXZlU2NyZWVuKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3Vic2NyaWJlKEtFWV9GSUxURVJfTE9DQVRJT04sICgpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3N1cmVWYWxpZEFjdGl2ZVRhYih0aGlzLmFjdGl2ZVNjcmVlbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN1YnNjcmliRm9yU2VhcmNoUmVzdWx0KCkge1xyXG4gICAgICBsZXQgdXBkYXRlU2VhcmNoUmVzdWx0cyA9ICgpID0+IHtcclxuICAgICAgICBsZXQgdGFnRXhwciA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9UQUdfRVhQUkVTU0lPTicpKTtcclxuICAgICAgICBsZXQgc2VhcmNoVGFnRXhwciA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9PTlNFQVJDSF9UQUdfRVhQUicpKTtcclxuICAgICAgICBpZiAoc2VhcmNoVGFnRXhwciAmJiAoc2VhcmNoVGFnRXhwciAhPT0gSlNPTi5zdHJpbmdpZnkodGFnRXhwcikpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0VWVF9TRUFSQ0hfVEVSTScpLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICBcclxuICAgICAgdGhpcy53aWRnZXQuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1RBR19FWFBSRVNTSU9OJyksIF8uZGVib3VuY2UoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRUYWIoJ2Z0cycpICYmICgnZnRzJyAhPT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9BQ1RJVkVfVEFCKSkpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzU2VhcmNoTW9kZSh0aGlzLndpZGdldC5nZXQoS0VZX0FDVElWRV9UQUIpKSkgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZVNlYXJjaFJlc3VsdHMoKTtcclxuICAgICAgfVxyXG4gICAgICAsIDMwMClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5zdWJzY3JpYmUoS0VZX0FDVElWRV9UQUIsIGZ1bmN0aW9uKHRhYikge1xyXG4gICAgICAgIGlmICh0YWIgPT09ICdmdHMnKSB7IHJldHVybiB1cGRhdGVTZWFyY2hSZXN1bHRzKCk7IH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNNb2JpbGVTY3JlZW4oKSB7IHJldHVybiB0aGlzLmFjdGl2ZVNjcmVlbiA9PT0gUEhPTkU7IH1cclxuXHJcbiAgICBpc0Rlc2t0b3BTY3JlZW4oKSB7IHJldHVybiB0aGlzLmFjdGl2ZVNjcmVlbiA9PT0gREVTS1RPUDsgfVxyXG4gIFxyXG4gICAgaXNUYWJsZXRTY3JlZW4oKSB7IHJldHVybiB0aGlzLmFjdGl2ZVNjcmVlbiA9PT0gVEFCTEVUOyB9XHJcblxyXG4gICAgaXNTaWRlYmFyVGFiKHRhYikge1xyXG4gICAgICByZXR1cm4gdGFiICYmICgtMSAhPT0gc2lkZUJhclRhYnNbdGhpcy5hY3RpdmVTY3JlZW5dLmluZGV4T2YodGFiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNTZWFyY2hNb2RlKHRhYikge1xyXG4gICAgICBsZXQgdG9waWNUYWIgPSB0aGlzLndpZGdldC5nZXQoJ2FjdGl2ZV9jb250ZW50Jyk7XHJcbiAgICAgIHJldHVybiAodGFiID09PSAnZnRzJykgfHwgKCh0b3BpY1RhYiA9PT0gJ3NlYXJjaCcpICYmIHRoaXMuaXNEZXNrdG9wU2NyZWVuKCkgJiZcclxuICAgICAgKCdjb250ZW50JyA9PT0gdGhpcy53aWRnZXQuZ2V0KEtFWV9TRUFSQ0hfTE9DQVRJT04pKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlU2NyZWVuKGF0dGFjaGVkLCBzY3JlZW4pIHtcclxuICAgICAgaWYgKGF0dGFjaGVkKSB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTY3JlZW4gPSBzY3JlZW47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQXR0YWNoZWQoc2NyZWVuKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZXRhY2hlZChzY3JlZW4pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGhhbmRsZURldGFjaGVkKHNjcmVlbikgeyByZXR1cm4gXy5kZWZlcigoKSA9PiB7XHJcbiAgICAgIGlmIChzY3JlZW4gPT09IERFU0tUT1ApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfQUNUSVZFX1RBQixcclxuICAgICAgICAgICgnc2VhcmNoJyA9PT0gdGhpcy53aWRnZXQuZ2V0KCdhY3RpdmVfY29udGVudCcpKSAmJiB0aGlzLmlzVmFsaWRUYWIoJ2Z0cycpID9cclxuICAgICAgICAgICAgJ2Z0cydcclxuICAgICAgICAgIDogbnVsbFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0pOyB9XHJcblxyXG4gICAgaGFuZGxlQXR0YWNoZWQoc2NyZWVuKSB7XHJcbiAgICAgIHRoaXMuYXNzdXJlTG9jYXRpb25zKHNjcmVlbik7XHJcbiAgICAgIHRoaXMuYXNzdXJlVmFsaWRBY3RpdmVUYWIoc2NyZWVuKTtcclxuICAgICAgcmV0dXJuIHRoaXMuYXNzdXJlVE9DTW9kZShzY3JlZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzc3VyZUxvY2F0aW9ucyhzY3JlZW4pIHtcclxuICAgICAgaWYgKHNjcmVlbiA9PSBudWxsKSB7IHNjcmVlbiA9IHRoaXMuYWN0aXZlU2NyZWVuOyB9XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goS0VZX1NFQVJDSF9MT0NBVElPTixcclxuICAgICAgICBzY3JlZW4gPT09IERFU0tUT1AgP1xyXG4gICAgICAgICAgdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX0RFRkFVTFRfU0VBUkNIX0xPQ0FUSU9OJykpXHJcbiAgICAgICAgOiBzY3JlZW4gPT09IFRBQkxFVCA/XHJcbiAgICAgICAgICAndGFiYmFyJ1xyXG4gICAgICAgIDpcclxuICAgICAgICAgICdjb250ZW50J1xyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gdGhpcy53aWRnZXQucHVibGlzaChLRVlfRklMVEVSX0xPQ0FUSU9OLFxyXG4gICAgICAgIChzY3JlZW4gPT09IERFU0tUT1ApIHx8IChzY3JlZW4gPT09IFRBQkxFVCkgPyAndGFiYmFyJyA6ICdjb250ZW50Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXNzdXJlVE9DTW9kZShzY3JlZW4pIHtcclxuICAgICAgaWYgKHNjcmVlbiA9PSBudWxsKSB7IHNjcmVlbiA9IHRoaXMuYWN0aXZlU2NyZWVuOyB9XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKEtFWV9UT0NfRFJJTExfRE9XTixcclxuICAgICAgICAoc2NyZWVuICE9PSBERVNLVE9QKSAmJiB0aGlzLndpZGdldC5nZXQoS0VZX01PQklMRV9UT0NfRFJJTExfRE9XTikpO1xyXG4gICAgfVxyXG5cclxuICAgIG5ld1NlYXJjaCh0ZXh0LCBrZXlDb2RlLCBldmVudCkge1xyXG4gICAgICBpZiAoa2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICBsZXQgb2xkVGV4dCA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpKTtcclxuICAgICAgICBpZiAob2xkVGV4dCAhPT0gdGV4dCkgeyB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJyksIHRleHQpOyB9XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0VWVF9TRUFSQ0hfVEVSTScpLCB0cnVlKTtcclxuICAgICAgICBpZiAoZXZlbnQgIT0gbnVsbCA/IGV2ZW50LnRhcmdldCA6IHVuZGVmaW5lZCkgeyByZXR1cm4gKGV2ZW50LnRhcmdldC5ibHVyKSgpOyB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc1RhZ1N0YXRlc0NoYW5nZWQoKSB7XHJcbiAgICAgIGxldCBjdXJyZW50U3RhdGUgPSBfLmNvbXBhY3RPYmplY3QodGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1BST0pFQ1RfVEFHX1NUQVRFUycpKSk7XHJcbiAgICAgIGxldCBkZWZhdWx0U3RhdGUgPSBfLmNvbXBhY3RPYmplY3QodGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX0RFRkFVTFRfRklMVEVSJykpKTtcclxuICAgICAgcmV0dXJuICFfLmlzRXF1YWwoY3VycmVudFN0YXRlLCBkZWZhdWx0U3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHRUYWdTdGF0ZXMoKSB7XHJcbiAgICAgIGxldCBkZWZhdWx0U3RhdGUgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKCdLRVlfREVGQVVMVF9GSUxURVInKSk7XHJcbiAgICAgIHJldHVybiB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1BST0pFQ1RfVEFHX1NUQVRFUycpLCBfLmNsb25lKGRlZmF1bHRTdGF0ZSkpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgTW9kZXJuTGF5b3V0Q29udHJvbGxlci5pbml0Q2xhc3MoKTtcclxuICByZXR1cm4gTW9kZXJuTGF5b3V0Q29udHJvbGxlcjtcclxufSkoKTtcclxuXHJcbndpbmRvdy5yaC5jb250cm9sbGVyKCdNb2Rlcm5MYXlvdXRDb250cm9sbGVyJywgTW9kZXJuTGF5b3V0Q29udHJvbGxlcik7XHJcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS45LjFcclxuKCgpID0+IHtcclxuICB2YXIgTWVyZ2VQcm9qLCBfLCBjb25zdHMsIG1vZGVsLCByaDtcclxuXHJcbiAgcmggPSB3aW5kb3cucmg7XHJcblxyXG4gIG1vZGVsID0gcmgubW9kZWw7XHJcblxyXG4gIF8gPSByaC5fO1xyXG5cclxuICBjb25zdHMgPSByaC5jb25zdHM7XHJcblxyXG4gIE1lcmdlUHJvaiA9ICgoKCkgPT4ge1xyXG4gICAgdmFyIGdyb3VwLCBvbkxvYWRTY2lwdDtcclxuXHJcbiAgICBmdW5jdGlvbiBNZXJnZVByb2ooKSB7XHJcbiAgICAgIHRoaXMudGFnQ29tYnMgPSBbXTtcclxuICAgICAgdGhpcy5pZG1hcCA9IHt9O1xyXG4gICAgICB0aGlzLmZpbHRlciA9IFtdO1xyXG4gICAgICB0aGlzLmdycFR5cGUgPSAnZ3JvdXAnO1xyXG4gICAgICB0aGlzLmRhdGFMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5sb2FkVGFnRGF0YShtb2RlbC5nZXQoY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJykpKTtcclxuICAgICAgdGhpcy5jYXB0aW9uID0gdGhpcy50eXBlID0gdGhpcy5kZWZGaWx0ZXIgPSB2b2lkIDA7XHJcbiAgICB9XHJcblxyXG4gICAgTWVyZ2VQcm9qLnByb3RvdHlwZS51cGRhdGVUYWdDb21icyA9IGZ1bmN0aW9uKHByb2plY3QpIHtcclxuICAgICAgdmFyIGJhc2UsIGNvbWJzO1xyXG4gICAgICBjb21icyA9IG1vZGVsLmdldChjb25zdHMoJ0tFWV9QUk9KRUNUX1RBR19DT01CSU5BVElPTlMnKSk7XHJcbiAgICAgIGlmIChjb21icyAhPSBudWxsKSB7XHJcbiAgICAgICAgcHJvamVjdCA9IF8ucGFyc2VQcm9qZWN0TmFtZShwcm9qZWN0KTtcclxuICAgICAgICByZXR1cm4gKGJhc2UgPSB0aGlzLmlkbWFwKVtwcm9qZWN0XSAhPSBudWxsID8gYmFzZVtwcm9qZWN0XSA6IGJhc2VbcHJvamVjdF0gPSBjb21icztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBNZXJnZVByb2oucHJvdG90eXBlLmxvb2t1cCA9IGZ1bmN0aW9uKGNoaWxkcmVuLCBrZXksIGlzR3JwVHlwZSkge1xyXG4gICAgICB2YXIgY2hpbGQsIGNvbXBLZXksIGVsZW1lbnQsIGksIGxlbjtcclxuICAgICAgaWYgKGlzR3JwVHlwZSA9PSBudWxsKSB7XHJcbiAgICAgICAgaXNHcnBUeXBlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoKGNoaWxkcmVuICE9IG51bGwpICYmIChrZXkgIT0gbnVsbCkpIHtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICAgIGlmICghKGNoaWxkICE9IG51bGwpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29tcEtleSA9IGNoaWxkLm5hbWUgfHwgY2hpbGQuZGlzcGxheTtcclxuICAgICAgICAgIGlmIChpc0dycFR5cGUgPT09IChjaGlsZC5jaGlsZHJlbiAhPSBudWxsKSAmJiBjb21wS2V5ID09PSBrZXkpIHtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGNoaWxkO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICgoY2hpbGQuY2hpbGRyZW4gIT0gbnVsbCkgJiYgIWlzR3JwVHlwZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gdGhpcy5sb29rdXAoY2hpbGQuY2hpbGRyZW4sIGtleSwgaXNHcnBUeXBlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBncm91cCA9IGZ1bmN0aW9uKGRpc3ApIHtcclxuICAgICAgdmFyIG9iamVjdDtcclxuICAgICAgcmV0dXJuIG9iamVjdCA9IHtcclxuICAgICAgICB0eXBlOiAnZ3JvdXAnLFxyXG4gICAgICAgIGRpc3BsYXk6IGRpc3AsXHJcbiAgICAgICAgY2hpbGRyZW46IFtdXHJcbiAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIE1lcmdlUHJvai5wcm90b3R5cGUuYWRkVGFnID0gZnVuY3Rpb24oY2hpbGRBcnIsIHRhZ0VsZW1lbnQpIHtcclxuICAgICAgdmFyIHRhZztcclxuICAgICAgaWYgKHRoaXMubG9va3VwKHRoaXMuZmlsdGVyLCB0YWdFbGVtZW50Lm5hbWUsIGZhbHNlKSA9PSBudWxsKSB7XHJcbiAgICAgICAgdGFnID0ge1xyXG4gICAgICAgICAgZGlzcGxheTogdGFnRWxlbWVudC5kaXNwbGF5LFxyXG4gICAgICAgICAgbmFtZTogdGFnRWxlbWVudC5uYW1lXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2hpbGRBcnIucHVzaCh0YWcpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE1lcmdlUHJvai5wcm90b3R5cGUuYWRkR3JvdXAgPSBmdW5jdGlvbihncnBFbGVtZW50KSB7XHJcbiAgICAgIHZhciBlbGVtZW50LCBncnAsIGksIGxlbiwgcmVmO1xyXG4gICAgICBncnAgPSB0aGlzLmxvb2t1cCh0aGlzLmZpbHRlciwgZ3JwRWxlbWVudC5kaXNwbGF5KTtcclxuICAgICAgaWYgKGdycCA9PSBudWxsKSB7XHJcbiAgICAgICAgZ3JwID0gZ3JvdXAoZ3JwRWxlbWVudC5kaXNwbGF5KTtcclxuICAgICAgICB0aGlzLmZpbHRlci5wdXNoKGdycCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVmID0gZ3JwRWxlbWVudC5jaGlsZHJlbjtcclxuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgZWxlbWVudCA9IHJlZltpXTtcclxuICAgICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVGFnKGdycC5jaGlsZHJlbiwgZWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChncnAuY2hpbGRyZW4ubGVuZ3RoID09PSAwICYmIHRoaXMuZmlsdGVyLmluZGV4T2YoZ3JwKSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyLnNwbGljZSh0aGlzLmZpbHRlci5pbmRleE9mKGdycCksIDEpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE1lcmdlUHJvai5wcm90b3R5cGUudXBkYXRlRmlsdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBjdXJmaWx0ZXIsIGVsZW1lbnQsIGksIGxlbiwgcmVzdWx0cztcclxuICAgICAgY3VyZmlsdGVyID0gbW9kZWwuZ2V0KGNvbnN0cygnS0VZX1RFTVBfREFUQScpKSB8fCBbXTtcclxuICAgICAgaWYgKCF0aGlzLmNhcHRpb24pIHtcclxuICAgICAgICB0aGlzLmNhcHRpb24gPSBjdXJmaWx0ZXJbJ2NhcHRpb24nXTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMudHlwZSkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IGN1cmZpbHRlclsndHlwZSddO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWZGaWx0ZXIgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdGhpcy5kZWZGaWx0ZXIgPSBjdXJmaWx0ZXJbJ2RlZmF1bHQnXTtcclxuICAgICAgfVxyXG4gICAgICBjdXJmaWx0ZXIgPSBjdXJmaWx0ZXJbJ3RhZ3MnXSB8fCBbXTtcclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9URU1QX0RBVEEnKSk7XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChpID0gMCwgbGVuID0gY3VyZmlsdGVyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgZWxlbWVudCA9IGN1cmZpbHRlcltpXTtcclxuICAgICAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmFkZEdyb3VwKGVsZW1lbnQpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmFkZFRhZyh0aGlzLmZpbHRlciwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH07XHJcblxyXG4gICAgb25Mb2FkU2NpcHQgPSBmdW5jdGlvbihwcm9qZWN0LCBjb3VudCkge1xyXG4gICAgICB0aGlzLnVwZGF0ZVRhZ0NvbWJzKHByb2plY3QpO1xyXG4gICAgICB0aGlzLnVwZGF0ZUZpbHRlcigpO1xyXG4gICAgICBpZiAoIWNvdW50KSB7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9NRVJHRURfRklMVEVSX0tFWScpLCB0aGlzLmZpbHRlcik7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9NRVJHRURfUFJPSkVDVF9NQVAnKSwgdGhpcy5pZG1hcCk7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9QUk9KRUNUX0ZJTFRFUl9DQVBUSU9OJyksIHRoaXMuY2FwdGlvbik7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9QUk9KRUNUX0ZJTFRFUl9UWVBFJyksIHRoaXMudHlwZSk7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9ERUZBVUxUX0ZJTFRFUicpLCB0aGlzLmRlZkZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUxvYWRlZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgTWVyZ2VQcm9qLnByb3RvdHlwZS5sb2FkVGFnRGF0YSA9IGZ1bmN0aW9uKHByb2pMaXN0KSB7XHJcbiAgICAgIHZhciBjb3VudCwgaSwgbGVuLCBwcm9qZWN0LCByZXN1bHRzO1xyXG4gICAgICBpZiAoIXRoaXMuZGF0YUxvYWRlZCkge1xyXG4gICAgICAgIGNvdW50ID0gcHJvakxpc3QubGVuZ3RoO1xyXG4gICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBwcm9qTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgcHJvamVjdCA9IHByb2pMaXN0W2ldO1xyXG4gICAgICAgICAgaWYgKHByb2plY3QgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAocHJvamVjdCkge1xyXG4gICAgICAgICAgICAgIHByb2plY3QgPSBwcm9qZWN0ICsgXCIvXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKF8ubG9hZFNjcmlwdChcIlwiICsgcHJvamVjdCArIChjb25zdHMoJ1BBVEhfUFJPSkVDVF9UQUdEQVRBX0ZJTEUnKSksIGZhbHNlLCBvbkxvYWRTY2lwdC5iaW5kKHRoaXMsIHByb2plY3QsIC0tY291bnQpKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2godm9pZCAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIE1lcmdlUHJvajtcclxuXHJcbiAgfSkpKCk7XHJcblxyXG4gIHJoLk1lcmdlUHJvaiA9IE1lcmdlUHJvajtcclxuXHJcbn0pLmNhbGwodGhpcyk7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyAkIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgbW9kZWwgfSA9IHJoO1xyXG5sZXQgeyByaHMgfSA9IHJoO1xyXG5sZXQgdW5zdWIgPSBudWxsO1xyXG5cclxudW5zdWIgPSBtb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfVEFHX0VYUFJFU1NJT04nKSwgKGZ1bmN0aW9uKCkge1xyXG4gIGxldCBkb25lID0gZmFsc2U7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHVuc3ViKSB7IHVuc3ViKCk7IH1cclxuICAgIGlmIChkb25lKSB7IHJldHVybjsgfVxyXG4gICAgZG9uZSA9IHRydWU7XHJcbiAgICByZXR1cm4gbW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnS0VZX1NFQVJDSEVEX1RFUk0nKSwgKCkgPT5cclxuICAgICAgbW9kZWwucHVibGlzaChjb25zdHMoJ0tFWV9PTlNFQVJDSF9UQUdfRVhQUicpLFxyXG4gICAgICAgSlNPTi5zdHJpbmdpZnkobW9kZWwuZ2V0KGNvbnN0cygnS0VZX1RBR19FWFBSRVNTSU9OJykpKSlcclxuICAgICk7XHJcbiAgfTtcclxufSkoKVxyXG4pO1xyXG5cclxubW9kZWwuc3Vic2NyaWJlKGNvbnN0cygnRVZUX1NFQVJDSF9URVJNJyksIGZ1bmN0aW9uKCkge1xyXG4gIGxldCBjYW5IYW5kbGVTZWFyY2ggPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfQ0FOX0hBTkRMRV9TRUFSQ0gnKSk7XHJcbiAgbGV0IHNlYXJjaFRlcm0gPSBtb2RlbC5nZXQoY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSkgfHwgbnVsbDtcclxuICBsZXQgbmV3TWFwID0ge307XHJcbiAgbmV3TWFwW2NvbnN0cygnSEFTSF9LRVlfUkhfU0VBUkNIJyldID0gc2VhcmNoVGVybTtcclxuICBuZXdNYXBbY29uc3RzKCdIQVNIX0tFWV9VSU1PREUnKV0gPSAnc2VhcmNoJztcclxuXHJcbiAgaWYgKGNhbkhhbmRsZVNlYXJjaCAhPT0gdHJ1ZSkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uID0gYCR7d2luZG93LmdSb290UmVsUGF0aH0vYCArXHJcbiAgICAgIGAke3dpbmRvdy5nU2VhcmNoUGFnZUZpbGVQYXRoIHx8IGNvbnN0cygnU1RBUlRfRklMRVBBVEgnKX1gICtcclxuICAgICAgYD8jJHtfLm1hcFRvRW5jb2RlZFN0cmluZyhuZXdNYXApfWA7XHJcbiAgfSBlbHNlIHtcclxuICAgIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfUVVFUllfU0VBUkNIX1JFU1VMVFMnKSwgdHJ1ZSk7XHJcbiAgICByZXR1cm4gXy5kZWZlcigoKSA9PiBfLnVwZGF0ZUhhc2hNYXAobmV3TWFwLCB0cnVlKSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9QUk9KRUNUX0xPQURFRCcpLCBmdW5jdGlvbigpIHtcclxuICBpZiAod2luZG93LnJlYWRTZXR0aW5nKSB7XHJcbiAgICB3aW5kb3cucmVhZFNldHRpbmcoUkhBTkRTRUFSQ0gsIHN0YXRlID0+IG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfQU5EX1NFQVJDSCcpLCBzdGF0ZSkpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9BTkRfU0VBUkNIJyksIHN0YXRlID0+IHNhdmVTZXR0aW5nKFJIQU5EU0VBUkNILCAoc3RhdGUgPT09ICcxJyA/ICcxJyA6ICcwJyksIHRydWUpKTtcclxufSk7XHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdFVlRfUVVFUllfU0VBUkNIX1JFU1VMVFMnKSwgZnVuY3Rpb24oKSB7XHJcbiAgaWYgKCFyaHMuZG9TZWFyY2goKSkgeyByZXR1cm4gd2luZG93LmRvU2VhcmNoKCk7IH1cclxufSk7XHJcbiIsImxldCB7IHJoIH0gPSB3aW5kb3c7XHJcbmxldCB7IF8gfSA9IHJoO1xyXG5sZXQgeyAkIH0gPSByaDtcclxubGV0IHsgY29uc3RzIH0gPSByaDtcclxubGV0IHsgbW9kZWwgfSA9IHJoO1xyXG5cclxuXy5nZXRSb290VXJsID0gKGZ1bmN0aW9uKCkge1xyXG4gIGxldCByb290VXJsID0gbnVsbDtcclxuICByZXR1cm4gKCkgPT4gcm9vdFVybCAhPSBudWxsID8gcm9vdFVybCA6IChyb290VXJsID0gYCR7Xy5nZXRIb3N0Rm9sZGVyKCl9JHtjb25zdHMoJ1NUQVJUX0ZJTEVQQVRIJyl9YCk7XHJcbn0pKCk7XHJcblxyXG5fLnJ1blRvcGljTG9hZGluZ0FuaW1hdGlvbiA9IChmdW5jdGlvbigpIHtcclxuICBsZXQgcnVuQW5pbWF0aW9uID0gbnVsbDtcclxuICBsZXQgdG9waWNMb2FkaW5nID0gZmFsc2U7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKGZsYWcpIHtcclxuICAgIHRvcGljTG9hZGluZyA9IGZsYWc7XHJcbiAgICBpZiAoZmxhZykge1xyXG4gICAgICBpZiAocnVuQW5pbWF0aW9uID09IG51bGwpIHsgcnVuQW5pbWF0aW9uID0gXy5kZWJvdW5jZSgoKSA9PiBtb2RlbC5wdWJsaXNoKGNvbnN0cygnRVZUX1RPUElDX0xPQURJTkcnKSwgdG9waWNMb2FkaW5nKVxyXG4gICAgICAsIDcwMCk7IH1cclxuICAgICAgcmV0dXJuIHJ1bkFuaW1hdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcnVuQW5pbWF0aW9uID0gbnVsbDtcclxuICAgICAgcmV0dXJuIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdFVlRfVE9QSUNfTE9BRElORycpLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoKTtcclxuXHJcbl8uZ2V0VG9waWNGcmFtZSA9IGZ1bmN0aW9uKCkge1xyXG4gIGxldCB0b3BpY0ZyYW1lTmFtZSA9IHdpbmRvdy5nVG9waWNGcmFtZU5hbWUgfHwgJ3JoX2RlZmF1bHRfdG9waWNfZnJhbWVfbmFtZSc7XHJcbiAgcmV0dXJuICQoYFtuYW1lPSR7dG9waWNGcmFtZU5hbWV9XWAsIDApO1xyXG59O1xyXG4iLCJcclxuLy8gdG8gc3VwcG9ydCBvbGQgYnJvd3NlclxyXG5cclxuaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbSA9PSBudWxsKSB7XHJcbiAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgfTtcclxufVxyXG5cclxuaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbVN0YXJ0ID09IG51bGwpIHtcclxuICBTdHJpbmcucHJvdG90eXBlLnRyaW1TdGFydCA9IFN0cmluZy5wcm90b3R5cGUudHJpbUxlZnRcclxufVxyXG5cclxuaWYgKFN0cmluZy5wcm90b3R5cGUudHJpbUVuZCA9PSBudWxsKSB7XHJcbiAgU3RyaW5nLnByb3RvdHlwZS50cmltRW5kID0gU3RyaW5nLnByb3RvdHlwZS50cmltUmlnaHRcclxufVxyXG4iLCIvKipcbiAqIGx1bnIgLSBodHRwOi8vbHVucmpzLmNvbSAtIEEgYml0IGxpa2UgU29sciwgYnV0IG11Y2ggc21hbGxlciBhbmQgbm90IGFzIGJyaWdodCAtIDIuMy4xXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG47KGZ1bmN0aW9uKCl7XG5cbi8qKlxuICogQSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgY29uZmlndXJpbmcgYW5kIGNvbnN0cnVjdGluZ1xuICogYSBuZXcgbHVuciBJbmRleC5cbiAqXG4gKiBBIGx1bnIuQnVpbGRlciBpbnN0YW5jZSBpcyBjcmVhdGVkIGFuZCB0aGUgcGlwZWxpbmUgc2V0dXBcbiAqIHdpdGggYSB0cmltbWVyLCBzdG9wIHdvcmQgZmlsdGVyIGFuZCBzdGVtbWVyLlxuICpcbiAqIFRoaXMgYnVpbGRlciBvYmplY3QgaXMgeWllbGRlZCB0byB0aGUgY29uZmlndXJhdGlvbiBmdW5jdGlvblxuICogdGhhdCBpcyBwYXNzZWQgYXMgYSBwYXJhbWV0ZXIsIGFsbG93aW5nIHRoZSBsaXN0IG9mIGZpZWxkc1xuICogYW5kIG90aGVyIGJ1aWxkZXIgcGFyYW1ldGVycyB0byBiZSBjdXN0b21pc2VkLlxuICpcbiAqIEFsbCBkb2N1bWVudHMgX211c3RfIGJlIGFkZGVkIHdpdGhpbiB0aGUgcGFzc2VkIGNvbmZpZyBmdW5jdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdmFyIGlkeCA9IGx1bnIoZnVuY3Rpb24gKCkge1xuICogICB0aGlzLmZpZWxkKCd0aXRsZScpXG4gKiAgIHRoaXMuZmllbGQoJ2JvZHknKVxuICogICB0aGlzLnJlZignaWQnKVxuICpcbiAqICAgZG9jdW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xuICogICAgIHRoaXMuYWRkKGRvYylcbiAqICAgfSwgdGhpcylcbiAqIH0pXG4gKlxuICogQHNlZSB7QGxpbmsgbHVuci5CdWlsZGVyfVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqIEBzZWUge0BsaW5rIGx1bnIudHJpbW1lcn1cbiAqIEBzZWUge0BsaW5rIGx1bnIuc3RvcFdvcmRGaWx0ZXJ9XG4gKiBAc2VlIHtAbGluayBsdW5yLnN0ZW1tZXJ9XG4gKiBAbmFtZXNwYWNlIHtmdW5jdGlvbn0gbHVuclxuICovXG52YXIgbHVuciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgdmFyIGJ1aWxkZXIgPSBuZXcgbHVuci5CdWlsZGVyXG5cbiAgYnVpbGRlci5waXBlbGluZS5hZGQoXG4gICAgbHVuci50cmltbWVyLFxuICAgIGx1bnIuc3RvcFdvcmRGaWx0ZXIsXG4gICAgbHVuci5zdGVtbWVyXG4gIClcblxuICBidWlsZGVyLnNlYXJjaFBpcGVsaW5lLmFkZChcbiAgICBsdW5yLnN0ZW1tZXJcbiAgKVxuXG4gIGNvbmZpZy5jYWxsKGJ1aWxkZXIsIGJ1aWxkZXIpXG4gIHJldHVybiBidWlsZGVyLmJ1aWxkKClcbn1cblxubHVuci52ZXJzaW9uID0gXCIyLjMuMVwiXG4vKiFcbiAqIGx1bnIudXRpbHNcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIEEgbmFtZXNwYWNlIGNvbnRhaW5pbmcgdXRpbHMgZm9yIHRoZSByZXN0IG9mIHRoZSBsdW5yIGxpYnJhcnlcbiAqIEBuYW1lc3BhY2UgbHVuci51dGlsc1xuICovXG5sdW5yLnV0aWxzID0ge31cblxuLyoqXG4gKiBQcmludCBhIHdhcm5pbmcgbWVzc2FnZSB0byB0aGUgY29uc29sZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBiZSBwcmludGVkLlxuICogQG1lbWJlck9mIGx1bnIudXRpbHNcbiAqIEBmdW5jdGlvblxuICovXG5sdW5yLnV0aWxzLndhcm4gPSAoZnVuY3Rpb24gKGdsb2JhbCkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIHJldHVybiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmIChnbG9iYWwuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKVxuICAgIH1cbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cbn0pKHRoaXMpXG5cbi8qKlxuICogQ29udmVydCBhbiBvYmplY3QgdG8gYSBzdHJpbmcuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCB0aGUgZnVuY3Rpb24gcmV0dXJuc1xuICogdGhlIGVtcHR5IHN0cmluZywgaW4gYWxsIG90aGVyIGNhc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICogYHRvU3RyaW5nYCBvbiB0aGUgcGFzc2VkIG9iamVjdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge0FueX0gb2JqIFRoZSBvYmplY3QgdG8gY29udmVydCB0byBhIHN0cmluZy5cbiAqIEByZXR1cm4ge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwYXNzZWQgb2JqZWN0LlxuICogQG1lbWJlck9mIGx1bnIudXRpbHNcbiAqL1xubHVuci51dGlscy5hc1N0cmluZyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgaWYgKG9iaiA9PT0gdm9pZCAwIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBcIlwiXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpXG4gIH1cbn1cblxuLyoqXG4gKiBDbG9uZXMgYW4gb2JqZWN0LlxuICpcbiAqIFdpbGwgY3JlYXRlIGEgY29weSBvZiBhbiBleGlzdGluZyBvYmplY3Qgc3VjaCB0aGF0IGFueSBtdXRhdGlvbnNcbiAqIG9uIHRoZSBjb3B5IGNhbm5vdCBhZmZlY3QgdGhlIG9yaWdpbmFsLlxuICpcbiAqIE9ubHkgc2hhbGxvdyBvYmplY3RzIGFyZSBzdXBwb3J0ZWQsIHBhc3NpbmcgYSBuZXN0ZWQgb2JqZWN0IHRvIHRoaXNcbiAqIGZ1bmN0aW9uIHdpbGwgY2F1c2UgYSBUeXBlRXJyb3IuXG4gKlxuICogT2JqZWN0cyB3aXRoIHByaW1pdGl2ZXMsIGFuZCBhcnJheXMgb2YgcHJpbWl0aXZlcyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjbG9uZS5cbiAqIEByZXR1cm4ge09iamVjdH0gYSBjbG9uZSBvZiB0aGUgcGFzc2VkIG9iamVjdC5cbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gd2hlbiBhIG5lc3RlZCBvYmplY3QgaXMgcGFzc2VkLlxuICogQG1lbWJlck9mIFV0aWxzXG4gKi9cbmx1bnIudXRpbHMuY2xvbmUgPSBmdW5jdGlvbiAob2JqKSB7XG4gIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gb2JqXG4gIH1cblxuICB2YXIgY2xvbmUgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAga2V5cyA9IE9iamVjdC5rZXlzKG9iailcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXSxcbiAgICAgICAgdmFsID0gb2JqW2tleV1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIGNsb25lW2tleV0gPSB2YWwuc2xpY2UoKVxuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgdHlwZW9mIHZhbCA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgdHlwZW9mIHZhbCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBjbG9uZVtrZXldID0gdmFsXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjbG9uZSBpcyBub3QgZGVlcCBhbmQgZG9lcyBub3Qgc3VwcG9ydCBuZXN0ZWQgb2JqZWN0c1wiKVxuICB9XG5cbiAgcmV0dXJuIGNsb25lXG59XG5sdW5yLkZpZWxkUmVmID0gZnVuY3Rpb24gKGRvY1JlZiwgZmllbGROYW1lLCBzdHJpbmdWYWx1ZSkge1xuICB0aGlzLmRvY1JlZiA9IGRvY1JlZlxuICB0aGlzLmZpZWxkTmFtZSA9IGZpZWxkTmFtZVxuICB0aGlzLl9zdHJpbmdWYWx1ZSA9IHN0cmluZ1ZhbHVlXG59XG5cbmx1bnIuRmllbGRSZWYuam9pbmVyID0gXCIvXCJcblxubHVuci5GaWVsZFJlZi5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHMpIHtcbiAgdmFyIG4gPSBzLmluZGV4T2YobHVuci5GaWVsZFJlZi5qb2luZXIpXG5cbiAgaWYgKG4gPT09IC0xKSB7XG4gICAgdGhyb3cgXCJtYWxmb3JtZWQgZmllbGQgcmVmIHN0cmluZ1wiXG4gIH1cblxuICB2YXIgZmllbGRSZWYgPSBzLnNsaWNlKDAsIG4pLFxuICAgICAgZG9jUmVmID0gcy5zbGljZShuICsgMSlcblxuICByZXR1cm4gbmV3IGx1bnIuRmllbGRSZWYgKGRvY1JlZiwgZmllbGRSZWYsIHMpXG59XG5cbmx1bnIuRmllbGRSZWYucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fc3RyaW5nVmFsdWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5fc3RyaW5nVmFsdWUgPSB0aGlzLmZpZWxkTmFtZSArIGx1bnIuRmllbGRSZWYuam9pbmVyICsgdGhpcy5kb2NSZWZcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9zdHJpbmdWYWx1ZVxufVxuLyohXG4gKiBsdW5yLlNldFxuICogQ29weXJpZ2h0IChDKSAyMDE4IE9saXZlciBOaWdodGluZ2FsZVxuICovXG5cbi8qKlxuICogQSBsdW5yIHNldC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xubHVuci5TZXQgPSBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgdGhpcy5lbGVtZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICBpZiAoZWxlbWVudHMpIHtcbiAgICB0aGlzLmxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aFxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzW2VsZW1lbnRzW2ldXSA9IHRydWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZW5ndGggPSAwXG4gIH1cbn1cblxuLyoqXG4gKiBBIGNvbXBsZXRlIHNldCB0aGF0IGNvbnRhaW5zIGFsbCBlbGVtZW50cy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcmVhZG9ubHlcbiAqIEB0eXBlIHtsdW5yLlNldH1cbiAqL1xubHVuci5TZXQuY29tcGxldGUgPSB7XG4gIGludGVyc2VjdDogZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG90aGVyXG4gIH0sXG5cbiAgdW5pb246IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBvdGhlclxuICB9LFxuXG4gIGNvbnRhaW5zOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG4vKipcbiAqIEFuIGVtcHR5IHNldCB0aGF0IGNvbnRhaW5zIG5vIGVsZW1lbnRzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEByZWFkb25seVxuICogQHR5cGUge2x1bnIuU2V0fVxuICovXG5sdW5yLlNldC5lbXB0eSA9IHtcbiAgaW50ZXJzZWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICB1bmlvbjogZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG90aGVyXG4gIH0sXG5cbiAgY29udGFpbnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHNldCBjb250YWlucyB0aGUgc3BlY2lmaWVkIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0IC0gT2JqZWN0IHdob3NlIHByZXNlbmNlIGluIHRoaXMgc2V0IGlzIHRvIGJlIHRlc3RlZC5cbiAqIEByZXR1cm5zIHtib29sZWFufSAtIFRydWUgaWYgdGhpcyBzZXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBvYmplY3QuXG4gKi9cbmx1bnIuU2V0LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgcmV0dXJuICEhdGhpcy5lbGVtZW50c1tvYmplY3RdXG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBzZXQgY29udGFpbmluZyBvbmx5IHRoZSBlbGVtZW50cyB0aGF0IGFyZSBwcmVzZW50IGluIGJvdGhcbiAqIHRoaXMgc2V0IGFuZCB0aGUgc3BlY2lmaWVkIHNldC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuU2V0fSBvdGhlciAtIHNldCB0byBpbnRlcnNlY3Qgd2l0aCB0aGlzIHNldC5cbiAqIEByZXR1cm5zIHtsdW5yLlNldH0gYSBuZXcgc2V0IHRoYXQgaXMgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIGFuZCB0aGUgc3BlY2lmaWVkIHNldC5cbiAqL1xuXG5sdW5yLlNldC5wcm90b3R5cGUuaW50ZXJzZWN0ID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIHZhciBhLCBiLCBlbGVtZW50cywgaW50ZXJzZWN0aW9uID0gW11cblxuICBpZiAob3RoZXIgPT09IGx1bnIuU2V0LmNvbXBsZXRlKSB7XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGlmIChvdGhlciA9PT0gbHVuci5TZXQuZW1wdHkpIHtcbiAgICByZXR1cm4gb3RoZXJcbiAgfVxuXG4gIGlmICh0aGlzLmxlbmd0aCA8IG90aGVyLmxlbmd0aCkge1xuICAgIGEgPSB0aGlzXG4gICAgYiA9IG90aGVyXG4gIH0gZWxzZSB7XG4gICAgYSA9IG90aGVyXG4gICAgYiA9IHRoaXNcbiAgfVxuXG4gIGVsZW1lbnRzID0gT2JqZWN0LmtleXMoYS5lbGVtZW50cylcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXVxuICAgIGlmIChlbGVtZW50IGluIGIuZWxlbWVudHMpIHtcbiAgICAgIGludGVyc2VjdGlvbi5wdXNoKGVsZW1lbnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBsdW5yLlNldCAoaW50ZXJzZWN0aW9uKVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgc2V0IGNvbWJpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhpcyBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gKlxuICogQHBhcmFtIHtsdW5yLlNldH0gb3RoZXIgLSBzZXQgdG8gdW5pb24gd2l0aCB0aGlzIHNldC5cbiAqIEByZXR1cm4ge2x1bnIuU2V0fSBhIG5ldyBzZXQgdGhhdCBpcyB0aGUgdW5pb24gb2YgdGhpcyBhbmQgdGhlIHNwZWNpZmllZCBzZXQuXG4gKi9cblxubHVuci5TZXQucHJvdG90eXBlLnVuaW9uID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIGlmIChvdGhlciA9PT0gbHVuci5TZXQuY29tcGxldGUpIHtcbiAgICByZXR1cm4gbHVuci5TZXQuY29tcGxldGVcbiAgfVxuXG4gIGlmIChvdGhlciA9PT0gbHVuci5TZXQuZW1wdHkpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgcmV0dXJuIG5ldyBsdW5yLlNldChPYmplY3Qua2V5cyh0aGlzLmVsZW1lbnRzKS5jb25jYXQoT2JqZWN0LmtleXMob3RoZXIuZWxlbWVudHMpKSlcbn1cbi8qKlxuICogQSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIGludmVyc2UgZG9jdW1lbnQgZnJlcXVlbmN5IGZvclxuICogYSBwb3N0aW5nLiBUaGlzIGlzIHNoYXJlZCBiZXR3ZWVuIHRoZSBidWlsZGVyIGFuZCB0aGUgaW5kZXhcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHBvc3RpbmcgLSBUaGUgcG9zdGluZyBmb3IgYSBnaXZlbiB0ZXJtXG4gKiBAcGFyYW0ge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIFRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzLlxuICovXG5sdW5yLmlkZiA9IGZ1bmN0aW9uIChwb3N0aW5nLCBkb2N1bWVudENvdW50KSB7XG4gIHZhciBkb2N1bWVudHNXaXRoVGVybSA9IDBcblxuICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gcG9zdGluZykge1xuICAgIGlmIChmaWVsZE5hbWUgPT0gJ19pbmRleCcpIGNvbnRpbnVlIC8vIElnbm9yZSB0aGUgdGVybSBpbmRleCwgaXRzIG5vdCBhIGZpZWxkXG4gICAgZG9jdW1lbnRzV2l0aFRlcm0gKz0gT2JqZWN0LmtleXMocG9zdGluZ1tmaWVsZE5hbWVdKS5sZW5ndGhcbiAgfVxuXG4gIHZhciB4ID0gKGRvY3VtZW50Q291bnQgLSBkb2N1bWVudHNXaXRoVGVybSArIDAuNSkgLyAoZG9jdW1lbnRzV2l0aFRlcm0gKyAwLjUpXG5cbiAgcmV0dXJuIE1hdGgubG9nKDEgKyBNYXRoLmFicyh4KSlcbn1cblxuLyoqXG4gKiBBIHRva2VuIHdyYXBzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdG9rZW5cbiAqIGFzIGl0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZSB0ZXh0IHByb2Nlc3NpbmcgcGlwZWxpbmUuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cj0nJ10gLSBUaGUgc3RyaW5nIHRva2VuIGJlaW5nIHdyYXBwZWQuXG4gKiBAcGFyYW0ge29iamVjdH0gW21ldGFkYXRhPXt9XSAtIE1ldGFkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRva2VuLlxuICovXG5sdW5yLlRva2VuID0gZnVuY3Rpb24gKHN0ciwgbWV0YWRhdGEpIHtcbiAgdGhpcy5zdHIgPSBzdHIgfHwgXCJcIlxuICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGEgfHwge31cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b2tlbiBzdHJpbmcgdGhhdCBpcyBiZWluZyB3cmFwcGVkIGJ5IHRoaXMgb2JqZWN0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5zdHJcbn1cblxuLyoqXG4gKiBBIHRva2VuIHVwZGF0ZSBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gdXBkYXRpbmcgb3Igb3B0aW9uYWxseVxuICogd2hlbiBjbG9uaW5nIGEgdG9rZW4uXG4gKlxuICogQGNhbGxiYWNrIGx1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0b2tlbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtZXRhZGF0YSAtIEFsbCBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0b2tlbi5cbiAqL1xuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIHRvIHRoZSB3cmFwcGVkIHN0cmluZyB0b2tlbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzdHIsIG1ldGFkYXRhKSB7XG4gKiAgIHJldHVybiBzdHIudG9VcHBlckNhc2UoKVxuICogfSlcbiAqXG4gKiBAcGFyYW0ge2x1bnIuVG9rZW5+dXBkYXRlRnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0byBhcHBseSB0byB0aGUgdG9rZW4gc3RyaW5nLlxuICogQHJldHVybnMge2x1bnIuVG9rZW59XG4gKi9cbmx1bnIuVG9rZW4ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xuICB0aGlzLnN0ciA9IGZuKHRoaXMuc3RyLCB0aGlzLm1ldGFkYXRhKVxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiB0aGlzIHRva2VuLiBPcHRpb25hbGx5IGEgZnVuY3Rpb24gY2FuIGJlXG4gKiBhcHBsaWVkIHRvIHRoZSBjbG9uZWQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtsdW5yLlRva2VufnVwZGF0ZUZ1bmN0aW9ufSBbZm5dIC0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gdG8gYXBwbHkgdG8gdGhlIGNsb25lZCB0b2tlbi5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICovXG5sdW5yLlRva2VuLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChmbikge1xuICBmbiA9IGZuIHx8IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzIH1cbiAgcmV0dXJuIG5ldyBsdW5yLlRva2VuIChmbih0aGlzLnN0ciwgdGhpcy5tZXRhZGF0YSksIHRoaXMubWV0YWRhdGEpXG59XG4vKiFcbiAqIGx1bnIudG9rZW5pemVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgYSBzdHJpbmcgaW50byB0b2tlbnMgcmVhZHkgdG8gYmUgaW5zZXJ0ZWQgaW50b1xuICogdGhlIHNlYXJjaCBpbmRleC4gVXNlcyBgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yYCB0byBzcGxpdCBzdHJpbmdzLCBjaGFuZ2VcbiAqIHRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IHRvIGNoYW5nZSBob3cgc3RyaW5ncyBhcmUgc3BsaXQgaW50byB0b2tlbnMuXG4gKlxuICogVGhpcyB0b2tlbml6ZXIgd2lsbCBjb252ZXJ0IGl0cyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgYnkgY2FsbGluZyBgdG9TdHJpbmdgIGFuZFxuICogdGhlbiB3aWxsIHNwbGl0IHRoaXMgc3RyaW5nIG9uIHRoZSBjaGFyYWN0ZXIgaW4gYGx1bnIudG9rZW5pemVyLnNlcGFyYXRvcmAuXG4gKiBBcnJheXMgd2lsbCBoYXZlIHRoZWlyIGVsZW1lbnRzIGNvbnZlcnRlZCB0byBzdHJpbmdzIGFuZCB3cmFwcGVkIGluIGEgbHVuci5Ub2tlbi5cbiAqXG4gKiBPcHRpb25hbCBtZXRhZGF0YSBjYW4gYmUgcGFzc2VkIHRvIHRoZSB0b2tlbml6ZXIsIHRoaXMgbWV0YWRhdGEgd2lsbCBiZSBjbG9uZWQgYW5kXG4gKiBhZGRlZCBhcyBtZXRhZGF0YSB0byBldmVyeSB0b2tlbiB0aGF0IGlzIGNyZWF0ZWQgZnJvbSB0aGUgb2JqZWN0IHRvIGJlIHRva2VuaXplZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAcGFyYW0gez8oc3RyaW5nfG9iamVjdHxvYmplY3RbXSl9IG9iaiAtIFRoZSBvYmplY3QgdG8gY29udmVydCBpbnRvIHRva2Vuc1xuICogQHBhcmFtIHs/b2JqZWN0fSBtZXRhZGF0YSAtIE9wdGlvbmFsIG1ldGFkYXRhIHRvIGFzc29jaWF0ZSB3aXRoIGV2ZXJ5IHRva2VuXG4gKiBAcmV0dXJucyB7bHVuci5Ub2tlbltdfVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqL1xubHVuci50b2tlbml6ZXIgPSBmdW5jdGlvbiAob2JqLCBtZXRhZGF0YSkge1xuICBpZiAob2JqID09IG51bGwgfHwgb2JqID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gbmV3IGx1bnIuVG9rZW4oXG4gICAgICAgIGx1bnIudXRpbHMuYXNTdHJpbmcodCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgbHVuci51dGlscy5jbG9uZShtZXRhZGF0YSlcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgdmFyIHN0ciA9IG9iai50b1N0cmluZygpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgbGVuID0gc3RyLmxlbmd0aCxcbiAgICAgIHRva2VucyA9IFtdXG5cbiAgZm9yICh2YXIgc2xpY2VFbmQgPSAwLCBzbGljZVN0YXJ0ID0gMDsgc2xpY2VFbmQgPD0gbGVuOyBzbGljZUVuZCsrKSB7XG4gICAgdmFyIGNoYXIgPSBzdHIuY2hhckF0KHNsaWNlRW5kKSxcbiAgICAgICAgc2xpY2VMZW5ndGggPSBzbGljZUVuZCAtIHNsaWNlU3RhcnRcblxuICAgIGlmICgoY2hhci5tYXRjaChsdW5yLnRva2VuaXplci5zZXBhcmF0b3IpIHx8IHNsaWNlRW5kID09IGxlbikpIHtcblxuICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgdG9rZW5NZXRhZGF0YSA9IGx1bnIudXRpbHMuY2xvbmUobWV0YWRhdGEpIHx8IHt9XG4gICAgICAgIHRva2VuTWV0YWRhdGFbXCJwb3NpdGlvblwiXSA9IFtzbGljZVN0YXJ0LCBzbGljZUxlbmd0aF1cbiAgICAgICAgdG9rZW5NZXRhZGF0YVtcImluZGV4XCJdID0gdG9rZW5zLmxlbmd0aFxuXG4gICAgICAgIHRva2Vucy5wdXNoKFxuICAgICAgICAgIG5ldyBsdW5yLlRva2VuIChcbiAgICAgICAgICAgIHN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCksXG4gICAgICAgICAgICB0b2tlbk1ldGFkYXRhXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIHNsaWNlU3RhcnQgPSBzbGljZUVuZCArIDFcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB0b2tlbnNcbn1cblxuLyoqXG4gKiBUaGUgc2VwYXJhdG9yIHVzZWQgdG8gc3BsaXQgYSBzdHJpbmcgaW50byB0b2tlbnMuIE92ZXJyaWRlIHRoaXMgcHJvcGVydHkgdG8gY2hhbmdlIHRoZSBiZWhhdmlvdXIgb2ZcbiAqIGBsdW5yLnRva2VuaXplcmAgYmVoYXZpb3VyIHdoZW4gdG9rZW5pemluZyBzdHJpbmdzLiBCeSBkZWZhdWx0IHRoaXMgc3BsaXRzIG9uIHdoaXRlc3BhY2UgYW5kIGh5cGhlbnMuXG4gKlxuICogQHN0YXRpY1xuICogQHNlZSBsdW5yLnRva2VuaXplclxuICovXG5sdW5yLnRva2VuaXplci5zZXBhcmF0b3IgPSAvW1xcc1xcLV0rL1xuLyohXG4gKiBsdW5yLlBpcGVsaW5lXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBsdW5yLlBpcGVsaW5lcyBtYWludGFpbiBhbiBvcmRlcmVkIGxpc3Qgb2YgZnVuY3Rpb25zIHRvIGJlIGFwcGxpZWQgdG8gYWxsXG4gKiB0b2tlbnMgaW4gZG9jdW1lbnRzIGVudGVyaW5nIHRoZSBzZWFyY2ggaW5kZXggYW5kIHF1ZXJpZXMgYmVpbmcgcmFuIGFnYWluc3RcbiAqIHRoZSBpbmRleC5cbiAqXG4gKiBBbiBpbnN0YW5jZSBvZiBsdW5yLkluZGV4IGNyZWF0ZWQgd2l0aCB0aGUgbHVuciBzaG9ydGN1dCB3aWxsIGNvbnRhaW4gYVxuICogcGlwZWxpbmUgd2l0aCBhIHN0b3Agd29yZCBmaWx0ZXIgYW5kIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lci4gRXh0cmFcbiAqIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgYmVmb3JlIG9yIGFmdGVyIGVpdGhlciBvZiB0aGVzZSBmdW5jdGlvbnMgb3IgdGhlc2VcbiAqIGRlZmF1bHQgZnVuY3Rpb25zIGNhbiBiZSByZW1vdmVkLlxuICpcbiAqIFdoZW4gcnVuIHRoZSBwaXBlbGluZSB3aWxsIGNhbGwgZWFjaCBmdW5jdGlvbiBpbiB0dXJuLCBwYXNzaW5nIGEgdG9rZW4sIHRoZVxuICogaW5kZXggb2YgdGhhdCB0b2tlbiBpbiB0aGUgb3JpZ2luYWwgbGlzdCBvZiBhbGwgdG9rZW5zIGFuZCBmaW5hbGx5IGEgbGlzdCBvZlxuICogYWxsIHRoZSBvcmlnaW5hbCB0b2tlbnMuXG4gKlxuICogVGhlIG91dHB1dCBvZiBmdW5jdGlvbnMgaW4gdGhlIHBpcGVsaW5lIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBuZXh0IGZ1bmN0aW9uXG4gKiBpbiB0aGUgcGlwZWxpbmUuIFRvIGV4Y2x1ZGUgYSB0b2tlbiBmcm9tIGVudGVyaW5nIHRoZSBpbmRleCB0aGUgZnVuY3Rpb25cbiAqIHNob3VsZCByZXR1cm4gdW5kZWZpbmVkLCB0aGUgcmVzdCBvZiB0aGUgcGlwZWxpbmUgd2lsbCBub3QgYmUgY2FsbGVkIHdpdGhcbiAqIHRoaXMgdG9rZW4uXG4gKlxuICogRm9yIHNlcmlhbGlzYXRpb24gb2YgcGlwZWxpbmVzIHRvIHdvcmssIGFsbCBmdW5jdGlvbnMgdXNlZCBpbiBhbiBpbnN0YW5jZSBvZlxuICogYSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIGx1bnIuUGlwZWxpbmUuIFJlZ2lzdGVyZWQgZnVuY3Rpb25zIGNhblxuICogdGhlbiBiZSBsb2FkZWQuIElmIHRyeWluZyB0byBsb2FkIGEgc2VyaWFsaXNlZCBwaXBlbGluZSB0aGF0IHVzZXMgZnVuY3Rpb25zXG4gKiB0aGF0IGFyZSBub3QgcmVnaXN0ZXJlZCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqXG4gKiBJZiBub3QgcGxhbm5pbmcgb24gc2VyaWFsaXNpbmcgdGhlIHBpcGVsaW5lIHRoZW4gcmVnaXN0ZXJpbmcgcGlwZWxpbmUgZnVuY3Rpb25zXG4gKiBpcyBub3QgbmVjZXNzYXJ5LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5sdW5yLlBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9zdGFjayA9IFtdXG59XG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJlZEZ1bmN0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuLyoqXG4gKiBBIHBpcGVsaW5lIGZ1bmN0aW9uIG1hcHMgbHVuci5Ub2tlbiB0byBsdW5yLlRva2VuLiBBIGx1bnIuVG9rZW4gY29udGFpbnMgdGhlIHRva2VuXG4gKiBzdHJpbmcgYXMgd2VsbCBhcyBhbGwga25vd24gbWV0YWRhdGEuIEEgcGlwZWxpbmUgZnVuY3Rpb24gY2FuIG11dGF0ZSB0aGUgdG9rZW4gc3RyaW5nXG4gKiBvciBtdXRhdGUgKG9yIGFkZCkgbWV0YWRhdGEgZm9yIGEgZ2l2ZW4gdG9rZW4uXG4gKlxuICogQSBwaXBlbGluZSBmdW5jdGlvbiBjYW4gaW5kaWNhdGUgdGhhdCB0aGUgcGFzc2VkIHRva2VuIHNob3VsZCBiZSBkaXNjYXJkZWQgYnkgcmV0dXJuaW5nXG4gKiBudWxsLiBUaGlzIHRva2VuIHdpbGwgbm90IGJlIHBhc3NlZCB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIHdpbGwgbm90IGJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguXG4gKlxuICogTXVsdGlwbGUgdG9rZW5zIGNhbiBiZSByZXR1cm5lZCBieSByZXR1cm5pbmcgYW4gYXJyYXkgb2YgdG9rZW5zLiBFYWNoIHRva2VuIHdpbGwgYmUgcGFzc2VkXG4gKiB0byBhbnkgZG93bnN0cmVhbSBwaXBlbGluZSBmdW5jdGlvbnMgYW5kIGFsbCB3aWxsIHJldHVybmVkIHRva2VucyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBBbnkgbnVtYmVyIG9mIHBpcGVsaW5lIGZ1bmN0aW9ucyBtYXkgYmUgY2hhaW5lZCB0b2dldGhlciB1c2luZyBhIGx1bnIuUGlwZWxpbmUuXG4gKlxuICogQGludGVyZmFjZSBsdW5yLlBpcGVsaW5lRnVuY3Rpb25cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIGZyb20gdGhlIGRvY3VtZW50IGJlaW5nIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpIC0gVGhlIGluZGV4IG9mIHRoaXMgdG9rZW4gaW4gdGhlIGNvbXBsZXRlIGxpc3Qgb2YgdG9rZW5zIGZvciB0aGlzIGRvY3VtZW50L2ZpZWxkLlxuICogQHBhcmFtIHtsdW5yLlRva2VuW119IHRva2VucyAtIEFsbCB0b2tlbnMgZm9yIHRoaXMgZG9jdW1lbnQvZmllbGQuXG4gKiBAcmV0dXJucyB7KD9sdW5yLlRva2VufGx1bnIuVG9rZW5bXSl9XG4gKi9cblxuLyoqXG4gKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHdpdGggdGhlIHBpcGVsaW5lLlxuICpcbiAqIEZ1bmN0aW9ucyB0aGF0IGFyZSB1c2VkIGluIHRoZSBwaXBlbGluZSBzaG91bGQgYmUgcmVnaXN0ZXJlZCBpZiB0aGUgcGlwZWxpbmVcbiAqIG5lZWRzIHRvIGJlIHNlcmlhbGlzZWQsIG9yIGEgc2VyaWFsaXNlZCBwaXBlbGluZSBuZWVkcyB0byBiZSBsb2FkZWQuXG4gKlxuICogUmVnaXN0ZXJpbmcgYSBmdW5jdGlvbiBkb2VzIG5vdCBhZGQgaXQgdG8gYSBwaXBlbGluZSwgZnVuY3Rpb25zIG11c3Qgc3RpbGwgYmVcbiAqIGFkZGVkIHRvIGluc3RhbmNlcyBvZiB0aGUgcGlwZWxpbmUgZm9yIHRoZW0gdG8gYmUgdXNlZCB3aGVuIHJ1bm5pbmcgYSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgZm9yLlxuICogQHBhcmFtIHtTdHJpbmd9IGxhYmVsIC0gVGhlIGxhYmVsIHRvIHJlZ2lzdGVyIHRoaXMgZnVuY3Rpb24gd2l0aFxuICovXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm4sIGxhYmVsKSB7XG4gIGlmIChsYWJlbCBpbiB0aGlzLnJlZ2lzdGVyZWRGdW5jdGlvbnMpIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oJ092ZXJ3cml0aW5nIGV4aXN0aW5nIHJlZ2lzdGVyZWQgZnVuY3Rpb246ICcgKyBsYWJlbClcbiAgfVxuXG4gIGZuLmxhYmVsID0gbGFiZWxcbiAgbHVuci5QaXBlbGluZS5yZWdpc3RlcmVkRnVuY3Rpb25zW2ZuLmxhYmVsXSA9IGZuXG59XG5cbi8qKlxuICogV2FybnMgaWYgdGhlIGZ1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIGFzIGEgUGlwZWxpbmUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtsdW5yLlBpcGVsaW5lRnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIGZvci5cbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBpc1JlZ2lzdGVyZWQgPSBmbi5sYWJlbCAmJiAoZm4ubGFiZWwgaW4gdGhpcy5yZWdpc3RlcmVkRnVuY3Rpb25zKVxuXG4gIGlmICghaXNSZWdpc3RlcmVkKSB7XG4gICAgbHVuci51dGlscy53YXJuKCdGdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIHBpcGVsaW5lLiBUaGlzIG1heSBjYXVzZSBwcm9ibGVtcyB3aGVuIHNlcmlhbGlzaW5nIHRoZSBpbmRleC5cXG4nLCBmbilcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpc2VkIHBpcGVsaW5lLlxuICpcbiAqIEFsbCBmdW5jdGlvbnMgdG8gYmUgbG9hZGVkIG11c3QgYWxyZWFkeSBiZSByZWdpc3RlcmVkIHdpdGggbHVuci5QaXBlbGluZS5cbiAqIElmIGFueSBmdW5jdGlvbiBmcm9tIHRoZSBzZXJpYWxpc2VkIGRhdGEgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgdGhlbiBhblxuICogZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlcmlhbGlzZWQgLSBUaGUgc2VyaWFsaXNlZCBwaXBlbGluZSB0byBsb2FkLlxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmV9XG4gKi9cbmx1bnIuUGlwZWxpbmUubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpc2VkKSB7XG4gIHZhciBwaXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lXG5cbiAgc2VyaWFsaXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChmbk5hbWUpIHtcbiAgICB2YXIgZm4gPSBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyZWRGdW5jdGlvbnNbZm5OYW1lXVxuXG4gICAgaWYgKGZuKSB7XG4gICAgICBwaXBlbGluZS5hZGQoZm4pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxvYWQgdW5yZWdpc3RlcmVkIGZ1bmN0aW9uOiAnICsgZm5OYW1lKVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gcGlwZWxpbmVcbn1cblxuLyoqXG4gKiBBZGRzIG5ldyBmdW5jdGlvbnMgdG8gdGhlIGVuZCBvZiB0aGUgcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9uW119IGZ1bmN0aW9ucyAtIEFueSBudW1iZXIgb2YgZnVuY3Rpb25zIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGZucyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcblxuICBmbnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHtcbiAgICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChmbilcbiAgICB0aGlzLl9zdGFjay5wdXNoKGZuKVxuICB9LCB0aGlzKVxufVxuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYWZ0ZXIgYSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZVxuICogcGlwZWxpbmUuXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBleGlzdGluZ0ZuIC0gQSBmdW5jdGlvbiB0aGF0IGFscmVhZHkgZXhpc3RzIGluIHRoZSBwaXBlbGluZS5cbiAqIEBwYXJhbSB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufSBuZXdGbiAtIFRoZSBuZXcgZnVuY3Rpb24gdG8gYWRkIHRvIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUuYWZ0ZXIgPSBmdW5jdGlvbiAoZXhpc3RpbmdGbiwgbmV3Rm4pIHtcbiAgbHVuci5QaXBlbGluZS53YXJuSWZGdW5jdGlvbk5vdFJlZ2lzdGVyZWQobmV3Rm4pXG5cbiAgdmFyIHBvcyA9IHRoaXMuX3N0YWNrLmluZGV4T2YoZXhpc3RpbmdGbilcbiAgaWYgKHBvcyA9PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgZXhpc3RpbmdGbicpXG4gIH1cblxuICBwb3MgPSBwb3MgKyAxXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKVxufVxuXG4vKipcbiAqIEFkZHMgYSBzaW5nbGUgZnVuY3Rpb24gYmVmb3JlIGEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGVcbiAqIHBpcGVsaW5lLlxuICpcbiAqIExvZ3MgYSB3YXJuaW5nIGlmIHRoZSBmdW5jdGlvbiBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZXhpc3RpbmdGbiAtIEEgZnVuY3Rpb24gdGhhdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gbmV3Rm4gLSBUaGUgbmV3IGZ1bmN0aW9uIHRvIGFkZCB0byB0aGUgcGlwZWxpbmUuXG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLmJlZm9yZSA9IGZ1bmN0aW9uIChleGlzdGluZ0ZuLCBuZXdGbikge1xuICBsdW5yLlBpcGVsaW5lLndhcm5JZkZ1bmN0aW9uTm90UmVnaXN0ZXJlZChuZXdGbilcblxuICB2YXIgcG9zID0gdGhpcy5fc3RhY2suaW5kZXhPZihleGlzdGluZ0ZuKVxuICBpZiAocG9zID09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBleGlzdGluZ0ZuJylcbiAgfVxuXG4gIHRoaXMuX3N0YWNrLnNwbGljZShwb3MsIDAsIG5ld0ZuKVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYSBmdW5jdGlvbiBmcm9tIHRoZSBwaXBlbGluZS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHJlbW92ZSBmcm9tIHRoZSBwaXBlbGluZS5cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGZuKSB7XG4gIHZhciBwb3MgPSB0aGlzLl9zdGFjay5pbmRleE9mKGZuKVxuICBpZiAocG9zID09IC0xKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB0aGlzLl9zdGFjay5zcGxpY2UocG9zLCAxKVxufVxuXG4vKipcbiAqIFJ1bnMgdGhlIGN1cnJlbnQgbGlzdCBvZiBmdW5jdGlvbnMgdGhhdCBtYWtlIHVwIHRoZSBwaXBlbGluZSBhZ2FpbnN0IHRoZVxuICogcGFzc2VkIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnMgVGhlIHRva2VucyB0byBydW4gdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcmV0dXJucyB7QXJyYXl9XG4gKi9cbmx1bnIuUGlwZWxpbmUucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICh0b2tlbnMpIHtcbiAgdmFyIHN0YWNrTGVuZ3RoID0gdGhpcy5fc3RhY2subGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFja0xlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGZuID0gdGhpcy5fc3RhY2tbaV1cbiAgICB2YXIgbWVtbyA9IFtdXG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHJlc3VsdCA9IGZuKHRva2Vuc1tqXSwgaiwgdG9rZW5zKVxuXG4gICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDAgfHwgcmVzdWx0ID09PSAnJykgY29udGludWVcblxuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgcmVzdWx0Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgbWVtby5wdXNoKHJlc3VsdFtrXSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVtby5wdXNoKHJlc3VsdClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0b2tlbnMgPSBtZW1vXG4gIH1cblxuICByZXR1cm4gdG9rZW5zXG59XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIGZvciBwYXNzaW5nIGEgc3RyaW5nIHRocm91Z2ggYSBwaXBlbGluZSBhbmQgZ2V0dGluZ1xuICogc3RyaW5ncyBvdXQuIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2Ygd3JhcHBpbmcgdGhlIHBhc3NlZCBzdHJpbmcgaW4gYVxuICogdG9rZW4gYW5kIG1hcHBpbmcgdGhlIHJlc3VsdGluZyB0b2tlbnMgYmFjayB0byBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIHBhc3MgdGhyb3VnaCB0aGUgcGlwZWxpbmUuXG4gKiBAcGFyYW0gez9vYmplY3R9IG1ldGFkYXRhIC0gT3B0aW9uYWwgbWV0YWRhdGEgdG8gYXNzb2NpYXRlIHdpdGggdGhlIHRva2VuXG4gKiBwYXNzZWQgdG8gdGhlIHBpcGVsaW5lLlxuICogQHJldHVybnMge3N0cmluZ1tdfVxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5ydW5TdHJpbmcgPSBmdW5jdGlvbiAoc3RyLCBtZXRhZGF0YSkge1xuICB2YXIgdG9rZW4gPSBuZXcgbHVuci5Ub2tlbiAoc3RyLCBtZXRhZGF0YSlcblxuICByZXR1cm4gdGhpcy5ydW4oW3Rva2VuXSkubWFwKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQudG9TdHJpbmcoKVxuICB9KVxufVxuXG4vKipcbiAqIFJlc2V0cyB0aGUgcGlwZWxpbmUgYnkgcmVtb3ZpbmcgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gKlxuICovXG5sdW5yLlBpcGVsaW5lLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fc3RhY2sgPSBbXVxufVxuXG4vKipcbiAqIFJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGlwZWxpbmUgcmVhZHkgZm9yIHNlcmlhbGlzYXRpb24uXG4gKlxuICogTG9ncyBhIHdhcm5pbmcgaWYgdGhlIGZ1bmN0aW9uIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xubHVuci5QaXBlbGluZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fc3RhY2subWFwKGZ1bmN0aW9uIChmbikge1xuICAgIGx1bnIuUGlwZWxpbmUud2FybklmRnVuY3Rpb25Ob3RSZWdpc3RlcmVkKGZuKVxuXG4gICAgcmV0dXJuIGZuLmxhYmVsXG4gIH0pXG59XG4vKiFcbiAqIGx1bnIuVmVjdG9yXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIHZlY3RvciBpcyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmVjdG9yIHNwYWNlIG9mIGRvY3VtZW50cyBhbmQgcXVlcmllcy4gVGhlc2VcbiAqIHZlY3RvcnMgc3VwcG9ydCBvcGVyYXRpb25zIHRvIGRldGVybWluZSB0aGUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byBkb2N1bWVudHMgb3JcbiAqIGEgZG9jdW1lbnQgYW5kIGEgcXVlcnkuXG4gKlxuICogTm9ybWFsbHkgbm8gcGFyYW1ldGVycyBhcmUgcmVxdWlyZWQgZm9yIGluaXRpYWxpemluZyBhIHZlY3RvciwgYnV0IGluIHRoZSBjYXNlIG9mXG4gKiBsb2FkaW5nIGEgcHJldmlvdXNseSBkdW1wZWQgdmVjdG9yIHRoZSByYXcgZWxlbWVudHMgY2FuIGJlIHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB2ZWN0b3JzIGFyZSBpbXBsZW1lbnRlZCB3aXRoIGEgZmxhdCBhcnJheSwgd2hlcmUgYW4gZWxlbWVudHNcbiAqIGluZGV4IGlzIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IGl0cyB2YWx1ZS4gRS5nLiBbaW5kZXgsIHZhbHVlLCBpbmRleCwgdmFsdWVdLiBUaGlzXG4gKiBhbGxvd3MgdGhlIHVuZGVybHlpbmcgYXJyYXkgdG8gYmUgYXMgc3BhcnNlIGFzIHBvc3NpYmxlIGFuZCBzdGlsbCBvZmZlciBkZWNlbnRcbiAqIHBlcmZvcm1hbmNlIHdoZW4gYmVpbmcgdXNlZCBmb3IgdmVjdG9yIGNhbGN1bGF0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyW119IFtlbGVtZW50c10gLSBUaGUgZmxhdCBsaXN0IG9mIGVsZW1lbnQgaW5kZXggYW5kIGVsZW1lbnQgdmFsdWUgcGFpcnMuXG4gKi9cbmx1bnIuVmVjdG9yID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gIHRoaXMuX21hZ25pdHVkZSA9IDBcbiAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzIHx8IFtdXG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHZlY3RvciB0byBpbnNlcnQgYSBnaXZlbiBpbmRleC5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW50ZXJuYWxseSBieSBpbnNlcnQgYW5kIHVwc2VydC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBpbmRleGVzIHRoZW5cbiAqIHRoZSBwb3NpdGlvbiBpcyByZXR1cm5lZCBhcyBpZiB0aGUgdmFsdWUgZm9yIHRoYXQgaW5kZXggd2VyZSB0byBiZSB1cGRhdGVkLCBidXQgaXRcbiAqIGlzIHRoZSBjYWxsZXJzIHJlc3BvbnNpYmlsaXR5IHRvIGNoZWNrIHdoZXRoZXIgdGhlcmUgaXMgYSBkdXBsaWNhdGUgYXQgdGhhdCBpbmRleFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnNlcnRJZHggLSBUaGUgaW5kZXggYXQgd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGluc2VydGVkLlxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLnBvc2l0aW9uRm9ySW5kZXggPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgLy8gRm9yIGFuIGVtcHR5IHZlY3RvciB0aGUgdHVwbGUgY2FuIGJlIGluc2VydGVkIGF0IHRoZSBiZWdpbm5pbmdcbiAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gMFxuICB9XG5cbiAgdmFyIHN0YXJ0ID0gMCxcbiAgICAgIGVuZCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoIC8gMixcbiAgICAgIHNsaWNlTGVuZ3RoID0gZW5kIC0gc3RhcnQsXG4gICAgICBwaXZvdFBvaW50ID0gTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpLFxuICAgICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdXG5cbiAgd2hpbGUgKHNsaWNlTGVuZ3RoID4gMSkge1xuICAgIGlmIChwaXZvdEluZGV4IDwgaW5kZXgpIHtcbiAgICAgIHN0YXJ0ID0gcGl2b3RQb2ludFxuICAgIH1cblxuICAgIGlmIChwaXZvdEluZGV4ID4gaW5kZXgpIHtcbiAgICAgIGVuZCA9IHBpdm90UG9pbnRcbiAgICB9XG5cbiAgICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBzbGljZUxlbmd0aCA9IGVuZCAtIHN0YXJ0XG4gICAgcGl2b3RQb2ludCA9IHN0YXJ0ICsgTWF0aC5mbG9vcihzbGljZUxlbmd0aCAvIDIpXG4gICAgcGl2b3RJbmRleCA9IHRoaXMuZWxlbWVudHNbcGl2b3RQb2ludCAqIDJdXG4gIH1cblxuICBpZiAocGl2b3RJbmRleCA9PSBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMlxuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPiBpbmRleCkge1xuICAgIHJldHVybiBwaXZvdFBvaW50ICogMlxuICB9XG5cbiAgaWYgKHBpdm90SW5kZXggPCBpbmRleCkge1xuICAgIHJldHVybiAocGl2b3RQb2ludCArIDEpICogMlxuICB9XG59XG5cbi8qKlxuICogSW5zZXJ0cyBhbiBlbGVtZW50IGF0IGFuIGluZGV4IHdpdGhpbiB0aGUgdmVjdG9yLlxuICpcbiAqIERvZXMgbm90IGFsbG93IGR1cGxpY2F0ZXMsIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBlbnRyeVxuICogZm9yIHRoaXMgaW5kZXguXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqL1xubHVuci5WZWN0b3IucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChpbnNlcnRJZHgsIHZhbCkge1xuICB0aGlzLnVwc2VydChpbnNlcnRJZHgsIHZhbCwgZnVuY3Rpb24gKCkge1xuICAgIHRocm93IFwiZHVwbGljYXRlIGluZGV4XCJcbiAgfSlcbn1cblxuLyoqXG4gKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZXhpc3RpbmcgaW5kZXggd2l0aGluIHRoZSB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluc2VydElkeCAtIFRoZSBpbmRleCBhdCB3aGljaCB0aGUgZWxlbWVudCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKiBAcGFyYW0ge051bWJlcn0gdmFsIC0gVGhlIHZhbHVlIHRvIGJlIGluc2VydGVkIGludG8gdGhlIHZlY3Rvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gQSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBmb3IgdXBkYXRlcywgdGhlIGV4aXN0aW5nIHZhbHVlIGFuZCB0aGVcbiAqIHJlcXVlc3RlZCB2YWx1ZSBhcmUgcGFzc2VkIGFzIGFyZ3VtZW50c1xuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUudXBzZXJ0ID0gZnVuY3Rpb24gKGluc2VydElkeCwgdmFsLCBmbikge1xuICB0aGlzLl9tYWduaXR1ZGUgPSAwXG4gIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Gb3JJbmRleChpbnNlcnRJZHgpXG5cbiAgaWYgKHRoaXMuZWxlbWVudHNbcG9zaXRpb25dID09IGluc2VydElkeCkge1xuICAgIHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSA9IGZuKHRoaXMuZWxlbWVudHNbcG9zaXRpb24gKyAxXSwgdmFsKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuZWxlbWVudHMuc3BsaWNlKHBvc2l0aW9uLCAwLCBpbnNlcnRJZHgsIHZhbClcbiAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG1hZ25pdHVkZSBvZiB0aGlzIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fbWFnbml0dWRlKSByZXR1cm4gdGhpcy5fbWFnbml0dWRlXG5cbiAgdmFyIHN1bU9mU3F1YXJlcyA9IDAsXG4gICAgICBlbGVtZW50c0xlbmd0aCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBlbGVtZW50c0xlbmd0aDsgaSArPSAyKSB7XG4gICAgdmFyIHZhbCA9IHRoaXMuZWxlbWVudHNbaV1cbiAgICBzdW1PZlNxdWFyZXMgKz0gdmFsICogdmFsXG4gIH1cblxuICByZXR1cm4gdGhpcy5fbWFnbml0dWRlID0gTWF0aC5zcXJ0KHN1bU9mU3F1YXJlcylcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgdmVjdG9yIHRvIGNvbXB1dGUgdGhlIGRvdCBwcm9kdWN0IHdpdGguXG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5sdW5yLlZlY3Rvci5wcm90b3R5cGUuZG90ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHZhciBkb3RQcm9kdWN0ID0gMCxcbiAgICAgIGEgPSB0aGlzLmVsZW1lbnRzLCBiID0gb3RoZXJWZWN0b3IuZWxlbWVudHMsXG4gICAgICBhTGVuID0gYS5sZW5ndGgsIGJMZW4gPSBiLmxlbmd0aCxcbiAgICAgIGFWYWwgPSAwLCBiVmFsID0gMCxcbiAgICAgIGkgPSAwLCBqID0gMFxuXG4gIHdoaWxlIChpIDwgYUxlbiAmJiBqIDwgYkxlbikge1xuICAgIGFWYWwgPSBhW2ldLCBiVmFsID0gYltqXVxuICAgIGlmIChhVmFsIDwgYlZhbCkge1xuICAgICAgaSArPSAyXG4gICAgfSBlbHNlIGlmIChhVmFsID4gYlZhbCkge1xuICAgICAgaiArPSAyXG4gICAgfSBlbHNlIGlmIChhVmFsID09IGJWYWwpIHtcbiAgICAgIGRvdFByb2R1Y3QgKz0gYVtpICsgMV0gKiBiW2ogKyAxXVxuICAgICAgaSArPSAyXG4gICAgICBqICs9IDJcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZG90UHJvZHVjdFxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNpbWlsYXJpdHkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gKlxuICogQHBhcmFtIHtsdW5yLlZlY3Rvcn0gb3RoZXJWZWN0b3IgLSBUaGUgb3RoZXIgdmVjdG9yIHRvIGNhbGN1bGF0ZSB0aGVcbiAqIHNpbWlsYXJpdHkgd2l0aC5cbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS5zaW1pbGFyaXR5ID0gZnVuY3Rpb24gKG90aGVyVmVjdG9yKSB7XG4gIHJldHVybiB0aGlzLmRvdChvdGhlclZlY3RvcikgLyB0aGlzLm1hZ25pdHVkZSgpIHx8IDBcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgdmVjdG9yIHRvIGFuIGFycmF5IG9mIHRoZSBlbGVtZW50cyB3aXRoaW4gdGhlIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgb3V0cHV0ID0gbmV3IEFycmF5ICh0aGlzLmVsZW1lbnRzLmxlbmd0aCAvIDIpXG5cbiAgZm9yICh2YXIgaSA9IDEsIGogPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkgKz0gMiwgaisrKSB7XG4gICAgb3V0cHV0W2pdID0gdGhpcy5lbGVtZW50c1tpXVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dFxufVxuXG4vKipcbiAqIEEgSlNPTiBzZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlY3Rvci5cbiAqXG4gKiBAcmV0dXJucyB7TnVtYmVyW119XG4gKi9cbmx1bnIuVmVjdG9yLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmVsZW1lbnRzXG59XG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyohXG4gKiBsdW5yLnN0ZW1tZXJcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqIEluY2x1ZGVzIGNvZGUgZnJvbSAtIGh0dHA6Ly90YXJ0YXJ1cy5vcmcvfm1hcnRpbi9Qb3J0ZXJTdGVtbWVyL2pzLnR4dFxuICovXG5cbi8qKlxuICogbHVuci5zdGVtbWVyIGlzIGFuIGVuZ2xpc2ggbGFuZ3VhZ2Ugc3RlbW1lciwgdGhpcyBpcyBhIEphdmFTY3JpcHRcbiAqIGltcGxlbWVudGF0aW9uIG9mIHRoZSBQb3J0ZXJTdGVtbWVyIHRha2VuIGZyb20gaHR0cDovL3RhcnRhcnVzLm9yZy9+bWFydGluXG4gKlxuICogQHN0YXRpY1xuICogQGltcGxlbWVudHMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBwYXJhbSB7bHVuci5Ub2tlbn0gdG9rZW4gLSBUaGUgc3RyaW5nIHRvIHN0ZW1cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqIEBmdW5jdGlvblxuICovXG5sdW5yLnN0ZW1tZXIgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIHN0ZXAybGlzdCA9IHtcbiAgICAgIFwiYXRpb25hbFwiIDogXCJhdGVcIixcbiAgICAgIFwidGlvbmFsXCIgOiBcInRpb25cIixcbiAgICAgIFwiZW5jaVwiIDogXCJlbmNlXCIsXG4gICAgICBcImFuY2lcIiA6IFwiYW5jZVwiLFxuICAgICAgXCJpemVyXCIgOiBcIml6ZVwiLFxuICAgICAgXCJibGlcIiA6IFwiYmxlXCIsXG4gICAgICBcImFsbGlcIiA6IFwiYWxcIixcbiAgICAgIFwiZW50bGlcIiA6IFwiZW50XCIsXG4gICAgICBcImVsaVwiIDogXCJlXCIsXG4gICAgICBcIm91c2xpXCIgOiBcIm91c1wiLFxuICAgICAgXCJpemF0aW9uXCIgOiBcIml6ZVwiLFxuICAgICAgXCJhdGlvblwiIDogXCJhdGVcIixcbiAgICAgIFwiYXRvclwiIDogXCJhdGVcIixcbiAgICAgIFwiYWxpc21cIiA6IFwiYWxcIixcbiAgICAgIFwiaXZlbmVzc1wiIDogXCJpdmVcIixcbiAgICAgIFwiZnVsbmVzc1wiIDogXCJmdWxcIixcbiAgICAgIFwib3VzbmVzc1wiIDogXCJvdXNcIixcbiAgICAgIFwiYWxpdGlcIiA6IFwiYWxcIixcbiAgICAgIFwiaXZpdGlcIiA6IFwiaXZlXCIsXG4gICAgICBcImJpbGl0aVwiIDogXCJibGVcIixcbiAgICAgIFwibG9naVwiIDogXCJsb2dcIlxuICAgIH0sXG5cbiAgICBzdGVwM2xpc3QgPSB7XG4gICAgICBcImljYXRlXCIgOiBcImljXCIsXG4gICAgICBcImF0aXZlXCIgOiBcIlwiLFxuICAgICAgXCJhbGl6ZVwiIDogXCJhbFwiLFxuICAgICAgXCJpY2l0aVwiIDogXCJpY1wiLFxuICAgICAgXCJpY2FsXCIgOiBcImljXCIsXG4gICAgICBcImZ1bFwiIDogXCJcIixcbiAgICAgIFwibmVzc1wiIDogXCJcIlxuICAgIH0sXG5cbiAgICBjID0gXCJbXmFlaW91XVwiLCAgICAgICAgICAvLyBjb25zb25hbnRcbiAgICB2ID0gXCJbYWVpb3V5XVwiLCAgICAgICAgICAvLyB2b3dlbFxuICAgIEMgPSBjICsgXCJbXmFlaW91eV0qXCIsICAgIC8vIGNvbnNvbmFudCBzZXF1ZW5jZVxuICAgIFYgPSB2ICsgXCJbYWVpb3VdKlwiLCAgICAgIC8vIHZvd2VsIHNlcXVlbmNlXG5cbiAgICBtZ3IwID0gXCJeKFwiICsgQyArIFwiKT9cIiArIFYgKyBDLCAgICAgICAgICAgICAgIC8vIFtDXVZDLi4uIGlzIG0+MFxuICAgIG1lcTEgPSBcIl4oXCIgKyBDICsgXCIpP1wiICsgViArIEMgKyBcIihcIiArIFYgKyBcIik/JFwiLCAgLy8gW0NdVkNbVl0gaXMgbT0xXG4gICAgbWdyMSA9IFwiXihcIiArIEMgKyBcIik/XCIgKyBWICsgQyArIFYgKyBDLCAgICAgICAvLyBbQ11WQ1ZDLi4uIGlzIG0+MVxuICAgIHNfdiA9IFwiXihcIiArIEMgKyBcIik/XCIgKyB2OyAgICAgICAgICAgICAgICAgICAvLyB2b3dlbCBpbiBzdGVtXG5cbiAgdmFyIHJlX21ncjAgPSBuZXcgUmVnRXhwKG1ncjApO1xuICB2YXIgcmVfbWdyMSA9IG5ldyBSZWdFeHAobWdyMSk7XG4gIHZhciByZV9tZXExID0gbmV3IFJlZ0V4cChtZXExKTtcbiAgdmFyIHJlX3NfdiA9IG5ldyBSZWdFeHAoc192KTtcblxuICB2YXIgcmVfMWEgPSAvXiguKz8pKHNzfGkpZXMkLztcbiAgdmFyIHJlMl8xYSA9IC9eKC4rPykoW15zXSlzJC87XG4gIHZhciByZV8xYiA9IC9eKC4rPyllZWQkLztcbiAgdmFyIHJlMl8xYiA9IC9eKC4rPykoZWR8aW5nKSQvO1xuICB2YXIgcmVfMWJfMiA9IC8uJC87XG4gIHZhciByZTJfMWJfMiA9IC8oYXR8Ymx8aXopJC87XG4gIHZhciByZTNfMWJfMiA9IG5ldyBSZWdFeHAoXCIoW15hZWlvdXlsc3pdKVxcXFwxJFwiKTtcbiAgdmFyIHJlNF8xYl8yID0gbmV3IFJlZ0V4cChcIl5cIiArIEMgKyB2ICsgXCJbXmFlaW91d3h5XSRcIik7XG5cbiAgdmFyIHJlXzFjID0gL14oLis/W15hZWlvdV0peSQvO1xuICB2YXIgcmVfMiA9IC9eKC4rPykoYXRpb25hbHx0aW9uYWx8ZW5jaXxhbmNpfGl6ZXJ8YmxpfGFsbGl8ZW50bGl8ZWxpfG91c2xpfGl6YXRpb258YXRpb258YXRvcnxhbGlzbXxpdmVuZXNzfGZ1bG5lc3N8b3VzbmVzc3xhbGl0aXxpdml0aXxiaWxpdGl8bG9naSkkLztcblxuICB2YXIgcmVfMyA9IC9eKC4rPykoaWNhdGV8YXRpdmV8YWxpemV8aWNpdGl8aWNhbHxmdWx8bmVzcykkLztcblxuICB2YXIgcmVfNCA9IC9eKC4rPykoYWx8YW5jZXxlbmNlfGVyfGljfGFibGV8aWJsZXxhbnR8ZW1lbnR8bWVudHxlbnR8b3V8aXNtfGF0ZXxpdGl8b3VzfGl2ZXxpemUpJC87XG4gIHZhciByZTJfNCA9IC9eKC4rPykoc3x0KShpb24pJC87XG5cbiAgdmFyIHJlXzUgPSAvXiguKz8pZSQvO1xuICB2YXIgcmVfNV8xID0gL2xsJC87XG4gIHZhciByZTNfNSA9IG5ldyBSZWdFeHAoXCJeXCIgKyBDICsgdiArIFwiW15hZWlvdXd4eV0kXCIpO1xuXG4gIHZhciBwb3J0ZXJTdGVtbWVyID0gZnVuY3Rpb24gcG9ydGVyU3RlbW1lcih3KSB7XG4gICAgdmFyIHN0ZW0sXG4gICAgICBzdWZmaXgsXG4gICAgICBmaXJzdGNoLFxuICAgICAgcmUsXG4gICAgICByZTIsXG4gICAgICByZTMsXG4gICAgICByZTQ7XG5cbiAgICBpZiAody5sZW5ndGggPCAzKSB7IHJldHVybiB3OyB9XG5cbiAgICBmaXJzdGNoID0gdy5zdWJzdHIoMCwxKTtcbiAgICBpZiAoZmlyc3RjaCA9PSBcInlcIikge1xuICAgICAgdyA9IGZpcnN0Y2gudG9VcHBlckNhc2UoKSArIHcuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMWFcbiAgICByZSA9IHJlXzFhXG4gICAgcmUyID0gcmUyXzFhO1xuXG4gICAgaWYgKHJlLnRlc3QodykpIHsgdyA9IHcucmVwbGFjZShyZSxcIiQxJDJcIik7IH1cbiAgICBlbHNlIGlmIChyZTIudGVzdCh3KSkgeyB3ID0gdy5yZXBsYWNlKHJlMixcIiQxJDJcIik7IH1cblxuICAgIC8vIFN0ZXAgMWJcbiAgICByZSA9IHJlXzFiO1xuICAgIHJlMiA9IHJlMl8xYjtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KGZwWzFdKSkge1xuICAgICAgICByZSA9IHJlXzFiXzI7XG4gICAgICAgIHcgPSB3LnJlcGxhY2UocmUsXCJcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChyZTIudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUyLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICByZTIgPSByZV9zX3Y7XG4gICAgICBpZiAocmUyLnRlc3Qoc3RlbSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICAgIHJlMiA9IHJlMl8xYl8yO1xuICAgICAgICByZTMgPSByZTNfMWJfMjtcbiAgICAgICAgcmU0ID0gcmU0XzFiXzI7XG4gICAgICAgIGlmIChyZTIudGVzdCh3KSkgeyB3ID0gdyArIFwiZVwiOyB9XG4gICAgICAgIGVsc2UgaWYgKHJlMy50ZXN0KHcpKSB7IHJlID0gcmVfMWJfMjsgdyA9IHcucmVwbGFjZShyZSxcIlwiKTsgfVxuICAgICAgICBlbHNlIGlmIChyZTQudGVzdCh3KSkgeyB3ID0gdyArIFwiZVwiOyB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCAxYyAtIHJlcGxhY2Ugc3VmZml4IHkgb3IgWSBieSBpIGlmIHByZWNlZGVkIGJ5IGEgbm9uLXZvd2VsIHdoaWNoIGlzIG5vdCB0aGUgZmlyc3QgbGV0dGVyIG9mIHRoZSB3b3JkIChzbyBjcnkgLT4gY3JpLCBieSAtPiBieSwgc2F5IC0+IHNheSlcbiAgICByZSA9IHJlXzFjO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgdyA9IHN0ZW0gKyBcImlcIjtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDJcbiAgICByZSA9IHJlXzI7XG4gICAgaWYgKHJlLnRlc3QodykpIHtcbiAgICAgIHZhciBmcCA9IHJlLmV4ZWModyk7XG4gICAgICBzdGVtID0gZnBbMV07XG4gICAgICBzdWZmaXggPSBmcFsyXTtcbiAgICAgIHJlID0gcmVfbWdyMDtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtICsgc3RlcDJsaXN0W3N1ZmZpeF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RlcCAzXG4gICAgcmUgPSByZV8zO1xuICAgIGlmIChyZS50ZXN0KHcpKSB7XG4gICAgICB2YXIgZnAgPSByZS5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdO1xuICAgICAgc3VmZml4ID0gZnBbMl07XG4gICAgICByZSA9IHJlX21ncjA7XG4gICAgICBpZiAocmUudGVzdChzdGVtKSkge1xuICAgICAgICB3ID0gc3RlbSArIHN0ZXAzbGlzdFtzdWZmaXhdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgNFxuICAgIHJlID0gcmVfNDtcbiAgICByZTIgPSByZTJfNDtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlID0gcmVfbWdyMTtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocmUyLnRlc3QodykpIHtcbiAgICAgIHZhciBmcCA9IHJlMi5leGVjKHcpO1xuICAgICAgc3RlbSA9IGZwWzFdICsgZnBbMl07XG4gICAgICByZTIgPSByZV9tZ3IxO1xuICAgICAgaWYgKHJlMi50ZXN0KHN0ZW0pKSB7XG4gICAgICAgIHcgPSBzdGVtO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgNVxuICAgIHJlID0gcmVfNTtcbiAgICBpZiAocmUudGVzdCh3KSkge1xuICAgICAgdmFyIGZwID0gcmUuZXhlYyh3KTtcbiAgICAgIHN0ZW0gPSBmcFsxXTtcbiAgICAgIHJlID0gcmVfbWdyMTtcbiAgICAgIHJlMiA9IHJlX21lcTE7XG4gICAgICByZTMgPSByZTNfNTtcbiAgICAgIGlmIChyZS50ZXN0KHN0ZW0pIHx8IChyZTIudGVzdChzdGVtKSAmJiAhKHJlMy50ZXN0KHN0ZW0pKSkpIHtcbiAgICAgICAgdyA9IHN0ZW07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmUgPSByZV81XzE7XG4gICAgcmUyID0gcmVfbWdyMTtcbiAgICBpZiAocmUudGVzdCh3KSAmJiByZTIudGVzdCh3KSkge1xuICAgICAgcmUgPSByZV8xYl8yO1xuICAgICAgdyA9IHcucmVwbGFjZShyZSxcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBhbmQgdHVybiBpbml0aWFsIFkgYmFjayB0byB5XG5cbiAgICBpZiAoZmlyc3RjaCA9PSBcInlcIikge1xuICAgICAgdyA9IGZpcnN0Y2gudG9Mb3dlckNhc2UoKSArIHcuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHJldHVybiB3O1xuICB9O1xuXG4gIHJldHVybiBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICByZXR1cm4gdG9rZW4udXBkYXRlKHBvcnRlclN0ZW1tZXIpO1xuICB9XG59KSgpO1xuXG5sdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24obHVuci5zdGVtbWVyLCAnc3RlbW1lcicpXG4vKiFcbiAqIGx1bnIuc3RvcFdvcmRGaWx0ZXJcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciBidWlsZHMgYSBzdG9wV29yZEZpbHRlciBmdW5jdGlvbiBmcm9tIHRoZSBwcm92aWRlZFxuICogbGlzdCBvZiBzdG9wIHdvcmRzLlxuICpcbiAqIFRoZSBidWlsdCBpbiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGJ1aWx0IHVzaW5nIHRoaXMgZ2VuZXJhdG9yIGFuZCBjYW4gYmUgdXNlZFxuICogdG8gZ2VuZXJhdGUgY3VzdG9tIHN0b3BXb3JkRmlsdGVycyBmb3IgYXBwbGljYXRpb25zIG9yIG5vbiBFbmdsaXNoIGxhbmd1YWdlcy5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl9IHRva2VuIFRoZSB0b2tlbiB0byBwYXNzIHRocm91Z2ggdGhlIGZpbHRlclxuICogQHJldHVybnMge2x1bnIuUGlwZWxpbmVGdW5jdGlvbn1cbiAqIEBzZWUgbHVuci5QaXBlbGluZVxuICogQHNlZSBsdW5yLnN0b3BXb3JkRmlsdGVyXG4gKi9cbmx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlciA9IGZ1bmN0aW9uIChzdG9wV29yZHMpIHtcbiAgdmFyIHdvcmRzID0gc3RvcFdvcmRzLnJlZHVjZShmdW5jdGlvbiAobWVtbywgc3RvcFdvcmQpIHtcbiAgICBtZW1vW3N0b3BXb3JkXSA9IHN0b3BXb3JkXG4gICAgcmV0dXJuIG1lbW9cbiAgfSwge30pXG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGlmICh0b2tlbiAmJiB3b3Jkc1t0b2tlbi50b1N0cmluZygpXSAhPT0gdG9rZW4udG9TdHJpbmcoKSkgcmV0dXJuIHRva2VuXG4gIH1cbn1cblxuLyoqXG4gKiBsdW5yLnN0b3BXb3JkRmlsdGVyIGlzIGFuIEVuZ2xpc2ggbGFuZ3VhZ2Ugc3RvcCB3b3JkIGxpc3QgZmlsdGVyLCBhbnkgd29yZHNcbiAqIGNvbnRhaW5lZCBpbiB0aGUgbGlzdCB3aWxsIG5vdCBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgZmlsdGVyLlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiB0aGUgUGlwZWxpbmUuIElmIHRoZSB0b2tlbiBkb2VzIG5vdCBwYXNzIHRoZVxuICogZmlsdGVyIHRoZW4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAaW1wbGVtZW50cyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHBhcmFtcyB7bHVuci5Ub2tlbn0gdG9rZW4gLSBBIHRva2VuIHRvIGNoZWNrIGZvciBiZWluZyBhIHN0b3Agd29yZC5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSB7QGxpbmsgbHVuci5QaXBlbGluZX1cbiAqL1xubHVuci5zdG9wV29yZEZpbHRlciA9IGx1bnIuZ2VuZXJhdGVTdG9wV29yZEZpbHRlcihbXG4gICdhJyxcbiAgJ2FibGUnLFxuICAnYWJvdXQnLFxuICAnYWNyb3NzJyxcbiAgJ2FmdGVyJyxcbiAgJ2FsbCcsXG4gICdhbG1vc3QnLFxuICAnYWxzbycsXG4gICdhbScsXG4gICdhbW9uZycsXG4gICdhbicsXG4gICdhbmQnLFxuICAnYW55JyxcbiAgJ2FyZScsXG4gICdhcycsXG4gICdhdCcsXG4gICdiZScsXG4gICdiZWNhdXNlJyxcbiAgJ2JlZW4nLFxuICAnYnV0JyxcbiAgJ2J5JyxcbiAgJ2NhbicsXG4gICdjYW5ub3QnLFxuICAnY291bGQnLFxuICAnZGVhcicsXG4gICdkaWQnLFxuICAnZG8nLFxuICAnZG9lcycsXG4gICdlaXRoZXInLFxuICAnZWxzZScsXG4gICdldmVyJyxcbiAgJ2V2ZXJ5JyxcbiAgJ2ZvcicsXG4gICdmcm9tJyxcbiAgJ2dldCcsXG4gICdnb3QnLFxuICAnaGFkJyxcbiAgJ2hhcycsXG4gICdoYXZlJyxcbiAgJ2hlJyxcbiAgJ2hlcicsXG4gICdoZXJzJyxcbiAgJ2hpbScsXG4gICdoaXMnLFxuICAnaG93JyxcbiAgJ2hvd2V2ZXInLFxuICAnaScsXG4gICdpZicsXG4gICdpbicsXG4gICdpbnRvJyxcbiAgJ2lzJyxcbiAgJ2l0JyxcbiAgJ2l0cycsXG4gICdqdXN0JyxcbiAgJ2xlYXN0JyxcbiAgJ2xldCcsXG4gICdsaWtlJyxcbiAgJ2xpa2VseScsXG4gICdtYXknLFxuICAnbWUnLFxuICAnbWlnaHQnLFxuICAnbW9zdCcsXG4gICdtdXN0JyxcbiAgJ215JyxcbiAgJ25laXRoZXInLFxuICAnbm8nLFxuICAnbm9yJyxcbiAgJ25vdCcsXG4gICdvZicsXG4gICdvZmYnLFxuICAnb2Z0ZW4nLFxuICAnb24nLFxuICAnb25seScsXG4gICdvcicsXG4gICdvdGhlcicsXG4gICdvdXInLFxuICAnb3duJyxcbiAgJ3JhdGhlcicsXG4gICdzYWlkJyxcbiAgJ3NheScsXG4gICdzYXlzJyxcbiAgJ3NoZScsXG4gICdzaG91bGQnLFxuICAnc2luY2UnLFxuICAnc28nLFxuICAnc29tZScsXG4gICd0aGFuJyxcbiAgJ3RoYXQnLFxuICAndGhlJyxcbiAgJ3RoZWlyJyxcbiAgJ3RoZW0nLFxuICAndGhlbicsXG4gICd0aGVyZScsXG4gICd0aGVzZScsXG4gICd0aGV5JyxcbiAgJ3RoaXMnLFxuICAndGlzJyxcbiAgJ3RvJyxcbiAgJ3RvbycsXG4gICd0d2FzJyxcbiAgJ3VzJyxcbiAgJ3dhbnRzJyxcbiAgJ3dhcycsXG4gICd3ZScsXG4gICd3ZXJlJyxcbiAgJ3doYXQnLFxuICAnd2hlbicsXG4gICd3aGVyZScsXG4gICd3aGljaCcsXG4gICd3aGlsZScsXG4gICd3aG8nLFxuICAnd2hvbScsXG4gICd3aHknLFxuICAnd2lsbCcsXG4gICd3aXRoJyxcbiAgJ3dvdWxkJyxcbiAgJ3lldCcsXG4gICd5b3UnLFxuICAneW91cidcbl0pXG5cbmx1bnIuUGlwZWxpbmUucmVnaXN0ZXJGdW5jdGlvbihsdW5yLnN0b3BXb3JkRmlsdGVyLCAnc3RvcFdvcmRGaWx0ZXInKVxuLyohXG4gKiBsdW5yLnRyaW1tZXJcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIudHJpbW1lciBpcyBhIHBpcGVsaW5lIGZ1bmN0aW9uIGZvciB0cmltbWluZyBub24gd29yZFxuICogY2hhcmFjdGVycyBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiB0b2tlbnMgYmVmb3JlIHRoZXlcbiAqIGVudGVyIHRoZSBpbmRleC5cbiAqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIG1heSBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbiBsYXRpblxuICogY2hhcmFjdGVycyBhbmQgc2hvdWxkIGVpdGhlciBiZSByZW1vdmVkIG9yIGFkYXB0ZWQgZm9yIHVzZVxuICogd2l0aCBsYW5ndWFnZXMgd2l0aCBub24tbGF0aW4gY2hhcmFjdGVycy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAaW1wbGVtZW50cyB7bHVuci5QaXBlbGluZUZ1bmN0aW9ufVxuICogQHBhcmFtIHtsdW5yLlRva2VufSB0b2tlbiBUaGUgdG9rZW4gdG8gcGFzcyB0aHJvdWdoIHRoZSBmaWx0ZXJcbiAqIEByZXR1cm5zIHtsdW5yLlRva2VufVxuICogQHNlZSBsdW5yLlBpcGVsaW5lXG4gKi9cbmx1bnIudHJpbW1lciA9IGZ1bmN0aW9uICh0b2tlbikge1xuICByZXR1cm4gdG9rZW4udXBkYXRlKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHMucmVwbGFjZSgvXlxcVysvLCAnJykucmVwbGFjZSgvXFxXKyQvLCAnJylcbiAgfSlcbn1cblxubHVuci5QaXBlbGluZS5yZWdpc3RlckZ1bmN0aW9uKGx1bnIudHJpbW1lciwgJ3RyaW1tZXInKVxuLyohXG4gKiBsdW5yLlRva2VuU2V0XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBIHRva2VuIHNldCBpcyB1c2VkIHRvIHN0b3JlIHRoZSB1bmlxdWUgbGlzdCBvZiBhbGwgdG9rZW5zXG4gKiB3aXRoaW4gYW4gaW5kZXguIFRva2VuIHNldHMgYXJlIGFsc28gdXNlZCB0byByZXByZXNlbnQgYW5cbiAqIGluY29taW5nIHF1ZXJ5IHRvIHRoZSBpbmRleCwgdGhpcyBxdWVyeSB0b2tlbiBzZXQgYW5kIGluZGV4XG4gKiB0b2tlbiBzZXQgYXJlIHRoZW4gaW50ZXJzZWN0ZWQgdG8gZmluZCB3aGljaCB0b2tlbnMgdG8gbG9va1xuICogdXAgaW4gdGhlIGludmVydGVkIGluZGV4LlxuICpcbiAqIEEgdG9rZW4gc2V0IGNhbiBob2xkIG11bHRpcGxlIHRva2VucywgYXMgaW4gdGhlIGNhc2Ugb2YgdGhlXG4gKiBpbmRleCB0b2tlbiBzZXQsIG9yIGl0IGNhbiBob2xkIGEgc2luZ2xlIHRva2VuIGFzIGluIHRoZVxuICogY2FzZSBvZiBhIHNpbXBsZSBxdWVyeSB0b2tlbiBzZXQuXG4gKlxuICogQWRkaXRpb25hbGx5IHRva2VuIHNldHMgYXJlIHVzZWQgdG8gcGVyZm9ybSB3aWxkY2FyZCBtYXRjaGluZy5cbiAqIExlYWRpbmcsIGNvbnRhaW5lZCBhbmQgdHJhaWxpbmcgd2lsZGNhcmRzIGFyZSBzdXBwb3J0ZWQsIGFuZFxuICogZnJvbSB0aGlzIGVkaXQgZGlzdGFuY2UgbWF0Y2hpbmcgY2FuIGFsc28gYmUgcHJvdmlkZWQuXG4gKlxuICogVG9rZW4gc2V0cyBhcmUgaW1wbGVtZW50ZWQgYXMgYSBtaW5pbWFsIGZpbml0ZSBzdGF0ZSBhdXRvbWF0YSxcbiAqIHdoZXJlIGJvdGggY29tbW9uIHByZWZpeGVzIGFuZCBzdWZmaXhlcyBhcmUgc2hhcmVkIGJldHdlZW4gdG9rZW5zLlxuICogVGhpcyBoZWxwcyB0byByZWR1Y2UgdGhlIHNwYWNlIHVzZWQgZm9yIHN0b3JpbmcgdGhlIHRva2VuIHNldC5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xubHVuci5Ub2tlblNldCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5maW5hbCA9IGZhbHNlXG4gIHRoaXMuZWRnZXMgPSB7fVxuICB0aGlzLmlkID0gbHVuci5Ub2tlblNldC5fbmV4dElkXG4gIGx1bnIuVG9rZW5TZXQuX25leHRJZCArPSAxXG59XG5cbi8qKlxuICogS2VlcHMgdHJhY2sgb2YgdGhlIG5leHQsIGF1dG8gaW5jcmVtZW50LCBpZGVudGlmaWVyIHRvIGFzc2lnblxuICogdG8gYSBuZXcgdG9rZW5TZXQuXG4gKlxuICogVG9rZW5TZXRzIHJlcXVpcmUgYSB1bmlxdWUgaWRlbnRpZmllciB0byBiZSBjb3JyZWN0bHkgbWluaW1pc2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuVG9rZW5TZXQuX25leHRJZCA9IDFcblxuLyoqXG4gKiBDcmVhdGVzIGEgVG9rZW5TZXQgaW5zdGFuY2UgZnJvbSB0aGUgZ2l2ZW4gc29ydGVkIGFycmF5IG9mIHdvcmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nW119IGFyciAtIEEgc29ydGVkIGFycmF5IG9mIHN0cmluZ3MgdG8gY3JlYXRlIHRoZSBzZXQgZnJvbS5cbiAqIEByZXR1cm5zIHtsdW5yLlRva2VuU2V0fVxuICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBpbnB1dCBhcnJheSBpcyBub3Qgc29ydGVkLlxuICovXG5sdW5yLlRva2VuU2V0LmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyXG5cbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGJ1aWxkZXIuaW5zZXJ0KGFycltpXSlcbiAgfVxuXG4gIGJ1aWxkZXIuZmluaXNoKClcbiAgcmV0dXJuIGJ1aWxkZXIucm9vdFxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgZnJvbSBhIHF1ZXJ5IGNsYXVzZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IGNsYXVzZSAtIEEgc2luZ2xlIGNsYXVzZSBmcm9tIGx1bnIuUXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhdXNlLnRlcm0gLSBUaGUgcXVlcnkgY2xhdXNlIHRlcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gW2NsYXVzZS5lZGl0RGlzdGFuY2VdIC0gVGhlIG9wdGlvbmFsIGVkaXQgZGlzdGFuY2UgZm9yIHRoZSB0ZXJtLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbUNsYXVzZSA9IGZ1bmN0aW9uIChjbGF1c2UpIHtcbiAgaWYgKCdlZGl0RGlzdGFuY2UnIGluIGNsYXVzZSkge1xuICAgIHJldHVybiBsdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyhjbGF1c2UudGVybSwgY2xhdXNlLmVkaXREaXN0YW5jZSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbHVuci5Ub2tlblNldC5mcm9tU3RyaW5nKGNsYXVzZS50ZXJtKVxuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRva2VuIHNldCByZXByZXNlbnRpbmcgYSBzaW5nbGUgc3RyaW5nIHdpdGggYSBzcGVjaWZpZWRcbiAqIGVkaXQgZGlzdGFuY2UuXG4gKlxuICogSW5zZXJ0aW9ucywgZGVsZXRpb25zLCBzdWJzdGl0dXRpb25zIGFuZCB0cmFuc3Bvc2l0aW9ucyBhcmUgZWFjaFxuICogdHJlYXRlZCBhcyBhbiBlZGl0IGRpc3RhbmNlIG9mIDEuXG4gKlxuICogSW5jcmVhc2luZyB0aGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHdpbGwgaGF2ZSBhIGRyYW1hdGljIGltcGFjdFxuICogb24gdGhlIHBlcmZvcm1hbmNlIG9mIGJvdGggY3JlYXRpbmcgYW5kIGludGVyc2VjdGluZyB0aGVzZSBUb2tlblNldHMuXG4gKiBJdCBpcyBhZHZpc2VkIHRvIGtlZXAgdGhlIGVkaXQgZGlzdGFuY2UgbGVzcyB0aGFuIDMuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gY3JlYXRlIHRoZSB0b2tlbiBzZXQgZnJvbS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlZGl0RGlzdGFuY2UgLSBUaGUgYWxsb3dlZCBlZGl0IGRpc3RhbmNlIHRvIG1hdGNoLlxuICogQHJldHVybnMge2x1bnIuVmVjdG9yfVxuICovXG5sdW5yLlRva2VuU2V0LmZyb21GdXp6eVN0cmluZyA9IGZ1bmN0aW9uIChzdHIsIGVkaXREaXN0YW5jZSkge1xuICB2YXIgcm9vdCA9IG5ldyBsdW5yLlRva2VuU2V0XG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBub2RlOiByb290LFxuICAgIGVkaXRzUmVtYWluaW5nOiBlZGl0RGlzdGFuY2UsXG4gICAgc3RyOiBzdHJcbiAgfV1cblxuICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgdmFyIGZyYW1lID0gc3RhY2sucG9wKClcblxuICAgIC8vIG5vIGVkaXRcbiAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBjaGFyID0gZnJhbWUuc3RyLmNoYXJBdCgwKSxcbiAgICAgICAgICBub0VkaXROb2RlXG5cbiAgICAgIGlmIChjaGFyIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgbm9FZGl0Tm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhcl1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vRWRpdE5vZGUgPSBuZXcgbHVuci5Ub2tlblNldFxuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdID0gbm9FZGl0Tm9kZVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIG5vRWRpdE5vZGUuZmluYWwgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBub0VkaXROb2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyxcbiAgICAgICAgICBzdHI6IGZyYW1lLnN0ci5zbGljZSgxKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRlbGV0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSBkZWxldGlvbiBpZiB3ZSBoYXZlIGVub3VnaCBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgaWYgdGhlcmUgYXJlIGNoYXJhY3RlcnMgbGVmdCB0byBkZWxldGUgaW4gdGhlIHN0cmluZ1xuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBjaGFyID0gZnJhbWUuc3RyLmNoYXJBdCgxKSxcbiAgICAgICAgICBkZWxldGlvbk5vZGVcblxuICAgICAgaWYgKGNoYXIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICBkZWxldGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldFxuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW2NoYXJdID0gZGVsZXRpb25Ob2RlXG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgZGVsZXRpb25Ob2RlLmZpbmFsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogZGVsZXRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHIuc2xpY2UoMilcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWxldGlvblxuICAgIC8vIGp1c3QgcmVtb3ZpbmcgdGhlIGxhc3QgY2hhcmFjdGVyIGZyb20gdGhlIHN0clxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA9PSAxKSB7XG4gICAgICBmcmFtZS5ub2RlLmZpbmFsID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIHN1YnN0aXR1dGlvblxuICAgIC8vIGNhbiBvbmx5IGRvIGEgc3Vic3RpdHV0aW9uIGlmIHdlIGhhdmUgZW5vdWdoIGVkaXRzIHJlbWFpbmluZ1xuICAgIC8vIGFuZCBpZiB0aGVyZSBhcmUgY2hhcmFjdGVycyBsZWZ0IHRvIHN1YnN0aXR1dGVcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwICYmIGZyYW1lLnN0ci5sZW5ndGggPj0gMSkge1xuICAgICAgaWYgKFwiKlwiIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgdmFyIHN1YnN0aXR1dGlvbk5vZGUgPSBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHN1YnN0aXR1dGlvbk5vZGUgPSBuZXcgbHVuci5Ub2tlblNldFxuICAgICAgICBmcmFtZS5ub2RlLmVkZ2VzW1wiKlwiXSA9IHN1YnN0aXR1dGlvbk5vZGVcbiAgICAgIH1cblxuICAgICAgaWYgKGZyYW1lLnN0ci5sZW5ndGggPT0gMSkge1xuICAgICAgICBzdWJzdGl0dXRpb25Ob2RlLmZpbmFsID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgbm9kZTogc3Vic3RpdHV0aW9uTm9kZSxcbiAgICAgICAgICBlZGl0c1JlbWFpbmluZzogZnJhbWUuZWRpdHNSZW1haW5pbmcgLSAxLFxuICAgICAgICAgIHN0cjogZnJhbWUuc3RyLnNsaWNlKDEpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW5zZXJ0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gaW5zZXJ0aW9uIGlmIHRoZXJlIGFyZSBlZGl0cyByZW1haW5pbmdcbiAgICBpZiAoZnJhbWUuZWRpdHNSZW1haW5pbmcgPiAwKSB7XG4gICAgICBpZiAoXCIqXCIgaW4gZnJhbWUubm9kZS5lZGdlcykge1xuICAgICAgICB2YXIgaW5zZXJ0aW9uTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaW5zZXJ0aW9uTm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0XG4gICAgICAgIGZyYW1lLm5vZGUuZWRnZXNbXCIqXCJdID0gaW5zZXJ0aW9uTm9kZVxuICAgICAgfVxuXG4gICAgICBpZiAoZnJhbWUuc3RyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGluc2VydGlvbk5vZGUuZmluYWwgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICBub2RlOiBpbnNlcnRpb25Ob2RlLFxuICAgICAgICAgIGVkaXRzUmVtYWluaW5nOiBmcmFtZS5lZGl0c1JlbWFpbmluZyAtIDEsXG4gICAgICAgICAgc3RyOiBmcmFtZS5zdHJcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0cmFuc3Bvc2l0aW9uXG4gICAgLy8gY2FuIG9ubHkgZG8gYSB0cmFuc3Bvc2l0aW9uIGlmIHRoZXJlIGFyZSBlZGl0cyByZW1haW5pbmdcbiAgICAvLyBhbmQgdGhlcmUgYXJlIGVub3VnaCBjaGFyYWN0ZXJzIHRvIHRyYW5zcG9zZVxuICAgIGlmIChmcmFtZS5lZGl0c1JlbWFpbmluZyA+IDAgJiYgZnJhbWUuc3RyLmxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBjaGFyQSA9IGZyYW1lLnN0ci5jaGFyQXQoMCksXG4gICAgICAgICAgY2hhckIgPSBmcmFtZS5zdHIuY2hhckF0KDEpLFxuICAgICAgICAgIHRyYW5zcG9zZU5vZGVcblxuICAgICAgaWYgKGNoYXJCIGluIGZyYW1lLm5vZGUuZWRnZXMpIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbY2hhckJdXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc3Bvc2VOb2RlID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgZnJhbWUubm9kZS5lZGdlc1tjaGFyQl0gPSB0cmFuc3Bvc2VOb2RlXG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFtZS5zdHIubGVuZ3RoID09IDEpIHtcbiAgICAgICAgdHJhbnNwb3NlTm9kZS5maW5hbCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goe1xuICAgICAgICAgIG5vZGU6IHRyYW5zcG9zZU5vZGUsXG4gICAgICAgICAgZWRpdHNSZW1haW5pbmc6IGZyYW1lLmVkaXRzUmVtYWluaW5nIC0gMSxcbiAgICAgICAgICBzdHI6IGNoYXJBICsgZnJhbWUuc3RyLnNsaWNlKDIpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJvb3Rcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgVG9rZW5TZXQgZnJvbSBhIHN0cmluZy5cbiAqXG4gKiBUaGUgc3RyaW5nIG1heSBjb250YWluIG9uZSBvciBtb3JlIHdpbGRjYXJkIGNoYXJhY3RlcnMgKCopXG4gKiB0aGF0IHdpbGwgYWxsb3cgd2lsZGNhcmQgbWF0Y2hpbmcgd2hlbiBpbnRlcnNlY3Rpbmcgd2l0aFxuICogYW5vdGhlciBUb2tlblNldC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBjcmVhdGUgYSBUb2tlblNldCBmcm9tLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIG5vZGUgPSBuZXcgbHVuci5Ub2tlblNldCxcbiAgICAgIHJvb3QgPSBub2RlLFxuICAgICAgd2lsZGNhcmRGb3VuZCA9IGZhbHNlXG5cbiAgLypcbiAgICogSXRlcmF0ZXMgdGhyb3VnaCBhbGwgY2hhcmFjdGVycyB3aXRoaW4gdGhlIHBhc3NlZCBzdHJpbmdcbiAgICogYXBwZW5kaW5nIGEgbm9kZSBmb3IgZWFjaCBjaGFyYWN0ZXIuXG4gICAqXG4gICAqIEFzIHNvb24gYXMgYSB3aWxkY2FyZCBjaGFyYWN0ZXIgaXMgZm91bmQgdGhlbiBhIHNlbGZcbiAgICogcmVmZXJlbmNpbmcgZWRnZSBpcyBpbnRyb2R1Y2VkIHRvIGNvbnRpbnVhbGx5IG1hdGNoXG4gICAqIGFueSBudW1iZXIgb2YgYW55IGNoYXJhY3RlcnMuXG4gICAqL1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gc3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgdmFyIGNoYXIgPSBzdHJbaV0sXG4gICAgICAgIGZpbmFsID0gKGkgPT0gbGVuIC0gMSlcblxuICAgIGlmIChjaGFyID09IFwiKlwiKSB7XG4gICAgICB3aWxkY2FyZEZvdW5kID0gdHJ1ZVxuICAgICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5vZGVcbiAgICAgIG5vZGUuZmluYWwgPSBmaW5hbFxuXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgIG5leHQuZmluYWwgPSBmaW5hbFxuXG4gICAgICBub2RlLmVkZ2VzW2NoYXJdID0gbmV4dFxuICAgICAgbm9kZSA9IG5leHRcblxuICAgICAgLy8gVE9ETzogaXMgdGhpcyBuZWVkZWQgYW55bW9yZT9cbiAgICAgIGlmICh3aWxkY2FyZEZvdW5kKSB7XG4gICAgICAgIG5vZGUuZWRnZXNbXCIqXCJdID0gcm9vdFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByb290XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBUb2tlblNldCBpbnRvIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmdbXX1cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHdvcmRzID0gW11cblxuICB2YXIgc3RhY2sgPSBbe1xuICAgIHByZWZpeDogXCJcIixcbiAgICBub2RlOiB0aGlzXG4gIH1dXG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIHZhciBmcmFtZSA9IHN0YWNrLnBvcCgpLFxuICAgICAgICBlZGdlcyA9IE9iamVjdC5rZXlzKGZyYW1lLm5vZGUuZWRnZXMpLFxuICAgICAgICBsZW4gPSBlZGdlcy5sZW5ndGhcblxuICAgIGlmIChmcmFtZS5ub2RlLmZpbmFsKSB7XG4gICAgICAvKiBJbiBTYWZhcmksIGF0IHRoaXMgcG9pbnQgdGhlIHByZWZpeCBpcyBzb21ldGltZXMgY29ycnVwdGVkLCBzZWU6XG4gICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vb2xpdmVybm4vbHVuci5qcy9pc3N1ZXMvMjc5IENhbGxpbmcgYW55XG4gICAgICAgKiBTdHJpbmcucHJvdG90eXBlIG1ldGhvZCBmb3JjZXMgU2FmYXJpIHRvIFwiY2FzdFwiIHRoaXMgc3RyaW5nIHRvIHdoYXRcbiAgICAgICAqIGl0J3Mgc3VwcG9zZWQgdG8gYmUsIGZpeGluZyB0aGUgYnVnLiAqL1xuICAgICAgZnJhbWUucHJlZml4LmNoYXJBdCgwKVxuICAgICAgd29yZHMucHVzaChmcmFtZS5wcmVmaXgpXG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGVkZ2UgPSBlZGdlc1tpXVxuXG4gICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgcHJlZml4OiBmcmFtZS5wcmVmaXguY29uY2F0KGVkZ2UpLFxuICAgICAgICBub2RlOiBmcmFtZS5ub2RlLmVkZ2VzW2VkZ2VdXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3b3Jkc1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIFRva2VuU2V0LlxuICpcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYWxsb3cgVG9rZW5TZXRzIHRvIGJlIHVzZWQgYXMga2V5c1xuICogaW4gb2JqZWN0cywgbGFyZ2VseSB0byBhaWQgdGhlIGNvbnN0cnVjdGlvbiBhbmQgbWluaW1pc2F0aW9uXG4gKiBvZiBhIFRva2VuU2V0LiBBcyBzdWNoIGl0IGlzIG5vdCBkZXNpZ25lZCB0byBiZSBhIGh1bWFuXG4gKiBmcmllbmRseSByZXByZXNlbnRhdGlvbiBvZiB0aGUgVG9rZW5TZXQuXG4gKlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xubHVuci5Ub2tlblNldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIE5PVEU6IFVzaW5nIE9iamVjdC5rZXlzIGhlcmUgYXMgdGhpcy5lZGdlcyBpcyB2ZXJ5IGxpa2VseVxuICAvLyB0byBlbnRlciAnaGFzaC1tb2RlJyB3aXRoIG1hbnkga2V5cyBiZWluZyBhZGRlZFxuICAvL1xuICAvLyBhdm9pZGluZyBhIGZvci1pbiBsb29wIGhlcmUgYXMgaXQgbGVhZHMgdG8gdGhlIGZ1bmN0aW9uXG4gIC8vIGJlaW5nIGRlLW9wdGltaXNlZCAoYXQgbGVhc3QgaW4gVjgpLiBGcm9tIHNvbWUgc2ltcGxlXG4gIC8vIGJlbmNobWFya3MgdGhlIHBlcmZvcm1hbmNlIGlzIGNvbXBhcmFibGUsIGJ1dCBhbGxvd2luZ1xuICAvLyBWOCB0byBvcHRpbWl6ZSBtYXkgbWVhbiBlYXN5IHBlcmZvcm1hbmNlIHdpbnMgaW4gdGhlIGZ1dHVyZS5cblxuICBpZiAodGhpcy5fc3RyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0clxuICB9XG5cbiAgdmFyIHN0ciA9IHRoaXMuZmluYWwgPyAnMScgOiAnMCcsXG4gICAgICBsYWJlbHMgPSBPYmplY3Qua2V5cyh0aGlzLmVkZ2VzKS5zb3J0KCksXG4gICAgICBsZW4gPSBsYWJlbHMubGVuZ3RoXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHZhciBsYWJlbCA9IGxhYmVsc1tpXSxcbiAgICAgICAgbm9kZSA9IHRoaXMuZWRnZXNbbGFiZWxdXG5cbiAgICBzdHIgPSBzdHIgKyBsYWJlbCArIG5vZGUuaWRcbiAgfVxuXG4gIHJldHVybiBzdHJcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IFRva2VuU2V0IHRoYXQgaXMgdGhlIGludGVyc2VjdGlvbiBvZlxuICogdGhpcyBUb2tlblNldCBhbmQgdGhlIHBhc3NlZCBUb2tlblNldC5cbiAqXG4gKiBUaGlzIGludGVyc2VjdGlvbiB3aWxsIHRha2UgaW50byBhY2NvdW50IGFueSB3aWxkY2FyZHNcbiAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIFRva2VuU2V0LlxuICpcbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYiAtIEFuIG90aGVyIFRva2VuU2V0IHRvIGludGVyc2VjdCB3aXRoLlxuICogQHJldHVybnMge2x1bnIuVG9rZW5TZXR9XG4gKi9cbmx1bnIuVG9rZW5TZXQucHJvdG90eXBlLmludGVyc2VjdCA9IGZ1bmN0aW9uIChiKSB7XG4gIHZhciBvdXRwdXQgPSBuZXcgbHVuci5Ub2tlblNldCxcbiAgICAgIGZyYW1lID0gdW5kZWZpbmVkXG5cbiAgdmFyIHN0YWNrID0gW3tcbiAgICBxTm9kZTogYixcbiAgICBvdXRwdXQ6IG91dHB1dCxcbiAgICBub2RlOiB0aGlzXG4gIH1dXG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGZyYW1lID0gc3RhY2sucG9wKClcblxuICAgIC8vIE5PVEU6IEFzIHdpdGggdGhlICN0b1N0cmluZyBtZXRob2QsIHdlIGFyZSB1c2luZ1xuICAgIC8vIE9iamVjdC5rZXlzIGFuZCBhIGZvciBsb29wIGluc3RlYWQgb2YgYSBmb3ItaW4gbG9vcFxuICAgIC8vIGFzIGJvdGggb2YgdGhlc2Ugb2JqZWN0cyBlbnRlciAnaGFzaCcgbW9kZSwgY2F1c2luZ1xuICAgIC8vIHRoZSBmdW5jdGlvbiB0byBiZSBkZS1vcHRpbWlzZWQgaW4gVjhcbiAgICB2YXIgcUVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUucU5vZGUuZWRnZXMpLFxuICAgICAgICBxTGVuID0gcUVkZ2VzLmxlbmd0aCxcbiAgICAgICAgbkVkZ2VzID0gT2JqZWN0LmtleXMoZnJhbWUubm9kZS5lZGdlcyksXG4gICAgICAgIG5MZW4gPSBuRWRnZXMubGVuZ3RoXG5cbiAgICBmb3IgKHZhciBxID0gMDsgcSA8IHFMZW47IHErKykge1xuICAgICAgdmFyIHFFZGdlID0gcUVkZ2VzW3FdXG5cbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbkxlbjsgbisrKSB7XG4gICAgICAgIHZhciBuRWRnZSA9IG5FZGdlc1tuXVxuXG4gICAgICAgIGlmIChuRWRnZSA9PSBxRWRnZSB8fCBxRWRnZSA9PSAnKicpIHtcbiAgICAgICAgICB2YXIgbm9kZSA9IGZyYW1lLm5vZGUuZWRnZXNbbkVkZ2VdLFxuICAgICAgICAgICAgICBxTm9kZSA9IGZyYW1lLnFOb2RlLmVkZ2VzW3FFZGdlXSxcbiAgICAgICAgICAgICAgZmluYWwgPSBub2RlLmZpbmFsICYmIHFOb2RlLmZpbmFsLFxuICAgICAgICAgICAgICBuZXh0ID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICBpZiAobkVkZ2UgaW4gZnJhbWUub3V0cHV0LmVkZ2VzKSB7XG4gICAgICAgICAgICAvLyBhbiBlZGdlIGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGNoYXJhY3RlclxuICAgICAgICAgICAgLy8gbm8gbmVlZCB0byBjcmVhdGUgYSBuZXcgbm9kZSwganVzdCBzZXQgdGhlIGZpbmFsaXR5XG4gICAgICAgICAgICAvLyBiaXQgdW5sZXNzIHRoaXMgbm9kZSBpcyBhbHJlYWR5IGZpbmFsXG4gICAgICAgICAgICBuZXh0ID0gZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXVxuICAgICAgICAgICAgbmV4dC5maW5hbCA9IG5leHQuZmluYWwgfHwgZmluYWxcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBubyBlZGdlIGV4aXN0cyB5ZXQsIG11c3QgY3JlYXRlIG9uZVxuICAgICAgICAgICAgLy8gc2V0IHRoZSBmaW5hbGl0eSBiaXQgYW5kIGluc2VydCBpdFxuICAgICAgICAgICAgLy8gaW50byB0aGUgb3V0cHV0XG4gICAgICAgICAgICBuZXh0ID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgICAgICAgICAgIG5leHQuZmluYWwgPSBmaW5hbFxuICAgICAgICAgICAgZnJhbWUub3V0cHV0LmVkZ2VzW25FZGdlXSA9IG5leHRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgIHFOb2RlOiBxTm9kZSxcbiAgICAgICAgICAgIG91dHB1dDogbmV4dCxcbiAgICAgICAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dFxufVxubHVuci5Ub2tlblNldC5CdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnByZXZpb3VzV29yZCA9IFwiXCJcbiAgdGhpcy5yb290ID0gbmV3IGx1bnIuVG9rZW5TZXRcbiAgdGhpcy51bmNoZWNrZWROb2RlcyA9IFtdXG4gIHRoaXMubWluaW1pemVkTm9kZXMgPSB7fVxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uICh3b3JkKSB7XG4gIHZhciBub2RlLFxuICAgICAgY29tbW9uUHJlZml4ID0gMFxuXG4gIGlmICh3b3JkIDwgdGhpcy5wcmV2aW91c1dvcmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IgKFwiT3V0IG9mIG9yZGVyIHdvcmQgaW5zZXJ0aW9uXCIpXG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHdvcmQubGVuZ3RoICYmIGkgPCB0aGlzLnByZXZpb3VzV29yZC5sZW5ndGg7IGkrKykge1xuICAgIGlmICh3b3JkW2ldICE9IHRoaXMucHJldmlvdXNXb3JkW2ldKSBicmVha1xuICAgIGNvbW1vblByZWZpeCsrXG4gIH1cblxuICB0aGlzLm1pbmltaXplKGNvbW1vblByZWZpeClcblxuICBpZiAodGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggPT0gMCkge1xuICAgIG5vZGUgPSB0aGlzLnJvb3RcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gdGhpcy51bmNoZWNrZWROb2Rlc1t0aGlzLnVuY2hlY2tlZE5vZGVzLmxlbmd0aCAtIDFdLmNoaWxkXG4gIH1cblxuICBmb3IgKHZhciBpID0gY29tbW9uUHJlZml4OyBpIDwgd29yZC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0Tm9kZSA9IG5ldyBsdW5yLlRva2VuU2V0LFxuICAgICAgICBjaGFyID0gd29yZFtpXVxuXG4gICAgbm9kZS5lZGdlc1tjaGFyXSA9IG5leHROb2RlXG5cbiAgICB0aGlzLnVuY2hlY2tlZE5vZGVzLnB1c2goe1xuICAgICAgcGFyZW50OiBub2RlLFxuICAgICAgY2hhcjogY2hhcixcbiAgICAgIGNoaWxkOiBuZXh0Tm9kZVxuICAgIH0pXG5cbiAgICBub2RlID0gbmV4dE5vZGVcbiAgfVxuXG4gIG5vZGUuZmluYWwgPSB0cnVlXG4gIHRoaXMucHJldmlvdXNXb3JkID0gd29yZFxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5taW5pbWl6ZSgwKVxufVxuXG5sdW5yLlRva2VuU2V0LkJ1aWxkZXIucHJvdG90eXBlLm1pbmltaXplID0gZnVuY3Rpb24gKGRvd25Ubykge1xuICBmb3IgKHZhciBpID0gdGhpcy51bmNoZWNrZWROb2Rlcy5sZW5ndGggLSAxOyBpID49IGRvd25UbzsgaS0tKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLnVuY2hlY2tlZE5vZGVzW2ldLFxuICAgICAgICBjaGlsZEtleSA9IG5vZGUuY2hpbGQudG9TdHJpbmcoKVxuXG4gICAgaWYgKGNoaWxkS2V5IGluIHRoaXMubWluaW1pemVkTm9kZXMpIHtcbiAgICAgIG5vZGUucGFyZW50LmVkZ2VzW25vZGUuY2hhcl0gPSB0aGlzLm1pbmltaXplZE5vZGVzW2NoaWxkS2V5XVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYWNoZSB0aGUga2V5IGZvciB0aGlzIG5vZGUgc2luY2VcbiAgICAgIC8vIHdlIGtub3cgaXQgY2FuJ3QgY2hhbmdlIGFueW1vcmVcbiAgICAgIG5vZGUuY2hpbGQuX3N0ciA9IGNoaWxkS2V5XG5cbiAgICAgIHRoaXMubWluaW1pemVkTm9kZXNbY2hpbGRLZXldID0gbm9kZS5jaGlsZFxuICAgIH1cblxuICAgIHRoaXMudW5jaGVja2VkTm9kZXMucG9wKClcbiAgfVxufVxuLyohXG4gKiBsdW5yLkluZGV4XG4gKiBDb3B5cmlnaHQgKEMpIDIwMTggT2xpdmVyIE5pZ2h0aW5nYWxlXG4gKi9cblxuLyoqXG4gKiBBbiBpbmRleCBjb250YWlucyB0aGUgYnVpbHQgaW5kZXggb2YgYWxsIGRvY3VtZW50cyBhbmQgcHJvdmlkZXMgYSBxdWVyeSBpbnRlcmZhY2VcbiAqIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBVc3VhbGx5IGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHdpbGwgbm90IGJlIGNyZWF0ZWQgdXNpbmcgdGhpcyBjb25zdHJ1Y3RvciwgaW5zdGVhZFxuICogbHVuci5CdWlsZGVyIHNob3VsZCBiZSB1c2VkIHRvIGNvbnN0cnVjdCBuZXcgaW5kZXhlcywgb3IgbHVuci5JbmRleC5sb2FkIHNob3VsZCBiZVxuICogdXNlZCB0byBsb2FkIHByZXZpb3VzbHkgYnVpbHQgYW5kIHNlcmlhbGl6ZWQgaW5kZXhlcy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBhdHRycyAtIFRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBidWlsdCBzZWFyY2ggaW5kZXguXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cnMuaW52ZXJ0ZWRJbmRleCAtIEFuIGluZGV4IG9mIHRlcm0vZmllbGQgdG8gZG9jdW1lbnQgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBsdW5yLlZlY3Rvcj59IGF0dHJzLmZpZWxkVmVjdG9ycyAtIEZpZWxkIHZlY3RvcnNcbiAqIEBwYXJhbSB7bHVuci5Ub2tlblNldH0gYXR0cnMudG9rZW5TZXQgLSBBbiBzZXQgb2YgYWxsIGNvcnB1cyB0b2tlbnMuXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRycy5maWVsZHMgLSBUaGUgbmFtZXMgb2YgaW5kZXhlZCBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcGFyYW0ge2x1bnIuUGlwZWxpbmV9IGF0dHJzLnBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHRvIHVzZSBmb3Igc2VhcmNoIHRlcm1zLlxuICovXG5sdW5yLkluZGV4ID0gZnVuY3Rpb24gKGF0dHJzKSB7XG4gIHRoaXMuaW52ZXJ0ZWRJbmRleCA9IGF0dHJzLmludmVydGVkSW5kZXhcbiAgdGhpcy5maWVsZFZlY3RvcnMgPSBhdHRycy5maWVsZFZlY3RvcnNcbiAgdGhpcy50b2tlblNldCA9IGF0dHJzLnRva2VuU2V0XG4gIHRoaXMuZmllbGRzID0gYXR0cnMuZmllbGRzXG4gIHRoaXMucGlwZWxpbmUgPSBhdHRycy5waXBlbGluZVxufVxuXG4vKipcbiAqIEEgcmVzdWx0IGNvbnRhaW5zIGRldGFpbHMgb2YgYSBkb2N1bWVudCBtYXRjaGluZyBhIHNlYXJjaCBxdWVyeS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IGx1bnIuSW5kZXh+UmVzdWx0XG4gKiBAcHJvcGVydHkge3N0cmluZ30gcmVmIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdGhpcyByZXN1bHQgcmVwcmVzZW50cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzY29yZSAtIEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgaG93IHNpbWlsYXIgdGhpcyBkb2N1bWVudCBpcyB0byB0aGUgcXVlcnkuXG4gKiBAcHJvcGVydHkge2x1bnIuTWF0Y2hEYXRhfSBtYXRjaERhdGEgLSBDb250YWlucyBtZXRhZGF0YSBhYm91dCB0aGlzIG1hdGNoIGluY2x1ZGluZyB3aGljaCB0ZXJtKHMpIGNhdXNlZCB0aGUgbWF0Y2guXG4gKi9cblxuLyoqXG4gKiBBbHRob3VnaCBsdW5yIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGNyZWF0ZSBxdWVyaWVzIHVzaW5nIGx1bnIuUXVlcnksIGl0IGFsc28gcHJvdmlkZXMgYSBzaW1wbGVcbiAqIHF1ZXJ5IGxhbmd1YWdlIHdoaWNoIGl0c2VsZiBpcyBwYXJzZWQgaW50byBhbiBpbnN0YW5jZSBvZiBsdW5yLlF1ZXJ5LlxuICpcbiAqIEZvciBwcm9ncmFtbWF0aWNhbGx5IGJ1aWxkaW5nIHF1ZXJpZXMgaXQgaXMgYWR2aXNlZCB0byBkaXJlY3RseSB1c2UgbHVuci5RdWVyeSwgdGhlIHF1ZXJ5IGxhbmd1YWdlXG4gKiBpcyBiZXN0IHVzZWQgZm9yIGh1bWFuIGVudGVyZWQgdGV4dCByYXRoZXIgdGhhbiBwcm9ncmFtIGdlbmVyYXRlZCB0ZXh0LlxuICpcbiAqIEF0IGl0cyBzaW1wbGVzdCBxdWVyaWVzIGNhbiBqdXN0IGJlIGEgc2luZ2xlIHRlcm0sIGUuZy4gYGhlbGxvYCwgbXVsdGlwbGUgdGVybXMgYXJlIGFsc28gc3VwcG9ydGVkXG4gKiBhbmQgd2lsbCBiZSBjb21iaW5lZCB3aXRoIE9SLCBlLmcgYGhlbGxvIHdvcmxkYCB3aWxsIG1hdGNoIGRvY3VtZW50cyB0aGF0IGNvbnRhaW4gZWl0aGVyICdoZWxsbydcbiAqIG9yICd3b3JsZCcsIHRob3VnaCB0aG9zZSB0aGF0IGNvbnRhaW4gYm90aCB3aWxsIHJhbmsgaGlnaGVyIGluIHRoZSByZXN1bHRzLlxuICpcbiAqIFdpbGRjYXJkcyBjYW4gYmUgaW5jbHVkZWQgaW4gdGVybXMgdG8gbWF0Y2ggb25lIG9yIG1vcmUgdW5zcGVjaWZpZWQgY2hhcmFjdGVycywgdGhlc2Ugd2lsZGNhcmRzIGNhblxuICogYmUgaW5zZXJ0ZWQgYW55d2hlcmUgd2l0aGluIHRoZSB0ZXJtLCBhbmQgbW9yZSB0aGFuIG9uZSB3aWxkY2FyZCBjYW4gZXhpc3QgaW4gYSBzaW5nbGUgdGVybS4gQWRkaW5nXG4gKiB3aWxkY2FyZHMgd2lsbCBpbmNyZWFzZSB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHdpbGwgYmUgZm91bmQgYnV0IGNhbiBhbHNvIGhhdmUgYSBuZWdhdGl2ZVxuICogaW1wYWN0IG9uIHF1ZXJ5IHBlcmZvcm1hbmNlLCBlc3BlY2lhbGx5IHdpdGggd2lsZGNhcmRzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSB0ZXJtLlxuICpcbiAqIFRlcm1zIGNhbiBiZSByZXN0cmljdGVkIHRvIHNwZWNpZmljIGZpZWxkcywgZS5nLiBgdGl0bGU6aGVsbG9gLCBvbmx5IGRvY3VtZW50cyB3aXRoIHRoZSB0ZXJtXG4gKiBoZWxsbyBpbiB0aGUgdGl0bGUgZmllbGQgd2lsbCBtYXRjaCB0aGlzIHF1ZXJ5LiBVc2luZyBhIGZpZWxkIG5vdCBwcmVzZW50IGluIHRoZSBpbmRleCB3aWxsIGxlYWRcbiAqIHRvIGFuIGVycm9yIGJlaW5nIHRocm93bi5cbiAqXG4gKiBNb2RpZmllcnMgY2FuIGFsc28gYmUgYWRkZWQgdG8gdGVybXMsIGx1bnIgc3VwcG9ydHMgZWRpdCBkaXN0YW5jZSBhbmQgYm9vc3QgbW9kaWZpZXJzIG9uIHRlcm1zLiBBIHRlcm1cbiAqIGJvb3N0IHdpbGwgbWFrZSBkb2N1bWVudHMgbWF0Y2hpbmcgdGhhdCB0ZXJtIHNjb3JlIGhpZ2hlciwgZS5nLiBgZm9vXjVgLiBFZGl0IGRpc3RhbmNlIGlzIGFsc28gc3VwcG9ydGVkXG4gKiB0byBwcm92aWRlIGZ1enp5IG1hdGNoaW5nLCBlLmcuICdoZWxsb34yJyB3aWxsIG1hdGNoIGRvY3VtZW50cyB3aXRoIGhlbGxvIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyLlxuICogQXZvaWQgbGFyZ2UgdmFsdWVzIGZvciBlZGl0IGRpc3RhbmNlIHRvIGltcHJvdmUgcXVlcnkgcGVyZm9ybWFuY2UuXG4gKlxuICogRWFjaCB0ZXJtIGFsc28gc3VwcG9ydHMgYSBwcmVzZW5jZSBtb2RpZmllci4gQnkgZGVmYXVsdCBhIHRlcm0ncyBwcmVzZW5jZSBpbiBkb2N1bWVudCBpcyBvcHRpb25hbCwgaG93ZXZlclxuICogdGhpcyBjYW4gYmUgY2hhbmdlZCB0byBlaXRoZXIgcmVxdWlyZWQgb3IgcHJvaGliaXRlZC4gRm9yIGEgdGVybSdzIHByZXNlbmNlIHRvIGJlIHJlcXVpcmVkIGluIGEgZG9jdW1lbnQgdGhlXG4gKiB0ZXJtIHNob3VsZCBiZSBwcmVmaXhlZCB3aXRoIGEgJysnLCBlLmcuIGArZm9vIGJhcmAgaXMgYSBzZWFyY2ggZm9yIGRvY3VtZW50cyB0aGF0IG11c3QgY29udGFpbiAnZm9vJyBhbmRcbiAqIG9wdGlvbmFsbHkgY29udGFpbiAnYmFyJy4gQ29udmVyc2VseSBhIGxlYWRpbmcgJy0nIHNldHMgdGhlIHRlcm1zIHByZXNlbmNlIHRvIHByb2hpYml0ZWQsIGkuZS4gaXQgbXVzdCBub3RcbiAqIGFwcGVhciBpbiBhIGRvY3VtZW50LCBlLmcuIGAtZm9vIGJhcmAgaXMgYSBzZWFyY2ggZm9yIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluICdmb28nIGJ1dCBtYXkgY29udGFpbiAnYmFyJy5cbiAqXG4gKiBUbyBlc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBiYWNrc2xhc2ggY2hhcmFjdGVyICdcXCcgY2FuIGJlIHVzZWQsIHRoaXMgYWxsb3dzIHNlYXJjaGVzIHRvIGluY2x1ZGVcbiAqIGNoYXJhY3RlcnMgdGhhdCB3b3VsZCBub3JtYWxseSBiZSBjb25zaWRlcmVkIG1vZGlmaWVycywgZS5nLiBgZm9vXFx+MmAgd2lsbCBzZWFyY2ggZm9yIGEgdGVybSBcImZvb34yXCIgaW5zdGVhZFxuICogb2YgYXR0ZW1wdGluZyB0byBhcHBseSBhIGJvb3N0IG9mIDIgdG8gdGhlIHNlYXJjaCB0ZXJtIFwiZm9vXCIuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ30gbHVuci5JbmRleH5RdWVyeVN0cmluZ1xuICogQGV4YW1wbGUgPGNhcHRpb24+U2ltcGxlIHNpbmdsZSB0ZXJtIHF1ZXJ5PC9jYXB0aW9uPlxuICogaGVsbG9cbiAqIEBleGFtcGxlIDxjYXB0aW9uPk11bHRpcGxlIHRlcm0gcXVlcnk8L2NhcHRpb24+XG4gKiBoZWxsbyB3b3JsZFxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybSBzY29wZWQgdG8gYSBmaWVsZDwvY2FwdGlvbj5cbiAqIHRpdGxlOmhlbGxvXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYSBib29zdCBvZiAxMDwvY2FwdGlvbj5cbiAqIGhlbGxvXjEwXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj50ZXJtIHdpdGggYW4gZWRpdCBkaXN0YW5jZSBvZiAyPC9jYXB0aW9uPlxuICogaGVsbG9+MlxuICogQGV4YW1wbGUgPGNhcHRpb24+dGVybXMgd2l0aCBwcmVzZW5jZSBtb2RpZmllcnM8L2NhcHRpb24+XG4gKiAtZm9vICtiYXIgYmF6XG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtcyBhIHNlYXJjaCBhZ2FpbnN0IHRoZSBpbmRleCB1c2luZyBsdW5yIHF1ZXJ5IHN5bnRheC5cbiAqXG4gKiBSZXN1bHRzIHdpbGwgYmUgcmV0dXJuZWQgc29ydGVkIGJ5IHRoZWlyIHNjb3JlLCB0aGUgbW9zdCByZWxldmFudCByZXN1bHRzXG4gKiB3aWxsIGJlIHJldHVybmVkIGZpcnN0LiAgRm9yIGRldGFpbHMgb24gaG93IHRoZSBzY29yZSBpcyBjYWxjdWxhdGVkLCBwbGVhc2Ugc2VlXG4gKiB0aGUge0BsaW5rIGh0dHBzOi8vbHVucmpzLmNvbS9ndWlkZXMvc2VhcmNoaW5nLmh0bWwjc2NvcmluZ3xndWlkZX0uXG4gKlxuICogRm9yIG1vcmUgcHJvZ3JhbW1hdGljIHF1ZXJ5aW5nIHVzZSBsdW5yLkluZGV4I3F1ZXJ5LlxuICpcbiAqIEBwYXJhbSB7bHVuci5JbmRleH5RdWVyeVN0cmluZ30gcXVlcnlTdHJpbmcgLSBBIHN0cmluZyBjb250YWluaW5nIGEgbHVuciBxdWVyeS5cbiAqIEB0aHJvd3Mge2x1bnIuUXVlcnlQYXJzZUVycm9yfSBJZiB0aGUgcGFzc2VkIHF1ZXJ5IHN0cmluZyBjYW5ub3QgYmUgcGFyc2VkLlxuICogQHJldHVybnMge2x1bnIuSW5kZXh+UmVzdWx0W119XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uIChxdWVyeVN0cmluZykge1xuICByZXR1cm4gdGhpcy5xdWVyeShmdW5jdGlvbiAocXVlcnkpIHtcbiAgICB2YXIgcGFyc2VyID0gbmV3IGx1bnIuUXVlcnlQYXJzZXIocXVlcnlTdHJpbmcsIHF1ZXJ5KVxuICAgIHBhcnNlci5wYXJzZSgpXG4gIH0pXG59XG5cbi8qKlxuICogQSBxdWVyeSBidWlsZGVyIGNhbGxiYWNrIHByb3ZpZGVzIGEgcXVlcnkgb2JqZWN0IHRvIGJlIHVzZWQgdG8gZXhwcmVzc1xuICogdGhlIHF1ZXJ5IHRvIHBlcmZvcm0gb24gdGhlIGluZGV4LlxuICpcbiAqIEBjYWxsYmFjayBsdW5yLkluZGV4fnF1ZXJ5QnVpbGRlclxuICogQHBhcmFtIHtsdW5yLlF1ZXJ5fSBxdWVyeSAtIFRoZSBxdWVyeSBvYmplY3QgdG8gYnVpbGQgdXAuXG4gKiBAdGhpcyBsdW5yLlF1ZXJ5XG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtcyBhIHF1ZXJ5IGFnYWluc3QgdGhlIGluZGV4IHVzaW5nIHRoZSB5aWVsZGVkIGx1bnIuUXVlcnkgb2JqZWN0LlxuICpcbiAqIElmIHBlcmZvcm1pbmcgcHJvZ3JhbW1hdGljIHF1ZXJpZXMgYWdhaW5zdCB0aGUgaW5kZXgsIHRoaXMgbWV0aG9kIGlzIHByZWZlcnJlZFxuICogb3ZlciBsdW5yLkluZGV4I3NlYXJjaCBzbyBhcyB0byBhdm9pZCB0aGUgYWRkaXRpb25hbCBxdWVyeSBwYXJzaW5nIG92ZXJoZWFkLlxuICpcbiAqIEEgcXVlcnkgb2JqZWN0IGlzIHlpZWxkZWQgdG8gdGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHdoaWNoIHNob3VsZCBiZSB1c2VkIHRvXG4gKiBleHByZXNzIHRoZSBxdWVyeSB0byBiZSBydW4gYWdhaW5zdCB0aGUgaW5kZXguXG4gKlxuICogTm90ZSB0aGF0IGFsdGhvdWdoIHRoaXMgZnVuY3Rpb24gdGFrZXMgYSBjYWxsYmFjayBwYXJhbWV0ZXIgaXQgaXMgX25vdF8gYW5cbiAqIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sIHRoZSBjYWxsYmFjayBpcyBqdXN0IHlpZWxkZWQgYSBxdWVyeSBvYmplY3QgdG8gYmVcbiAqIGN1c3RvbWl6ZWQuXG4gKlxuICogQHBhcmFtIHtsdW5yLkluZGV4fnF1ZXJ5QnVpbGRlcn0gZm4gLSBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byBidWlsZCB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH5SZXN1bHRbXX1cbiAqL1xubHVuci5JbmRleC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZm4pIHtcbiAgLy8gZm9yIGVhY2ggcXVlcnkgY2xhdXNlXG4gIC8vICogcHJvY2VzcyB0ZXJtc1xuICAvLyAqIGV4cGFuZCB0ZXJtcyBmcm9tIHRva2VuIHNldFxuICAvLyAqIGZpbmQgbWF0Y2hpbmcgZG9jdW1lbnRzIGFuZCBtZXRhZGF0YVxuICAvLyAqIGdldCBkb2N1bWVudCB2ZWN0b3JzXG4gIC8vICogc2NvcmUgZG9jdW1lbnRzXG5cbiAgdmFyIHF1ZXJ5ID0gbmV3IGx1bnIuUXVlcnkodGhpcy5maWVsZHMpLFxuICAgICAgbWF0Y2hpbmdGaWVsZHMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgcXVlcnlWZWN0b3JzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHRlcm1GaWVsZENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIHJlcXVpcmVkTWF0Y2hlcyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBwcm9oaWJpdGVkTWF0Y2hlcyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICAvKlxuICAgKiBUbyBzdXBwb3J0IGZpZWxkIGxldmVsIGJvb3N0cyBhIHF1ZXJ5IHZlY3RvciBpcyBjcmVhdGVkIHBlclxuICAgKiBmaWVsZC4gQW4gZW1wdHkgdmVjdG9yIGlzIGVhZ2VybHkgY3JlYXRlZCB0byBzdXBwb3J0IG5lZ2F0ZWRcbiAgICogcXVlcmllcy5cbiAgICovXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICBxdWVyeVZlY3RvcnNbdGhpcy5maWVsZHNbaV1dID0gbmV3IGx1bnIuVmVjdG9yXG4gIH1cblxuICBmbi5jYWxsKHF1ZXJ5LCBxdWVyeSlcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXJ5LmNsYXVzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAvKlxuICAgICAqIFVubGVzcyB0aGUgcGlwZWxpbmUgaGFzIGJlZW4gZGlzYWJsZWQgZm9yIHRoaXMgdGVybSwgd2hpY2ggaXNcbiAgICAgKiB0aGUgY2FzZSBmb3IgdGVybXMgd2l0aCB3aWxkY2FyZHMsIHdlIG5lZWQgdG8gcGFzcyB0aGUgY2xhdXNlXG4gICAgICogdGVybSB0aHJvdWdoIHRoZSBzZWFyY2ggcGlwZWxpbmUuIEEgcGlwZWxpbmUgcmV0dXJucyBhbiBhcnJheVxuICAgICAqIG9mIHByb2Nlc3NlZCB0ZXJtcy4gUGlwZWxpbmUgZnVuY3Rpb25zIG1heSBleHBhbmQgdGhlIHBhc3NlZFxuICAgICAqIHRlcm0sIHdoaWNoIG1lYW5zIHdlIG1heSBlbmQgdXAgcGVyZm9ybWluZyBtdWx0aXBsZSBpbmRleCBsb29rdXBzXG4gICAgICogZm9yIGEgc2luZ2xlIHF1ZXJ5IHRlcm0uXG4gICAgICovXG4gICAgdmFyIGNsYXVzZSA9IHF1ZXJ5LmNsYXVzZXNbaV0sXG4gICAgICAgIHRlcm1zID0gbnVsbCxcbiAgICAgICAgY2xhdXNlTWF0Y2hlcyA9IGx1bnIuU2V0LmNvbXBsZXRlXG5cbiAgICBpZiAoY2xhdXNlLnVzZVBpcGVsaW5lKSB7XG4gICAgICB0ZXJtcyA9IHRoaXMucGlwZWxpbmUucnVuU3RyaW5nKGNsYXVzZS50ZXJtLCB7XG4gICAgICAgIGZpZWxkczogY2xhdXNlLmZpZWxkc1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGVybXMgPSBbY2xhdXNlLnRlcm1dXG4gICAgfVxuXG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCB0ZXJtcy5sZW5ndGg7IG0rKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1ttXVxuXG4gICAgICAvKlxuICAgICAgICogRWFjaCB0ZXJtIHJldHVybmVkIGZyb20gdGhlIHBpcGVsaW5lIG5lZWRzIHRvIHVzZSB0aGUgc2FtZSBxdWVyeVxuICAgICAgICogY2xhdXNlIG9iamVjdCwgZS5nLiB0aGUgc2FtZSBib29zdCBhbmQgb3IgZWRpdCBkaXN0YW5jZS4gVGhlXG4gICAgICAgKiBzaW1wbGVzdCB3YXkgdG8gZG8gdGhpcyBpcyB0byByZS11c2UgdGhlIGNsYXVzZSBvYmplY3QgYnV0IG11dGF0ZVxuICAgICAgICogaXRzIHRlcm0gcHJvcGVydHkuXG4gICAgICAgKi9cbiAgICAgIGNsYXVzZS50ZXJtID0gdGVybVxuXG4gICAgICAvKlxuICAgICAgICogRnJvbSB0aGUgdGVybSBpbiB0aGUgY2xhdXNlIHdlIGNyZWF0ZSBhIHRva2VuIHNldCB3aGljaCB3aWxsIHRoZW5cbiAgICAgICAqIGJlIHVzZWQgdG8gaW50ZXJzZWN0IHRoZSBpbmRleGVzIHRva2VuIHNldCB0byBnZXQgYSBsaXN0IG9mIHRlcm1zXG4gICAgICAgKiB0byBsb29rdXAgaW4gdGhlIGludmVydGVkIGluZGV4XG4gICAgICAgKi9cbiAgICAgIHZhciB0ZXJtVG9rZW5TZXQgPSBsdW5yLlRva2VuU2V0LmZyb21DbGF1c2UoY2xhdXNlKSxcbiAgICAgICAgICBleHBhbmRlZFRlcm1zID0gdGhpcy50b2tlblNldC5pbnRlcnNlY3QodGVybVRva2VuU2V0KS50b0FycmF5KClcblxuICAgICAgLypcbiAgICAgICAqIElmIGEgdGVybSBtYXJrZWQgYXMgcmVxdWlyZWQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHRva2VuU2V0IGl0IGlzXG4gICAgICAgKiBpbXBvc3NpYmxlIGZvciB0aGUgc2VhcmNoIHRvIHJldHVybiBhbnkgbWF0Y2hlcy4gV2Ugc2V0IGFsbCB0aGUgZmllbGRcbiAgICAgICAqIHNjb3BlZCByZXF1aXJlZCBtYXRjaGVzIHNldCB0byBlbXB0eSBhbmQgc3RvcCBleGFtaW5pbmcgYW55IGZ1cnRoZXJcbiAgICAgICAqIGNsYXVzZXMuXG4gICAgICAgKi9cbiAgICAgIGlmIChleHBhbmRlZFRlcm1zLmxlbmd0aCA9PT0gMCAmJiBjbGF1c2UucHJlc2VuY2UgPT09IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRUQpIHtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjbGF1c2UuZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgdmFyIGZpZWxkID0gY2xhdXNlLmZpZWxkc1trXVxuICAgICAgICAgIHJlcXVpcmVkTWF0Y2hlc1tmaWVsZF0gPSBsdW5yLlNldC5lbXB0eVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHBhbmRlZFRlcm1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEZvciBlYWNoIHRlcm0gZ2V0IHRoZSBwb3N0aW5nIGFuZCB0ZXJtSW5kZXgsIHRoaXMgaXMgcmVxdWlyZWQgZm9yXG4gICAgICAgICAqIGJ1aWxkaW5nIHRoZSBxdWVyeSB2ZWN0b3IuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXhwYW5kZWRUZXJtID0gZXhwYW5kZWRUZXJtc1tqXSxcbiAgICAgICAgICAgIHBvc3RpbmcgPSB0aGlzLmludmVydGVkSW5kZXhbZXhwYW5kZWRUZXJtXSxcbiAgICAgICAgICAgIHRlcm1JbmRleCA9IHBvc3RpbmcuX2luZGV4XG5cbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjbGF1c2UuZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgLypcbiAgICAgICAgICAgKiBGb3IgZWFjaCBmaWVsZCB0aGF0IHRoaXMgcXVlcnkgdGVybSBpcyBzY29wZWQgYnkgKGJ5IGRlZmF1bHRcbiAgICAgICAgICAgKiBhbGwgZmllbGRzIGFyZSBpbiBzY29wZSkgd2UgbmVlZCB0byBnZXQgYWxsIHRoZSBkb2N1bWVudCByZWZzXG4gICAgICAgICAgICogdGhhdCBoYXZlIHRoaXMgdGVybSBpbiB0aGF0IGZpZWxkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogVGhlIHBvc3RpbmcgaXMgdGhlIGVudHJ5IGluIHRoZSBpbnZlcnRlZEluZGV4IGZvciB0aGUgbWF0Y2hpbmdcbiAgICAgICAgICAgKiB0ZXJtIGZyb20gYWJvdmUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgdmFyIGZpZWxkID0gY2xhdXNlLmZpZWxkc1trXSxcbiAgICAgICAgICAgICAgZmllbGRQb3N0aW5nID0gcG9zdGluZ1tmaWVsZF0sXG4gICAgICAgICAgICAgIG1hdGNoaW5nRG9jdW1lbnRSZWZzID0gT2JqZWN0LmtleXMoZmllbGRQb3N0aW5nKSxcbiAgICAgICAgICAgICAgdGVybUZpZWxkID0gZXhwYW5kZWRUZXJtICsgXCIvXCIgKyBmaWVsZCxcbiAgICAgICAgICAgICAgbWF0Y2hpbmdEb2N1bWVudHNTZXQgPSBuZXcgbHVuci5TZXQobWF0Y2hpbmdEb2N1bWVudFJlZnMpXG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIGlmIHRoZSBwcmVzZW5jZSBvZiB0aGlzIHRlcm0gaXMgcmVxdWlyZWQgZW5zdXJlIHRoYXQgdGhlIG1hdGNoaW5nXG4gICAgICAgICAgICogZG9jdW1lbnRzIGFyZSBhZGRlZCB0byB0aGUgc2V0IG9mIHJlcXVpcmVkIG1hdGNoZXMgZm9yIHRoaXMgY2xhdXNlLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICovXG4gICAgICAgICAgaWYgKGNsYXVzZS5wcmVzZW5jZSA9PSBsdW5yLlF1ZXJ5LnByZXNlbmNlLlJFUVVJUkVEKSB7XG4gICAgICAgICAgICBjbGF1c2VNYXRjaGVzID0gY2xhdXNlTWF0Y2hlcy51bmlvbihtYXRjaGluZ0RvY3VtZW50c1NldClcblxuICAgICAgICAgICAgaWYgKHJlcXVpcmVkTWF0Y2hlc1tmaWVsZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICByZXF1aXJlZE1hdGNoZXNbZmllbGRdID0gbHVuci5TZXQuY29tcGxldGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvKlxuICAgICAgICAgICAqIGlmIHRoZSBwcmVzZW5jZSBvZiB0aGlzIHRlcm0gaXMgcHJvaGliaXRlZCBlbnN1cmUgdGhhdCB0aGUgbWF0Y2hpbmdcbiAgICAgICAgICAgKiBkb2N1bWVudHMgYXJlIGFkZGVkIHRvIHRoZSBzZXQgb2YgcHJvaGliaXRlZCBtYXRjaGVzIGZvciB0aGlzIGZpZWxkLFxuICAgICAgICAgICAqIGNyZWF0aW5nIHRoYXQgc2V0IGlmIGl0IGRvZXMgbm90IHlldCBleGlzdC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAoY2xhdXNlLnByZXNlbmNlID09IGx1bnIuUXVlcnkucHJlc2VuY2UuUFJPSElCSVRFRCkge1xuICAgICAgICAgICAgaWYgKHByb2hpYml0ZWRNYXRjaGVzW2ZpZWxkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHByb2hpYml0ZWRNYXRjaGVzW2ZpZWxkXSA9IGx1bnIuU2V0LmVtcHR5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2hpYml0ZWRNYXRjaGVzW2ZpZWxkXSA9IHByb2hpYml0ZWRNYXRjaGVzW2ZpZWxkXS51bmlvbihtYXRjaGluZ0RvY3VtZW50c1NldClcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIFByb2hpYml0ZWQgbWF0Y2hlcyBzaG91bGQgbm90IGJlIHBhcnQgb2YgdGhlIHF1ZXJ5IHZlY3RvciB1c2VkIGZvclxuICAgICAgICAgICAgICogc2ltaWxhcml0eSBzY29yaW5nIGFuZCBubyBtZXRhZGF0YSBzaG91bGQgYmUgZXh0cmFjdGVkIHNvIHdlIGNvbnRpbnVlXG4gICAgICAgICAgICAgKiB0byB0aGUgbmV4dCBmaWVsZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8qXG4gICAgICAgICAgICogVGhlIHF1ZXJ5IGZpZWxkIHZlY3RvciBpcyBwb3B1bGF0ZWQgdXNpbmcgdGhlIHRlcm1JbmRleCBmb3VuZCBmb3JcbiAgICAgICAgICAgKiB0aGUgdGVybSBhbmQgYSB1bml0IHZhbHVlIHdpdGggdGhlIGFwcHJvcHJpYXRlIGJvb3N0IGFwcGxpZWQuXG4gICAgICAgICAgICogVXNpbmcgdXBzZXJ0IGJlY2F1c2UgdGhlcmUgY291bGQgYWxyZWFkeSBiZSBhbiBlbnRyeSBpbiB0aGUgdmVjdG9yXG4gICAgICAgICAgICogZm9yIHRoZSB0ZXJtIHdlIGFyZSB3b3JraW5nIHdpdGguIEluIHRoYXQgY2FzZSB3ZSBqdXN0IGFkZCB0aGUgc2NvcmVzXG4gICAgICAgICAgICogdG9nZXRoZXIuXG4gICAgICAgICAgICovXG4gICAgICAgICAgcXVlcnlWZWN0b3JzW2ZpZWxkXS51cHNlcnQodGVybUluZGV4LCBjbGF1c2UuYm9vc3QsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYiB9KVxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogSWYgd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgdGVybSwgZmllbGQgY29tYm8gdGhlbiB3ZSd2ZSBhbHJlYWR5IGNvbGxlY3RlZFxuICAgICAgICAgICAqIHRoZSBtYXRjaGluZyBkb2N1bWVudHMgYW5kIG1ldGFkYXRhLCBubyBuZWVkIHRvIGdvIHRocm91Z2ggYWxsIHRoYXQgYWdhaW5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGVybUZpZWxkQ2FjaGVbdGVybUZpZWxkXSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IG1hdGNoaW5nRG9jdW1lbnRSZWZzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogQWxsIG1ldGFkYXRhIGZvciB0aGlzIHRlcm0vZmllbGQvZG9jdW1lbnQgdHJpcGxlXG4gICAgICAgICAgICAgKiBhcmUgdGhlbiBleHRyYWN0ZWQgYW5kIGNvbGxlY3RlZCBpbnRvIGFuIGluc3RhbmNlXG4gICAgICAgICAgICAgKiBvZiBsdW5yLk1hdGNoRGF0YSByZWFkeSB0byBiZSByZXR1cm5lZCBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgICAqIHJlc3VsdHNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nRG9jdW1lbnRSZWYgPSBtYXRjaGluZ0RvY3VtZW50UmVmc1tsXSxcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0ZpZWxkUmVmID0gbmV3IGx1bnIuRmllbGRSZWYgKG1hdGNoaW5nRG9jdW1lbnRSZWYsIGZpZWxkKSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YSA9IGZpZWxkUG9zdGluZ1ttYXRjaGluZ0RvY3VtZW50UmVmXSxcbiAgICAgICAgICAgICAgICBmaWVsZE1hdGNoXG5cbiAgICAgICAgICAgIGlmICgoZmllbGRNYXRjaCA9IG1hdGNoaW5nRmllbGRzW21hdGNoaW5nRmllbGRSZWZdKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1hdGNoaW5nRmllbGRzW21hdGNoaW5nRmllbGRSZWZdID0gbmV3IGx1bnIuTWF0Y2hEYXRhIChleHBhbmRlZFRlcm0sIGZpZWxkLCBtZXRhZGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZpZWxkTWF0Y2guYWRkKGV4cGFuZGVkVGVybSwgZmllbGQsIG1ldGFkYXRhKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGVybUZpZWxkQ2FjaGVbdGVybUZpZWxkXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBwcmVzZW5jZSB3YXMgcmVxdWlyZWQgd2UgbmVlZCB0byB1cGRhdGUgdGhlIHJlcXVpcmVkTWF0Y2hlcyBmaWVsZCBzZXRzLlxuICAgICAqIFdlIGRvIHRoaXMgYWZ0ZXIgYWxsIGZpZWxkcyBmb3IgdGhlIHRlcm0gaGF2ZSBjb2xsZWN0ZWQgdGhlaXIgbWF0Y2hlcyBiZWNhdXNlXG4gICAgICogdGhlIGNsYXVzZSB0ZXJtcyBwcmVzZW5jZSBpcyByZXF1aXJlZCBpbiBfYW55XyBvZiB0aGUgZmllbGRzIG5vdCBfYWxsXyBvZiB0aGVcbiAgICAgKiBmaWVsZHMuXG4gICAgICovXG4gICAgaWYgKGNsYXVzZS5wcmVzZW5jZSA9PT0gbHVuci5RdWVyeS5wcmVzZW5jZS5SRVFVSVJFRCkge1xuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjbGF1c2UuZmllbGRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBmaWVsZCA9IGNsYXVzZS5maWVsZHNba11cbiAgICAgICAgcmVxdWlyZWRNYXRjaGVzW2ZpZWxkXSA9IHJlcXVpcmVkTWF0Y2hlc1tmaWVsZF0uaW50ZXJzZWN0KGNsYXVzZU1hdGNoZXMpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5lZWQgdG8gY29tYmluZSB0aGUgZmllbGQgc2NvcGVkIHJlcXVpcmVkIGFuZCBwcm9oaWJpdGVkXG4gICAqIG1hdGNoaW5nIGRvY3VtZW50cyBpbnRvIGEgZ2xvYmFsIHNldCBvZiByZXF1aXJlZCBhbmQgcHJvaGliaXRlZFxuICAgKiBtYXRjaGVzXG4gICAqL1xuICB2YXIgYWxsUmVxdWlyZWRNYXRjaGVzID0gbHVuci5TZXQuY29tcGxldGUsXG4gICAgICBhbGxQcm9oaWJpdGVkTWF0Y2hlcyA9IGx1bnIuU2V0LmVtcHR5XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGRzW2ldXG5cbiAgICBpZiAocmVxdWlyZWRNYXRjaGVzW2ZpZWxkXSkge1xuICAgICAgYWxsUmVxdWlyZWRNYXRjaGVzID0gYWxsUmVxdWlyZWRNYXRjaGVzLmludGVyc2VjdChyZXF1aXJlZE1hdGNoZXNbZmllbGRdKVxuICAgIH1cblxuICAgIGlmIChwcm9oaWJpdGVkTWF0Y2hlc1tmaWVsZF0pIHtcbiAgICAgIGFsbFByb2hpYml0ZWRNYXRjaGVzID0gYWxsUHJvaGliaXRlZE1hdGNoZXMudW5pb24ocHJvaGliaXRlZE1hdGNoZXNbZmllbGRdKVxuICAgIH1cbiAgfVxuXG4gIHZhciBtYXRjaGluZ0ZpZWxkUmVmcyA9IE9iamVjdC5rZXlzKG1hdGNoaW5nRmllbGRzKSxcbiAgICAgIHJlc3VsdHMgPSBbXSxcbiAgICAgIG1hdGNoZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgLypcbiAgICogSWYgdGhlIHF1ZXJ5IGlzIG5lZ2F0ZWQgKGNvbnRhaW5zIG9ubHkgcHJvaGliaXRlZCB0ZXJtcylcbiAgICogd2UgbmVlZCB0byBnZXQgX2FsbF8gZmllbGRSZWZzIGN1cnJlbnRseSBleGlzdGluZyBpbiB0aGVcbiAgICogaW5kZXguIFRoaXMgaXMgb25seSBkb25lIHdoZW4gd2Uga25vdyB0aGF0IHRoZSBxdWVyeSBpc1xuICAgKiBlbnRpcmVseSBwcm9oaWJpdGVkIHRlcm1zIHRvIGF2b2lkIGFueSBjb3N0IG9mIGdldHRpbmcgYWxsXG4gICAqIGZpZWxkUmVmcyB1bm5lY2Vzc2FyaWx5LlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHksIGJsYW5rIE1hdGNoRGF0YSBtdXN0IGJlIGNyZWF0ZWQgdG8gY29ycmVjdGx5XG4gICAqIHBvcHVsYXRlIHRoZSByZXN1bHRzLlxuICAgKi9cbiAgaWYgKHF1ZXJ5LmlzTmVnYXRlZCgpKSB7XG4gICAgbWF0Y2hpbmdGaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVmVjdG9ycylcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hpbmdGaWVsZFJlZnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXRjaGluZ0ZpZWxkUmVmID0gbWF0Y2hpbmdGaWVsZFJlZnNbaV1cbiAgICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhtYXRjaGluZ0ZpZWxkUmVmKVxuICAgICAgbWF0Y2hpbmdGaWVsZHNbbWF0Y2hpbmdGaWVsZFJlZl0gPSBuZXcgbHVuci5NYXRjaERhdGFcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoaW5nRmllbGRSZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgLypcbiAgICAgKiBDdXJyZW50bHkgd2UgaGF2ZSBkb2N1bWVudCBmaWVsZHMgdGhhdCBtYXRjaCB0aGUgcXVlcnksIGJ1dCB3ZVxuICAgICAqIG5lZWQgdG8gcmV0dXJuIGRvY3VtZW50cy4gVGhlIG1hdGNoRGF0YSBhbmQgc2NvcmVzIGFyZSBjb21iaW5lZFxuICAgICAqIGZyb20gbXVsdGlwbGUgZmllbGRzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIFNjb3JlcyBhcmUgY2FsY3VsYXRlZCBieSBmaWVsZCwgdXNpbmcgdGhlIHF1ZXJ5IHZlY3RvcnMgY3JlYXRlZFxuICAgICAqIGFib3ZlLCBhbmQgY29tYmluZWQgaW50byBhIGZpbmFsIGRvY3VtZW50IHNjb3JlIHVzaW5nIGFkZGl0aW9uLlxuICAgICAqL1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhtYXRjaGluZ0ZpZWxkUmVmc1tpXSksXG4gICAgICAgIGRvY1JlZiA9IGZpZWxkUmVmLmRvY1JlZlxuXG4gICAgaWYgKCFhbGxSZXF1aXJlZE1hdGNoZXMuY29udGFpbnMoZG9jUmVmKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICBpZiAoYWxsUHJvaGliaXRlZE1hdGNoZXMuY29udGFpbnMoZG9jUmVmKSkge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICB2YXIgZmllbGRWZWN0b3IgPSB0aGlzLmZpZWxkVmVjdG9yc1tmaWVsZFJlZl0sXG4gICAgICAgIHNjb3JlID0gcXVlcnlWZWN0b3JzW2ZpZWxkUmVmLmZpZWxkTmFtZV0uc2ltaWxhcml0eShmaWVsZFZlY3RvciksXG4gICAgICAgIGRvY01hdGNoXG5cbiAgICBpZiAoKGRvY01hdGNoID0gbWF0Y2hlc1tkb2NSZWZdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkb2NNYXRjaC5zY29yZSArPSBzY29yZVxuICAgICAgZG9jTWF0Y2gubWF0Y2hEYXRhLmNvbWJpbmUobWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdKVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWF0Y2ggPSB7XG4gICAgICAgIHJlZjogZG9jUmVmLFxuICAgICAgICBzY29yZTogc2NvcmUsXG4gICAgICAgIG1hdGNoRGF0YTogbWF0Y2hpbmdGaWVsZHNbZmllbGRSZWZdXG4gICAgICB9XG4gICAgICBtYXRjaGVzW2RvY1JlZl0gPSBtYXRjaFxuICAgICAgcmVzdWx0cy5wdXNoKG1hdGNoKVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIFNvcnQgdGhlIHJlc3VsdHMgb2JqZWN0cyBieSBzY29yZSwgaGlnaGVzdCBmaXJzdC5cbiAgICovXG4gIHJldHVybiByZXN1bHRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmVcbiAgfSlcbn1cblxuLyoqXG4gKiBQcmVwYXJlcyB0aGUgaW5kZXggZm9yIEpTT04gc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBUaGUgc2NoZW1hIGZvciB0aGlzIEpTT04gYmxvYiB3aWxsIGJlIGRlc2NyaWJlZCBpbiBhXG4gKiBzZXBhcmF0ZSBKU09OIHNjaGVtYSBmaWxlLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmx1bnIuSW5kZXgucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGludmVydGVkSW5kZXggPSBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpXG4gICAgLnNvcnQoKVxuICAgIC5tYXAoZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgIHJldHVybiBbdGVybSwgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dXVxuICAgIH0sIHRoaXMpXG5cbiAgdmFyIGZpZWxkVmVjdG9ycyA9IE9iamVjdC5rZXlzKHRoaXMuZmllbGRWZWN0b3JzKVxuICAgIC5tYXAoZnVuY3Rpb24gKHJlZikge1xuICAgICAgcmV0dXJuIFtyZWYsIHRoaXMuZmllbGRWZWN0b3JzW3JlZl0udG9KU09OKCldXG4gICAgfSwgdGhpcylcblxuICByZXR1cm4ge1xuICAgIHZlcnNpb246IGx1bnIudmVyc2lvbixcbiAgICBmaWVsZHM6IHRoaXMuZmllbGRzLFxuICAgIGZpZWxkVmVjdG9yczogZmllbGRWZWN0b3JzLFxuICAgIGludmVydGVkSW5kZXg6IGludmVydGVkSW5kZXgsXG4gICAgcGlwZWxpbmU6IHRoaXMucGlwZWxpbmUudG9KU09OKClcbiAgfVxufVxuXG4vKipcbiAqIExvYWRzIGEgcHJldmlvdXNseSBzZXJpYWxpemVkIGx1bnIuSW5kZXhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc2VyaWFsaXplZEluZGV4IC0gQSBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgbHVuci5JbmRleFxuICogQHJldHVybnMge2x1bnIuSW5kZXh9XG4gKi9cbmx1bnIuSW5kZXgubG9hZCA9IGZ1bmN0aW9uIChzZXJpYWxpemVkSW5kZXgpIHtcbiAgdmFyIGF0dHJzID0ge30sXG4gICAgICBmaWVsZFZlY3RvcnMgPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRWZWN0b3JzID0gc2VyaWFsaXplZEluZGV4LmZpZWxkVmVjdG9ycyxcbiAgICAgIGludmVydGVkSW5kZXggPSB7fSxcbiAgICAgIHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4ID0gc2VyaWFsaXplZEluZGV4LmludmVydGVkSW5kZXgsXG4gICAgICB0b2tlblNldEJ1aWxkZXIgPSBuZXcgbHVuci5Ub2tlblNldC5CdWlsZGVyLFxuICAgICAgcGlwZWxpbmUgPSBsdW5yLlBpcGVsaW5lLmxvYWQoc2VyaWFsaXplZEluZGV4LnBpcGVsaW5lKVxuXG4gIGlmIChzZXJpYWxpemVkSW5kZXgudmVyc2lvbiAhPSBsdW5yLnZlcnNpb24pIHtcbiAgICBsdW5yLnV0aWxzLndhcm4oXCJWZXJzaW9uIG1pc21hdGNoIHdoZW4gbG9hZGluZyBzZXJpYWxpc2VkIGluZGV4LiBDdXJyZW50IHZlcnNpb24gb2YgbHVuciAnXCIgKyBsdW5yLnZlcnNpb24gKyBcIicgZG9lcyBub3QgbWF0Y2ggc2VyaWFsaXplZCBpbmRleCAnXCIgKyBzZXJpYWxpemVkSW5kZXgudmVyc2lvbiArIFwiJ1wiKVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXJpYWxpemVkVmVjdG9ycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0dXBsZSA9IHNlcmlhbGl6ZWRWZWN0b3JzW2ldLFxuICAgICAgICByZWYgPSB0dXBsZVswXSxcbiAgICAgICAgZWxlbWVudHMgPSB0dXBsZVsxXVxuXG4gICAgZmllbGRWZWN0b3JzW3JlZl0gPSBuZXcgbHVuci5WZWN0b3IoZWxlbWVudHMpXG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcmlhbGl6ZWRJbnZlcnRlZEluZGV4Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHR1cGxlID0gc2VyaWFsaXplZEludmVydGVkSW5kZXhbaV0sXG4gICAgICAgIHRlcm0gPSB0dXBsZVswXSxcbiAgICAgICAgcG9zdGluZyA9IHR1cGxlWzFdXG5cbiAgICB0b2tlblNldEJ1aWxkZXIuaW5zZXJ0KHRlcm0pXG4gICAgaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9IHBvc3RpbmdcbiAgfVxuXG4gIHRva2VuU2V0QnVpbGRlci5maW5pc2goKVxuXG4gIGF0dHJzLmZpZWxkcyA9IHNlcmlhbGl6ZWRJbmRleC5maWVsZHNcblxuICBhdHRycy5maWVsZFZlY3RvcnMgPSBmaWVsZFZlY3RvcnNcbiAgYXR0cnMuaW52ZXJ0ZWRJbmRleCA9IGludmVydGVkSW5kZXhcbiAgYXR0cnMudG9rZW5TZXQgPSB0b2tlblNldEJ1aWxkZXIucm9vdFxuICBhdHRycy5waXBlbGluZSA9IHBpcGVsaW5lXG5cbiAgcmV0dXJuIG5ldyBsdW5yLkluZGV4KGF0dHJzKVxufVxuLyohXG4gKiBsdW5yLkJ1aWxkZXJcbiAqIENvcHlyaWdodCAoQykgMjAxOCBPbGl2ZXIgTmlnaHRpbmdhbGVcbiAqL1xuXG4vKipcbiAqIGx1bnIuQnVpbGRlciBwZXJmb3JtcyBpbmRleGluZyBvbiBhIHNldCBvZiBkb2N1bWVudHMgYW5kXG4gKiByZXR1cm5zIGluc3RhbmNlcyBvZiBsdW5yLkluZGV4IHJlYWR5IGZvciBxdWVyeWluZy5cbiAqXG4gKiBBbGwgY29uZmlndXJhdGlvbiBvZiB0aGUgaW5kZXggaXMgZG9uZSB2aWEgdGhlIGJ1aWxkZXIsIHRoZVxuICogZmllbGRzIHRvIGluZGV4LCB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlLCB0aGUgdGV4dCBwcm9jZXNzaW5nXG4gKiBwaXBlbGluZSBhbmQgZG9jdW1lbnQgc2NvcmluZyBwYXJhbWV0ZXJzIGFyZSBhbGwgc2V0IG9uIHRoZVxuICogYnVpbGRlciBiZWZvcmUgaW5kZXhpbmcuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcHJvcGVydHkge3N0cmluZ30gX3JlZiAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlIGZpZWxkLlxuICogQHByb3BlcnR5IHtzdHJpbmdbXX0gX2ZpZWxkcyAtIEludGVybmFsIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgZmllbGRzIHRvIGluZGV4LlxuICogQHByb3BlcnR5IHtvYmplY3R9IGludmVydGVkSW5kZXggLSBUaGUgaW52ZXJ0ZWQgaW5kZXggbWFwcyB0ZXJtcyB0byBkb2N1bWVudCBmaWVsZHMuXG4gKiBAcHJvcGVydHkge29iamVjdH0gZG9jdW1lbnRUZXJtRnJlcXVlbmNpZXMgLSBLZWVwcyB0cmFjayBvZiBkb2N1bWVudCB0ZXJtIGZyZXF1ZW5jaWVzLlxuICogQHByb3BlcnR5IHtvYmplY3R9IGRvY3VtZW50TGVuZ3RocyAtIEtlZXBzIHRyYWNrIG9mIHRoZSBsZW5ndGggb2YgZG9jdW1lbnRzIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqIEBwcm9wZXJ0eSB7bHVuci50b2tlbml6ZXJ9IHRva2VuaXplciAtIEZ1bmN0aW9uIGZvciBzcGxpdHRpbmcgc3RyaW5ncyBpbnRvIHRva2VucyBmb3IgaW5kZXhpbmcuXG4gKiBAcHJvcGVydHkge2x1bnIuUGlwZWxpbmV9IHBpcGVsaW5lIC0gVGhlIHBpcGVsaW5lIHBlcmZvcm1zIHRleHQgcHJvY2Vzc2luZyBvbiB0b2tlbnMgYmVmb3JlIGluZGV4aW5nLlxuICogQHByb3BlcnR5IHtsdW5yLlBpcGVsaW5lfSBzZWFyY2hQaXBlbGluZSAtIEEgcGlwZWxpbmUgZm9yIHByb2Nlc3Npbmcgc2VhcmNoIHRlcm1zIGJlZm9yZSBxdWVyeWluZyB0aGUgaW5kZXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gZG9jdW1lbnRDb3VudCAtIEtlZXBzIHRyYWNrIG9mIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIGluZGV4ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gX2IgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGZpZWxkIGxlbmd0aCBub3JtYWxpemF0aW9uLCBzZXR0aW5nIHRoaXMgdG8gMCBkaXNhYmxlZCBub3JtYWxpemF0aW9uLCAxIGZ1bGx5IG5vcm1hbGl6ZXMgZmllbGQgbGVuZ3RocywgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMC43NS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBfazEgLSBBIHBhcmFtZXRlciB0byBjb250cm9sIGhvdyBxdWlja2x5IGFuIGluY3JlYXNlIGluIHRlcm0gZnJlcXVlbmN5IHJlc3VsdHMgaW4gdGVybSBmcmVxdWVuY3kgc2F0dXJhdGlvbiwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMS4yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRlcm1JbmRleCAtIEEgY291bnRlciBpbmNyZW1lbnRlZCBmb3IgZWFjaCB1bmlxdWUgdGVybSwgdXNlZCB0byBpZGVudGlmeSBhIHRlcm1zIHBvc2l0aW9uIGluIHRoZSB2ZWN0b3Igc3BhY2UuXG4gKiBAcHJvcGVydHkge2FycmF5fSBtZXRhZGF0YVdoaXRlbGlzdCAtIEEgbGlzdCBvZiBtZXRhZGF0YSBrZXlzIHRoYXQgaGF2ZSBiZWVuIHdoaXRlbGlzdGVkIGZvciBlbnRyeSBpbiB0aGUgaW5kZXguXG4gKi9cbmx1bnIuQnVpbGRlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5fcmVmID0gXCJpZFwiXG4gIHRoaXMuX2ZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgdGhpcy5fZG9jdW1lbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICB0aGlzLmludmVydGVkSW5kZXggPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXMgPSB7fVxuICB0aGlzLmZpZWxkTGVuZ3RocyA9IHt9XG4gIHRoaXMudG9rZW5pemVyID0gbHVuci50b2tlbml6ZXJcbiAgdGhpcy5waXBlbGluZSA9IG5ldyBsdW5yLlBpcGVsaW5lXG4gIHRoaXMuc2VhcmNoUGlwZWxpbmUgPSBuZXcgbHVuci5QaXBlbGluZVxuICB0aGlzLmRvY3VtZW50Q291bnQgPSAwXG4gIHRoaXMuX2IgPSAwLjc1XG4gIHRoaXMuX2sxID0gMS4yXG4gIHRoaXMudGVybUluZGV4ID0gMFxuICB0aGlzLm1ldGFkYXRhV2hpdGVsaXN0ID0gW11cbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBkb2N1bWVudCBmaWVsZCB1c2VkIGFzIHRoZSBkb2N1bWVudCByZWZlcmVuY2UuIEV2ZXJ5IGRvY3VtZW50IG11c3QgaGF2ZSB0aGlzIGZpZWxkLlxuICogVGhlIHR5cGUgb2YgdGhpcyBmaWVsZCBpbiB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIGEgc3RyaW5nLCBpZiBpdCBpcyBub3QgYSBzdHJpbmcgaXQgd2lsbCBiZVxuICogY29lcmNlZCBpbnRvIGEgc3RyaW5nIGJ5IGNhbGxpbmcgdG9TdHJpbmcuXG4gKlxuICogVGhlIGRlZmF1bHQgcmVmIGlzICdpZCcuXG4gKlxuICogVGhlIHJlZiBzaG91bGQgX25vdF8gYmUgY2hhbmdlZCBkdXJpbmcgaW5kZXhpbmcsIGl0IHNob3VsZCBiZSBzZXQgYmVmb3JlIGFueSBkb2N1bWVudHMgYXJlXG4gKiBhZGRlZCB0byB0aGUgaW5kZXguIENoYW5naW5nIGl0IGR1cmluZyBpbmRleGluZyBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbnQgcmVzdWx0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmIC0gVGhlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZSBmaWVsZCBpbiB0aGUgZG9jdW1lbnQuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKHJlZikge1xuICB0aGlzLl9yZWYgPSByZWZcbn1cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IGEgZmllbGQgZnJvbSBhIGRvY3VtZW50LlxuICpcbiAqIEx1bnIgZXhwZWN0cyBhIGZpZWxkIHRvIGJlIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBkb2N1bWVudCwgaWYgaG93ZXZlciB0aGUgZmllbGRcbiAqIGlzIGRlZXBseSBuZXN0ZWQgd2l0aGluIGEgZG9jdW1lbnQgYW4gZXh0cmFjdG9yIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGV4dHJhY3RcbiAqIHRoZSByaWdodCBmaWVsZCBmb3IgaW5kZXhpbmcuXG4gKlxuICogQGNhbGxiYWNrIGZpZWxkRXh0cmFjdG9yXG4gKiBAcGFyYW0ge29iamVjdH0gZG9jIC0gVGhlIGRvY3VtZW50IGJlaW5nIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqIEByZXR1cm5zIHs/KHN0cmluZ3xvYmplY3R8b2JqZWN0W10pfSBvYmogLSBUaGUgb2JqZWN0IHRoYXQgd2lsbCBiZSBpbmRleGVkIGZvciB0aGlzIGZpZWxkLlxuICogQGV4YW1wbGUgPGNhcHRpb24+RXh0cmFjdGluZyBhIG5lc3RlZCBmaWVsZDwvY2FwdGlvbj5cbiAqIGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIGRvYy5uZXN0ZWQuZmllbGQgfVxuICovXG5cbi8qKlxuICogQWRkcyBhIGZpZWxkIHRvIHRoZSBsaXN0IG9mIGRvY3VtZW50IGZpZWxkcyB0aGF0IHdpbGwgYmUgaW5kZXhlZC4gRXZlcnkgZG9jdW1lbnQgYmVpbmdcbiAqIGluZGV4ZWQgc2hvdWxkIGhhdmUgdGhpcyBmaWVsZC4gTnVsbCB2YWx1ZXMgZm9yIHRoaXMgZmllbGQgaW4gaW5kZXhlZCBkb2N1bWVudHMgd2lsbFxuICogbm90IGNhdXNlIGVycm9ycyBidXQgd2lsbCBsaW1pdCB0aGUgY2hhbmNlIG9mIHRoYXQgZG9jdW1lbnQgYmVpbmcgcmV0cmlldmVkIGJ5IHNlYXJjaGVzLlxuICpcbiAqIEFsbCBmaWVsZHMgc2hvdWxkIGJlIGFkZGVkIGJlZm9yZSBhZGRpbmcgZG9jdW1lbnRzIHRvIHRoZSBpbmRleC4gQWRkaW5nIGZpZWxkcyBhZnRlclxuICogYSBkb2N1bWVudCBoYXMgYmVlbiBpbmRleGVkIHdpbGwgaGF2ZSBubyBlZmZlY3Qgb24gYWxyZWFkeSBpbmRleGVkIGRvY3VtZW50cy5cbiAqXG4gKiBGaWVsZHMgY2FuIGJlIGJvb3N0ZWQgYXQgYnVpbGQgdGltZS4gVGhpcyBhbGxvd3MgdGVybXMgd2l0aGluIHRoYXQgZmllbGQgdG8gaGF2ZSBtb3JlXG4gKiBpbXBvcnRhbmNlIHdoZW4gcmFua2luZyBzZWFyY2ggcmVzdWx0cy4gVXNlIGEgZmllbGQgYm9vc3QgdG8gc3BlY2lmeSB0aGF0IG1hdGNoZXMgd2l0aGluXG4gKiBvbmUgZmllbGQgYXJlIG1vcmUgaW1wb3J0YW50IHRoYW4gb3RoZXIgZmllbGRzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBUaGUgbmFtZSBvZiBhIGZpZWxkIHRvIGluZGV4IGluIGFsbCBkb2N1bWVudHMuXG4gKiBAcGFyYW0ge29iamVjdH0gYXR0cmlidXRlcyAtIE9wdGlvbmFsIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZmllbGQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2F0dHJpYnV0ZXMuYm9vc3Q9MV0gLSBCb29zdCBhcHBsaWVkIHRvIGFsbCB0ZXJtcyB3aXRoaW4gdGhpcyBmaWVsZC5cbiAqIEBwYXJhbSB7ZmllbGRFeHRyYWN0b3J9IFthdHRyaWJ1dGVzLmV4dHJhY3Rvcl0gLSBGdW5jdGlvbiB0byBleHRyYWN0IGEgZmllbGQgZnJvbSBhIGRvY3VtZW50LlxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gZmllbGROYW1lIGNhbm5vdCBjb250YWluIHVuc3VwcG9ydGVkIGNoYXJhY3RlcnMgJy8nXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbiAoZmllbGROYW1lLCBhdHRyaWJ1dGVzKSB7XG4gIGlmICgvXFwvLy50ZXN0KGZpZWxkTmFtZSkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvciAoXCJGaWVsZCAnXCIgKyBmaWVsZE5hbWUgKyBcIicgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXIgJy8nXCIpXG4gIH1cblxuICB0aGlzLl9maWVsZHNbZmllbGROYW1lXSA9IGF0dHJpYnV0ZXMgfHwge31cbn1cblxuLyoqXG4gKiBBIHBhcmFtZXRlciB0byB0dW5lIHRoZSBhbW91bnQgb2YgZmllbGQgbGVuZ3RoIG5vcm1hbGlzYXRpb24gdGhhdCBpcyBhcHBsaWVkIHdoZW5cbiAqIGNhbGN1bGF0aW5nIHJlbGV2YW5jZSBzY29yZXMuIEEgdmFsdWUgb2YgMCB3aWxsIGNvbXBsZXRlbHkgZGlzYWJsZSBhbnkgbm9ybWFsaXNhdGlvblxuICogYW5kIGEgdmFsdWUgb2YgMSB3aWxsIGZ1bGx5IG5vcm1hbGlzZSBmaWVsZCBsZW5ndGhzLiBUaGUgZGVmYXVsdCBpcyAwLjc1LiBWYWx1ZXMgb2YgYlxuICogd2lsbCBiZSBjbGFtcGVkIHRvIHRoZSByYW5nZSAwIC0gMS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyIC0gVGhlIHZhbHVlIHRvIHNldCBmb3IgdGhpcyB0dW5pbmcgcGFyYW1ldGVyLlxuICovXG5sdW5yLkJ1aWxkZXIucHJvdG90eXBlLmIgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gIGlmIChudW1iZXIgPCAwKSB7XG4gICAgdGhpcy5fYiA9IDBcbiAgfSBlbHNlIGlmIChudW1iZXIgPiAxKSB7XG4gICAgdGhpcy5fYiA9IDFcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9iID0gbnVtYmVyXG4gIH1cbn1cblxuLyoqXG4gKiBBIHBhcmFtZXRlciB0aGF0IGNvbnRyb2xzIHRoZSBzcGVlZCBhdCB3aGljaCBhIHJpc2UgaW4gdGVybSBmcmVxdWVuY3kgcmVzdWx0cyBpbiB0ZXJtXG4gKiBmcmVxdWVuY3kgc2F0dXJhdGlvbi4gVGhlIGRlZmF1bHQgdmFsdWUgaXMgMS4yLiBTZXR0aW5nIHRoaXMgdG8gYSBoaWdoZXIgdmFsdWUgd2lsbCBnaXZlXG4gKiBzbG93ZXIgc2F0dXJhdGlvbiBsZXZlbHMsIGEgbG93ZXIgdmFsdWUgd2lsbCByZXN1bHQgaW4gcXVpY2tlciBzYXR1cmF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXIgLSBUaGUgdmFsdWUgdG8gc2V0IGZvciB0aGlzIHR1bmluZyBwYXJhbWV0ZXIuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuazEgPSBmdW5jdGlvbiAobnVtYmVyKSB7XG4gIHRoaXMuX2sxID0gbnVtYmVyXG59XG5cbi8qKlxuICogQWRkcyBhIGRvY3VtZW50IHRvIHRoZSBpbmRleC5cbiAqXG4gKiBCZWZvcmUgYWRkaW5nIGZpZWxkcyB0byB0aGUgaW5kZXggdGhlIGluZGV4IHNob3VsZCBoYXZlIGJlZW4gZnVsbHkgc2V0dXAsIHdpdGggdGhlIGRvY3VtZW50XG4gKiByZWYgYW5kIGFsbCBmaWVsZHMgdG8gaW5kZXggYWxyZWFkeSBoYXZpbmcgYmVlbiBzcGVjaWZpZWQuXG4gKlxuICogVGhlIGRvY3VtZW50IG11c3QgaGF2ZSBhIGZpZWxkIG5hbWUgYXMgc3BlY2lmaWVkIGJ5IHRoZSByZWYgKGJ5IGRlZmF1bHQgdGhpcyBpcyAnaWQnKSBhbmRcbiAqIGl0IHNob3VsZCBoYXZlIGFsbCBmaWVsZHMgZGVmaW5lZCBmb3IgaW5kZXhpbmcsIHRob3VnaCBudWxsIG9yIHVuZGVmaW5lZCB2YWx1ZXMgd2lsbCBub3RcbiAqIGNhdXNlIGVycm9ycy5cbiAqXG4gKiBFbnRpcmUgZG9jdW1lbnRzIGNhbiBiZSBib29zdGVkIGF0IGJ1aWxkIHRpbWUuIEFwcGx5aW5nIGEgYm9vc3QgdG8gYSBkb2N1bWVudCBpbmRpY2F0ZXMgdGhhdFxuICogdGhpcyBkb2N1bWVudCBzaG91bGQgcmFuayBoaWdoZXIgaW4gc2VhcmNoIHJlc3VsdHMgdGhhbiBvdGhlciBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGRvYyAtIFRoZSBkb2N1bWVudCB0byBhZGQgdG8gdGhlIGluZGV4LlxuICogQHBhcmFtIHtvYmplY3R9IGF0dHJpYnV0ZXMgLSBPcHRpb25hbCBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRvY3VtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFthdHRyaWJ1dGVzLmJvb3N0PTFdIC0gQm9vc3QgYXBwbGllZCB0byBhbGwgdGVybXMgd2l0aGluIHRoaXMgZG9jdW1lbnQuXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRvYywgYXR0cmlidXRlcykge1xuICB2YXIgZG9jUmVmID0gZG9jW3RoaXMuX3JlZl0sXG4gICAgICBmaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLl9maWVsZHMpXG5cbiAgdGhpcy5fZG9jdW1lbnRzW2RvY1JlZl0gPSBhdHRyaWJ1dGVzIHx8IHt9XG4gIHRoaXMuZG9jdW1lbnRDb3VudCArPSAxXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGROYW1lID0gZmllbGRzW2ldLFxuICAgICAgICBleHRyYWN0b3IgPSB0aGlzLl9maWVsZHNbZmllbGROYW1lXS5leHRyYWN0b3IsXG4gICAgICAgIGZpZWxkID0gZXh0cmFjdG9yID8gZXh0cmFjdG9yKGRvYykgOiBkb2NbZmllbGROYW1lXSxcbiAgICAgICAgdG9rZW5zID0gdGhpcy50b2tlbml6ZXIoZmllbGQsIHtcbiAgICAgICAgICBmaWVsZHM6IFtmaWVsZE5hbWVdXG4gICAgICAgIH0pLFxuICAgICAgICB0ZXJtcyA9IHRoaXMucGlwZWxpbmUucnVuKHRva2VucyksXG4gICAgICAgIGZpZWxkUmVmID0gbmV3IGx1bnIuRmllbGRSZWYgKGRvY1JlZiwgZmllbGROYW1lKSxcbiAgICAgICAgZmllbGRUZXJtcyA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICAgIHRoaXMuZmllbGRUZXJtRnJlcXVlbmNpZXNbZmllbGRSZWZdID0gZmllbGRUZXJtc1xuICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSA9IDBcblxuICAgIC8vIHN0b3JlIHRoZSBsZW5ndGggb2YgdGhpcyBmaWVsZCBmb3IgdGhpcyBkb2N1bWVudFxuICAgIHRoaXMuZmllbGRMZW5ndGhzW2ZpZWxkUmVmXSArPSB0ZXJtcy5sZW5ndGhcblxuICAgIC8vIGNhbGN1bGF0ZSB0ZXJtIGZyZXF1ZW5jaWVzIGZvciB0aGlzIGZpZWxkXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB0ZXJtcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXVxuXG4gICAgICBpZiAoZmllbGRUZXJtc1t0ZXJtXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmllbGRUZXJtc1t0ZXJtXSA9IDBcbiAgICAgIH1cblxuICAgICAgZmllbGRUZXJtc1t0ZXJtXSArPSAxXG5cbiAgICAgIC8vIGFkZCB0byBpbnZlcnRlZCBpbmRleFxuICAgICAgLy8gY3JlYXRlIGFuIGluaXRpYWwgcG9zdGluZyBpZiBvbmUgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKHRoaXMuaW52ZXJ0ZWRJbmRleFt0ZXJtXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHBvc3RpbmcgPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICAgIHBvc3RpbmdbXCJfaW5kZXhcIl0gPSB0aGlzLnRlcm1JbmRleFxuICAgICAgICB0aGlzLnRlcm1JbmRleCArPSAxXG5cbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBmaWVsZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICBwb3N0aW5nW2ZpZWxkc1trXV0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV0gPSBwb3N0aW5nXG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCBhbiBlbnRyeSBmb3IgdGhpcyB0ZXJtL2ZpZWxkTmFtZS9kb2NSZWYgdG8gdGhlIGludmVydGVkSW5kZXhcbiAgICAgIGlmICh0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmludmVydGVkSW5kZXhbdGVybV1bZmllbGROYW1lXVtkb2NSZWZdID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgICAgfVxuXG4gICAgICAvLyBzdG9yZSBhbGwgd2hpdGVsaXN0ZWQgbWV0YWRhdGEgYWJvdXQgdGhpcyB0b2tlbiBpbiB0aGVcbiAgICAgIC8vIGludmVydGVkIGluZGV4XG4gICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHRoaXMubWV0YWRhdGFXaGl0ZWxpc3QubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgdmFyIG1ldGFkYXRhS2V5ID0gdGhpcy5tZXRhZGF0YVdoaXRlbGlzdFtsXSxcbiAgICAgICAgICAgIG1ldGFkYXRhID0gdGVybS5tZXRhZGF0YVttZXRhZGF0YUtleV1cblxuICAgICAgICBpZiAodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0gPSBbXVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dW2ZpZWxkTmFtZV1bZG9jUmVmXVttZXRhZGF0YUtleV0ucHVzaChtZXRhZGF0YSlcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGF2ZXJhZ2UgZG9jdW1lbnQgbGVuZ3RoIGZvciB0aGlzIGluZGV4XG4gKlxuICogQHByaXZhdGVcbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5jYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzID0gZnVuY3Rpb24gKCkge1xuXG4gIHZhciBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkTGVuZ3RocyksXG4gICAgICBudW1iZXJPZkZpZWxkcyA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICBhY2N1bXVsYXRvciA9IHt9LFxuICAgICAgZG9jdW1lbnRzV2l0aEZpZWxkID0ge31cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mRmllbGRzOyBpKyspIHtcbiAgICB2YXIgZmllbGRSZWYgPSBsdW5yLkZpZWxkUmVmLmZyb21TdHJpbmcoZmllbGRSZWZzW2ldKSxcbiAgICAgICAgZmllbGQgPSBmaWVsZFJlZi5maWVsZE5hbWVcblxuICAgIGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gfHwgKGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gPSAwKVxuICAgIGRvY3VtZW50c1dpdGhGaWVsZFtmaWVsZF0gKz0gMVxuXG4gICAgYWNjdW11bGF0b3JbZmllbGRdIHx8IChhY2N1bXVsYXRvcltmaWVsZF0gPSAwKVxuICAgIGFjY3VtdWxhdG9yW2ZpZWxkXSArPSB0aGlzLmZpZWxkTGVuZ3Roc1tmaWVsZFJlZl1cbiAgfVxuXG4gIHZhciBmaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLl9maWVsZHMpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZmllbGROYW1lID0gZmllbGRzW2ldXG4gICAgYWNjdW11bGF0b3JbZmllbGROYW1lXSA9IGFjY3VtdWxhdG9yW2ZpZWxkTmFtZV0gLyBkb2N1bWVudHNXaXRoRmllbGRbZmllbGROYW1lXVxuICB9XG5cbiAgdGhpcy5hdmVyYWdlRmllbGRMZW5ndGggPSBhY2N1bXVsYXRvclxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIHZlY3RvciBzcGFjZSBtb2RlbCBvZiBldmVyeSBkb2N1bWVudCB1c2luZyBsdW5yLlZlY3RvclxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlRmllbGRWZWN0b3JzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZmllbGRWZWN0b3JzID0ge30sXG4gICAgICBmaWVsZFJlZnMgPSBPYmplY3Qua2V5cyh0aGlzLmZpZWxkVGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgIGZpZWxkUmVmc0xlbmd0aCA9IGZpZWxkUmVmcy5sZW5ndGgsXG4gICAgICB0ZXJtSWRmQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZFJlZnNMZW5ndGg7IGkrKykge1xuICAgIHZhciBmaWVsZFJlZiA9IGx1bnIuRmllbGRSZWYuZnJvbVN0cmluZyhmaWVsZFJlZnNbaV0pLFxuICAgICAgICBmaWVsZE5hbWUgPSBmaWVsZFJlZi5maWVsZE5hbWUsXG4gICAgICAgIGZpZWxkTGVuZ3RoID0gdGhpcy5maWVsZExlbmd0aHNbZmllbGRSZWZdLFxuICAgICAgICBmaWVsZFZlY3RvciA9IG5ldyBsdW5yLlZlY3RvcixcbiAgICAgICAgdGVybUZyZXF1ZW5jaWVzID0gdGhpcy5maWVsZFRlcm1GcmVxdWVuY2llc1tmaWVsZFJlZl0sXG4gICAgICAgIHRlcm1zID0gT2JqZWN0LmtleXModGVybUZyZXF1ZW5jaWVzKSxcbiAgICAgICAgdGVybXNMZW5ndGggPSB0ZXJtcy5sZW5ndGhcblxuXG4gICAgdmFyIGZpZWxkQm9vc3QgPSB0aGlzLl9maWVsZHNbZmllbGROYW1lXS5ib29zdCB8fCAxLFxuICAgICAgICBkb2NCb29zdCA9IHRoaXMuX2RvY3VtZW50c1tmaWVsZFJlZi5kb2NSZWZdLmJvb3N0IHx8IDFcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGVybXNMZW5ndGg7IGorKykge1xuICAgICAgdmFyIHRlcm0gPSB0ZXJtc1tqXSxcbiAgICAgICAgICB0ZiA9IHRlcm1GcmVxdWVuY2llc1t0ZXJtXSxcbiAgICAgICAgICB0ZXJtSW5kZXggPSB0aGlzLmludmVydGVkSW5kZXhbdGVybV0uX2luZGV4LFxuICAgICAgICAgIGlkZiwgc2NvcmUsIHNjb3JlV2l0aFByZWNpc2lvblxuXG4gICAgICBpZiAodGVybUlkZkNhY2hlW3Rlcm1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWRmID0gbHVuci5pZGYodGhpcy5pbnZlcnRlZEluZGV4W3Rlcm1dLCB0aGlzLmRvY3VtZW50Q291bnQpXG4gICAgICAgIHRlcm1JZGZDYWNoZVt0ZXJtXSA9IGlkZlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWRmID0gdGVybUlkZkNhY2hlW3Rlcm1dXG4gICAgICB9XG5cbiAgICAgIHNjb3JlID0gaWRmICogKCh0aGlzLl9rMSArIDEpICogdGYpIC8gKHRoaXMuX2sxICogKDEgLSB0aGlzLl9iICsgdGhpcy5fYiAqIChmaWVsZExlbmd0aCAvIHRoaXMuYXZlcmFnZUZpZWxkTGVuZ3RoW2ZpZWxkTmFtZV0pKSArIHRmKVxuICAgICAgc2NvcmUgKj0gZmllbGRCb29zdFxuICAgICAgc2NvcmUgKj0gZG9jQm9vc3RcbiAgICAgIHNjb3JlV2l0aFByZWNpc2lvbiA9IE1hdGgucm91bmQoc2NvcmUgKiAxMDAwKSAvIDEwMDBcbiAgICAgIC8vIENvbnZlcnRzIDEuMjM0NTY3ODkgdG8gMS4yMzQuXG4gICAgICAvLyBSZWR1Y2luZyB0aGUgcHJlY2lzaW9uIHNvIHRoYXQgdGhlIHZlY3RvcnMgdGFrZSB1cCBsZXNzXG4gICAgICAvLyBzcGFjZSB3aGVuIHNlcmlhbGlzZWQuIERvaW5nIGl0IG5vdyBzbyB0aGF0IHRoZXkgYmVoYXZlXG4gICAgICAvLyB0aGUgc2FtZSBiZWZvcmUgYW5kIGFmdGVyIHNlcmlhbGlzYXRpb24uIEFsc28sIHRoaXMgaXNcbiAgICAgIC8vIHRoZSBmYXN0ZXN0IGFwcHJvYWNoIHRvIHJlZHVjaW5nIGEgbnVtYmVyJ3MgcHJlY2lzaW9uIGluXG4gICAgICAvLyBKYXZhU2NyaXB0LlxuXG4gICAgICBmaWVsZFZlY3Rvci5pbnNlcnQodGVybUluZGV4LCBzY29yZVdpdGhQcmVjaXNpb24pXG4gICAgfVxuXG4gICAgZmllbGRWZWN0b3JzW2ZpZWxkUmVmXSA9IGZpZWxkVmVjdG9yXG4gIH1cblxuICB0aGlzLmZpZWxkVmVjdG9ycyA9IGZpZWxkVmVjdG9yc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiBzZXQgb2YgYWxsIHRva2VucyBpbiB0aGUgaW5kZXggdXNpbmcgbHVuci5Ub2tlblNldFxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmx1bnIuQnVpbGRlci5wcm90b3R5cGUuY3JlYXRlVG9rZW5TZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudG9rZW5TZXQgPSBsdW5yLlRva2VuU2V0LmZyb21BcnJheShcbiAgICBPYmplY3Qua2V5cyh0aGlzLmludmVydGVkSW5kZXgpLnNvcnQoKVxuICApXG59XG5cbi8qKlxuICogQnVpbGRzIHRoZSBpbmRleCwgY3JlYXRpbmcgYW4gaW5zdGFuY2Ugb2YgbHVuci5JbmRleC5cbiAqXG4gKiBUaGlzIGNvbXBsZXRlcyB0aGUgaW5kZXhpbmcgcHJvY2VzcyBhbmQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkXG4gKiBvbmNlIGFsbCBkb2N1bWVudHMgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBpbmRleC5cbiAqXG4gKiBAcmV0dXJucyB7bHVuci5JbmRleH1cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jYWxjdWxhdGVBdmVyYWdlRmllbGRMZW5ndGhzKClcbiAgdGhpcy5jcmVhdGVGaWVsZFZlY3RvcnMoKVxuICB0aGlzLmNyZWF0ZVRva2VuU2V0KClcblxuICByZXR1cm4gbmV3IGx1bnIuSW5kZXgoe1xuICAgIGludmVydGVkSW5kZXg6IHRoaXMuaW52ZXJ0ZWRJbmRleCxcbiAgICBmaWVsZFZlY3RvcnM6IHRoaXMuZmllbGRWZWN0b3JzLFxuICAgIHRva2VuU2V0OiB0aGlzLnRva2VuU2V0LFxuICAgIGZpZWxkczogT2JqZWN0LmtleXModGhpcy5fZmllbGRzKSxcbiAgICBwaXBlbGluZTogdGhpcy5zZWFyY2hQaXBlbGluZVxuICB9KVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYSBwbHVnaW4gdG8gdGhlIGluZGV4IGJ1aWxkZXIuXG4gKlxuICogQSBwbHVnaW4gaXMgYSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aXRoIHRoZSBpbmRleCBidWlsZGVyIGFzIGl0cyBjb250ZXh0LlxuICogUGx1Z2lucyBjYW4gYmUgdXNlZCB0byBjdXN0b21pc2Ugb3IgZXh0ZW5kIHRoZSBiZWhhdmlvdXIgb2YgdGhlIGluZGV4XG4gKiBpbiBzb21lIHdheS4gQSBwbHVnaW4gaXMganVzdCBhIGZ1bmN0aW9uLCB0aGF0IGVuY2Fwc3VsYXRlZCB0aGUgY3VzdG9tXG4gKiBiZWhhdmlvdXIgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB3aGVuIGJ1aWxkaW5nIHRoZSBpbmRleC5cbiAqXG4gKiBUaGUgcGx1Z2luIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGluZGV4IGJ1aWxkZXIgYXMgaXRzIGFyZ3VtZW50LCBhZGRpdGlvbmFsXG4gKiBhcmd1bWVudHMgY2FuIGFsc28gYmUgcGFzc2VkIHdoZW4gY2FsbGluZyB1c2UuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICogd2l0aCB0aGUgaW5kZXggYnVpbGRlciBhcyBpdHMgY29udGV4dC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwbHVnaW4gVGhlIHBsdWdpbiB0byBhcHBseS5cbiAqL1xubHVuci5CdWlsZGVyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXG4gIGFyZ3MudW5zaGlmdCh0aGlzKVxuICBmbi5hcHBseSh0aGlzLCBhcmdzKVxufVxuLyoqXG4gKiBDb250YWlucyBhbmQgY29sbGVjdHMgbWV0YWRhdGEgYWJvdXQgYSBtYXRjaGluZyBkb2N1bWVudC5cbiAqIEEgc2luZ2xlIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIGlzIHJldHVybmVkIGFzIHBhcnQgb2YgZXZlcnlcbiAqIGx1bnIuSW5kZXh+UmVzdWx0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBtZXRhZGF0YSAtIEEgY2xvbmVkIGNvbGxlY3Rpb24gb2YgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZG9jdW1lbnQuXG4gKiBAc2VlIHtAbGluayBsdW5yLkluZGV4flJlc3VsdH1cbiAqL1xubHVuci5NYXRjaERhdGEgPSBmdW5jdGlvbiAodGVybSwgZmllbGQsIG1ldGFkYXRhKSB7XG4gIHZhciBjbG9uZWRNZXRhZGF0YSA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBtZXRhZGF0YUtleXMgPSBPYmplY3Qua2V5cyhtZXRhZGF0YSB8fCB7fSlcblxuICAvLyBDbG9uaW5nIHRoZSBtZXRhZGF0YSB0byBwcmV2ZW50IHRoZSBvcmlnaW5hbFxuICAvLyBiZWluZyBtdXRhdGVkIGR1cmluZyBtYXRjaCBkYXRhIGNvbWJpbmF0aW9uLlxuICAvLyBNZXRhZGF0YSBpcyBrZXB0IGluIGFuIGFycmF5IHdpdGhpbiB0aGUgaW52ZXJ0ZWRcbiAgLy8gaW5kZXggc28gY2xvbmluZyB0aGUgZGF0YSBjYW4gYmUgZG9uZSB3aXRoXG4gIC8vIEFycmF5I3NsaWNlXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YWRhdGFLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IG1ldGFkYXRhS2V5c1tpXVxuICAgIGNsb25lZE1ldGFkYXRhW2tleV0gPSBtZXRhZGF0YVtrZXldLnNsaWNlKClcbiAgfVxuXG4gIHRoaXMubWV0YWRhdGEgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgaWYgKHRlcm0gIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBjbG9uZWRNZXRhZGF0YVxuICB9XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgbHVuci5NYXRjaERhdGEgd2lsbCBiZSBjcmVhdGVkIGZvciBldmVyeSB0ZXJtIHRoYXQgbWF0Y2hlcyBhXG4gKiBkb2N1bWVudC4gSG93ZXZlciBvbmx5IG9uZSBpbnN0YW5jZSBpcyByZXF1aXJlZCBpbiBhIGx1bnIuSW5kZXh+UmVzdWx0LiBUaGlzXG4gKiBtZXRob2QgY29tYmluZXMgbWV0YWRhdGEgZnJvbSBhbm90aGVyIGluc3RhbmNlIG9mIGx1bnIuTWF0Y2hEYXRhIHdpdGggdGhpc1xuICogb2JqZWN0cyBtZXRhZGF0YS5cbiAqXG4gKiBAcGFyYW0ge2x1bnIuTWF0Y2hEYXRhfSBvdGhlck1hdGNoRGF0YSAtIEFub3RoZXIgaW5zdGFuY2Ugb2YgbWF0Y2ggZGF0YSB0byBtZXJnZSB3aXRoIHRoaXMgb25lLlxuICogQHNlZSB7QGxpbmsgbHVuci5JbmRleH5SZXN1bHR9XG4gKi9cbmx1bnIuTWF0Y2hEYXRhLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24gKG90aGVyTWF0Y2hEYXRhKSB7XG4gIHZhciB0ZXJtcyA9IE9iamVjdC5rZXlzKG90aGVyTWF0Y2hEYXRhLm1ldGFkYXRhKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGVybXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGVybSA9IHRlcm1zW2ldLFxuICAgICAgICBmaWVsZHMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXSlcblxuICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dID09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXSA9IE9iamVjdC5jcmVhdGUobnVsbClcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZpZWxkcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2pdLFxuICAgICAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0pXG5cbiAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1trXVxuXG4gICAgICAgIGlmICh0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSBvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdW2tleV0gPSB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldLmNvbmNhdChvdGhlck1hdGNoRGF0YS5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSlcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWRkIG1ldGFkYXRhIGZvciBhIHRlcm0vZmllbGQgcGFpciB0byB0aGlzIGluc3RhbmNlIG9mIG1hdGNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlcm0gLSBUaGUgdGVybSB0aGlzIG1hdGNoIGRhdGEgaXMgYXNzb2NpYXRlZCB3aXRoXG4gKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgZmllbGQgaW4gd2hpY2ggdGhlIHRlcm0gd2FzIGZvdW5kXG4gKiBAcGFyYW0ge29iamVjdH0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgcmVjb3JkZWQgYWJvdXQgdGhpcyB0ZXJtIGluIHRoaXMgZmllbGRcbiAqL1xubHVuci5NYXRjaERhdGEucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZXJtLCBmaWVsZCwgbWV0YWRhdGEpIHtcbiAgaWYgKCEodGVybSBpbiB0aGlzLm1ldGFkYXRhKSkge1xuICAgIHRoaXMubWV0YWRhdGFbdGVybV0gPSBPYmplY3QuY3JlYXRlKG51bGwpXG4gICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF0gPSBtZXRhZGF0YVxuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKCEoZmllbGQgaW4gdGhpcy5tZXRhZGF0YVt0ZXJtXSkpIHtcbiAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXSA9IG1ldGFkYXRhXG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgbWV0YWRhdGFLZXlzID0gT2JqZWN0LmtleXMobWV0YWRhdGEpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhZGF0YUtleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gbWV0YWRhdGFLZXlzW2ldXG5cbiAgICBpZiAoa2V5IGluIHRoaXMubWV0YWRhdGFbdGVybV1bZmllbGRdKSB7XG4gICAgICB0aGlzLm1ldGFkYXRhW3Rlcm1dW2ZpZWxkXVtrZXldID0gdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XS5jb25jYXQobWV0YWRhdGFba2V5XSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tZXRhZGF0YVt0ZXJtXVtmaWVsZF1ba2V5XSA9IG1ldGFkYXRhW2tleV1cbiAgICB9XG4gIH1cbn1cbi8qKlxuICogQSBsdW5yLlF1ZXJ5IHByb3ZpZGVzIGEgcHJvZ3JhbW1hdGljIHdheSBvZiBkZWZpbmluZyBxdWVyaWVzIHRvIGJlIHBlcmZvcm1lZFxuICogYWdhaW5zdCBhIHtAbGluayBsdW5yLkluZGV4fS5cbiAqXG4gKiBQcmVmZXIgY29uc3RydWN0aW5nIGEgbHVuci5RdWVyeSB1c2luZyB0aGUge0BsaW5rIGx1bnIuSW5kZXgjcXVlcnl9IG1ldGhvZFxuICogc28gdGhlIHF1ZXJ5IG9iamVjdCBpcyBwcmUtaW5pdGlhbGl6ZWQgd2l0aCB0aGUgcmlnaHQgaW5kZXggZmllbGRzLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHByb3BlcnR5IHtsdW5yLlF1ZXJ5fkNsYXVzZVtdfSBjbGF1c2VzIC0gQW4gYXJyYXkgb2YgcXVlcnkgY2xhdXNlcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW119IGFsbEZpZWxkcyAtIEFuIGFycmF5IG9mIGFsbCBhdmFpbGFibGUgZmllbGRzIGluIGEgbHVuci5JbmRleC5cbiAqL1xubHVuci5RdWVyeSA9IGZ1bmN0aW9uIChhbGxGaWVsZHMpIHtcbiAgdGhpcy5jbGF1c2VzID0gW11cbiAgdGhpcy5hbGxGaWVsZHMgPSBhbGxGaWVsZHNcbn1cblxuLyoqXG4gKiBDb25zdGFudHMgZm9yIGluZGljYXRpbmcgd2hhdCBraW5kIG9mIGF1dG9tYXRpYyB3aWxkY2FyZCBpbnNlcnRpb24gd2lsbCBiZSB1c2VkIHdoZW4gY29uc3RydWN0aW5nIGEgcXVlcnkgY2xhdXNlLlxuICpcbiAqIFRoaXMgYWxsb3dzIHdpbGRjYXJkcyB0byBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSB0ZXJtIHdpdGhvdXQgaGF2aW5nIHRvIG1hbnVhbGx5IGRvIGFueSBzdHJpbmdcbiAqIGNvbmNhdGVuYXRpb24uXG4gKlxuICogVGhlIHdpbGRjYXJkIGNvbnN0YW50cyBjYW4gYmUgYml0d2lzZSBjb21iaW5lZCB0byBzZWxlY3QgYm90aCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aWxkY2FyZHMuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAZGVmYXVsdFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLk5PTkUgLSBUaGUgdGVybSB3aWxsIGhhdmUgbm8gd2lsZGNhcmRzIGluc2VydGVkLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGJlaGF2aW91clxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLkxFQURJTkcgLSBQcmVwZW5kIHRoZSB0ZXJtIHdpdGggYSB3aWxkY2FyZCwgdW5sZXNzIGEgbGVhZGluZyB3aWxkY2FyZCBhbHJlYWR5IGV4aXN0c1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpbGRjYXJkLlRSQUlMSU5HIC0gQXBwZW5kIGEgd2lsZGNhcmQgdG8gdGhlIHRlcm0sIHVubGVzcyBhIHRyYWlsaW5nIHdpbGRjYXJkIGFscmVhZHkgZXhpc3RzXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjY2xhdXNlXG4gKiBAc2VlIGx1bnIuUXVlcnkjdGVybVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywgeyB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElORyB9KVxuICogQGV4YW1wbGUgPGNhcHRpb24+cXVlcnkgdGVybSB3aXRoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybSgnZm9vJywge1xuICogICB3aWxkY2FyZDogbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HIHwgbHVuci5RdWVyeS53aWxkY2FyZC5UUkFJTElOR1xuICogfSlcbiAqL1xuXG5sdW5yLlF1ZXJ5LndpbGRjYXJkID0gbmV3IFN0cmluZyAoXCIqXCIpXG5sdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkUgPSAwXG5sdW5yLlF1ZXJ5LndpbGRjYXJkLkxFQURJTkcgPSAxXG5sdW5yLlF1ZXJ5LndpbGRjYXJkLlRSQUlMSU5HID0gMlxuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgaW5kaWNhdGluZyB3aGF0IGtpbmQgb2YgcHJlc2VuY2UgYSB0ZXJtIG11c3QgaGF2ZSBpbiBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5I3Rlcm1cbiAqIEBleGFtcGxlIDxjYXB0aW9uPnF1ZXJ5IHRlcm0gd2l0aCByZXF1aXJlZCBwcmVzZW5jZTwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oJ2ZvbycsIHsgcHJlc2VuY2U6IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRUQgfSlcbiAqL1xubHVuci5RdWVyeS5wcmVzZW5jZSA9IHtcbiAgLyoqXG4gICAqIFRlcm0ncyBwcmVzZW5jZSBpbiBhIGRvY3VtZW50IGlzIG9wdGlvbmFsLCB0aGlzIGlzIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgKi9cbiAgT1BUSU9OQUw6IDEsXG5cbiAgLyoqXG4gICAqIFRlcm0ncyBwcmVzZW5jZSBpbiBhIGRvY3VtZW50IGlzIHJlcXVpcmVkLCBkb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpblxuICAgKiB0aGlzIHRlcm0gd2lsbCBub3QgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBSRVFVSVJFRDogMixcblxuICAvKipcbiAgICogVGVybSdzIHByZXNlbmNlIGluIGEgZG9jdW1lbnQgaXMgcHJvaGliaXRlZCwgZG9jdW1lbnRzIHRoYXQgZG8gY29udGFpblxuICAgKiB0aGlzIHRlcm0gd2lsbCBub3QgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBQUk9ISUJJVEVEOiAzXG59XG5cbi8qKlxuICogQSBzaW5nbGUgY2xhdXNlIGluIGEge0BsaW5rIGx1bnIuUXVlcnl9IGNvbnRhaW5zIGEgdGVybSBhbmQgZGV0YWlscyBvbiBob3cgdG9cbiAqIG1hdGNoIHRoYXQgdGVybSBhZ2FpbnN0IGEge0BsaW5rIGx1bnIuSW5kZXh9LlxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfSBmaWVsZHMgLSBUaGUgZmllbGRzIGluIGFuIGluZGV4IHRoaXMgY2xhdXNlIHNob3VsZCBiZSBtYXRjaGVkIGFnYWluc3QuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2Jvb3N0PTFdIC0gQW55IGJvb3N0IHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgd2hlbiBtYXRjaGluZyB0aGlzIGNsYXVzZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZWRpdERpc3RhbmNlXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgZnV6enkgbWF0Y2hpbmcgYXBwbGllZCwgYW5kIGhvdyBmdXp6eSB0aGUgbWF0Y2ggc2hvdWxkIGJlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlUGlwZWxpbmVdIC0gV2hldGhlciB0aGUgdGVybSBzaG91bGQgYmUgcGFzc2VkIHRocm91Z2ggdGhlIHNlYXJjaCBwaXBlbGluZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbd2lsZGNhcmQ9bHVuci5RdWVyeS53aWxkY2FyZC5OT05FXSAtIFdoZXRoZXIgdGhlIHRlcm0gc2hvdWxkIGhhdmUgd2lsZGNhcmRzIGFwcGVuZGVkIG9yIHByZXBlbmRlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlc2VuY2U9bHVuci5RdWVyeS5wcmVzZW5jZS5PUFRJT05BTF0gLSBUaGUgdGVybXMgcHJlc2VuY2UgaW4gYW55IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqL1xuXG4vKipcbiAqIEFkZHMgYSB7QGxpbmsgbHVuci5RdWVyeX5DbGF1c2V9IHRvIHRoaXMgcXVlcnkuXG4gKlxuICogVW5sZXNzIHRoZSBjbGF1c2UgY29udGFpbnMgdGhlIGZpZWxkcyB0byBiZSBtYXRjaGVkIGFsbCBmaWVsZHMgd2lsbCBiZSBtYXRjaGVkLiBJbiBhZGRpdGlvblxuICogYSBkZWZhdWx0IGJvb3N0IG9mIDEgaXMgYXBwbGllZCB0byB0aGUgY2xhdXNlLlxuICpcbiAqIEBwYXJhbSB7bHVuci5RdWVyeX5DbGF1c2V9IGNsYXVzZSAtIFRoZSBjbGF1c2UgdG8gYWRkIHRvIHRoaXMgcXVlcnkuXG4gKiBAc2VlIGx1bnIuUXVlcnl+Q2xhdXNlXG4gKiBAcmV0dXJucyB7bHVuci5RdWVyeX1cbiAqL1xubHVuci5RdWVyeS5wcm90b3R5cGUuY2xhdXNlID0gZnVuY3Rpb24gKGNsYXVzZSkge1xuICBpZiAoISgnZmllbGRzJyBpbiBjbGF1c2UpKSB7XG4gICAgY2xhdXNlLmZpZWxkcyA9IHRoaXMuYWxsRmllbGRzXG4gIH1cblxuICBpZiAoISgnYm9vc3QnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UuYm9vc3QgPSAxXG4gIH1cblxuICBpZiAoISgndXNlUGlwZWxpbmUnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UudXNlUGlwZWxpbmUgPSB0cnVlXG4gIH1cblxuICBpZiAoISgnd2lsZGNhcmQnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2Uud2lsZGNhcmQgPSBsdW5yLlF1ZXJ5LndpbGRjYXJkLk5PTkVcbiAgfVxuXG4gIGlmICgoY2xhdXNlLndpbGRjYXJkICYgbHVuci5RdWVyeS53aWxkY2FyZC5MRUFESU5HKSAmJiAoY2xhdXNlLnRlcm0uY2hhckF0KDApICE9IGx1bnIuUXVlcnkud2lsZGNhcmQpKSB7XG4gICAgY2xhdXNlLnRlcm0gPSBcIipcIiArIGNsYXVzZS50ZXJtXG4gIH1cblxuICBpZiAoKGNsYXVzZS53aWxkY2FyZCAmIGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkcpICYmIChjbGF1c2UudGVybS5zbGljZSgtMSkgIT0gbHVuci5RdWVyeS53aWxkY2FyZCkpIHtcbiAgICBjbGF1c2UudGVybSA9IFwiXCIgKyBjbGF1c2UudGVybSArIFwiKlwiXG4gIH1cblxuICBpZiAoISgncHJlc2VuY2UnIGluIGNsYXVzZSkpIHtcbiAgICBjbGF1c2UucHJlc2VuY2UgPSBsdW5yLlF1ZXJ5LnByZXNlbmNlLk9QVElPTkFMXG4gIH1cblxuICB0aGlzLmNsYXVzZXMucHVzaChjbGF1c2UpXG5cbiAgcmV0dXJuIHRoaXNcbn1cblxuLyoqXG4gKiBBIG5lZ2F0ZWQgcXVlcnkgaXMgb25lIGluIHdoaWNoIGV2ZXJ5IGNsYXVzZSBoYXMgYSBwcmVzZW5jZSBvZlxuICogcHJvaGliaXRlZC4gVGhlc2UgcXVlcmllcyByZXF1aXJlIHNvbWUgc3BlY2lhbCBwcm9jZXNzaW5nIHRvIHJldHVyblxuICogdGhlIGV4cGVjdGVkIHJlc3VsdHMuXG4gKlxuICogQHJldHVybnMgYm9vbGVhblxuICovXG5sdW5yLlF1ZXJ5LnByb3RvdHlwZS5pc05lZ2F0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jbGF1c2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRoaXMuY2xhdXNlc1tpXS5wcmVzZW5jZSAhPSBsdW5yLlF1ZXJ5LnByZXNlbmNlLlBST0hJQklURUQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbi8qKlxuICogQWRkcyBhIHRlcm0gdG8gdGhlIGN1cnJlbnQgcXVlcnksIHVuZGVyIHRoZSBjb3ZlcnMgdGhpcyB3aWxsIGNyZWF0ZSBhIHtAbGluayBsdW5yLlF1ZXJ5fkNsYXVzZX1cbiAqIHRvIHRoZSBsaXN0IG9mIGNsYXVzZXMgdGhhdCBtYWtlIHVwIHRoaXMgcXVlcnkuXG4gKlxuICogVGhlIHRlcm0gaXMgdXNlZCBhcyBpcywgaS5lLiBubyB0b2tlbml6YXRpb24gd2lsbCBiZSBwZXJmb3JtZWQgYnkgdGhpcyBtZXRob2QuIEluc3RlYWQgY29udmVyc2lvblxuICogdG8gYSB0b2tlbiBvciB0b2tlbi1saWtlIHN0cmluZyBzaG91bGQgYmUgZG9uZSBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAqXG4gKiBUaGUgdGVybSB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHN0cmluZyBieSBjYWxsaW5nIGB0b1N0cmluZ2AuIE11bHRpcGxlIHRlcm1zIGNhbiBiZSBwYXNzZWQgYXMgYW5cbiAqIGFycmF5LCBlYWNoIHRlcm0gaW4gdGhlIGFycmF5IHdpbGwgc2hhcmUgdGhlIHNhbWUgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdHxvYmplY3RbXX0gdGVybSAtIFRoZSB0ZXJtKHMpIHRvIGFkZCB0byB0aGUgcXVlcnkuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gQW55IGFkZGl0aW9uYWwgcHJvcGVydGllcyB0byBhZGQgdG8gdGhlIHF1ZXJ5IGNsYXVzZS5cbiAqIEByZXR1cm5zIHtsdW5yLlF1ZXJ5fVxuICogQHNlZSBsdW5yLlF1ZXJ5I2NsYXVzZVxuICogQHNlZSBsdW5yLlF1ZXJ5fkNsYXVzZVxuICogQGV4YW1wbGUgPGNhcHRpb24+YWRkaW5nIGEgc2luZ2xlIHRlcm0gdG8gYSBxdWVyeTwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0oXCJmb29cIilcbiAqIEBleGFtcGxlIDxjYXB0aW9uPmFkZGluZyBhIHNpbmdsZSB0ZXJtIHRvIGEgcXVlcnkgYW5kIHNwZWNpZnlpbmcgc2VhcmNoIGZpZWxkcywgdGVybSBib29zdCBhbmQgYXV0b21hdGljIHRyYWlsaW5nIHdpbGRjYXJkPC9jYXB0aW9uPlxuICogcXVlcnkudGVybShcImZvb1wiLCB7XG4gKiAgIGZpZWxkczogW1widGl0bGVcIl0sXG4gKiAgIGJvb3N0OiAxMCxcbiAqICAgd2lsZGNhcmQ6IGx1bnIuUXVlcnkud2lsZGNhcmQuVFJBSUxJTkdcbiAqIH0pXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj51c2luZyBsdW5yLnRva2VuaXplciB0byBjb252ZXJ0IGEgc3RyaW5nIHRvIHRva2VucyBiZWZvcmUgdXNpbmcgdGhlbSBhcyB0ZXJtczwvY2FwdGlvbj5cbiAqIHF1ZXJ5LnRlcm0obHVuci50b2tlbml6ZXIoXCJmb28gYmFyXCIpKVxuICovXG5sdW5yLlF1ZXJ5LnByb3RvdHlwZS50ZXJtID0gZnVuY3Rpb24gKHRlcm0sIG9wdGlvbnMpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGVybSkpIHtcbiAgICB0ZXJtLmZvckVhY2goZnVuY3Rpb24gKHQpIHsgdGhpcy50ZXJtKHQsIGx1bnIudXRpbHMuY2xvbmUob3B0aW9ucykpIH0sIHRoaXMpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHZhciBjbGF1c2UgPSBvcHRpb25zIHx8IHt9XG4gIGNsYXVzZS50ZXJtID0gdGVybS50b1N0cmluZygpXG5cbiAgdGhpcy5jbGF1c2UoY2xhdXNlKVxuXG4gIHJldHVybiB0aGlzXG59XG5sdW5yLlF1ZXJ5UGFyc2VFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBzdGFydCwgZW5kKSB7XG4gIHRoaXMubmFtZSA9IFwiUXVlcnlQYXJzZUVycm9yXCJcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZVxuICB0aGlzLnN0YXJ0ID0gc3RhcnRcbiAgdGhpcy5lbmQgPSBlbmRcbn1cblxubHVuci5RdWVyeVBhcnNlRXJyb3IucHJvdG90eXBlID0gbmV3IEVycm9yXG5sdW5yLlF1ZXJ5TGV4ZXIgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHRoaXMubGV4ZW1lcyA9IFtdXG4gIHRoaXMuc3RyID0gc3RyXG4gIHRoaXMubGVuZ3RoID0gc3RyLmxlbmd0aFxuICB0aGlzLnBvcyA9IDBcbiAgdGhpcy5zdGFydCA9IDBcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zID0gW11cbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0XG5cbiAgd2hpbGUgKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSh0aGlzKVxuICB9XG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuc2xpY2VTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdWJTbGljZXMgPSBbXSxcbiAgICAgIHNsaWNlU3RhcnQgPSB0aGlzLnN0YXJ0LFxuICAgICAgc2xpY2VFbmQgPSB0aGlzLnBvc1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgc2xpY2VFbmQgPSB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnNbaV1cbiAgICBzdWJTbGljZXMucHVzaCh0aGlzLnN0ci5zbGljZShzbGljZVN0YXJ0LCBzbGljZUVuZCkpXG4gICAgc2xpY2VTdGFydCA9IHNsaWNlRW5kICsgMVxuICB9XG5cbiAgc3ViU2xpY2VzLnB1c2godGhpcy5zdHIuc2xpY2Uoc2xpY2VTdGFydCwgdGhpcy5wb3MpKVxuICB0aGlzLmVzY2FwZUNoYXJQb3NpdGlvbnMubGVuZ3RoID0gMFxuXG4gIHJldHVybiBzdWJTbGljZXMuam9pbignJylcbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdGhpcy5sZXhlbWVzLnB1c2goe1xuICAgIHR5cGU6IHR5cGUsXG4gICAgc3RyOiB0aGlzLnNsaWNlU3RyaW5nKCksXG4gICAgc3RhcnQ6IHRoaXMuc3RhcnQsXG4gICAgZW5kOiB0aGlzLnBvc1xuICB9KVxuXG4gIHRoaXMuc3RhcnQgPSB0aGlzLnBvc1xufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLmVzY2FwZUNoYXJhY3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lc2NhcGVDaGFyUG9zaXRpb25zLnB1c2godGhpcy5wb3MgLSAxKVxuICB0aGlzLnBvcyArPSAxXG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMucG9zID49IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5FT1NcbiAgfVxuXG4gIHZhciBjaGFyID0gdGhpcy5zdHIuY2hhckF0KHRoaXMucG9zKVxuICB0aGlzLnBvcyArPSAxXG4gIHJldHVybiBjaGFyXG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnBvcyAtIHRoaXMuc3RhcnRcbn1cblxubHVuci5RdWVyeUxleGVyLnByb3RvdHlwZS5pZ25vcmUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnN0YXJ0ID09IHRoaXMucG9zKSB7XG4gICAgdGhpcy5wb3MgKz0gMVxuICB9XG5cbiAgdGhpcy5zdGFydCA9IHRoaXMucG9zXG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYmFja3VwID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnBvcyAtPSAxXG59XG5cbmx1bnIuUXVlcnlMZXhlci5wcm90b3R5cGUuYWNjZXB0RGlnaXRSdW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjaGFyLCBjaGFyQ29kZVxuXG4gIGRvIHtcbiAgICBjaGFyID0gdGhpcy5uZXh0KClcbiAgICBjaGFyQ29kZSA9IGNoYXIuY2hhckNvZGVBdCgwKVxuICB9IHdoaWxlIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpXG5cbiAgaWYgKGNoYXIgIT0gbHVuci5RdWVyeUxleGVyLkVPUykge1xuICAgIHRoaXMuYmFja3VwKClcbiAgfVxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIucHJvdG90eXBlLm1vcmUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLnBvcyA8IHRoaXMubGVuZ3RoXG59XG5cbmx1bnIuUXVlcnlMZXhlci5FT1MgPSAnRU9TJ1xubHVuci5RdWVyeUxleGVyLkZJRUxEID0gJ0ZJRUxEJ1xubHVuci5RdWVyeUxleGVyLlRFUk0gPSAnVEVSTSdcbmx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFID0gJ0VESVRfRElTVEFOQ0UnXG5sdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QgPSAnQk9PU1QnXG5sdW5yLlF1ZXJ5TGV4ZXIuUFJFU0VOQ0UgPSAnUFJFU0VOQ0UnXG5cbmx1bnIuUXVlcnlMZXhlci5sZXhGaWVsZCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICBsZXhlci5iYWNrdXAoKVxuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5GSUVMRClcbiAgbGV4ZXIuaWdub3JlKClcbiAgcmV0dXJuIGx1bnIuUXVlcnlMZXhlci5sZXhUZXh0XG59XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhUZXJtID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMSkge1xuICAgIGxleGVyLmJhY2t1cCgpXG4gICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSlcbiAgfVxuXG4gIGxleGVyLmlnbm9yZSgpXG5cbiAgaWYgKGxleGVyLm1vcmUoKSkge1xuICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dFxuICB9XG59XG5cbmx1bnIuUXVlcnlMZXhlci5sZXhFZGl0RGlzdGFuY2UgPSBmdW5jdGlvbiAobGV4ZXIpIHtcbiAgbGV4ZXIuaWdub3JlKClcbiAgbGV4ZXIuYWNjZXB0RGlnaXRSdW4oKVxuICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5FRElUX0RJU1RBTkNFKVxuICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHRcbn1cblxubHVuci5RdWVyeUxleGVyLmxleEJvb3N0ID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGxleGVyLmlnbm9yZSgpXG4gIGxleGVyLmFjY2VwdERpZ2l0UnVuKClcbiAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1QpXG4gIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dFxufVxuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4RU9TID0gZnVuY3Rpb24gKGxleGVyKSB7XG4gIGlmIChsZXhlci53aWR0aCgpID4gMCkge1xuICAgIGxleGVyLmVtaXQobHVuci5RdWVyeUxleGVyLlRFUk0pXG4gIH1cbn1cblxuLy8gVGhpcyBtYXRjaGVzIHRoZSBzZXBhcmF0b3IgdXNlZCB3aGVuIHRva2VuaXNpbmcgZmllbGRzXG4vLyB3aXRoaW4gYSBkb2N1bWVudC4gVGhlc2Ugc2hvdWxkIG1hdGNoIG90aGVyd2lzZSBpdCBpc1xuLy8gbm90IHBvc3NpYmxlIHRvIHNlYXJjaCBmb3Igc29tZSB0b2tlbnMgd2l0aGluIGEgZG9jdW1lbnQuXG4vL1xuLy8gSXQgaXMgcG9zc2libGUgZm9yIHRoZSB1c2VyIHRvIGNoYW5nZSB0aGUgc2VwYXJhdG9yIG9uIHRoZVxuLy8gdG9rZW5pemVyIHNvIGl0IF9taWdodF8gY2xhc2ggd2l0aCBhbnkgb3RoZXIgb2YgdGhlIHNwZWNpYWxcbi8vIGNoYXJhY3RlcnMgYWxyZWFkeSB1c2VkIHdpdGhpbiB0aGUgc2VhcmNoIHN0cmluZywgZS5nLiA6LlxuLy9cbi8vIFRoaXMgbWVhbnMgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBjaGFuZ2UgdGhlIHNlcGFyYXRvciBpblxuLy8gc3VjaCBhIHdheSB0aGF0IG1ha2VzIHNvbWUgd29yZHMgdW5zZWFyY2hhYmxlIHVzaW5nIGEgc2VhcmNoXG4vLyBzdHJpbmcuXG5sdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvciA9IGx1bnIudG9rZW5pemVyLnNlcGFyYXRvclxuXG5sdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dCA9IGZ1bmN0aW9uIChsZXhlcikge1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHZhciBjaGFyID0gbGV4ZXIubmV4dCgpXG5cbiAgICBpZiAoY2hhciA9PSBsdW5yLlF1ZXJ5TGV4ZXIuRU9TKSB7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEVPU1xuICAgIH1cblxuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXIgaXMgJ1xcJ1xuICAgIGlmIChjaGFyLmNoYXJDb2RlQXQoMCkgPT0gOTIpIHtcbiAgICAgIGxleGVyLmVzY2FwZUNoYXJhY3RlcigpXG4gICAgICBjb250aW51ZVxuICAgIH1cblxuICAgIGlmIChjaGFyID09IFwiOlwiKSB7XG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleEZpZWxkXG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCJ+XCIpIHtcbiAgICAgIGxleGVyLmJhY2t1cCgpXG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4RWRpdERpc3RhbmNlXG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT0gXCJeXCIpIHtcbiAgICAgIGxleGVyLmJhY2t1cCgpXG4gICAgICBpZiAobGV4ZXIud2lkdGgoKSA+IDApIHtcbiAgICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuVEVSTSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4Qm9vc3RcbiAgICB9XG5cbiAgICAvLyBcIitcIiBpbmRpY2F0ZXMgdGVybSBwcmVzZW5jZSBpcyByZXF1aXJlZFxuICAgIC8vIGNoZWNraW5nIGZvciBsZW5ndGggdG8gZW5zdXJlIHRoYXQgb25seVxuICAgIC8vIGxlYWRpbmcgXCIrXCIgYXJlIGNvbnNpZGVyZWRcbiAgICBpZiAoY2hhciA9PSBcIitcIiAmJiBsZXhlci53aWR0aCgpID09PSAxKSB7XG4gICAgICBsZXhlci5lbWl0KGx1bnIuUXVlcnlMZXhlci5QUkVTRU5DRSlcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGV4dFxuICAgIH1cblxuICAgIC8vIFwiLVwiIGluZGljYXRlcyB0ZXJtIHByZXNlbmNlIGlzIHByb2hpYml0ZWRcbiAgICAvLyBjaGVja2luZyBmb3IgbGVuZ3RoIHRvIGVuc3VyZSB0aGF0IG9ubHlcbiAgICAvLyBsZWFkaW5nIFwiLVwiIGFyZSBjb25zaWRlcmVkXG4gICAgaWYgKGNoYXIgPT0gXCItXCIgJiYgbGV4ZXIud2lkdGgoKSA9PT0gMSkge1xuICAgICAgbGV4ZXIuZW1pdChsdW5yLlF1ZXJ5TGV4ZXIuUFJFU0VOQ0UpXG4gICAgICByZXR1cm4gbHVuci5RdWVyeUxleGVyLmxleFRleHRcbiAgICB9XG5cbiAgICBpZiAoY2hhci5tYXRjaChsdW5yLlF1ZXJ5TGV4ZXIudGVybVNlcGFyYXRvcikpIHtcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5TGV4ZXIubGV4VGVybVxuICAgIH1cbiAgfVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyID0gZnVuY3Rpb24gKHN0ciwgcXVlcnkpIHtcbiAgdGhpcy5sZXhlciA9IG5ldyBsdW5yLlF1ZXJ5TGV4ZXIgKHN0cilcbiAgdGhpcy5xdWVyeSA9IHF1ZXJ5XG4gIHRoaXMuY3VycmVudENsYXVzZSA9IHt9XG4gIHRoaXMubGV4ZW1lSWR4ID0gMFxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZXhlci5ydW4oKVxuICB0aGlzLmxleGVtZXMgPSB0aGlzLmxleGVyLmxleGVtZXNcblxuICB2YXIgc3RhdGUgPSBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlQ2xhdXNlXG5cbiAgd2hpbGUgKHN0YXRlKSB7XG4gICAgc3RhdGUgPSBzdGF0ZSh0aGlzKVxuICB9XG5cbiAgcmV0dXJuIHRoaXMucXVlcnlcbn1cblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUucGVla0xleGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubGV4ZW1lc1t0aGlzLmxleGVtZUlkeF1cbn1cblxubHVuci5RdWVyeVBhcnNlci5wcm90b3R5cGUuY29uc3VtZUxleGVtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxleGVtZSA9IHRoaXMucGVla0xleGVtZSgpXG4gIHRoaXMubGV4ZW1lSWR4ICs9IDFcbiAgcmV0dXJuIGxleGVtZVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnByb3RvdHlwZS5uZXh0Q2xhdXNlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY29tcGxldGVkQ2xhdXNlID0gdGhpcy5jdXJyZW50Q2xhdXNlXG4gIHRoaXMucXVlcnkuY2xhdXNlKGNvbXBsZXRlZENsYXVzZSlcbiAgdGhpcy5jdXJyZW50Q2xhdXNlID0ge31cbn1cblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUNsYXVzZSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgc3dpdGNoIChsZXhlbWUudHlwZSkge1xuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlBSRVNFTkNFOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VQcmVzZW5jZVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLlRFUk06XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVRlcm1cbiAgICBkZWZhdWx0OlxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiZXhwZWN0ZWQgZWl0aGVyIGEgZmllbGQgb3IgYSB0ZXJtLCBmb3VuZCBcIiArIGxleGVtZS50eXBlXG5cbiAgICAgIGlmIChsZXhlbWUuc3RyLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPSBcIiB3aXRoIHZhbHVlICdcIiArIGxleGVtZS5zdHIgKyBcIidcIlxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKVxuICB9XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VQcmVzZW5jZSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgc3dpdGNoIChsZXhlbWUuc3RyKSB7XG4gICAgY2FzZSBcIi1cIjpcbiAgICAgIHBhcnNlci5jdXJyZW50Q2xhdXNlLnByZXNlbmNlID0gbHVuci5RdWVyeS5wcmVzZW5jZS5QUk9ISUJJVEVEXG4gICAgICBicmVha1xuICAgIGNhc2UgXCIrXCI6XG4gICAgICBwYXJzZXIuY3VycmVudENsYXVzZS5wcmVzZW5jZSA9IGx1bnIuUXVlcnkucHJlc2VuY2UuUkVRVUlSRURcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcInVucmVjb2duaXNlZCBwcmVzZW5jZSBvcGVyYXRvcidcIiArIGxleGVtZS5zdHIgKyBcIidcIlxuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZClcbiAgfVxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKVxuXG4gIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGluZyB0ZXJtIG9yIGZpZWxkLCBmb3VuZCBub3RoaW5nXCJcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKVxuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5GSUVMRDpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRmllbGRcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtXG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcImV4cGVjdGluZyB0ZXJtIG9yIGZpZWxkLCBmb3VuZCAnXCIgKyBuZXh0TGV4ZW1lLnR5cGUgKyBcIidcIlxuICAgICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIG5leHRMZXhlbWUuc3RhcnQsIG5leHRMZXhlbWUuZW5kKVxuICB9XG59XG5cbmx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZCA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgaWYgKHBhcnNlci5xdWVyeS5hbGxGaWVsZHMuaW5kZXhPZihsZXhlbWUuc3RyKSA9PSAtMSkge1xuICAgIHZhciBwb3NzaWJsZUZpZWxkcyA9IHBhcnNlci5xdWVyeS5hbGxGaWVsZHMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBcIidcIiArIGYgKyBcIidcIiB9KS5qb2luKCcsICcpLFxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcInVucmVjb2duaXNlZCBmaWVsZCAnXCIgKyBsZXhlbWUuc3RyICsgXCInLCBwb3NzaWJsZSBmaWVsZHM6IFwiICsgcG9zc2libGVGaWVsZHNcblxuICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBsZXhlbWUuc3RhcnQsIGxleGVtZS5lbmQpXG4gIH1cblxuICBwYXJzZXIuY3VycmVudENsYXVzZS5maWVsZHMgPSBbbGV4ZW1lLnN0cl1cblxuICB2YXIgbmV4dExleGVtZSA9IHBhcnNlci5wZWVrTGV4ZW1lKClcblxuICBpZiAobmV4dExleGVtZSA9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgbm90aGluZ1wiXG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZClcbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJleHBlY3RpbmcgdGVybSwgZm91bmQgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCJcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZClcbiAgfVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChwYXJzZXIpIHtcbiAgdmFyIGxleGVtZSA9IHBhcnNlci5jb25zdW1lTGV4ZW1lKClcblxuICBpZiAobGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudGVybSA9IGxleGVtZS5zdHIudG9Mb3dlckNhc2UoKVxuXG4gIGlmIChsZXhlbWUuc3RyLmluZGV4T2YoXCIqXCIpICE9IC0xKSB7XG4gICAgcGFyc2VyLmN1cnJlbnRDbGF1c2UudXNlUGlwZWxpbmUgPSBmYWxzZVxuICB9XG5cbiAgdmFyIG5leHRMZXhlbWUgPSBwYXJzZXIucGVla0xleGVtZSgpXG5cbiAgaWYgKG5leHRMZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgIHJldHVyblxuICB9XG5cbiAgc3dpdGNoIChuZXh0TGV4ZW1lLnR5cGUpIHtcbiAgICBjYXNlIGx1bnIuUXVlcnlMZXhlci5URVJNOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VUZXJtXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRklFTEQ6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpXG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUZpZWxkXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuRURJVF9ESVNUQU5DRTpcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlXG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuQk9PU1Q6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuUFJFU0VOQ0U6XG4gICAgICBwYXJzZXIubmV4dENsYXVzZSgpXG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZVByZXNlbmNlXG4gICAgZGVmYXVsdDpcbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlVuZXhwZWN0ZWQgbGV4ZW1lIHR5cGUgJ1wiICsgbmV4dExleGVtZS50eXBlICsgXCInXCJcbiAgICAgIHRocm93IG5ldyBsdW5yLlF1ZXJ5UGFyc2VFcnJvciAoZXJyb3JNZXNzYWdlLCBuZXh0TGV4ZW1lLnN0YXJ0LCBuZXh0TGV4ZW1lLmVuZClcbiAgfVxufVxuXG5sdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlRWRpdERpc3RhbmNlID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKVxuXG4gIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgZWRpdERpc3RhbmNlID0gcGFyc2VJbnQobGV4ZW1lLnN0ciwgMTApXG5cbiAgaWYgKGlzTmFOKGVkaXREaXN0YW5jZSkpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJlZGl0IGRpc3RhbmNlIG11c3QgYmUgbnVtZXJpY1wiXG4gICAgdGhyb3cgbmV3IGx1bnIuUXVlcnlQYXJzZUVycm9yIChlcnJvck1lc3NhZ2UsIGxleGVtZS5zdGFydCwgbGV4ZW1lLmVuZClcbiAgfVxuXG4gIHBhcnNlci5jdXJyZW50Q2xhdXNlLmVkaXREaXN0YW5jZSA9IGVkaXREaXN0YW5jZVxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKVxuXG4gIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdFxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpXG4gIH1cbn1cblxubHVuci5RdWVyeVBhcnNlci5wYXJzZUJvb3N0ID0gZnVuY3Rpb24gKHBhcnNlcikge1xuICB2YXIgbGV4ZW1lID0gcGFyc2VyLmNvbnN1bWVMZXhlbWUoKVxuXG4gIGlmIChsZXhlbWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgYm9vc3QgPSBwYXJzZUludChsZXhlbWUuc3RyLCAxMClcblxuICBpZiAoaXNOYU4oYm9vc3QpKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiYm9vc3QgbXVzdCBiZSBudW1lcmljXCJcbiAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbGV4ZW1lLnN0YXJ0LCBsZXhlbWUuZW5kKVxuICB9XG5cbiAgcGFyc2VyLmN1cnJlbnRDbGF1c2UuYm9vc3QgPSBib29zdFxuXG4gIHZhciBuZXh0TGV4ZW1lID0gcGFyc2VyLnBlZWtMZXhlbWUoKVxuXG4gIGlmIChuZXh0TGV4ZW1lID09IHVuZGVmaW5lZCkge1xuICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHN3aXRjaCAobmV4dExleGVtZS50eXBlKSB7XG4gICAgY2FzZSBsdW5yLlF1ZXJ5TGV4ZXIuVEVSTTpcbiAgICAgIHBhcnNlci5uZXh0Q2xhdXNlKClcbiAgICAgIHJldHVybiBsdW5yLlF1ZXJ5UGFyc2VyLnBhcnNlVGVybVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkZJRUxEOlxuICAgICAgcGFyc2VyLm5leHRDbGF1c2UoKVxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VGaWVsZFxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkVESVRfRElTVEFOQ0U6XG4gICAgICByZXR1cm4gbHVuci5RdWVyeVBhcnNlci5wYXJzZUVkaXREaXN0YW5jZVxuICAgIGNhc2UgbHVuci5RdWVyeUxleGVyLkJPT1NUOlxuICAgICAgcmV0dXJuIGx1bnIuUXVlcnlQYXJzZXIucGFyc2VCb29zdFxuICAgIGRlZmF1bHQ6XG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJVbmV4cGVjdGVkIGxleGVtZSB0eXBlICdcIiArIG5leHRMZXhlbWUudHlwZSArIFwiJ1wiXG4gICAgICB0aHJvdyBuZXcgbHVuci5RdWVyeVBhcnNlRXJyb3IgKGVycm9yTWVzc2FnZSwgbmV4dExleGVtZS5zdGFydCwgbmV4dExleGVtZS5lbmQpXG4gIH1cbn1cblxuICAvKipcbiAgICogZXhwb3J0IHRoZSBtb2R1bGUgdmlhIEFNRCwgQ29tbW9uSlMgb3IgYXMgYSBicm93c2VyIGdsb2JhbFxuICAgKiBFeHBvcnQgY29kZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvcmV0dXJuRXhwb3J0cy5qc1xuICAgKi9cbiAgOyhmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgIGRlZmluZShmYWN0b3J5KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICogb25seSBDb21tb25KUy1saWtlIGVudmlyb21lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAqIGxpa2UgTm9kZS5cbiAgICAgICAqL1xuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgIHJvb3QubHVuciA9IGZhY3RvcnkoKVxuICAgIH1cbiAgfSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogSnVzdCByZXR1cm4gYSB2YWx1ZSB0byBkZWZpbmUgdGhlIG1vZHVsZSBleHBvcnQuXG4gICAgICogVGhpcyBleGFtcGxlIHJldHVybnMgYW4gb2JqZWN0LCBidXQgdGhlIG1vZHVsZVxuICAgICAqIGNhbiByZXR1cm4gYSBmdW5jdGlvbiBhcyB0aGUgZXhwb3J0ZWQgdmFsdWUuXG4gICAgICovXG4gICAgcmV0dXJuIGx1bnJcbiAgfSkpXG59KSgpO1xuIiwiLy9HdW5qYW5cclxuaWYgKGdsb2JhbC5yaCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgZ2xvYmFsLnJoID0ge307XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLnJoXHJcbiIsImNsYXNzIENvdW50aW5nU2VhbWFwaG9yZXtcclxuICBjb25zdHJ1Y3RvcihjYWxsYmFjayl7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fY291bnQgPSAwO1xyXG4gIH1cclxuICBzaWduYWwoKXtcclxuICAgIHRoaXMuX2NvdW50Kys7XHJcbiAgICBpZih0aGlzLl9jb3VudCA+PSAwICYmIHRoaXMuX2NhbGxiYWNrKXtcclxuICAgICAgdGhpcy5fY2FsbGJhY2soKTtcclxuICAgIH1cclxuICB9XHJcbiAgd2FpdChjb3VudCl7XHJcbiAgICBsZXQgZGVjX2NvdW50ID0gY291bnQgfHwgMTtcclxuICAgIHRoaXMuX2NvdW50LT0gZGVjX2NvdW50O1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb3VudGluZ1NlYW1hcGhvcmU7IiwicmVxdWlyZShcIi4uL2xpYi9yaFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvdXRpbHMvc2hpbVwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L3VybF91dGlsc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2luaXRcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9tcFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2V4cHJlc3Npb25fYnVpbGRlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2Jyb3dzZXNlcXVlbmNlX2J1aWxkZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9ldmVudF9oYW5kbGVyc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L3NlYXJjaF9maWxlZFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2xheW91dGZpeFwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2ZpbHRlcl9jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvbW9kZXJuX2xheW91dF9jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvanNfbG9hZGluZ19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9yb2JvaGVscC9sYXlvdXQvaW5kZXhfY29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2dsb3NzYXJ5X2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfaGFuZGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvcm9ib2hlbHAvbGF5b3V0L2xvYWRfcHJvamVjdHNcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L3VpL2Nhcm91c2VsXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC9ob21lX2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL2xheW91dC9zZWFyY2hfdXRpbFwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvc2VhcmNoL3N1Z2dlc3Rpb24vc2VhcmNoX2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L2Zhdm9yaXRlc19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC90b2NfYnJlYWRjcnVtYnNfY29udHJvbGxlci5qc1wiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L3RvY19vcmRlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L3RvY19jb250cm9sbGVyXCIpXHJcbnJlcXVpcmUoXCIuLi8uLi9sZW5pZW50X3NyYy9sYXlvdXQvaW5kZXhfY29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi4vLi4vbGVuaWVudF9zcmMvbGF5b3V0L2dsb3NzYXJ5X2NvbnRyb2xsZXJcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL2xheW91dC9ldmVudF9oYW5kbGVyc1wiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvcmgyMDE3bGF5b3V0Y29udHJvbGxlclwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvbW9kYWxfZGlhbG9nXCIpXHJcbnJlcXVpcmUoXCIuL2xheW91dC9zZWFyY2hfcmVzdWx0X2NvbnRyb2xsZXIuanNcIilcclxucmVxdWlyZShcIi4uLy4uL2xlbmllbnRfc3JjL3JvYm9oZWxwL2xheW91dC9maWx0ZXJfaGFuZGxlclwiKVxyXG5yZXF1aXJlKFwiLi9sYXlvdXQvY3VzdG9tX2J1dHRvbnNcIilcclxucmVxdWlyZShcIi4vbGF5b3V0L2V4cGFuZF9hbGxcIilcclxuIiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vbGliL3JoXCIpLFxyXG4gIGNvbnN0cyA9IHJoLmNvbnN0cyxcclxuICBtb2RlbCA9IHJoLm1vZGVsLFxyXG4gIF8gPSByaC5fXHJcblxyXG5tb2RlbC5zdWJzY3JpYmUoY29uc3RzKCdLRVlfQ1VTVE9NX0JVVFRPTlNfQ09ORklHJyksIGNvbmZpZyA9PiB7XHJcbiAgbGV0IGJ1dHRvbnMgPSBfLm1hcChjb25maWcsIChpdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgcmV0dXJuIF8uZXh0ZW5kKHtjbGFzczogYGN1c3RvbS1idXR0b24tJHtpbmRleH1gfSwgaXRlbSlcclxuICB9KVxyXG4gIG1vZGVsLnB1Ymxpc2goY29uc3RzKCdLRVlfQ1VTVE9NX0JVVFRPTlMnKSwgYnV0dG9ucylcclxufSlcclxuIiwibGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5cclxucmgubW9kZWwuY3N1YnNjcmliZSgnRVZUX0VYUEFORF9DT0xMQVBTRV9BTEwnLCAoKSA9PiB7XHJcbiAgbGV0IGN1cnJlbnRTdGF0ZSA9IHJoLm1vZGVsLmNnZXQoJ0FMTF9BUkVfRVhQQU5ERUQnKVxyXG4gIGlmKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgcmgubW9kZWwuY3B1Ymxpc2goJ0VWVF9DT0xMQVBTRV9BTEwnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICByaC5tb2RlbC5jcHVibGlzaCgnRVZUX0VYUEFORF9BTEwnKVxyXG4gIH1cclxufSlcclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ0VWVF9DT0xMQVBTRV9BTEwnLCAoKSA9PiB7XHJcbiAgcmgubW9kZWwuY3B1Ymxpc2goJ0FMTF9BUkVfRVhQQU5ERUQnLCBmYWxzZSlcclxufSlcclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ0VWVF9FWFBBTkRfQUxMJywgKCkgPT4ge1xyXG4gIHJoLm1vZGVsLmNwdWJsaXNoKCdBTExfQVJFX0VYUEFOREVEJywgdHJ1ZSlcclxufSlcclxuIiwiXHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBjb25zdHMgPSByaC5jb25zdHNcclxuXHJcbmNsYXNzIEZhdm9yaXRlc0NvbnRyb2xsZXJ7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0KXtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy5mYXZTdG9yYWdlID0gbmV3IHJoLlN0b3JhZ2UoKVxyXG4gICAgLyogSW50ZXJuYWwgZnVuY3Rpb25zIGFuZCB2YXJpYWJsZXMgKi9cclxuICAgIHRoaXMuX2xvYWRGcm9tU3RvcmFnZSA9IGZhbHNlOy8qIEZhdm9yaXRlcyBhbHJlYWR5IGxvYWRlZCBmcm9tIHN0b3JhZ2U/ICovXHJcblxyXG4gICAgdGhpcy5fZmF2TWVtb3J5U3RvcmUgPSB1bmRlZmluZWQ7LyogVmFyaWFibGUgdG8gaG9sZCBmYXZvcml0ZXMgb2JqZWN0ICovXHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmVPbmNlKGNvbnN0cygnRVZUX1BST0pFQ1RfTE9BREVEJyksICgpID0+e1xyXG4gICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfZ2V0VW5pcXVlSWQoKSB7XHJcbiAgICBmdW5jdGlvbiBfcDgocykge1xyXG4gICAgICBjb25zdCBwID0gKGAke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpfTAwMDAwMDAwMGApLnN1YnN0cigyLDgpO1xyXG4gICAgICByZXR1cm4gcyA/IGAtJHtwLnN1YnN0cigwLDQpfS0ke3Auc3Vic3RyKDQsNCl9YCA6IHAgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9wOCgpICsgX3A4KHRydWUpICsgX3A4KHRydWUpICsgX3A4KCk7XHJcbiAgfVxyXG5cclxuICBudW1iZXJPZkl0ZW1zKEpTT04pIHsvKiBDb3VudCB0aGUgbnVtYmVyIG9mIGl0ZW1zIGluIGFuIG9iamVjdCAqL1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKEpTT04pLmxlbmd0aDtcclxuICB9XHJcbiAgX2dldEZhdkhUTUxFbGVtZW50cyh0eXBlKSB7XHJcbiAgICAgIC8qIEZpbmQgYWxsIGVsZW1lbnRzIGluIHRoZSBIVE1MIHRoYXQgY2FuIGhvbGQgYSBmYXZvcml0ZSB3aWRnZXQgKi9cclxuXHJcbiAgICBsZXQgYWxsRWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImRpdlwiKTsvKiBPbmx5IGRpdnMgY2FuIGJlIGZhdm9yaXRlIGhvbGRlcnMgKi9cclxuICAgIGxldCBlbGVtZW50cyA9IFtdO1xyXG5cclxuICAgIGZvcihsZXQgaT0wOyBpPGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmKGFsbEVsZW1lbnRzW2ldLmdldEF0dHJpYnV0ZShyaC5jb25zdHMoJ0ZBVkFUVFJJQlVURScpKSA9PT0gdHlwZSkge1xyXG4gICAgICAgIGVsZW1lbnRzLnB1c2goYWxsRWxlbWVudHNbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGlua1RpdGxlKGlzRmF2b3JpdGUpe1xyXG4gICAgbGV0IGxuZyA9IHJoLm1vZGVsLmdldChjb25zdHMoJ0tFWV9MTkcnKSlcclxuICAgIGlmKGlzRmF2b3JpdGUpe1xyXG4gICAgICByZXR1cm4gKGxuZyAmJiBsbmcudW5zZXRBc0Zhdm9yaXRlKSB8fCAnJztcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuIChsbmcgJiYgbG5nLnNldEFzRmF2b3JpdGUpIHx8ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIF9sb2FkRmF2b3JpdGVzRnJvbVN0b3JhZ2UoKXtcclxuICAgICAgLyogTG9hZCBzZXR0aW5nIGZyb20gc3RvcmFnZSAqL1xyXG4gICAgbGV0IHN0b3JhZ2VPYmplY3Q7XHJcbiAgICBsZXQgbG9hZFN0cmluZyA9IHRoaXMuZmF2U3RvcmFnZS5mZXRjaChjb25zdHMoJ0ZBVlNUT1JBR0UnKSk7XHJcblxyXG4gICAgaWYodHlwZW9mKGxvYWRTdHJpbmcpID09PSBcInVuZGVmaW5lZFwiIHx8IGxvYWRTdHJpbmcgPT09IG51bGwpIHsvKiBObyBzZXR0aW5ncyB5ZXQsIGNyZWF0ZSBuZXcgb2JqZWN0LiAqL1xyXG4gICAgICBzdG9yYWdlT2JqZWN0ID0ge307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdG9yYWdlT2JqZWN0ID0gSlNPTi5wYXJzZShsb2FkU3RyaW5nKTsvKiBQYXJzZSBzdHJpbmcgdG8gb2JqZWN0ICovXHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RvcmFnZU9iamVjdDtcclxuICB9XHJcblxyXG4gIF9sb2FkRmF2b3JpdGVzKCl7XHJcbiAgICBpZih0aGlzLl9sb2FkRnJvbVN0b3JhZ2UgPT09IGZhbHNlKSB7LyogT25seSBsb2FkIG9uY2UsIHRoZW4gdXNlIG9iamVjdCBpbiBtZW1vcnkuIFNhdmVzIGEgZmV3IHBhcnNpbmdzLiAqL1xyXG4gICAgICB0aGlzLl9mYXZNZW1vcnlTdG9yZSA9IHRoaXMuX2xvYWRGYXZvcml0ZXNGcm9tU3RvcmFnZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2Zhdk1lbW9yeVN0b3JlO1xyXG4gIH1cclxuXHJcbiAgX3NhdmVGYXZvcml0ZXMoKXtcclxuICAgIGxldCBmYXZvcml0ZXNTdHJpbmc7XHJcbiAgICBmYXZvcml0ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLl9mYXZNZW1vcnlTdG9yZSk7XHJcbiAgICB0aGlzLmZhdlN0b3JhZ2UucGVyc2lzdChyaC5jb25zdHMoJ0ZBVlNUT1JBR0UnKSwgZmF2b3JpdGVzU3RyaW5nKTtcclxuICB9XHJcblxyXG4gIF91bkZhdm9yaXRlVG9waWModG9waWMpe1xyXG4gICAgZm9yKGNvbnN0IGkgaW4gdGhpcy5fZmF2TWVtb3J5U3RvcmUpIHtcclxuICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuX2Zhdk1lbW9yeVN0b3JlW2ldO1xyXG4gICAgICBpZihjdXJyZW50LnRvcGljID09PSAgdG9waWMpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZmF2TWVtb3J5U3RvcmVbaV07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3NhdmVGYXZvcml0ZXMoKTtcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2gocmguY29uc3RzKCdFVkVOVEZBVkNIQU5HRScpLCBudWxsKTsvKiBQdWJsaXNoIHNvIGZhdm9yaXRlcyBzdWJzY3JpYmVycyBhcmUgbm90aWZpZWQgb2YgY2hhbmdlcyAqL1xyXG4gIH1cclxuXHJcbiAgX2Zhdm9yaXRlVG9waWModXJsLCB0aXRsZSl7XHJcbiAgICAvL2xldCBpZDtcclxuICAgIHRoaXMuX2Zhdk1lbW9yeVN0b3JlW3RoaXMuX2dldFVuaXF1ZUlkKCldID0ge1widG9waWNcIiA6IHVybCwgXCJ0aXRsZVwiIDogdGl0bGV9O1xyXG4gICAgdGhpcy5fc2F2ZUZhdm9yaXRlcygpO1xyXG4gICAgcmgubW9kZWwucHVibGlzaChyaC5jb25zdHMoJ0VWRU5URkFWQ0hBTkdFJyksIG51bGwpOy8qIFB1Ymxpc2ggc28gZmF2b3JpdGVzIHN1YnNjcmliZXJzIGFyZSBub3RpZmllZCBvZiBjaGFuZ2VzICovXHJcbiAgfVxyXG5cclxuICAvKiBQdWJsaWMgZnVuY3Rpb25zOiBmb3IgdXNlIGluIG90aGVyIHNjcmlwdHMgKi9cclxuICBnZXRTdG9yYWdlSWQgKCl7IHJldHVybiBgZmF2LSR7cmguXy5nZXRIb3N0Rm9sZGVyKCl9YCB9XHJcblxyXG4gIGdldFRvcGljVVJMKCl7IC8qIEdldCB0aGUgVVJMIG9mIHRoZSBjdXJyZW50IHRvcGljICovXHJcbiAgICByZXR1cm4gcmgubW9kZWwuZ2V0KHJoLmNvbnN0cygnS0VZX1RPUElDX1VSTCcpKTtcclxuICB9XHJcblxyXG4gIGdldFRvcGljVGl0bGUoKXsgLyogR2V0IHRpdGxlIG9mIGN1cnJlbnRseSBvcGVuZWQgdG9waWMgKi9cclxuICAgIHJldHVybiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfVE9QSUNfVElUTEUnKSk7XHJcbiAgfVxyXG5cclxuICBpc1RvcGljRmF2b3JpdGUodG9waWMpe1xyXG4gICAgICAvKiBJcyB0aGUgY3VycmVudCB0b3BpYyBhIGZhdm9yaXRlIHRvcGljPyAqL1xyXG4gICAgbGV0IGZhdm9yaXRlcztcclxuICAgIGxldCBpc0Zhdm9yaXRlO1xyXG4gICAgaWYoIXRvcGljKSB7XHJcbiAgICAgIHRvcGljID0gdGhpcy5nZXRUb3BpY1VSTCgpO1xyXG4gICAgfVxyXG4gICAgZmF2b3JpdGVzID0gdGhpcy5fbG9hZEZhdm9yaXRlcygpO1xyXG5cclxuICAgIGlzRmF2b3JpdGUgPSBmYWxzZTtcclxuICAgIGZvcihjb25zdCBpIGluIGZhdm9yaXRlcykge1xyXG4gICAgICBjb25zdCBjdXJyZW50ID0gZmF2b3JpdGVzW2ldO1xyXG4gICAgICBpZihjdXJyZW50LnRvcGljID09PSB0b3BpYykge1xyXG4gICAgICAgIGlzRmF2b3JpdGUgPSB0cnVlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGlzRmF2b3JpdGU7XHJcbiAgfVxyXG4gIHNldGZhdm9yaXRlc1RpdGxlKGlzRmF2b3JpdGUpe1xyXG4gICAgbGV0IHRpdGxlID0gdGhpcy5nZXRMaW5rVGl0bGUoaXNGYXZvcml0ZSlcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2goY29uc3RzKCdGQVZPUklURVNfQlVUVE9OX1RJVExFJyksIHRpdGxlKVxyXG4gIH1cclxuICBzZXRUb3BpY0Zhdm9yaXRlU3RhdGUoKXtcclxuICAgIHJoLm1vZGVsLnB1Ymxpc2goY29uc3RzKCdUT1BJQ19GQVZPUklURScpLCB0aGlzLmlzVG9waWNGYXZvcml0ZSgpKTtcclxuICB9XHJcblxyXG4gIHNldEZhdm9yaXRlc0xpc3QoKXsvKiBXcml0ZSB0aGUgZmF2b3JpdGVzIGxpc3QgKi9cclxuICAgIC8vbGV0IGZhdmhvbGRlcnM7XHJcbiAgICBsZXQgZmF2b3JpdGVzID0gW107XHJcbiAgICBsZXQgaWRcclxuICAgIGxldCBmYXZvcml0ZXNfbWFwID0gdGhpcy5fbG9hZEZhdm9yaXRlcygpO1xyXG4gICAgZm9yKGlkIGluIGZhdm9yaXRlc19tYXApe1xyXG4gICAgICBmYXZvcml0ZXMucHVzaChmYXZvcml0ZXNfbWFwW2lkXSk7XHJcbiAgICB9XHJcbiAgICByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnS0VZX0ZBVk9SSVRFUycpLCBmYXZvcml0ZXMpXHJcbiAgfVxyXG5cclxuICB0b2dnbGVGYXZvcml0ZSh0b3BpY1VSTCl7LyogVG9nZ2xlIHdoZXRoZXIgdGhlIHBhZ2UgaXMgYSBmYXZvcml0ZSAqL1xyXG4gICAgaWYoIXRvcGljVVJMKSB7XHJcbiAgICAgIHRvcGljVVJMID0gdGhpcy5nZXRUb3BpY1VSTCgpO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5pc1RvcGljRmF2b3JpdGUodG9waWNVUkwpKSB7XHJcbiAgICAgIHRoaXMuX3VuRmF2b3JpdGVUb3BpYyh0b3BpY1VSTCk7LyogQmVjYXVzZSB0aGUgZmF2b3JpdGVzIGxpc3QgY2FuIHJlbW92ZSB0b3BpY3MsIHJlbW92aW5nIGEgdG9waWMgY2FuIGJlIGEgZGlmZmVyZW50IFVSTCB0aGFuIHRoZSBjdXJyZW50IHRvcGljLiAqL1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZmF2b3JpdGVUb3BpYyh0b3BpY1VSTCwgdGhpcy5nZXRUb3BpY1RpdGxlKCkpOy8qIFRoaXMgY2FuIG9ubHkgYmUgdGhlIGN1cnJlbnQgdG9waWMgKi9cclxuICAgIH1cclxuICAgIHRoaXMuc2V0VG9waWNGYXZvcml0ZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBpbml0KCl7LyogSW5pdGlhbGlzZSB0aGUgZmF2b3JpdGVzICovXHJcblxyXG4gICAgdGhpcy5mYXZTdG9yYWdlLmluaXQocmguXy5nZXRSb290VXJsKCkpXHJcblxyXG4gICAgLyogU3Vic2NyaWJlIHRvIHRvcGljIGV2ZW50cyAqL1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKHJoLmNvbnN0cygnS0VZX1RPUElDX1VSTCcpLCB0aGlzLnNldFRvcGljRmF2b3JpdGVTdGF0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShyaC5jb25zdHMoJ0VWRU5URkFWQ0hBTkdFJyksIHRoaXMuc2V0RmF2b3JpdGVzTGlzdC5iaW5kKHRoaXMpKTtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShyaC5jb25zdHMoJ1RPUElDX0ZBVk9SSVRFJyksIHRoaXMuc2V0ZmF2b3JpdGVzVGl0bGUuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5zZXRGYXZvcml0ZXNMaXN0KCk7XHJcbiAgICByaC5tb2RlbC5wdWJsaXNoKGNvbnN0cygnVE9QSUNfRkFWT1JJVEUnKSwgdGhpcy5pc1RvcGljRmF2b3JpdGUoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5yaC5jb250cm9sbGVyKCdGYXZvcml0ZXNDb250cm9sbGVyJywgRmF2b3JpdGVzQ29udHJvbGxlcilcclxuIiwibGV0IHJoID0gcmVxdWlyZShcIi4uLy4uL2xpYi9yaFwiKVxyXG5sZXQgXyA9IHJoLl9cclxuY2xhc3MgSG9tZUNvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0XHJcbiAgfVxyXG5cclxuICBnb1RvSG9tZSh0b2NJZCkge1xyXG4gICAgaWYocmguY29uc3RzKCdIT01FX0ZJTEVQQVRIJykgPT09IHJoLl8uZ2V0RmlsZU5hbWUoKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VUb0RlZmF1bHRUb3BpYyh0b2NJZClcclxuICAgIH1cclxuICAgIGxldCBoYXNoTWFwXHJcbiAgICBpZih0b2NJZCAhPT0gdW5kZWZpbmVkICYmIHRvY0lkICE9PScnKXtcclxuICAgICAgaGFzaE1hcCA9IHtyaHRvY2lkOnRvY0lkfVxyXG4gICAgfVxyXG4gICAgXy5nb1RvSG9tZShoYXNoTWFwKTtcclxuICAgIHJldHVybiB0cnVlXHJcbiAgfVxyXG5cclxuICBjaGFuZ2VUb0RlZmF1bHRUb3BpYyh0b2NJZCkge1xyXG4gICAgbGV0IGhhc2hNYXAgPSB7dDogd2luZG93LmdEZWZhdWx0VG9waWMuc3Vic3RyaW5nKDEpfVxyXG4gICAgaWYodG9jSWQgIT09IHVuZGVmaW5lZCAmJiB0b2NJZCAhPT0nJyl7XHJcbiAgICAgIGhhc2hNYXAucmh0b2NpZCA9IHRvY0lkXHJcbiAgICB9XHJcbiAgICBfLnF1ZXVlVXBkYXRlSGFzaE1hcChoYXNoTWFwLCB0cnVlKVxyXG4gICAgcmV0dXJuIHRydWVcclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpXHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IG5vZGVVdGlscyA9IHJlcXVpcmUoXCIuLi91dGlscy9ub2RlX3V0aWxzXCIpXHJcbmxldCAkID0gcmguJFxyXG5sZXQgXyA9IHJoLl87XHJcbmNsYXNzIE1vZGFsRGlhbG9nIHtcclxuXHJcbiAgY3JlYXRlQ2hpbGRXaWRnZXQoKSB7XHJcbiAgICB0aGlzLm5vZGUgPSAkLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHRoaXMudGVtcGxhdGUpXHJcbiAgICBub2RlVXRpbHMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuYm9keSwgdGhpcy5ub2RlKTtcclxuICAgIHRoaXMud2lkZ2V0ID0gbmV3IHJoLldpZGdldCh7bm9kZTogdGhpcy5ub2RlfSlcclxuICAgIHRoaXMud2lkZ2V0LmluaXQoKVxyXG4gIH1cclxuXHJcblxyXG4gIGdldCB0ZW1wbGF0ZSgpIHtcclxuICAgIGxldCBpbml0aWFsU3R5bGUgPSB0aGlzLmluaXRpYWxTdHlsZSgpXHJcblxyXG4gICAgcmV0dXJuIGBcclxuICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbC1jb250YWluZXJcIiAke2luaXRpYWxTdHlsZX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwicmgtbW9kYWwtY29udGVudFwiIGRhdGEtaHRtbD1cImNvbnRlbnRcIj48L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaC1tb2RhbC1jbG9zZVwiIGRhdGEtY2xpY2s9XCJAY2xvc2UodHJ1ZSlcIj4gPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gO1xyXG4gIH1cclxuXHJcbiAgc2V0T25JbWFnZUxvYWQoKXtcclxuICAgIGxldCBtb2RhbENvbnRlbnQgPSAkLmZpbmQodGhpcy5ub2RlLCAnLnJoLW1vZGFsLWNvbnRlbnQnKVswXVxyXG4gICAgaWYoIW1vZGFsQ29udGVudCkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMubW9kYWxDb250ZW50ID0gbW9kYWxDb250ZW50XHJcbiAgICBsZXQgaW1nID0gJC5maW5kKG1vZGFsQ29udGVudCwgJ2ltZycpWzBdXHJcbiAgICBpZihpbWcpe1xyXG4gICAgICB0aGlzLmltZyA9IGltZ1xyXG4gICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuc2V0TW9kYWxTaXplLmJpbmQodGhpcykpXHJcbiAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuc2V0TW9kYWxTaXplLmJpbmQodGhpcykpXHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldE1vZGFsU2l6ZSgpe1xyXG4gICAgdGhpcy5pbWFnZVdpZHRoID0gdGhpcy5pbWcubmF0dXJhbFdpZHRoXHJcbiAgICB0aGlzLmltYWdlSGVpZ2h0ID0gdGhpcy5pbWcubmF0dXJhbEhlaWdodFxyXG4gICAgbGV0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbih0aGlzLmltYWdlV2lkdGgsIHRoaXMuaW1hZ2VIZWlnaHQpXHJcbiAgICBsZXQgbW9kYWxDb250YWluZXIgPSAkLmZpbmQodGhpcy5ub2RlLCAnLnJoLW1vZGFsLWNvbnRhaW5lcicpWzBdXHJcbiAgICBpZihtb2RhbENvbnRhaW5lcil7XHJcbiAgICAgIHRoaXMuc2V0Q29udGFpbmVyU3R5bGUobW9kYWxDb250YWluZXIsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG4gIH1cclxuICBzZXRDb250YWluZXJTdHlsZShtb2RhbENvbnRhaW5lciwgcG9zaXRpb24pe1xyXG4gICAgbGV0IHRvcCA9IE1hdGgucm91bmQocG9zaXRpb24udG9wKVxyXG4gICAgbGV0IGxlZnQgPSBNYXRoLnJvdW5kKHBvc2l0aW9uLmxlZnQpXHJcblxyXG4gICAgJC5jc3MobW9kYWxDb250YWluZXIsICdsZWZ0JywgbGVmdC50b1N0cmluZygpICsgJ3B4JylcclxuICAgICQuY3NzKG1vZGFsQ29udGFpbmVyLCAndG9wJywgdG9wLnRvU3RyaW5nKCkgKyAncHgnKVxyXG5cclxuICAgIGlmKHRoaXMubW9kYWxDb250ZW50KSB7XHJcbiAgICAgIHRoaXMuc2V0SW1hZ2VTaXplKHBvc2l0aW9uLndpZHRoLCBwb3NpdGlvbi5oZWlnaHQpXHJcbiAgICB9XHJcbiAgICAkLmNzcyhtb2RhbENvbnRhaW5lciwgJ2Rpc3BsYXknLCBcImJsb2NrXCIpXHJcblxyXG4gIH1cclxuICBjYWxjdWxhdGVJbWFnZVNpemUoc2l6ZSl7XHJcbiAgICBsZXQgYXNwZWN0ID0gc2l6ZS5pbWFnZVdpZHRoL3NpemUuaW1hZ2VIZWlnaHRcclxuICAgIGlmKHNpemUuaW1hZ2VXaWR0aCA8IHNpemUucGFnZVdpZHRoICYmIHNpemUuaW1hZ2VIZWlnaHQgPCBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge3dpZHRoOiBzaXplLmltYWdlV2lkdGgsIGhlaWdodDogc2l6ZS5pbWFnZUhlaWdodH1cclxuICAgIH1cclxuXHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPj0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA8PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlV2lkdGgvYXNwZWN0LCB3aWR0aDogc2l6ZS5wYWdlV2lkdGh9XHJcbiAgICB9XHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPD0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA+PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlSGVpZ2h0LCB3aWR0aDogc2l6ZS5wYWdlSGVpZ2h0KmFzcGVjdFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihzaXplLmltYWdlV2lkdGggPj0gc2l6ZS5wYWdlV2lkdGggJiYgc2l6ZS5pbWFnZUhlaWdodCA+PSBzaXplLnBhZ2VIZWlnaHQpe1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2FsY3VsYXRlRnVsbHlFeGNlZWRTaXplKHNpemUsIGFzcGVjdClcclxuICAgIH1cclxuICB9XHJcbiAgX2NhbGN1bGF0ZUZ1bGx5RXhjZWVkU2l6ZShzaXplLCBhc3BlY3Qpe1xyXG4gICAgbGV0IHBhZ2VBc3BlY3QgPSBzaXplLnBhZ2VXaWR0aC9zaXplLnBhZ2VIZWlnaHRcclxuICAgIGlmKGFzcGVjdCA8IHBhZ2VBc3BlY3Qpe1xyXG4gICAgICByZXR1cm4ge2hlaWdodDogc2l6ZS5wYWdlSGVpZ2h0LCB3aWR0aDogc2l6ZS5wYWdlSGVpZ2h0KmFzcGVjdH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHJldHVybnsgaGVpZ2h0OiBzaXplLnBhZ2VXaWR0aC9hc3BlY3QsIHdpZHRoOiBzaXplLnBhZ2VXaWR0aH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgY2FsY3VsYXRlUG9zaXRpb24oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpe1xyXG4gICAgbGV0IHBhZ2VXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcclxuICAgIGxldCBwYWdlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0XHJcbiAgICBwYWdlV2lkdGggLT0gNzBcclxuICAgIHBhZ2VIZWlnaHQgLT0gNzBcclxuICAgIHBhZ2VXaWR0aCA9IChwYWdlV2lkdGggPj0gMCk/ICBwYWdlV2lkdGg6IDBcclxuICAgIHBhZ2VIZWlnaHQgPSAocGFnZUhlaWdodCA+PSAwKT8gIHBhZ2VIZWlnaHQ6IDBcclxuXHJcbiAgICBsZXQgc2l6ZSA9IHtpbWFnZVdpZHRoOmltYWdlV2lkdGgsIGltYWdlSGVpZ2h0OmltYWdlSGVpZ2h0LCBwYWdlV2lkdGg6cGFnZVdpZHRoLCBwYWdlSGVpZ2h0OnBhZ2VIZWlnaHR9XHJcbiAgICBsZXQgaW1hZ2Vfc2l6ZSA9IHRoaXMuY2FsY3VsYXRlSW1hZ2VTaXplKHNpemUpXHJcbiAgICBpbWFnZVdpZHRoID0gaW1hZ2Vfc2l6ZS53aWR0aFxyXG4gICAgaW1hZ2VIZWlnaHQgPSBpbWFnZV9zaXplLmhlaWdodFxyXG4gICAgbGV0IGxlZnQgPSBNYXRoLm1heCg1LCAocGFnZVdpZHRoIC0gaW1hZ2VXaWR0aCkvMiApXHJcbiAgICBsZXQgdG9wID0gTWF0aC5tYXgoNSwgKHBhZ2VIZWlnaHQgLSBpbWFnZUhlaWdodCkvMiApXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbGVmdDogbGVmdCxcclxuICAgICAgdG9wOiB0b3AsXHJcbiAgICAgIHdpZHRoOiBpbWFnZVdpZHRoLFxyXG4gICAgICBoZWlnaHQ6IGltYWdlSGVpZ2h0LFxyXG4gICAgICBwYWdlV2lkdGg6IHBhZ2VXaWR0aCxcclxuICAgICAgcGFnZUhlaWdodDogcGFnZUhlaWdodFxyXG4gICAgfVxyXG4gIH1cclxuICBpbml0aWFsU3R5bGUoKXtcclxuICAgIHJldHVybiAodGhpcy5pc0ltYWdlKT8gYHN0eWxlPVwiZGlzcGxheTpub25lXCJgIDogJydcclxuICB9XHJcblxyXG4gIFNob3dNb2RhbChjb25maWcpIHtcclxuICAgIHRoaXMuaXNJbWFnZSA9IGNvbmZpZy5pc0ltYWdlXHJcbiAgICB0aGlzLmNyZWF0ZUNoaWxkV2lkZ2V0KClcclxuICAgIHRoaXMud2lkZ2V0LnN1YnNjcmliZSgnY2xvc2UnLCB0aGlzLl9jbG9zZS5iaW5kKHRoaXMpKVxyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaCgnY29udGVudCcsIGNvbmZpZy5jb250ZW50KVxyXG4gICAgXy5kZWZlcih0aGlzLnNldE9uSW1hZ2VMb2FkLmJpbmQodGhpcykpXHJcblxyXG4gIH1cclxuXHJcbiAgc2V0SW1hZ2VTaXplKG1heFdpZHRoLCBtYXhIZWlnaHQpe1xyXG4gICAgaWYodGhpcy5pbWFnZVdpZHRoID4gbWF4V2lkdGgpe1xyXG4gICAgICAkLmNzcyh0aGlzLmltZywgJ3dpZHRoJywgYCR7TWF0aC5yb3VuZChtYXhXaWR0aCl9cHhgKVxyXG4gICAgfVxyXG4gICAgaWYodGhpcy5pbWFnZUhlaWdodCA+IG1heEhlaWdodCl7XHJcbiAgICAgICQuY3NzKHRoaXMuaW1nLCAnaGVpZ2h0JywgYCR7TWF0aC5yb3VuZChtYXhIZWlnaHQpfXB4YClcclxuICAgIH1cclxuICB9XHJcbiAgX2Nsb3NlKCl7XHJcbiAgICB0aGlzLndpZGdldC5kZXN0cnVjdCgpO1xyXG4gICAgdGhpcy53aWRnZXQgPSB1bmRlZmluZWQ7XHJcbiAgICBub2RlVXRpbHMucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcclxuICAgIHRoaXMubm9kZSA9IHVuZGVmaW5lZDtcclxuICB9XHJcbn1cclxuXHJcbnJoLm1vZGVsLmNzdWJzY3JpYmUoJ1NIT1dfTU9EQUwnLCBjb25maWcgPT4ge1xyXG4gIGxldCBtb2RlbCA9IG5ldyBNb2RhbERpYWxvZygpXHJcbiAgbW9kZWwuU2hvd01vZGFsKGNvbmZpZylcclxufSk7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgXyA9IHJoLl87XHJcbmxldCBjb25zdHMgPSByaC5jb25zdHM7XHJcbmNsYXNzIFJIMjAxN0xheW91dENvbnRyb2xsZXIge1xyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy50b3BpY0ZyYW1lID0gJy50b3BpYy1jb250YWluZXIgaWZyYW1lJztcclxuICAgIHRoaXMuaW5pdExheW91dCgpO1xyXG4gICAgdGhpcy5pbml0TW9kYWwoKTtcclxuICB9XHJcblxyXG4gIGlzTGF5b3V0TW9kZShoYXNoTWFwKSB7XHJcbiAgICBsZXQgaGFzaCA9IGhhc2hNYXAgfHwgXy5oYXNoUGFyYW1zKCk7XHJcbiAgICBsZXQgdG9waWNNb2RlID0gaGFzaFtyaC5jb25zdHMoJ0hBU0hfS0VZX1RPUElDJyldO1xyXG4gICAgcmV0dXJuIChoYXNoW3JoLmNvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyldICE9PSBjb25zdHMoJ0hFTFBfU0VBUkNIX01PREUnKSAmJiAoIXRvcGljTW9kZSB8fFxyXG4gICAgICAgIChoYXNoW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSAndHJ1ZScpIHx8XHJcbiAgICAgICAgIGhhc2hbcmguY29uc3RzKCdIQVNIX0tFWV9SSF9UT0NJRCcpXSkpO1xyXG4gIH1cclxuXHJcbiAgaW5pdExheW91dCgpIHtcclxuICAgIHJoLm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0VWVF9IQVNIX0NIQU5HRScpLCAob2JqKSA9PiB7XHJcbiAgICAgIGxldCBoYXNoTWFwID0gb2JqLm5ld01hcCwgb2xkSGFzaE1hcCA9IG9iai5vbGRNYXA7XHJcbiAgICAgIGlmKHRoaXMuaXNMYXlvdXRNb2RlKCkpIHtcclxuICAgICAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnS0VZX1ZJRVdfTU9ERScpLCByaC5jb25zdHMoJ0hFTFBfTEFZT1VUX01PREUnKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVUlNT0RFJyldID09PSAnc2VhcmNoJyl7XHJcbiAgICAgICAgdGhpcy53aWRnZXQucHVibGlzaChyaC5jb25zdHMoJ0tFWV9WSUVXX01PREUnKSwgcmguY29uc3RzKCdIRUxQX1NFQVJDSF9NT0RFJykpO1xyXG4gICAgICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHtbY29uc3RzKCdIQVNIX0hPTUVQQUdFX01PREUnKV06IGZhbHNlfSwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2gocmguY29uc3RzKCdLRVlfVklFV19NT0RFJyksIHJoLmNvbnN0cygnSEVMUF9UT1BJQ19NT0RFJykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgZmVhdHVyZSA9IHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9GRUFUVVJFJykpXHJcbiAgICAgIGlmKGZlYXR1cmUgJiYgZmVhdHVyZS5zaG93RGVmVG9waWMgPT09IGZhbHNlICYmXHJcbiAgICAgICAgIWhhc2hNYXBbcmguY29uc3RzKCdIQVNIX0tFWV9SSF9UT0NJRCcpXSAmJlxyXG4gICAgICAgICFvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0pIHtcclxuICAgICAgICBfLnF1ZXVlVXBkYXRlSGFzaE1hcCh7W2NvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldOiAnZmFsc2UnfSwgZmFsc2UpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICAhaGFzaE1hcFtyaC5jb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyldICYmXHJcbiAgICAgICAgb2xkSGFzaE1hcFtyaC5jb25zdHMoJ0hBU0hfS0VZX1RPUElDJyldICE9PSBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9LRVlfVE9QSUMnKV0gJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSAndHJ1ZScgJiZcclxuICAgICAgICBvbGRIYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldID09PSBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldKSB7XHJcbiAgICAgICAgXy5xdWV1ZVVwZGF0ZUhhc2hNYXAoe1tjb25zdHMoJ0hBU0hfSE9NRVBBR0VfTU9ERScpXTogJ2ZhbHNlJ30sIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IGhhc2hNYXAgPSBfLmhhc2hQYXJhbXMoKTtcclxuICAgIGlmKHRoaXMuaXNMYXlvdXRNb2RlKCkgJiZcclxuICAgICAgICBoYXNoTWFwW3JoLmNvbnN0cygnSEFTSF9IT01FUEFHRV9NT0RFJyldICE9PSAndHJ1ZScpXHJcbiAgICB7XHJcbiAgICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHtbY29uc3RzKCdIQVNIX0hPTUVQQUdFX01PREUnKV06IHRydWV9LCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUoJ0VWVF9UT0NfTE9BREVEZ290b3RhYicsIChib29rRGF0YSkgPT4ge1xyXG4gICAgICBpZihib29rRGF0YS5rZXkpIHtcclxuICAgICAgICByaC5tb2RlbC5zdWJzY3JpYmUoYm9va0RhdGEua2V5LCAoYm9va1RPQywga2V5LCB1bnN1YikgPT4ge1xyXG4gICAgICAgICAgdW5zdWIoKTtcclxuICAgICAgICAgIGlmKGJvb2tEYXRhLml0ZW0gJiYgYm9va0RhdGEuaXRlbS51cmwgJiYgIWJvb2tUT0NbMF0uYWRkZWQpIHtcclxuICAgICAgICAgICAgYm9va1RPQy51bnNoaWZ0KHsndHlwZSc6ICdpdGVtJywgJ3VybCc6IGJvb2tEYXRhLml0ZW0udXJsLFxyXG4gICAgICAgICAgICAgICduYW1lJzogYm9va0RhdGEuaXRlbS5uYW1lLCAnYWRkZWQnOiB0cnVlfSk7XHJcbiAgICAgICAgICAgIHJoLm1vZGVsLnB1Ymxpc2goYm9va0RhdGEua2V5LCBib29rVE9DKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZihib29rRGF0YS5pdGVtLnVybCkge1xyXG4gICAgICAgIHRoaXMudmlld1RvcGljSW5MYXlvdXRNb2RlKGJvb2tEYXRhLml0ZW0udXJsKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2aWV3VG9waWNJbkxheW91dE1vZGUodG9waWNVcmwpIHtcclxuICAgIGxldCBwYXJhbU1hcCA9IHsnaG9tZXBhZ2UnOiAndHJ1ZScsXHJcbiAgICAgIFtyaC5jb25zdHMoJ0hBU0hfS0VZX1JIX1RPQ0lEJyldOiB0cnVlfVxyXG4gICAgaWYodG9waWNVcmwgJiYgdG9waWNVcmwgIT09ICcjJykge1xyXG4gICAgICBwYXJhbU1hcC50ID0gdG9waWNVcmxcclxuICAgIH1cclxuICAgIF8ucXVldWVVcGRhdGVIYXNoTWFwKHBhcmFtTWFwLCBmYWxzZSlcclxuICB9XHJcblxyXG4gIGluaXRNb2RhbCgpIHtcclxuICAgIGxldCBiSGFuZGxlZCA9IGZhbHNlXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlID0+IHtcclxuICAgICAgaWYgKCBlLmtleUNvZGUgPT09IDI3ICkgeyAvLyBFU0NcclxuICAgICAgICByaC5fLmVhY2goJC5maW5kKCcubW9kYWwnKSwgaXRlbSA9PiB7XHJcbiAgICAgICAgICAkLmFkZENsYXNzKGl0ZW0sICdyaC1oaWRlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZighYkhhbmRsZWQpIHtcclxuICAgICAgICByaC5fLmVhY2goJC5maW5kKCcubW9kYWwnKSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICQuYWRkQ2xhc3MoaXRlbSwgJ3JoLWhpZGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBiSGFuZGxlZCA9IGZhbHNlXHJcbiAgICB9KTtcclxuICAgIHJoLl8uZWFjaCgkLmZpbmQoJy5tb2RhbC1jb250ZW50JyksIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIF8uYWRkRXZlbnRMaXN0ZW5lcihpdGVtLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBiSGFuZGxlZCA9IHRydWVcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxucmguY29udHJvbGxlcignUkgyMDE3TGF5b3V0Q29udHJvbGxlcicsIFJIMjAxN0xheW91dENvbnRyb2xsZXIpXHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5cclxuY2xhc3MgTWVyZ2Vye1xyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCBtYXhfaXRlbXMgPSAyMCl7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOyBcclxuICAgIHRoaXMuX21heF9pdGVtcyA9IG1heF9pdGVtcztcclxuICB9XHJcbiAgZ2V0IGl0ZW1zKCl7XHJcbiAgICByZXR1cm4gdGhpcy5faXRlbXNcclxuICB9XHJcbiAgbWVyZ2UobmV3SXRlbXMpe1xyXG4gICAgXy5lYWNoKG5ld0l0ZW1zLCAoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLm1lcmdlSXRlbShpdGVtKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc29ydCgpO1xyXG4gICAgdGhpcy5fcHVyZ2UoKTtcclxuICB9XHJcbiAgY2xlYXIoKXtcclxuICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgfVxyXG4gIF9wdXJnZSgpe1xyXG4gICAgaWYodGhpcy5faXRlbXMubGVuZ3RoID4gdGhpcy5fbWF4X2l0ZW1zKXtcclxuICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKHRoaXMuX21heF9pdGVtcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG1lcmdlSXRlbShpdGVtKXtcclxuICAgIGxldCBleGlzdGluZ19pdGVtID0gdGhpcy5maW5kX2l0ZW0oaXRlbSk7XHJcbiAgICBpZihleGlzdGluZ19pdGVtKXtcclxuICAgICAgZXhpc3RpbmdfaXRlbS5tZXJnZShpdGVtKVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgdGhpcy5faXRlbXMucHVzaChpdGVtKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZpbmRfaXRlbShtYXRjaF9pdGVtKSB7XHJcbiAgICByZXR1cm4gXy5maW5kKHRoaXMuX2l0ZW1zLCAoaXRlbSkgPT4ge1xyXG4gICAgICByZXR1cm4gaXRlbS5tYXRjaChtYXRjaF9pdGVtKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIG1lcmdlX2l0ZW0oZXhpc3RpbmdfaXRlbSwgbmV3X2l0ZW0pIHtcclxuICAgIGV4aXN0aW5nX2l0ZW0ucHJvYmFiaWxpdHkgKz0gbmV3X2l0ZW0ucHJvYmFiaWxpdHk7XHJcbiAgICBleGlzdGluZ19pdGVtLmNvdW50ID0gTWF0aC5tYXgoZXhpc3RpbmdfaXRlbS5jb3VudCwgbmV3X2l0ZW0uY291bnQpO1xyXG4gIH1cclxuXHJcbiAgX3NvcnQoKXtcclxuICAgIHRoaXMuaXRlbXMuc29ydCh0aGlzLmNvbXBhcmVfaXRlbXMpO1xyXG4gIH1cclxuICBjb21wYXJlX2l0ZW1zKHAxLCBwMil7XHJcbiAgICByZXR1cm4gcDEuY29tcGFyZShwMilcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVyZ2VyO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IGNvbnN0cyA9IHJoLmNvbnN0cztcclxuXHJcbmNsYXNzIFBhdGhze1xyXG4gIGNvbnN0cnVjdG9yKHBhdGgpe1xyXG4gICAgdGhpcy5fcGF0aCA9IHBhdGggfHwgXCJcIlxyXG4gICAgdGhpcy5pbml0UGF0aCgpXHJcbiAgfVxyXG4gIGluaXRQYXRoKCl7XHJcbiAgICBpZih0aGlzLl9wYXRoID09PSBcIi5cIil7XHJcbiAgICAgIHRoaXMuX3BhdGggPSBcIlwiXHJcbiAgICB9XHJcbiAgICBpZih0aGlzLl9wYXRoWzBdID09PSAnLicgJiYgdGhpcy5fcGF0aFsxXSA9PT0gJy8nKXtcclxuICAgICAgdGhpcy5fcGF0aCA9IHRoaXMuX3BhdGguc2xpY2UoMilcclxuICAgIH1cclxuICB9XHJcbiAgX2dldE1vZGVsRmlsZU5hbWUoZmlsZU5vKXtcclxuICAgIHJldHVybiAgY29uc3RzKFwiU0VBUkNIX01PREVMX0FERFJcIikgKyBmaWxlTm8udG9TdHJpbmcoKSArXCIuanNcIjtcclxuICB9XHJcbiAgZ2V0TW9kZWxGaWxlUGF0aChmaWxlbm8pe1xyXG4gICAgbGV0IGZpbGVOYW1lID0gdGhpcy5fZ2V0TW9kZWxGaWxlTmFtZShmaWxlbm8pXHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpdmVQYXRoKGZpbGVOYW1lKVxyXG4gIH1cclxuICBfZ2V0UmVsYXRpdmVQYXRoKGZpbGVwYXRoKXtcclxuICAgIGxldCBwYXRoID0gKHRoaXMuX3BhdGggPT09IFwiXCIpPyBmaWxlcGF0aCA6ICB0aGlzLl9wYXRoICsgJy8nICsgZmlsZXBhdGhcclxuXHJcbiAgICByZXR1cm4gcGF0aFxyXG4gIH1cclxuICBfZ2V0UGF0aEtleSgpe1xyXG4gICAgcmV0dXJuICh0aGlzLl9wYXRoID09PSBcIlwiKT8gXCJcIiA6ICAnXycgKyB0aGlzLl9wYXRoICsgJ18nXHJcbiAgfVxyXG4gIGdldE1vZGVsS2V5IChmaWxlTm8pe1xyXG4gICAgcmV0dXJuIGNvbnN0cygnU0VBUkNIX01PREVMX0tFWScpICsgdGhpcy5fZ2V0UGF0aEtleSgpICsgZmlsZU5vLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0TWFwRmlsZU5hbWUoKXtcclxuICAgIHJldHVybiBjb25zdHMoXCJTRUFSQ0hfTUFQX0FERFJcIik7XHJcbiAgfVxyXG4gIGdldE1hcEZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSB0aGlzLl9nZXRNYXBGaWxlTmFtZSgpXHJcbiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpdmVQYXRoKGZpbGVOYW1lKTtcclxuICB9XHJcbiAgZ2V0SW5kZXhGaWxlUGF0aCgpe1xyXG4gICAgbGV0IGZpbGVOYW1lID0gY29uc3RzKFwiU0VBUkNIX0lOREVYX0ZJTEVcIilcclxuICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgoZmlsZU5hbWUpO1xyXG4gIH1cclxuICBnZXRUb3BpY1VybCh1cmwpIHtcclxuICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgodXJsKVxyXG4gIH1cclxuICBnZXRTZWFyY2hEYkZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSBjb25zdHMoXCJTRUFSQ0hfREJfRklMRVwiKVxyXG4gICAgcmV0dXJuIHRoaXMuX2dldFJlbGF0aXZlUGF0aChmaWxlTmFtZSk7XHJcblxyXG4gIH1cclxuICBnZXRNZXRhZGF0YUZpbGVQYXRoKCl7XHJcbiAgICBsZXQgZmlsZU5hbWUgPSBjb25zdHMoXCJTRUFSQ0hfTUVUQURBVEFfRklMRVwiKVxyXG4gICAgcmV0dXJuIHRoaXMuX2dldFJlbGF0aXZlUGF0aChmaWxlTmFtZSk7XHJcbiAgfVxyXG5cclxuICBnZXRUZXh0RmlsZVBhdGgoaWQpIHtcclxuICAgIGxldCBmb2xkZXJQYXRoID0gY29uc3RzKFwiU0VBUkNIX1RFWFRfRklMRVwiKVxyXG4gICAgbGV0IHJlbEZvbGRlclBhdGggPSB0aGlzLl9nZXRSZWxhdGl2ZVBhdGgoZm9sZGVyUGF0aClcclxuICAgIHJldHVybiBgJHtyZWxGb2xkZXJQYXRofS8ke2lkfS5qc2BcclxuICB9XHJcbiAgXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQYXRoc1xyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl9cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTeW5vbnltbnN7XHJcbiAgY29uc3RydWN0b3Ioc3lub255bW5zKSB7XHJcblxyXG4gICAgdGhpcy5zeW5vbnltbnMgPSBzeW5vbnltbnMgfHwgW11cclxuICAgIHRoaXMucm9vdFdvcmRzID0ge31cclxuICAgIHRoaXMubWVyZ2UoKVxyXG4gIH1cclxuICBtZXJnZSgpIHtcclxuICAgIHRoaXMucm9vdFdvcmRzID0ge31cclxuICAgIF8uZWFjaCh0aGlzLnN5bm9ueW1ucywgKGl0ZW0pID0+IHtcclxuICAgICAgbGV0IHN5bm9ueW1ucyA9IGl0ZW0ud29yZHNcclxuICAgICAgbGV0IHdvcmQgPSBpdGVtLm5hbWVcclxuICAgICAgXy5lYWNoKHN5bm9ueW1ucywgKHN5bikgPT4ge1xyXG4gICAgICAgIHRoaXMuX2FkZCh3b3JkLCBzeW4pXHJcbiAgICAgIH0pICAgICAgXHJcbiAgICB9KVxyXG4gIH1cclxuICBfYWRkKHdvcmQsIHN5bikge1xyXG4gICAgc3luID0gc3luLnRvTG93ZXJDYXNlKClcclxuICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKClcclxuICAgIHRoaXMucm9vdFdvcmRzW3N5bl0gPSB0aGlzLnJvb3RXb3Jkc1t3b3JkXSB8fCB3b3JkXHJcbiAgfVxyXG5cclxuICBnZXRSb290KHdvcmQpIHtcclxuICAgIHJldHVybiB0aGlzLnJvb3RXb3Jkc1t3b3JkXSB8fCB3b3JkXHJcbiAgfVxyXG59IiwibGV0IF9leHBvcnRzID0ge1xyXG4gIG1pblByZXZpb3VzVGhyZXNob2xkOiAwLjIsXHJcbiAgcHJldmlvdXNuR3JhbTogMSxcclxuICBtYXhfcHJlZGljdGlvbnM6NSxcclxuICBQUkVESUNUT1JfU09VUkNFX0lEOntcclxuICAgIEhJU1RPUllfUFJFRElDVE9SOjAsXHJcbiAgICBOR1JBTV9QUkVESUNUT1I6MSxcclxuICAgIEdFTkVSQUxfUFJFRElDVE9SOjIsXHJcbiAgICBDT1JSRUNUT1I6IDNcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzOyIsImNvbnN0IElOREVYID0gcmVxdWlyZSgnLi9pbmRpY2VzJyk7XHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguXztcclxuY29uc3QgUHJlZGljdGlvbiA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbicpO1xyXG5jb25zdCBzZWFyY2hfY29uc3RzID0gcmVxdWlyZSgnLi9jb25zdHMnKTtcclxuY29uc3Qgc2VhcmNoX3V0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5jb25zdCBQcmVkaWN0aW9uTGlzdCA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9saXN0Jyk7XHJcblxyXG5cclxuY2xhc3MgQ29ycmVjdG9ye1xyXG4gIGNvbnN0cnVjdG9yKCBsb2FkZXIsIGNhbGxiYWNrLCBtYXhfcHJlZGljdGlvbnMgPSAyMCl7XHJcbiAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXJcclxuICAgIHRoaXMucHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMubWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcbiAgZ2V0Q29ycmVjdGlvbnMocGFyc2VkX2lucHV0KXtcclxuICAgIHRoaXMuX3BhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICAgIHRoaXMucHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMuX2NvbXB1dGVQcmVkaWN0aW9ucygpO1xyXG4gICAgbGV0IGhhc2hlcyA9IHRoaXMuX2xvYWRlci5nZXRIYXNoZXModGhpcy5fcGFyc2VkX2lucHV0Ll9wYXJ0aWFsKVxyXG4gICAgaWYoaGFzaGVzKXtcclxuICAgICAgbGV0IGhhc2hfY291bnQgPSBoYXNoZXMubGVuZ3RoO1xyXG4gICAgICBmb3IobGV0IGkgPSAwOyBpIDwgaGFzaF9jb3VudCAmJiB0aGlzLnByZWRpY3Rpb25zLmxlbmd0aCA8IHRoaXMubWF4X3ByZWRpY3Rpb25zOyBpKyspe1xyXG4gICAgICAgIGxldCBoYXNoID0gaGFzaGVzW2ldO1xyXG4gICAgICAgIHRoaXMuX2FkZENvcnJlY3Rpb24oaGFzaCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMub25SZXN1bHRDYWxjdWxhdGVkKCk7XHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLnByZWRpY3Rpb25zID0gW11cclxuICB9XHJcbiAgX2NvbXB1dGVQcmVkaWN0aW9ucygpe1xyXG5cclxuICAgIGxldCB3b3JkX2hhc2hlcyA9IHRoaXMuX2xvYWRlci5nZXRIYXNoZXModGhpcy5fcGFyc2VkX2lucHV0Ll9wYXJ0aWFsKTtcclxuICAgIGlmKHdvcmRfaGFzaGVzKXtcclxuICAgICAgdGhpcy5fYWRkQ29ycmVjdGlvbih3b3JkX2hhc2hlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9uUmVzdWx0Q2FsY3VsYXRlZCgpe1xyXG4gICAgaWYodGhpcy5fY2FsbGJhY2spIHtcclxuICAgICAgdGhpcy5fY2FsbGJhY2sobmV3IFByZWRpY3Rpb25MaXN0KHRoaXMucHJlZGljdGlvbnMsIHRoaXMuX3BhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbWF0Y2hDb3JyZWN0aW9uKHdvcmQpe1xyXG4gICAgdGhpcy5faGFtbWluZ19kaXN0ID0gdGhpcy5fZ2V0RGlzdGFuY2Uod29yZCk7XHJcbiAgICBpZih0aGlzLl9oYW1taW5nX2Rpc3QgPD0gMiAmJiAhdGhpcy5fbG9hZGVyLmlzU3RvcFdvcmQod29yZCkpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9hZGRDb3JyZWN0aW9uKHdvcmRfaGFzaCl7XHJcbiAgICBpZighd29yZF9oYXNoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCB3b3JkID0gc2VhcmNoX3V0aWxzLmdldFNhZmVFbGVtZW50KHdvcmRfaGFzaCwgSU5ERVguTUFQLldPUkQpO1xyXG4gICAgaWYoIXdvcmQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuX21hdGNoQ29ycmVjdGlvbih3b3JkKSl7XHJcbiAgICAgIGxldCBjb21wbGV0ZV93b3JkID0gdGhpcy5fcGFyc2VkX2lucHV0LnJlcGxhY2VMYXN0V29yZCh3b3JkKVxyXG4gICAgICBsZXQgdGVybSA9IHRoaXMuX3BhcnNlZF9pbnB1dC5jb21wbGV0ZVN1Z2dlc3Rpb24oY29tcGxldGVfd29yZClcclxuICAgICAgbGV0IHByZWRpY3Rpb24gPSBuZXcgUHJlZGljdGlvbih0ZXJtLCAxL3RoaXMuX2hhbW1pbmdfZGlzdCwgMiwgc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkNPUlJFQ1RPUiApO1xyXG4gICAgICB0aGlzLnByZWRpY3Rpb25zLnB1c2gocHJlZGljdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXREaXN0YW5jZSh3b3JkKXtcclxuICAgIHJldHVybiBfLmZpbmRFZGl0RGlzdCh0aGlzLl9wYXJzZWRfaW5wdXQuX3BhcnRpYWwsIHdvcmQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDb3JyZWN0b3I7XHJcbiIsImNvbnN0IFByZWRpY3Rpb25MaXN0ID0gcmVxdWlyZSgnLi9wcmVkaWN0aW9uX2xpc3QnKTtcclxuY29uc3QgUHJlZGljdG9uQ3JlYXRvciA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9jcmVhdG9yJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5jb25zdCBJTkRFWCA9IHJlcXVpcmUoJy4vaW5kaWNlcycpO1xyXG5jb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcbmNvbnN0IFByZWRpY3Rvbk1lcmdlciA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tZXJnZXInKTtcclxuXHJcbmNsYXNzIEdlbmVyYWxQcmVkaWN0b3J7XHJcbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIGxvYWRlciwgbWF4X3ByZWRpY3Rpb25zID0gMjApe1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gICAgdGhpcy50b3RhbF9jb3VudCA9IHRoaXMuX2xvYWRlci5nZXRUb3RhbENvdW50KCk7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkdFTkVSQUxfUFJFRElDVE9SO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9uX21lcmdlciA9IG5ldyBQcmVkaWN0b25NZXJnZXIoW10sIHRoaXMudG90YWxfY291bnQqNSk7XHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLnByZWRpY3Rpb25fbWVyZ2VyLmNsZWFyKCk7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHVuZGVmaW5lZFxyXG4gIH1cclxuICBnZXRQcmVkaWN0aW9ucyhwYXJzZWRfaW5wdXQpe1xyXG5cclxuICAgIHRoaXMuX2luaXQocGFyc2VkX2lucHV0KTtcclxuICAgIHRoaXMuX2NvbXB1dGVQcmVkaWN0aW9ucygpXHJcblxyXG4gICAgdGhpcy5fb25SZXN1bHRDb21wdXRlZCgpO1xyXG4gIH1cclxuICBfY29tcHV0ZVByZWRpY3Rpb25zKCl7XHJcblxyXG4gICAgbGV0IHdvcmRfaGFzaGVzID0gdGhpcy5fZ2V0V29yZEhhc2hlcygpO1xyXG4gICAgaWYod29yZF9oYXNoZXMpe1xyXG4gICAgICB0aGlzLl9hZGRQcmVkaWN0aW9ucyh3b3JkX2hhc2hlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9pc1dob2xlV29yZElucHV0KCl7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuaXNXaG9sZVdvcmQ7XHJcbiAgfVxyXG4gIF9nZXRXb3JkSGFzaGVzKCl7XHJcbiAgICByZXR1cm4gKHRoaXMucGFyc2VkX2lucHV0LmlzV2hvbGVXb3JkKT9cclxuICAgICAgICAgICAgIHRoaXMuX2xvYWRlci50b3Bfd29yZHNcclxuICAgICAgICAgICAgIDp0aGlzLl9sb2FkZXIuZ2V0SGFzaGVzKHRoaXMucGFyc2VkX2lucHV0Ll9wYXJ0aWFsKVxyXG4gIH1cclxuICBfaW5pdChwYXJzZWRfaW5wdXQpe1xyXG4gICAgdGhpcy5wcmVkaWN0aW9uX21lcmdlciA9IG5ldyBQcmVkaWN0b25NZXJnZXIoW10sIHRoaXMudG90YWxfY291bnQqNSk7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICB9XHJcbiAgZ2V0IHByZWRpY3Rpb25zICgpe1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdGlvbl9tZXJnZXIuaXRlbXNcclxuICB9XHJcbiAgX29uUmVzdWx0Q29tcHV0ZWQoKXtcclxuICAgIGlmKHRoaXMuX2NhbGxiYWNrKXtcclxuICAgICAgdGhpcy5fY2FsbGJhY2sgKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLnByZWRpY3Rpb25zLCB0aGlzLnBhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQgbWF4X3ByZWRpY3Rpb25zKG5ld1ZhbHVlKXtcclxuICAgIHRoaXMuX21heF9wcmVkaWN0aW9ucyA9IG5ld1ZhbHVlO1xyXG4gIH1cclxuICBnZXQgbWF4X3ByZWRpY3Rpb25zKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbWF4X3ByZWRpY3Rpb25zO1xyXG4gIH1cclxuICBfYWRkUHJlZGljdGlvbnMoaGFzaGVzKXtcclxuICAgIGlmKCFoYXNoZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBoYXNoX2NvdW50ID0gaGFzaGVzLmxlbmd0aDtcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBoYXNoX2NvdW50ICYmIHRoaXMucHJlZGljdGlvbnMubGVuZ3RoIDwgdGhpcy5tYXhfcHJlZGljdGlvbnM7IGkrKyl7XHJcbiAgICAgIGxldCBoYXNoID0gaGFzaGVzW2ldO1xyXG4gICAgICB0aGlzLl9hZGRXb3JkUHJlZGljdGlvbihoYXNoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2FkZFdvcmRQcmVkaWN0aW9uKHdvcmRfaGFzaCwgbWF0Y2hGbil7XHJcbiAgICBtYXRjaEZuID0gbWF0Y2hGbiB8fCB0aGlzLl9tYXRjaGVzX3BhcnRpYWxseS5iaW5kKHRoaXMpO1xyXG4gICAgbGV0IG1vZGVsX2RhdGEgPSB0aGlzLl9sb2FkZXIuZ2V0TW9kZWxEYXRhKHdvcmRfaGFzaCk7XHJcbiAgICBsZXQgdG90YWxfY291bnQgPSB0aGlzLl9sb2FkZXIudG90YWxfY291bnQ7XHJcbiAgICBpZihtYXRjaEZuKHdvcmRfaGFzaCkpe1xyXG4gICAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICAgIGlmKHRoaXMuX3Nob3VsZF9hZGRfcHJlZGljdGlvbih3b3JkKSl7XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlX3ByZWRpY3Rpb25zKHdvcmRfaGFzaCwgdG90YWxfY291bnQsIG1vZGVsX2RhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY29udGludWVGbigpe1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIF9zaG91bGRfYWRkX3ByZWRpY3Rpb24od29yZCl7XHJcbiAgICByZXR1cm4gIXRoaXMuX2xvYWRlci5pc1N0b3BXb3JkKHdvcmQpICYmICF0aGlzLnBhcnNlZF9pbnB1dC5lcXVhbExhc3RXb3JkKHdvcmQpXHJcbiAgfVxyXG4gIF9tYXRjaGVzX3BhcnRpYWxseSh3b3JkX2hhc2gpe1xyXG4gICAgaWYodGhpcy5wYXJzZWRfaW5wdXQuaXNXaG9sZVdvcmQpe1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGFyZVBhcnRpYWwod29yZCk7XHJcbiAgfVxyXG4gIF9jcmVhdGVfcHJlZGljdGlvbnMod29yZF9oYXNoLCBtb2RlbF9jb3VudCwgbW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgY3JlYXRvciA9IG5ldyBQcmVkaWN0b25DcmVhdG9yKHtsb2FkZXI6IHRoaXMuX2xvYWRlciwgbW9kZWxfaXRlbSwgdG90YWxfY291bnQ6bW9kZWxfY291bnQsIHBhcnNlZF9pbnB1dDp0aGlzLnBhcnNlZF9pbnB1dCwgY29udGludWVGbjogdGhpcy5fY29udGludWVGbn0pO1xyXG4gICAgbGV0IHByZWRpY3Rpb25zID0gY3JlYXRvci5nZXRNdWx0aVByZWRpY3Rpb25zKHdvcmRfaGFzaCwgdHJ1ZSwgdW5kZWZpbmVkLCB0aGlzLl9zb3VyY2UpO1xyXG4gICAgXy5lYWNoKHByZWRpY3Rpb25zLCAocHJlZGljdGlvbikgPT4ge1xyXG4gICAgICBpZihwcmVkaWN0aW9uICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgIHRoaXMucHJlZGljdGlvbl9tZXJnZXIubWVyZ2VJdGVtKHByZWRpY3Rpb24pXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NhbGN1bGF0ZV9wcm9iYWJpbGl0eShjb3VudCl7XHJcbiAgICByZXR1cm4gKGNvdW50L3RoaXMudG90YWxfY291bnQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHZW5lcmFsUHJlZGljdG9yO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmxldCBfID0gcmguXztcclxubGV0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxubGV0IFBhcnNlciA9IHJlcXVpcmUoJy4vaW5wdXRfcGFyc2VyJyk7XHJcbmxldCBQcmVkaWN0aW9uTGlzdCA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9saXN0Jyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5cclxuY2xhc3MgSGlzdG9yeVByZWRpY3RvcntcclxuICBjb25zdHJ1Y3RvcihyZWFkZXIsIGNhbGxiYWNrKXtcclxuICAgIHRoaXMuX3JlYWRlciA9IHJlYWRlcjtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zID0gW107XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkhJU1RPUllfUFJFRElDVE9SO1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gKHNlYXJjaF9jb25zdHMuX21heF9oaXN0b3J5X3ByZWRpY3Rpb25zID09PSB1bmRlZmluZWQpPyAyOiBzZWFyY2hfY29uc3RzLl9tYXhfaGlzdG9yeV9wcmVkaWN0aW9ucztcclxuICB9XHJcbiAgZ2V0UHJlZGljdGlvbnMocGFyc2VkX2lucHV0KSB7XHJcbiAgICB0aGlzLl9wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fcGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0O1xyXG4gICAgdGhpcy5fY29tcHV0ZVByZWRpY3Rpb25zKCk7XHJcbiAgICBpZih0aGlzLl9jYWxsYmFjayl7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLl9wcmVkaWN0aW9ucywgdGhpcy5fcGFyc2VkX2lucHV0KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fcHJlZGljdGlvbnM7XHJcbiAgfVxyXG4gIGluaXQoKXtcclxuICB9XHJcbiAgY2xlYXIoKXtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zID0gW107XHJcbiAgfVxyXG4gIF9jb21wdXRlUHJlZGljdGlvbnMoKXtcclxuICAgIGlmKHRoaXMuX3BhcnNlZF9pbnB1dC50cmltbWVkVGV4dCAhPT0gXCJcIil7XHJcbiAgICAgIF8uZWFjaCh0aGlzLl9yZWFkZXIuX2xpc3QsIChpdGVtKT0+e1xyXG4gICAgICAgIGlmKHRoaXMuX21hdGNoKGl0ZW0udGV4dCkpe1xyXG4gICAgICAgICAgdGhpcy5fcHJlZGljdGlvbnMucHVzaCh0aGlzLl9jcmVhdGVQcmVkaWN0aW9uKGl0ZW0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9wdXJnZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfcHVyZ2UoKXtcclxuICAgIHRoaXMuX3ByZWRpY3Rpb25zLnNwbGljZSh0aGlzLl9tYXhfcHJlZGljdGlvbnMpO1xyXG4gIH1cclxuICBfY3JlYXRlUHJlZGljdGlvbihpdGVtKXtcclxuICAgIGxldCBuZXdQcmVkaWN0aW9uID0gbmV3IFByZWRpY3Rpb24oaXRlbS50ZXh0LCAxLCBpdGVtLmNvdW50LCB0aGlzLl9zb3VyY2UpO1xyXG4gICAgcmV0dXJuIG5ld1ByZWRpY3Rpb247XHJcbiAgfVxyXG4gIF9tYXRjaCh0ZXh0KXtcclxuICAgIGlmKHRoaXMuX3BhcnNlZF9pbnB1dC5vcmlnaW5hbF90ZXh0Lmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgbGV0IHBhcnNlZF90ZXh0ID0gbmV3IFBhcnNlcih0ZXh0LCB0cnVlKTtcclxuICAgIHJldHVybiB0aGlzLl9wYXJzZWRfaW5wdXQuY29tcGFyZShwYXJzZWRfdGV4dCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEhpc3RvcnlQcmVkaWN0b3I7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5jb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5jbGFzcyBIaXN0b3J5UmVhZGVye1xyXG4gIGNvbnN0cnVjdG9yKCl7XHJcbiAgfVxyXG5cclxuXHJcbiAgaW5pdEhpc3RvcnkobGlzdCl7XHJcbiAgICBpZih0aGlzLl9saXN0ID09PSB1bmRlZmluZWQpe1xyXG4gICAgICB0aGlzLl9saXN0ID0gbGlzdCB8fCBbXTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0SGlzdG9yeSgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2xpc3QgfHwgW107XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlVGV4dCh0ZXh0LCBpbmRleCl7XHJcbiAgICB0aGlzLmdldEhpc3RvcnkoKS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgdGhpcy5nZXRIaXN0b3J5KCkudW5zaGlmdCh0ZXh0KTtcclxuICB9XHJcblxyXG4gIF9hZGROZXdUZXh0KG5ld1RleHQpe1xyXG4gICAgdGhpcy5nZXRIaXN0b3J5KCkucHVzaChuZXdUZXh0KTtcclxuICB9XHJcblxyXG4gIGFkZChuZXdUZXh0KXtcclxuICAgIGxldCBuSW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLmdldEhpc3RvcnkoKSwgKGl0ZW0pID0+IHtyZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2UobmV3VGV4dC50ZXh0LCBpdGVtLnRleHQpID09PSAwO30pO1xyXG4gICAgaWYobkluZGV4ID49MCl7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZVRleHQobmV3VGV4dCwgbkluZGV4KTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHRoaXMuX2FkZE5ld1RleHQobmV3VGV4dCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRlbGV0ZShzZWFyY2hUZXh0KXtcclxuICAgIGxldCBuSW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLmdldEhpc3RvcnkoKSwgKGl0ZW0pID0+IHtyZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2Uoc2VhcmNoVGV4dCwgaXRlbS50ZXh0KSA9PT0gMDt9KTtcclxuICAgIGlmKG5JbmRleCA+PTApe1xyXG4gICAgICB0aGlzLmdldEhpc3RvcnkoKS5zcGxpY2UobkluZGV4KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbmV3IEhpc3RvcnlSZWFkZXIoKTtcclxuIiwibGV0IF9leHBvcnRzID0ge1xyXG4gIE1BUDp7XHJcbiAgICBXT1JEOjAsXHJcbiAgICBIQVNIOjEsXHJcbiAgICBDT1VOVDoyLFxyXG4gICAgTU9ERUxfRklMRV9OTzozLFxyXG4gICAgTU9ERUxfSU5ERVg6NCxcclxuICAgIFRPUElDUzo1XHJcbiAgfSxcclxuXHJcbiAgTU9ERUwgOntcclxuICAgIFdPUkRfSEFTSDowLFxyXG4gICAgQ09VTlQ6IDEsXHJcbiAgICBORVhUX01PREVMOiAyXHJcbiAgfSxcclxuXHJcbiAgRklSU1RfUFJFRElDVElPTjp7XHJcbiAgICBORVhUOjAsXHJcbiAgICBQUkVWSU9VUzoxXHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBfZXhwb3J0czsiLCJjb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcblxyXG5jbGFzcyBJbnB1dFBhcnNlcntcclxuICBjb25zdHJ1Y3Rvcih0ZXh0LCBpc1dob2xlV29yZCwgc2VsZWN0aW9uLCBpc1ByZXZpb3VzKXtcclxuICAgIHRoaXMuaXNQcmV2aW91cyA9IGlzUHJldmlvdXM7XHJcbiAgICB0aGlzLnNlbGVjdGlvbiA9IChzZWxlY3Rpb24gPT09IHVuZGVmaW5lZCkgPyB0ZXh0Lmxlbmd0aCA6IHNlbGVjdGlvblxyXG4gICAgbGV0IHNlcGFyYXRvciA9IHRoaXMuX2NhbGN1bGF0ZVNlcGFyYXRvcih0ZXh0KTtcclxuICAgIGlmKCF0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICB0aGlzLmlzV2hvbGVXb3JkID0gaXNXaG9sZVdvcmQgfHwgdGhpcy5faXNXaG9sZVdvcmQodGV4dCwgc2VwYXJhdG9yKTtcclxuICAgIH1cclxuICAgIHRoaXMuaW5pdFRleHQodGV4dCwgc2VwYXJhdG9yKTtcclxuICB9XHJcblxyXG4gIGluaXRUZXh0KHRleHQsIHNlcGFyYXRvcil7XHJcbiAgICB0aGlzLl9jb21wdXRlVGV4dCh0ZXh0LCBzZXBhcmF0b3IpO1xyXG4gICAgdGhpcy50cmltbWVkVGV4dCA9IHRoaXMub3JpZ2luYWxfdGV4dC50cmltKCk7XHJcbiAgICB0aGlzLndvcmRzID0gXy5jb21wYWN0KHRoaXMudHJpbW1lZFRleHQuc3BsaXQoXCIgXCIpIHx8IFtdKTtcclxuICAgIHRoaXMuX3JldmVyc2VJZlByZXZpb3VzKCk7XHJcbiAgICBpZighdGhpcy5pc1dob2xlV29yZCAmJiB0aGlzLndvcmRzLmxlbmd0aCA+IDApe1xyXG4gICAgICB0aGlzLl9wYXJ0aWFsID0gKHRoaXMud29yZHMuc3BsaWNlKC0xKSlbMF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jb21wdXRlVGV4dCh0ZXh0LCBzZXBhcmF0b3Ipe1xyXG4gICAgdGhpcy5fcmlnaHRfdGV4dCA9IFwiXCI7XHJcbiAgICB0aGlzLl9sZWZ0X3RleHQgPSBcIlwiO1xyXG5cclxuICAgIGlmKHNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgc2VwYXJhdG9yID0gdGV4dC5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzU3BsaXRUZXh0ID0gIShzZXBhcmF0b3IgPT09IDAgfHwgc2VwYXJhdG9yID09PSB0ZXh0Lmxlbmd0aClcclxuICAgIGxldCBsZWZ0X3RleHQgPSB0ZXh0LnN1YnN0cmluZygwLCBzZXBhcmF0b3IpO1xyXG4gICAgbGV0IHJpZ2h0X3RleHQgPSB0ZXh0LnN1YnN0cmluZyhzZXBhcmF0b3IpO1xyXG5cclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHRoaXMub3JpZ2luYWxfdGV4dCA9IHJpZ2h0X3RleHQ7XHJcbiAgICAgIHRoaXMuX2xlZnRfdGV4dCA9IGxlZnRfdGV4dC50cmltKCk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9yaWdpbmFsX3RleHQgPSBsZWZ0X3RleHQ7XHJcbiAgICAgIHRoaXMuX3JpZ2h0X3RleHQgPSByaWdodF90ZXh0LnRyaW0oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVxdWFsUmVtYWluZ1dvcmQod29yZCl7XHJcbiAgICBpZih0aGlzLl9sZWZ0X3RleHQgIT09IFwiXCIgfHwgdGhpcy5fcmlnaHRfdGV4dCAhPT1cIlwiKXtcclxuICAgICAgbGV0IHJlbWFpbmluZ1dvcmQgPSB0aGlzLl9nZXRSZW1haW5pZ1dvcmQoKTtcclxuICAgICAgaWYocmVtYWluaW5nV29yZCl7XHJcbiAgICAgICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKHJlbWFpbmluZ1dvcmQsIHdvcmQpID09PSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcblxyXG5cclxuICBfZ2V0UmVtYWluaWdXb3JkKCl7XHJcbiAgICBsZXQgd29yZHMgPSAodGhpcy5pc1ByZXZpb3VzKT8gdGhpcy5fbGVmdF90ZXh0LnNwbGl0KFwiIFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX3JpZ2h0X3RleHQuc3BsaXQoXCIgXCIpO1xyXG5cclxuICAgIHdvcmRzID0gd29yZHMgfHwgW11cclxuICAgIHdvcmRzID0gXy5jb21wYWN0KHdvcmRzKTtcclxuICAgIGlmKHdvcmRzLmxlbmd0aCA+IDApe1xyXG4gICAgICByZXR1cm4gKHRoaXMuaXNQcmV2aW91cyk/IHdvcmRzW3dvcmRzLmxlbmd0aCAtMV0gOiB3b3Jkc1swXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBsZXRlU3VnZ2VzdGlvbih0ZXh0KXtcclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiAodGhpcy5fbGVmdF90ZXh0Lmxlbmd0aCA9PT0gMCk/IHRleHQgOiB0aGlzLl9sZWZ0X3RleHQgKyBcIiBcIiArIHRleHQ7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gKHRoaXMuX3JpZ2h0X3RleHQubGVuZ3RoID09PSAwKT8gdGV4dCA6IHRleHQgKyBcIiBcIiArIHRoaXMuX3JpZ2h0X3RleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jYWxjdWxhdGVTZXBhcmF0b3IodGV4dCl7XHJcblxyXG4gICAgaWYodGhpcy5pc1ByZXZpb3VzKXtcclxuICAgICAgaWYodGhpcy5zZWxlY3Rpb24gPT09IDApe1xyXG4gICAgICAgIHRoaXMuaXNXaG9sZVdvcmQgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCh0ZXh0Lmxlbmd0aCA+IHRoaXMuc2VsZWN0aW9uKSAmJiB0ZXh0W3RoaXMuc2VsZWN0aW9uLTFdICE9PSBcIiBcIil7XHJcbiAgICAgICAgbGV0IHByZXZpb3VzU3BhY2VJbmRleCA9IHRleHQubGFzdEluZGV4T2YoXCIgXCIsIHRoaXMuc2VsZWN0aW9uLTEpO1xyXG4gICAgICAgIHRoaXMuaXNXaG9sZVdvcmQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKHByZXZpb3VzU3BhY2VJbmRleCA+PSAwKSA/IHByZXZpb3VzU3BhY2VJbmRleCsxIDogMDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmlzV2hvbGVXb3JkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbjtcclxuICB9XHJcbiAgX3JldmVyc2VJZlByZXZpb3VzKCl7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICB0aGlzLndvcmRzLnJldmVyc2UoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2lzV2hvbGVXb3JkKHRleHQsIHNlcGFyYXRvcil7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICBpZiAoc2VwYXJhdG9yID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICh0ZXh0Lmxlbmd0aCA+IHNlcGFyYXRvcikgJiYgdGV4dFtzZXBhcmF0b3ItMV0gPT09IFwiIFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzZXBhcmF0b3IgPiAwICYmIHRleHRbc2VwYXJhdG9yIC0xXSA9PT0gXCIgXCI7XHJcbiAgfVxyXG4gIGNvbXBhcmUob3RoZXJfaW5wdXQsIHN0YXJ0ID0gMCwgZW5kID0gdW5kZWZpbmVkKXtcclxuICAgIGVuZCA9IChlbmQgPT09IHVuZGVmaW5lZCkgPyAgdGhpcy53b3Jkcy5sZW5ndGggLTEgOiBlbmQ7XHJcbiAgICBpZih0aGlzLndvcmRzLmxlbmd0aCA+IG90aGVyX2lucHV0LndvcmRzLmxlbmd0aCl7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGxldCBpID0gc3RhcnQ7XHJcbiAgICBmb3IoOyBpIDw9IGVuZDsgaSsrKXtcclxuICAgICAgbGV0IHdvcmQxID0gdGhpcy53b3Jkc1tpXTtcclxuICAgICAgbGV0IHdvcmQyID0gb3RoZXJfaW5wdXQud29yZHNbaV07XHJcbiAgICAgIGlmKHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKHdvcmQxLCB3b3JkMikgIT09IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm1hdGNoUGFydGlhbChvdGhlcl9pbnB1dCwgaSk7XHJcbiAgfVxyXG4gIG1hdGNoUGFydGlhbChvdGhlcl9pbnB1dCwgaW5kZXgpe1xyXG4gICAgaWYodGhpcy5fcGFydGlhbCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZihvdGhlcl9pbnB1dC53b3Jkcy5sZW5ndGggPD0gaW5kZXgpe1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgb3RoZXJfd29yZCA9IG90aGVyX2lucHV0LndvcmRzW2luZGV4XTtcclxuICAgIHJldHVybiB0aGlzLmNvbXBhcmVQYXJ0aWFsKG90aGVyX3dvcmQpO1xyXG4gIH1cclxuICBjb21wYXJlUGFydGlhbCh3b3JkKXtcclxuICAgIHRoaXMuX21hdGNoRXhwID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLl9wYXJ0aWFsLCAnaScpO1xyXG4gICAgcmV0dXJuIHRoaXMuX21hdGNoRXhwLnRlc3Qod29yZCk7XHJcbiAgfVxyXG4gIGNvbXBsZXRlV29yZChuZXh0X3dvcmQpe1xyXG4gICAgaWYodGhpcy5pc1dob2xlV29yZCB8fCB0aGlzLl9wYXJ0aWFsID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcGFydGlhbC5sZW5ndGggPT09IDApe1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRUZXJtRm9yQ29tcGxldGVXb3JkKG5leHRfd29yZCwgdGhpcy50cmltbWVkVGV4dCk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRUZXJtRm9yUGFydGlhbFRleHQobmV4dF93b3JkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRlcm1Gb3JQYXJ0aWFsVGV4dChuZXh0X3dvcmQpe1xyXG4gICAgbGV0IHBhcnRpYWxfbmV4dF93b3JkID0gbmV4dF93b3JkLnN1YnN0cmluZyh0aGlzLl9wYXJ0aWFsLmxlbmd0aCwgbmV4dF93b3JkLmxlbmd0aCk7XHJcbiAgICBpZih0aGlzLmlzUHJldmlvdXMpe1xyXG4gICAgICBsZXQgdHJpbW1lZFRleHQgPSBcIlwiO1xyXG4gICAgICBsZXQgZmlyc3RTcGFjZUluZGV4ID0gdGhpcy50cmltbWVkVGV4dC5pbmRleE9mKCcgJyk7XHJcbiAgICAgIGlmKGZpcnN0U3BhY2VJbmRleCA+PSAwKXtcclxuICAgICAgICB0cmltbWVkVGV4dCA9IHRoaXMudHJpbW1lZFRleHQuc3Vic3RyaW5nKGZpcnN0U3BhY2VJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuX3BhcnRpYWwgKyBwYXJ0aWFsX25leHRfd29yZCArIHRyaW1tZWRUZXh0O1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMudHJpbW1lZFRleHQgKyBwYXJ0aWFsX25leHRfd29yZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFRlcm1Gb3JDb21wbGV0ZVdvcmQobmV4dF93b3JkKXtcclxuICAgIGlmKHRoaXMuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiBuZXh0X3dvcmQgKyBcIiBcIiArIHRoaXMudHJpbW1lZFRleHQ7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICByZXR1cm4gdGhpcy50cmltbWVkVGV4dCArIFwiIFwiICsgbmV4dF93b3JkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVwbGFjZUxhc3RXb3JkKG5leHRfd29yZCl7XHJcbiAgICBsZXQgdGV4dCA9IHRoaXMudHJpbW1lZFRleHQ7XHJcbiAgICBpZih0aGlzLl9wYXJ0aWFsICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuaXNXaG9sZVdvcmQpe1xyXG4gICAgICBsZXQgaW5kZXggPSB0aGlzLnRyaW1tZWRUZXh0Lmxlbmd0aCAtIHRoaXMuX3BhcnRpYWwubGVuZ3RoO1xyXG4gICAgICB0ZXh0ID0gdGhpcy50cmltbWVkVGV4dC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dCArIFwiIFwiICsgbmV4dF93b3JkO1xyXG4gIH1cclxuICBlcXVhbExhc3RXb3JkKHdvcmQpe1xyXG4gICAgaWYodGhpcy53b3Jkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgbGV0IGxhc3Rfd29yZCA9IHRoaXMud29yZHNbdGhpcy53b3Jkcy5sZW5ndGggLTFdO1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKGxhc3Rfd29yZCwgd29yZCkgPT09IDA7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IElucHV0UGFyc2VyO1xyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl87XHJcbmNvbnN0IG1vZGVsID0gcmgubW9kZWw7XHJcbmNvbnN0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuY29uc3QgU0VBUkNIX0NPTlNUUyA9IHJlcXVpcmUoJy4vY29uc3RzJyk7XHJcbmNvbnN0IFBhdGhzID0gcmVxdWlyZSgnLi4vY29tbW9uL3BhdGhzJylcclxuXHJcblxyXG5jbGFzcyBMb2FkZXIge1xyXG4gIGNvbnN0cnVjdG9yKHBhdGggPSBcIlwiKXtcclxuICAgIHRoaXMuX3BhdGhzID0gbmV3IFBhdGhzKHBhdGgpXHJcbiAgfVxyXG5cclxuICBpbml0KGNhbGxiYWNrRm4pe1xyXG4gICAgdGhpcy5sb2FkSW5kZXgoY2FsbGJhY2tGbik7XHJcbiAgICB0aGlzLmxvYWRNYXAoY2FsbGJhY2tGbik7XHJcbiAgfVxyXG5cclxuICBfaXNJbmRleExvYWRlZCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YSAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0TW9kZWxDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS5Nb2RlbC5sZW5ndGg7XHJcbiAgfVxyXG4gIGdldE1hcEhhc2goaGFzaF9rZXkpe1xyXG4gICAgcmV0dXJuIHRoaXMuX2hhc2hfdG9fd29yZFtoYXNoX2tleV07XHJcbiAgfVxyXG4gIGdldEhhc2hlcyhpbnB1dCl7XHJcbiAgICBpZihpbnB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0Lmxlbmd0aCA+IDApe1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRBcGxoYWJldEhhc2hlcyhpbnB1dFswXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldEFwbGhhYmV0SGFzaGVzKGFscGhhYmV0KXtcclxuICAgIGlmKHRoaXMubWFwX2RhdGEgJiYgYWxwaGFiZXQubGVuZ3RoID09PSAxKXtcclxuICAgICAgbGV0IGxhbHBoYWJldCA9IGFscGhhYmV0LnRvTG93ZXJDYXNlKClcclxuICAgICAgcmV0dXJuIHRoaXMubWFwX2RhdGFbbGFscGhhYmV0XTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0V29yZE1vZGVsKHdvcmQsIG1vZGVsX2RhdGEpe1xyXG4gICAgbGV0IHdvcmRfbW9kZWw7XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fZ2V0SGFzaEZvcldvcmQod29yZCk7XHJcbiAgICBpZih3b3JkX2hhc2ggJiYgbW9kZWxfZGF0YSl7XHJcbiAgICAgIHdvcmRfbW9kZWwgPSBtb2RlbF9kYXRhW3dvcmRfaGFzaFtJTkRFWC5NQVAuTU9ERUxfSU5ERVhdXTtcclxuICAgIH1cclxuICAgIHJldHVybiB3b3JkX21vZGVsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q291bnQod29yZCl7XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fZ2V0SGFzaEZvcldvcmQod29yZCk7XHJcbiAgICBpZih3b3JkX2hhc2gpe1xyXG4gICAgICByZXR1cm4gd29yZF9oYXNoW0lOREVYLk1BUC5DT1VOVF07XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldE1vZGVsRGF0YSh3b3JkX2hhc2gpeyAvLyBhc3luYyBjYWxsIGlmIG5vdCBsb2FkZWQgcmV0dXJuIGVtcHR5IGFycmF5XHJcbiAgICBsZXQgZmlsZW5vID0gd29yZF9oYXNoW0lOREVYLk1BUC5NT0RFTF9GSUxFX05PXTtcclxuICAgIGxldCBtb2RlbF9pbmRleCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuTU9ERUxfSU5ERVhdO1xyXG4gICAgbGV0IGRhdGEgPSBtb2RlbC5nZXQodGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZW5vKSk7XHJcbiAgICBpZighZGF0YSl7XHJcbiAgICAgIHRoaXMubG9hZE1vZGVsKGZpbGVubyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YSAmJiBkYXRhW21vZGVsX2luZGV4XSA7XHJcbiAgfVxyXG4gIF9jb21wYXJlV29yZENvdW50KGhhc2hfaXRlbTEsIGhhc2hfaXRlbTIpe1xyXG4gICAgbGV0IGNvdW50MSA9IHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudChoYXNoX2l0ZW0xLCBJTkRFWC5NQVAuQ09VTlQpO1xyXG4gICAgbGV0IGNvdW50MiA9IHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudChoYXNoX2l0ZW0yLCBJTkRFWC5NQVAuQ09VTlQpO1xyXG4gICAgaWYoY291bnQxICYmIGNvdW50Mikge1xyXG4gICAgICByZXR1cm4gY291bnQyIC0gY291bnQxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG4gIF9idWlsZFRvcFdvcmRzKHdvcmRzKXtcclxuICAgIHdvcmRzLnNvcnQodGhpcy5fY29tcGFyZVdvcmRDb3VudCk7XHJcbiAgICB3b3Jkcy5zcGxpY2UoU0VBUkNIX0NPTlNUUy5tYXhfcHJlZGljdGlvbnMgKjEwMClcclxuICAgIHRoaXMuX3RvcF93b3JkcyA9IHdvcmRzO1xyXG4gIH1cclxuICBnZXQgdG9wX3dvcmRzKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fdG9wX3dvcmRzO1xyXG4gIH1cclxuICBnZXRNb2RlbEZpbGVObyh3b3JkKXtcclxuICAgIGxldCB3b3JkX2hhc2ggPSB0aGlzLl9nZXRIYXNoRm9yV29yZCh3b3JkKTtcclxuICAgIGlmKHdvcmRfaGFzaCl7XHJcbiAgICAgIHJldHVybiB3b3JkX2hhc2hbSU5ERVguTUFQLk1PREVMX0ZJTEVfTk9dO1xyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0SGFzaEZvcldvcmQod29yZCl7XHJcbiAgICBsZXQgaGFzaDtcclxuICAgIGxldCB3b3JkX2tleSA9IHRoaXMuZ2V0SGFzaEtleSh3b3JkKTtcclxuICAgIGlmKHdvcmRfa2V5KXtcclxuICAgICAgaGFzaCA9IHRoaXMuX2hhc2hfdG9fd29yZFt3b3JkX2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzaDtcclxuICB9XHJcbiAgZ2V0SGFzaEtleSh3b3JkKXtcclxuICAgIGlmKHdvcmQgJiYgd29yZC5sZW5ndGggPiAwKXtcclxuICAgICAgbGV0IGxXb3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICByZXR1cm4gdGhpcy5fd29yZF9oYXNoW2xXb3JkXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxvYWRJbmRleChjYWxsYmFja0ZuKSB7XHJcbiAgICBpZih0aGlzLl9pc0luZGV4TG9hZGVkKCkgPT09IGZhbHNlKXtcclxuICAgICAgXy5sb2FkU2NyaXB0KHRoaXMuX3BhdGhzLmdldEluZGV4RmlsZVBhdGgoKSwgdHJ1ZSwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuaW5kZXhfZGF0YSA9IF8uZXhwb3J0cygpO1xyXG4gICAgICAgIHRoaXMub25JbmRleExvYWRlZChjYWxsYmFja0ZuKTtcclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9uSW5kZXhMb2FkZWQoY2FsbGJhY2tGbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgbkdyYW0oKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEubkdyYW07XHJcbiAgfVxyXG4gIGdldCBzZWFyY2hfbW9kZWwgKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS5Nb2RlbDtcclxuICB9XHJcbiAgZ2V0IHNlYXJjaF9tYXAoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEuTWFwO1xyXG4gIH1cclxuICBnZXQgdG90YWxfY291bnQoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEudG90YWxDb3VudDtcclxuICB9XHJcbiAgZ2V0IHN0b3Bfd29yZHMoKXtcclxuICAgIHJldHVybiB0aGlzLmluZGV4X2RhdGEuc3RvcFdvcmRzO1xyXG4gIH1cclxuXHJcbiAgbG9hZE1vZGVsKGZpbGVObywgY2FsbGJhY2tGbikge1xyXG4gICAgbGV0IGRhdGEgPSBbXTtcclxuICAgIGlmKGZpbGVObyE9PSB1bmRlZmluZWQpe1xyXG4gICAgICBsZXQga2V5ID0gdGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZU5vKVxyXG4gICAgICBsZXQgZGF0YSA9IG1vZGVsLmdldChrZXkpXHJcbiAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgbW9kZWwucHVibGlzaChrZXksIG51bGwpXHJcblxyXG4gICAgICAgIGxldCBmaWxlcGF0aCA9IHRoaXMuX3BhdGhzLmdldE1vZGVsRmlsZVBhdGgoZmlsZU5vKVxyXG4gICAgICAgIF8ubG9hZFNjcmlwdChmaWxlcGF0aCwgdHJ1ZSwgdGhpcy5nZXRPbk1vZGVsTG9hZEZuKGZpbGVObywgY2FsbGJhY2tGbiksIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoZGF0YSA9PT0gbnVsbCAmJiBjYWxsYmFja0ZuICE9PSB1bmRlZmluZWQpe1xyXG5cclxuICAgICAgICBtb2RlbC5zdWJzY3JpYmUoa2V5LCBjYWxsYmFja0ZuKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIHRoaXMuZG9DYWxsYmFjayhjYWxsYmFja0ZuLCBkYXRhLCBmaWxlTm8pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHRoaXMuZG9DYWxsYmFjayhjYWxsYmFja0ZuLCBkYXRhLCBmaWxlTm8pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGRvQ2FsbGJhY2soY2FsbGJhY2tGbiwgZGF0YSwgZmlsZW5vKXtcclxuICAgIGlmKGNhbGxiYWNrRm4pIHtcclxuICAgICAgY2FsbGJhY2tGbihkYXRhLCBmaWxlbm8pXHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldE9uTW9kZWxMb2FkRm4oZmlsZU5vLCBjYWxsYmFja0ZuKXtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0gXy5leHBvcnRzKCk7XHJcbiAgICAgIG1vZGVsLnB1Ymxpc2godGhpcy5fcGF0aHMuZ2V0TW9kZWxLZXkoZmlsZU5vKSwgZGF0YSk7XHJcbiAgICAgIGlmKGNhbGxiYWNrRm4pe1xyXG4gICAgICAgIGNhbGxiYWNrRm4oZGF0YSwgZmlsZU5vKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBvbk1hcExvYWRlZChjYWxsYmFja0ZuKXtcclxuICAgIHRoaXMucGFyc2VNYXAoKTtcclxuICAgIGlmKHRoaXMuaW5kZXhfZGF0YSAmJiBjYWxsYmFja0ZuKXtcclxuICAgICAgY2FsbGJhY2tGbih0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uSW5kZXhMb2FkZWQoY2FsbGJhY2tGbil7XHJcbiAgICBpZih0aGlzLm1hcF9kYXRhICYmIGNhbGxiYWNrRm4pe1xyXG4gICAgICBjYWxsYmFja0ZuKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuICBwYXJzZU1hcCgpe1xyXG4gICAgbGV0IGRhdGEgPSB0aGlzLm1hcF9kYXRhO1xyXG4gICAgdGhpcy5fd29yZF9oYXNoID0ge307XHJcbiAgICB0aGlzLl9oYXNoX3RvX3dvcmQgPXt9O1xyXG4gICAgbGV0IHdvcmRzID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGxldHRlciBpbiBkYXRhKXtcclxuICAgICAgbGV0IHdvcmRzX2RhdGEgPSBkYXRhW2xldHRlcl07XHJcbiAgICAgIHRoaXMuX3BhcnNlV29yZHNEYXRhKHdvcmRzX2RhdGEpXHJcbiAgICAgIHdvcmRzID0gd29yZHMuY29uY2F0KHdvcmRzX2RhdGEpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYnVpbGRUb3BXb3Jkcyh3b3Jkcyk7XHJcbiAgfVxyXG4gIF9wYXJzZVdvcmRzRGF0YSh3b3Jkc19kYXRhKXtcclxuICAgIF8uZWFjaCh3b3Jkc19kYXRhLCAod29yZF9kYXRhKSA9PntcclxuICAgICAgbGV0IGhhc2hfa2V5ID0gcGFyc2VJbnQod29yZF9kYXRhW0lOREVYLk1BUC5IQVNIXSk7XHJcbiAgICAgIGlmKHdvcmRfZGF0YVtJTkRFWC5NQVAuV09SRF0pIHtcclxuICAgICAgICBsZXQgd29yZCA9IHdvcmRfZGF0YVtJTkRFWC5NQVAuV09SRF0udG9TdHJpbmcoKTtcclxuICAgICAgICB0aGlzLl93b3JkX2hhc2hbd29yZF0gPSBoYXNoX2tleTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9oYXNoX3RvX3dvcmRbaGFzaF9rZXldID0gd29yZF9kYXRhO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGlzU3RvcFdvcmQod29yZCl7XHJcbiAgICBsZXQgaW5kZXggPSBfLmZpbmQodGhpcy5pbmRleF9kYXRhLnN0b3BXb3JkcywgKHN0b3Bfd29yZCkgPT57XHJcbiAgICAgIHJldHVybiBzZWFyY2hfdXRpbHMuY29tcGFyZU5vQ2FzZSh3b3JkLCBzdG9wX3dvcmQpID09PSAwXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbmRleCAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VG90YWxDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhfZGF0YS50b3RhbENvdW50O1xyXG4gIH1cclxuICB3b3JkSGFzaGZyb21JbmRleEtleShpbmRleF9rZXksIGZpbGVubyl7XHJcbiAgICByZXR1cm4gXy5maW5kKHRoaXMuX2hhc2hfdG9fd29yZCwgKG1hcF9pdGVtKSA9PntcclxuICAgICAgcmV0dXJuIG1hcF9pdGVtW0lOREVYLk1BUC5NT0RFTF9JTkRFWF0gPT09IGluZGV4X2tleSAmJiBtYXBfaXRlbVtJTkRFWC5NQVAuTU9ERUxfRklMRV9OT10gPT09IGZpbGVubztcclxuICAgIH0pO1xyXG4gIH1cclxuICBsb2FkTWFwKGNhbGxiYWNrRm4pe1xyXG4gICAgaWYodGhpcy5tYXBfZGF0YSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgXy5sb2FkU2NyaXB0KHRoaXMuX3BhdGhzLmdldE1hcEZpbGVQYXRoKCksIHRydWUsICgpID0+IHtcclxuICAgICAgICB0aGlzLm1hcF9kYXRhID0gXy5leHBvcnRzKCk7XHJcbiAgICAgICAgdGhpcy5vbk1hcExvYWRlZChjYWxsYmFja0ZuKTtcclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLm9uTWFwTG9hZGVkKGNhbGxiYWNrRm4pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2FkZXI7XHJcbiIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fO1xyXG5sZXQgUHJlZGljdG9uQ3JlYXRvciA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbl9jcmVhdG9yJyk7XHJcbi8vbGV0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuLy9sZXQgUHJlZGljdGlvbiA9IHJlcXVpcmUoJy4vcHJlZGljdGlvbicpO1xyXG5sZXQgUHJlZGljdGlvbkxpc3QgPSByZXF1aXJlKCcuL3ByZWRpY3Rpb25fbGlzdCcpO1xyXG5jb25zdCBzZWFyY2hfY29uc3RzID0gcmVxdWlyZSgnLi9jb25zdHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuXHJcbmNsYXNzIE5HcmFtUHJlZGljdG9ye1xyXG4gIGNvbnN0cnVjdG9yKHtsb2FkZXIsIGxldmVsLCBjYWxsYmFjaywgcHJldmlvdXMsIG1heF9wcmVkaWN0aW9ucyA9IDIwfSl7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICB0aGlzLnByZXZpb3VzID0gIHByZXZpb3VzO1xyXG4gICAgdGhpcy5fbWF4X3ByZWRpY3Rpb25zID0gbWF4X3ByZWRpY3Rpb25zO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2xvYWRlciA9IGxvYWRlclxyXG4gICAgdGhpcy5fc291cmNlID0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELk5HUkFNX1BSRURJQ1RPUjtcclxuICB9XHJcblxyXG4gIGluaXQoKXtcclxuXHJcbiAgfVxyXG4gIGNsZWFyKCl7XHJcbiAgICB0aGlzLl93b3JkX21vZGVsID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fcHJlZGljdGlvbl9hcnJheSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJlZGljdGlvbnMocGFyc2VkX2lucHV0KSB7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dFxyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgaWYocGFyc2VkX2lucHV0ICE9PSB1bmRlZmluZWQgJiYgKHBhcnNlZF9pbnB1dC53b3Jkcy5sZW5ndGggPj0gdGhpcy5sZXZlbCkpe1xyXG4gICAgICB0aGlzLndvcmRfaW5kZXggPSBwYXJzZWRfaW5wdXQud29yZHMubGVuZ3RoIC0gdGhpcy5sZXZlbDtcclxuICAgICAgdGhpcy5fd29yZCA9IHBhcnNlZF9pbnB1dC53b3Jkc1t0aGlzLndvcmRfaW5kZXhdO1xyXG4gICAgICB0aGlzLl9sb2FkSW5wdXRNb2RlbCh0aGlzLl93b3JkLCB0aGlzLl9jb21wdXRlX3dvcmRfcHJlZGljdGlvbnMuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLl9vblJlc3VsdHNDb21wdXRlZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXQgbWF4X3ByZWRpY3Rpb25zKG5ld1ZhbHVlKXtcclxuICAgIHRoaXMubWF4X3ByZWRpY3Rpb25zID0gbmV3VmFsdWU7XHJcbiAgfVxyXG4gIGdldCBtYXhfcHJlZGljdGlvbnMoKXtcclxuICAgIHJldHVybiB0aGlzLl9tYXhfcHJlZGljdGlvbnM7XHJcbiAgfVxyXG5cclxuICBfY29tcHV0ZV93b3JkX3ByZWRpY3Rpb25zKG1vZGVsX2RhdGEpe1xyXG4gICAgdGhpcy5wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgbGV0IGxldmVsID0gdGhpcy5sZXZlbDtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fd29yZDtcclxuICAgIGxldCB0b3RhbF9jb3VudCA9IHRoaXMuX2xvYWRlci5nZXRDb3VudCh3b3JkKTtcclxuICAgIHRoaXMuX3dvcmRfbW9kZWwgPSB0aGlzLl9sb2FkZXIuZ2V0V29yZE1vZGVsKHdvcmQsIG1vZGVsX2RhdGEpO1xyXG4gICAgaWYodGhpcy5fd29yZF9tb2RlbCl7XHJcbiAgICAgIHRoaXMuX3ByZWRpY3Rpb25fYXJyYXkgPSB0aGlzLl9nZXRfcHJlZGljdGlvbl9hcnJheSgpO1xyXG4gICAgICB0aGlzLl9jb21wdXRlX3ByZWRpY3Rpb25fZnJvbV9tb2RlbCh3b3JkLCBsZXZlbCwgdG90YWxfY291bnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fb25SZXN1bHRzQ29tcHV0ZWQoKTtcclxuICB9XHJcbiAgX29uUmVzdWx0c0NvbXB1dGVkKCl7XHJcbiAgICBpZih0aGlzLl9jYWxsYmFjayl7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrKG5ldyBQcmVkaWN0aW9uTGlzdCh0aGlzLnByZWRpY3Rpb25zLCB0aGlzLnBhcnNlZF9pbnB1dCksIHRoaXMuX2xvYWRlcik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jb21wdXRlX3ByZWRpY3Rpb25fZnJvbV9tb2RlbCh3b3JkLCBsZXZlbCwgdG90YWxfY291bnQpe1xyXG4gICAgaWYodGhpcy5fcHJlZGljdGlvbl9hcnJheSA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuX2lzX215X2xldmVsKGxldmVsKSkge1xyXG4gICAgICB0aGlzLl9jb21wdXRlX25leHRfd29yZHModG90YWxfY291bnQpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgbGV2ZWwtLTtcclxuICAgICAgbGV0IG5leHRfaW5kZXggPSB0aGlzLl9nZXRfd29yZF9pbmRleChsZXZlbCk7XHJcbiAgICAgIGxldCBuZXh0X3dvcmQgPSB0aGlzLnBhcnNlZF9pbnB1dC53b3Jkc1tuZXh0X2luZGV4XTtcclxuICAgICAgbGV0IG5leHRfd29yZF9rZXkgPSB0aGlzLl9sb2FkZXIuZ2V0SGFzaEtleShuZXh0X3dvcmQpO1xyXG4gICAgICBsZXQgbmV4dF93b3JkX21vZGVsID0gdGhpcy5fZ2V0X25leHRfbW9kZWwodGhpcy5fcHJlZGljdGlvbl9hcnJheSwgbmV4dF93b3JkX2tleSk7XHJcbiAgICAgIGlmKG5leHRfd29yZF9tb2RlbCl7XHJcbiAgICAgICAgdG90YWxfY291bnQgPSBuZXh0X3dvcmRfbW9kZWxbSU5ERVguTU9ERUwuQ09VTlRdO1xyXG4gICAgICAgIHRoaXMuX3ByZWRpY3Rpb25fYXJyYXkgPSBuZXh0X3dvcmRfbW9kZWxbSU5ERVguTU9ERUwuTkVYVF9NT0RFTF07XHJcbiAgICAgICAgdGhpcy5fY29tcHV0ZV9wcmVkaWN0aW9uX2Zyb21fbW9kZWwobmV4dF93b3JkLCBsZXZlbCwgdG90YWxfY291bnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRfbmV4dF9tb2RlbChtb2RlbF9kYXRhLCB3b3JkX2hhc2hfa2V5KXtcclxuICAgIGlmKCF3b3JkX2hhc2hfa2V5KXtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGxldCBuZXh0X3dvcmRfcHJlZGljdGlvbiA9IF8uZmluZChtb2RlbF9kYXRhLCAoaXRlbSkgPT57XHJcbiAgICAgIHJldHVybiAoaXRlbS5sZW5ndGggPjEpICYmIChpdGVtW0lOREVYLk1PREVMLldPUkRfSEFTSF0gPT09IHdvcmRfaGFzaF9rZXkpO1xyXG4gICAgfSk7XHJcbiAgICBpZiggbmV4dF93b3JkX3ByZWRpY3Rpb24gJiYgbmV4dF93b3JkX3ByZWRpY3Rpb24ubGVuZ3RoID4gSU5ERVguTU9ERUwuTkVYVF9NT0RFTCAmJiBBcnJheS5pc0FycmF5KG5leHRfd29yZF9wcmVkaWN0aW9uKSl7XHJcbiAgICAgIHJldHVybiBuZXh0X3dvcmRfcHJlZGljdGlvbjsgIC8vIFRPRE8gbWF5IGJlIG5lZWRzIGEgZml4XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRfd29yZF9pbmRleChsZXZlbCl7XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQud29yZHMubGVuZ3RoIC0gbGV2ZWw7XHJcbiAgfVxyXG4gIF9pc19teV9sZXZlbChsZXZlbCl7XHJcbiAgICByZXR1cm4gbGV2ZWwgPT09IDE7XHJcbiAgfVxyXG4gIF9jb250aW51ZUZuKCl7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgX2NvbXB1dGVfbmV4dF93b3Jkcyh0b3RhbF9jb3VudCl7XHJcbiAgICBsZXQgcHJlZGljdGlvbl9hcnJheSA9IHRoaXMuX3ByZWRpY3Rpb25fYXJyYXk7XHJcbiAgICBpZighKHByZWRpY3Rpb25fYXJyYXkgJiYgcHJlZGljdGlvbl9hcnJheS5sZW5ndGggPiAwKSl7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGk9IDA7IHRoaXMucHJlZGljdGlvbnMubGVuZ3RoIDwgdGhpcy5tYXhfcHJlZGljdGlvbnMgJiYgaSA8IHByZWRpY3Rpb25fYXJyYXkubGVuZ3RoICYmIHByZWRpY3Rpb25fYXJyYXlbaV0ubGVuZ3RoID4gMTsgaSsrKXtcclxuICAgICAgaWYoIXRoaXMuX21hdGNoZXNfcGFydGlhbGx5KHByZWRpY3Rpb25fYXJyYXlbaV0pKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHByZWRpY3Rpb25zID0gdGhpcy5fY3JlYXRlX3ByZWRpY3Rpb25zKHByZWRpY3Rpb25fYXJyYXlbaV0sIHRvdGFsX2NvdW50KTtcclxuICAgICAgdGhpcy5fY29tcHV0ZV9uZXh0X211bHRpX3dvcmRzKHByZWRpY3Rpb25zKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NvbXB1dGVfbmV4dF9tdWx0aV93b3JkcyhwcmVkaWN0aW9ucyl7XHJcbiAgICBfLmVhY2gocHJlZGljdGlvbnMsIChwcmVkaWN0aW9uKSA9PiB7XHJcbiAgICAgIGlmKHByZWRpY3Rpb24gIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgdGhpcy5wcmVkaWN0aW9ucy5wdXNoKHByZWRpY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2dldF93b3JkX2hhc2gobW9kZWxfaXRlbSl7XHJcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmdldE1hcEhhc2gobW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5XT1JEX0hBU0hdKTtcclxuICB9XHJcblxyXG4gIF9tYXRjaGVzX3BhcnRpYWxseShwcmVkaWN0aW9uKXtcclxuICAgIGlmKHRoaXMucGFyc2VkX2lucHV0LmlzV2hvbGVXb3JkKXtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBsZXQgd29yZF9oYXNoID0gdGhpcy5fbG9hZGVyLmdldE1hcEhhc2gocHJlZGljdGlvbltJTkRFWC5NT0RFTC5XT1JEX0hBU0hdKTtcclxuICAgIC8vIFRPRE8gd2hhdCBpZiBub3QgYSB3b3JkIGhhc2ggP1xyXG4gICAgaWYoIXdvcmRfaGFzaCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBsZXQgd29yZCA9IHdvcmRfaGFzaFtJTkRFWC5NQVAuV09SRF07XHJcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGFyZVBhcnRpYWwod29yZCk7XHJcbiAgfVxyXG4gIF9jcmVhdGVfcHJlZGljdGlvbnMobmV4dF9hcnJheSwgdG90YWxfY291bnQpe1xyXG4gICAgbGV0IGNyZWF0b3IgPSBuZXcgUHJlZGljdG9uQ3JlYXRvcih7bG9hZGVyOnRoaXMuX2xvYWRlciwgbW9kZWxfaXRlbTpuZXh0X2FycmF5LCB0b3RhbF9jb3VudCwgcGFyc2VkX2lucHV0OnRoaXMucGFyc2VkX2lucHV0LCBjb250aW51ZUZuOnRoaXMuX2NvbnRpbnVlRm59KTtcclxuICAgIHJldHVybiAgY3JlYXRvci5nZXRNdWx0aVByZWRpY3Rpb25zKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRoaXMuX3NvdXJjZSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0X3ByZWRpY3Rpb25fYXJyYXkoKXsgLy8gcmV0dXJucyBhbiBhcnJheSBmcm9tIHdoaWNoIHByZWRpY3Rpb25zIGFyZSB0byBiZSBjYWxjdWxhdGVzXHJcbiAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5pc1ByZXZpb3VzICYmIHRoaXMuX3dvcmRfbW9kZWwubGVuZ3RoID4gMSl7XHJcbiAgICAgIHJldHVybiB0aGlzLl93b3JkX21vZGVsWzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMuX3dvcmRfbW9kZWxbMF07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfbG9hZElucHV0TW9kZWwod29yZCwgY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgbkZpbGVJbmRleCA9IHRoaXMuX2ZpbmRGaWxlSW5kZXgod29yZCk7XHJcbiAgICB0aGlzLl9sb2FkZXIubG9hZE1vZGVsKG5GaWxlSW5kZXgsIGNhbGxiYWNrRm4pO1xyXG4gIH1cclxuXHJcbiAgX2ZpbmRGaWxlSW5kZXgod29yZCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbG9hZGVyLmdldE1vZGVsRmlsZU5vKHdvcmQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOR3JhbVByZWRpY3RvcjtcclxuIiwiaW1wb3J0IHNlYXJjaF91dGlscyBmcm9tICcuL3V0aWxzJ1xyXG5jbGFzcyBQcmVkaWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih0ZXJtLCBwcm9iYWJpbGl0eSwgY291bnQsIHNvdXJjZSl7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ID0gcHJvYmFiaWxpdHk7XHJcbiAgICB0aGlzLnRlcm0gPSB0ZXJtO1xyXG4gICAgdGhpcy5jb3VudCA9IGNvdW50O1xyXG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgfVxyXG4gIG1lcmdlKG5ld19pdGVtKSB7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ICs9IG5ld19pdGVtLnByb2JhYmlsaXR5O1xyXG4gICAgdGhpcy5jb3VudCA9IE1hdGgubWF4KHRoaXMuY291bnQsIG5ld19pdGVtLmNvdW50KTtcclxuICB9XHJcbiAgY29tcGFyZShvdGhlcikge1xyXG4gICAgcmV0dXJuIG90aGVyLnByb2JhYmlsaXR5IC0gdGhpcy5wcm9iYWJpbGl0eVxyXG4gIH1cclxuICBtYXRjaChvdGhlcikge1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5jb21wYXJlTm9DYXNlKG90aGVyLnRlcm0sIHRoaXMudGVybSkgPT09IDA7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZWRpY3Rpb247IiwibGV0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxubGV0IHNlYXJjaF91dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxubGV0IElucHV0UGFyc2VyID0gcmVxdWlyZSgnLi9pbnB1dF9wYXJzZXInKTtcclxuY29uc3Qgc2VhcmNoX2NvbnN0cyA9IHJlcXVpcmUoJy4vY29uc3RzJyk7XHJcblxyXG5cclxuY2xhc3MgUHJlZGljdG9uQ3JlYXRvcntcclxuICBjb25zdHJ1Y3Rvcih7bG9hZGVyLCBtb2RlbF9pdGVtLCB0b3RhbF9jb3VudCwgcGFyc2VkX2lucHV0LCBjb250aW51ZUZufSl7XHJcbiAgICB0aGlzLl9tb2RlbF9pdGVtID0gbW9kZWxfaXRlbTtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0IHx8IG5ldyBJbnB1dFBhcnNlcihcIlwiKTtcclxuICAgIHRoaXMuX2luaXQoKTtcclxuICAgIHRoaXMuX3RvdGFsX2NvdW50ID0gdG90YWxfY291bnQ7XHJcbiAgICB0aGlzLl9jb250aW51ZUZuID0gY29udGludWVGbiB8fCB0aGlzLl9pc1N0b3BXb3JkO1xyXG4gICAgdGhpcy5fbmV4dE1vZGVsRm4gPSB0aGlzLl9uZXh0TW9kZWw7XHJcbiAgICB0aGlzLl9wcmVkaWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5fbXVsdGlfcHJlZGljdGlvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5fbG9hZGVyID0gbG9hZGVyO1xyXG4gIH1cclxuXHJcbiAgX2luaXQoKXtcclxuICAgIHRoaXMudGVybSA9IFwiXCI7XHJcbiAgICB0aGlzLnByb2JhYmlsaXR5ID0gMTtcclxuICAgIHRoaXMuX2ZpcnN0X3dvcmQgPSB0cnVlO1xyXG4gICAgdGhpcy5pc0ZpcnN0TGV2ZWwgPSBmYWxzZTtcclxuICAgIHRoaXMuX2xldmVsID0gMDtcclxuICB9XHJcblxyXG4gIGdldFByZWRpY3Rpb24od29yZF9oYXNoLCBpc0ZpcnN0TGV2ZWwsIHByZXZpb3VzLCBzb3VyY2Upe1xyXG4gICAgdGhpcy53b3JkX2hhc2ggPSB3b3JkX2hhc2g7XHJcbiAgICB0aGlzLmlzRmlyc3RMZXZlbCA9IGlzRmlyc3RMZXZlbDtcclxuICAgIHRoaXMucHJldmlvdXMgPSBwcmV2aW91cztcclxuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgaWYodGhpcy5pc0ZpcnN0TGV2ZWwpe1xyXG4gICAgICB0aGlzLl9hcHBlbmRQcmV2aW91c1ByZWRpY3Rpb25zKHRoaXMuX21vZGVsX2l0ZW0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fYXBwZW5kUHJlZGljdGlvbih0aGlzLl9tb2RlbF9pdGVtLCB3b3JkX2hhc2gpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVByZWRpY3Rpb24oKTtcclxuICB9XHJcbiAgZ2V0TXVsdGlQcmVkaWN0aW9ucyh3b3JkX2hhc2gsIGlzRmlyc3RMZXZlbCwgcHJldmlvdXMsIHNvdXJjZSl7XHJcbiAgICB0aGlzLl9tdWx0aV9wcmVkaWN0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMud29yZF9oYXNoID0gd29yZF9oYXNoO1xyXG4gICAgdGhpcy5pc0ZpcnN0TGV2ZWwgPSBpc0ZpcnN0TGV2ZWw7XHJcbiAgICB0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7XHJcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIGlmKHRoaXMuaXNGaXJzdExldmVsKXtcclxuICAgICAgdGhpcy5fYXBwZW5kUHJldmlvdXNQcmVkaWN0aW9ucyh0aGlzLl9tb2RlbF9pdGVtKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2FwcGVuZFByZWRpY3Rpb24odGhpcy5fbW9kZWxfaXRlbSwgd29yZF9oYXNoKTtcclxuICAgIHJldHVybiB0aGlzLl9wcmVkaWN0aW9ucztcclxuICB9XHJcblxyXG4gIGVxdWFsUmVtYWluZ1dvcmQobW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgd29yZCA9IHRoaXMuX2dldHdvcmQobW9kZWxfaXRlbSwgdGhpcy53b3JkX2hhc2gpO1xyXG4gICAgaWYod29yZCl7XHJcbiAgICAgIGlmKHRoaXMucGFyc2VkX2lucHV0LmVxdWFsUmVtYWluZ1dvcmQod29yZCkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBfYXBwZW5kUHJldmlvdXNQcmVkaWN0aW9ucyhtb2RlbF9pdGVtKXtcclxuICAgIGxldCBwcmV2aW91c19pdGVtID0gdGhpcy5fZ2V0UHJldmlvdXNJdGVtKG1vZGVsX2l0ZW0pO1xyXG4gICAgaWYoIXByZXZpb3VzX2l0ZW0pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHByZXZpb3VzX3Byb2JhaWxpdHkgPSB0aGlzLl9nZXRQcmV2aW91c1Byb2JhYmlsaXR5KHByZXZpb3VzX2l0ZW0pO1xyXG4gICAgaWYocHJldmlvdXNfcHJvYmFpbGl0eSA+IHNlYXJjaF9jb25zdHMubWluUHJldmlvdXNUaHJlc2hvbGQpe1xyXG4gICAgICB0aGlzLl9hcHBlbmRQcmV2aW91c1Rlcm0ocHJldmlvdXNfaXRlbSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRQcmV2aW91c0l0ZW0obW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgcHJldmlvdXNfaXRlbXMgPSBzZWFyY2hfdXRpbHMuZ2V0Rmlyc3RMZXZlbE5leHRNb2RlbChtb2RlbF9pdGVtLCB0cnVlKTtcclxuICAgIGlmKHByZXZpb3VzX2l0ZW1zKXtcclxuICAgICAgbGV0IHByZXZpb3VzX2l0ZW0gPSBzZWFyY2hfdXRpbHMuZ2V0U2FmZUVsZW1lbnQocHJldmlvdXNfaXRlbXMsIDApO1xyXG4gICAgICByZXR1cm4gcHJldmlvdXNfaXRlbTtcclxuICAgIH1cclxuICB9XHJcbiAgX2FwcGVuZFByZXZpb3VzVGVybShtb2RlbF9pdGVtKXtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fZ2V0d29yZChtb2RlbF9pdGVtKTtcclxuICAgIGlmKHdvcmQpe1xyXG4gICAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5lcXVhbExhc3RXb3JkKHdvcmQpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudGVybSA9IHRoaXMucGFyc2VkX2lucHV0LnJlcGxhY2VMYXN0V29yZCh3b3JkKTtcclxuICAgICAgdGhpcy5fZmlyc3Rfd29yZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBfY3JlYXRlUHJlZGljdGlvbigpe1xyXG4gICAgaWYodGhpcy50ZXJtICE9PSBcIlwiKXtcclxuICAgICAgbGV0IHN1Z2dlc3Rpb25fdGV4dCA9IHRoaXMucGFyc2VkX2lucHV0LmNvbXBsZXRlU3VnZ2VzdGlvbih0aGlzLnRlcm0pO1xyXG4gICAgICByZXR1cm4gbmV3IFByZWRpY3Rpb24oc3VnZ2VzdGlvbl90ZXh0LCB0aGlzLnByb2JhYmlsaXR5LCAxLCB0aGlzLnNvdXJjZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfYXBwZW5kUHJlZGljdGlvbihtb2RlbF9pdGVtKXtcclxuICAgIHRoaXMucHJvYmFiaWxpdHkgPSB0aGlzLnByb2JhYmlsaXR5ICogdGhpcy5fY2FsY3VsYXRlUHJvYmFiaWxpdHkobW9kZWxfaXRlbSk7XHJcbiAgICB0aGlzLl91cGRhdGVfdGVybShtb2RlbF9pdGVtKTtcclxuICAgIGlmKHRoaXMuX3Nob3VsZENyZWF0ZVByZWRpY3Rpb24obW9kZWxfaXRlbSkpe1xyXG4gICAgICB0aGlzLl9wcmVkaWN0aW9ucy5wdXNoKHRoaXMuX2NyZWF0ZVByZWRpY3Rpb24oKSlcclxuICAgIH1cclxuICAgIGlmKHRoaXMuX2NvbnRpbnVlRm4obW9kZWxfaXRlbSkpe1xyXG4gICAgICBsZXQgbmV4dF9tb2RlbCA9IHRoaXMuX25leHRNb2RlbChtb2RlbF9pdGVtKTtcclxuICAgICAgdGhpcy5fdG90YWxfY291bnQgPSB0aGlzLl9nZXRDb3VudChtb2RlbF9pdGVtKTtcclxuICAgICAgdGhpcy5fbGV2ZWwrKztcclxuICAgICAgdGhpcy5fZmlyc3Rfd29yZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmlzRmlyc3RMZXZlbCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLndvcmRfaGFzaCA9IHVuZGVmaW5lZDtcclxuICAgICAgaWYobmV4dF9tb2RlbCl7XHJcbiAgICAgICAgdGhpcy5fYXBwZW5kUHJlZGljdGlvbihuZXh0X21vZGVsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0UHJldmlvdXNQcm9iYWJpbGl0eShwcmV2aW91c19pdGVtKXtcclxuICAgIGxldCB0b3RhbF9jb3VudCA9ICB0aGlzLl9nZXRDb3VudCh0aGlzLm1vZGVsX2l0ZW0pO1xyXG4gICAgbGV0IGNvdW50ID0gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbU1vZGVsKHByZXZpb3VzX2l0ZW0pO1xyXG4gICAgcmV0dXJuIGNvdW50L3RvdGFsX2NvdW50O1xyXG4gIH1cclxuICBfdXBkYXRlX3Rlcm0obW9kZWxfaXRlbSl7XHJcbiAgICBpZih0aGlzLnBhcnNlZF9pbnB1dC5pc1ByZXZpb3VzKXtcclxuICAgICAgdGhpcy50ZXJtID0gdGhpcy5fbmV4dFRlcm0obW9kZWxfaXRlbSkgKyB0aGlzLnRlcm07XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICB0aGlzLnRlcm0gPSB0aGlzLnRlcm0gKyB0aGlzLl9uZXh0VGVybShtb2RlbF9pdGVtKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2dldHdvcmQobW9kZWxfaXRlbSwgd29yZF9oYXNoKXtcclxuICAgIHdvcmRfaGFzaCA9IHdvcmRfaGFzaCB8fCB0aGlzLl9nZXRfd29yZF9oYXNoKG1vZGVsX2l0ZW0pO1xyXG4gICAgcmV0dXJuIHNlYXJjaF91dGlscy5nZXRTYWZlRWxlbWVudCh3b3JkX2hhc2gsIElOREVYLk1BUC5XT1JEKTtcclxuICB9XHJcblxyXG4gIF9nZXRfd29yZF9oYXNoKG1vZGVsX2l0ZW0pe1xyXG4gICAgcmV0dXJuIHRoaXMuX2xvYWRlci5nZXRNYXBIYXNoKG1vZGVsX2l0ZW1bSU5ERVguTU9ERUwuV09SRF9IQVNIXSk7XHJcbiAgfVxyXG4gIF9uZXh0TW9kZWwobW9kZWxfaXRlbSl7XHJcbiAgICBsZXQgbmV4dF9tb2RlbDtcclxuICAgIGlmKHRoaXMuaXNGaXJzdExldmVsKXtcclxuICAgICAgbmV4dF9tb2RlbCA9IHNlYXJjaF91dGlscy5nZXRGaXJzdExldmVsTmV4dE1vZGVsKG1vZGVsX2l0ZW0sIHRoaXMucHJldmlvdXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgbmV4dF9tb2RlbCA9IHNlYXJjaF91dGlscy5nZXROZXh0TW9kZWwobW9kZWxfaXRlbSk7XHJcbiAgICB9XHJcbiAgICBpZihuZXh0X21vZGVsICYmIG5leHRfbW9kZWwubGVuZ3RoID4gIDApe1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldEZpcnN0UHJlZGljdGlvbihuZXh0X21vZGVsKTtcclxuICAgIH1cclxuICB9XHJcbiAgX25leHRUZXJtKG1vZGVsX2l0ZW0pe1xyXG4gICAgbGV0IHdvcmQgPSB0aGlzLl9nZXR3b3JkKG1vZGVsX2l0ZW0sIHRoaXMud29yZF9oYXNoKTtcclxuICAgIGlmKHdvcmQpe1xyXG4gICAgICByZXR1cm4gKHRoaXMuX2ZpcnN0X3dvcmQpID8gdGhpcy5wYXJzZWRfaW5wdXQuY29tcGxldGVXb3JkKHdvcmQpIDogXCIgXCIgKyB3b3JkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG4gIF9jYWxjdWxhdGVQcm9iYWJpbGl0eShtb2RlbF9pdGVtKXtcclxuICAgIGxldCBjb3VudCA9IHRoaXMuX2dldENvdW50KG1vZGVsX2l0ZW0pO1xyXG4gICAgcmV0dXJuIChjb3VudCAvIHRoaXMuX3RvdGFsX2NvdW50KTtcclxuICB9XHJcbiAgX2dldENvdW50KG1vZGVsX2l0ZW0pe1xyXG4gICAgaWYodGhpcy53b3JkX2hhc2gpe1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbVdvcmRIYXNoKHRoaXMud29yZF9oYXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmdldENvdW50ZnJvbU1vZGVsKG1vZGVsX2l0ZW0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2hvdWxkQ3JlYXRlUHJlZGljdGlvbihtb2RlbF9pdGVtKXtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fbXVsdGlfcHJlZGljdGlvbiAmJlxyXG4gICAgICAgICAgICAhdGhpcy5faXNTdG9wV29yZChtb2RlbF9pdGVtKSAmJlxyXG4gICAgICAgICAgICAhdGhpcy5lcXVhbFJlbWFpbmdXb3JkKG1vZGVsX2l0ZW0pO1xyXG4gIH1cclxuICBfaXNTdG9wV29yZChtb2RlbF9pdGVtKXtcclxuICAgIGxldCB3b3JkID0gdGhpcy5fZ2V0d29yZChtb2RlbF9pdGVtLCB0aGlzLndvcmRfaGFzaCk7XHJcbiAgICBpZighd29yZCl7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9sb2FkZXIuaXNTdG9wV29yZCh3b3JkKTtcclxuICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVkaWN0b25DcmVhdG9yO1xyXG4iLCJjbGFzcyBQcmVkaWN0aW9uTGlzdCB7XHJcbiAgY29uc3RydWN0b3IobGlzdCAsIHBhcnNlZF9pbnB1dCl7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHBhcnNlZF9pbnB1dDtcclxuICAgIHRoaXMuX2xpc3QgPSBsaXN0IHx8IFtdO1xyXG4gIH1cclxuICBnZXQgcHJlZGljdGlvbnMgKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlzdDtcclxuICB9XHJcbiAgaXNGb3JJbnB1dChpbnB1dCwgcHJldmlvdXNfaW5wdXQpe1xyXG4gICAgaWYodGhpcy5wYXJzZWRfaW5wdXQuaXNQcmV2aW91cyl7XHJcbiAgICAgIHJldHVybiAocHJldmlvdXNfaW5wdXQgIT09IHVuZGVmaW5lZCkgJiYgKHRoaXMucGFyc2VkX2lucHV0Lm9yaWdpbmFsX3RleHQgPT09IHByZXZpb3VzX2lucHV0Lm9yaWdpbmFsX3RleHQpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuIHRoaXMucGFyc2VkX2lucHV0Lm9yaWdpbmFsX3RleHQgPT09IGlucHV0Lm9yaWdpbmFsX3RleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlzRW1wdHkoKXtcclxuICAgIHJldHVybiB0aGlzLl9saXN0Lmxlbmd0aCA9PT0gMDtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJlZGljdGlvbkxpc3Q7IiwiY29uc3QgTG9hZGVyID0gcmVxdWlyZSgnLi9sb2FkZXInKTtcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IEhpc3RvcnlQcmVkaWN0b3IgPSByZXF1aXJlKCcuL2hpc3RvcnlfcHJlZGljdG9yJyk7XHJcbmNvbnN0IE5ncmFtUHJlZGljdG9yID0gcmVxdWlyZSgnLi9uZ3JhbV9wcmVkaWN0b3InKTtcclxuY29uc3QgR2VuZXJhbFByZWRpY3RvciA9IHJlcXVpcmUgKCcuL2dlbmVyYWxfcHJlZGljdG9yJyk7XHJcbmNvbnN0IENvcnJlY3RvciA9IHJlcXVpcmUoJy4vY29ycmVjdG9yJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5cclxuLy90aGlzLnByb2Nlc3NSZXN1bHQuYmluZCh0aGlzKVxyXG5jbGFzcyBQcmVkaWN0b3JzQ3JlYXRvcntcclxuICBjb25zdHJ1Y3RvcihoaXN0b3J5X3JlYWRlciwgcHJvY2Vzc1Jlc3VsdEZuKXtcclxuICAgIHRoaXMuX2hpc3RvcnlfcmVhZGVyID0gaGlzdG9yeV9yZWFkZXJcclxuICAgIHRoaXMuX3Byb2Nlc3NSZXN1bHRGbiA9IHByb2Nlc3NSZXN1bHRGblxyXG4gIH1cclxuXHJcbiAgZ2V0IHByb2plY3RQYXRocygpe1xyXG4gICAgcmV0dXJuIHJoLm1vZGVsLmdldChyaC5jb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSlcclxuICB9XHJcbiAgXHJcbiAgX2NyZWF0ZUxvYWRlcnMoKSB7XHJcbiAgICByZXR1cm4gXy5tYXAodGhpcy5wcm9qZWN0UGF0aHMsIChwYXRoKSA9PiB7XHJcbiAgICAgIHJldHVybiBuZXcgTG9hZGVyKHBhdGgpXHJcbiAgICB9KVxyXG4gIH1cclxuICBjcmVhdGVQcmVkaWN0b3JzKGFkZEZuLCBwcmV2QWRkRm4sIGFkZENvcnJlY3RvckZuKXtcclxuICAgIHRoaXMuX2FkZEZuID0gYWRkRm5cclxuICAgIHRoaXMuX3ByZXZhZGRGbiA9IHByZXZBZGRGblxyXG4gICAgdGhpcy5fYWRkQ29ycmVjdG9yRm4gPSBhZGRDb3JyZWN0b3JGblxyXG4gICAgbGV0IGhpc3RvcnlfcHJlZGljdG9yID0gbmV3IEhpc3RvcnlQcmVkaWN0b3IodGhpcy5faGlzdG9yeV9yZWFkZXIsIHRoaXMuX3Byb2Nlc3NSZXN1bHRGbik7XHJcbiAgICB0aGlzLl9hZGRGbihoaXN0b3J5X3ByZWRpY3Rvcik7XHJcblxyXG4gICAgbGV0IGxvYWRlcnMgPSB0aGlzLl9jcmVhdGVMb2FkZXJzKClcclxuICAgIF8uZWFjaChsb2FkZXJzLCAobG9hZGVyKSA9PiB7XHJcbiAgICAgIGxvYWRlci5pbml0KHRoaXMuYWRkUHJlZGljdG9ycy5iaW5kKHRoaXMpKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZFByZWRpY3RvcnMobG9hZGVyKXtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGxvYWRlci5uR3JhbTsgaSsrKXtcclxuXHJcbiAgICAgIGxldCBuZ3AgPSBuZXcgTmdyYW1QcmVkaWN0b3Ioe2xvYWRlciwgbGV2ZWw6aSwgY2FsbGJhY2s6dGhpcy5fcHJvY2Vzc1Jlc3VsdEZufSk7XHJcbiAgICAgIG5ncC5pbml0KCk7XHJcbiAgICAgIHRoaXMuX2FkZEZuKG5ncClcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHNlYXJjaF9jb25zdHMucHJldmlvdXNuR3JhbTsgaSsrKXtcclxuICAgICAgbGV0IG5ncCA9IG5ldyBOZ3JhbVByZWRpY3Rvcih7bG9hZGVyLCBsZXZlbDppLCBjYWxsYmFjazp0aGlzLl9wcm9jZXNzUmVzdWx0Rm4sIHByZXZpb3VzOnRydWV9KTtcclxuICAgICAgbmdwLmluaXQoKTtcclxuICAgICAgdGhpcy5fcHJldmFkZEZuKG5ncCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGdlbmVyYWxfcHJlZGljdG9yID0gbmV3IEdlbmVyYWxQcmVkaWN0b3IodGhpcy5fcHJvY2Vzc1Jlc3VsdEZuLCBsb2FkZXIpXHJcbiAgICB0aGlzLl9hZGRGbihnZW5lcmFsX3ByZWRpY3Rvcik7XHJcblxyXG4gICAgbGV0IGNvcnJlY3RvciA9IG5ldyBDb3JyZWN0b3IobG9hZGVyLCB0aGlzLl9wcm9jZXNzUmVzdWx0Rm4pXHJcbiAgICB0aGlzLl9hZGRDb3JyZWN0b3JGbihjb3JyZWN0b3IpO1xyXG5cclxuICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVkaWN0b3JzQ3JlYXRvclxyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgXyA9IHJoLl9cclxuY29uc3QgY29uc3RzID0gcmguY29uc3RzO1xyXG5jb25zdCBoaXN0b3J5X3JlYWRlciA9IHJlcXVpcmUoJy4vaGlzdG9yeV9yZWFkZXInKTtcclxuY29uc3QgSW5wdXRQYXJzZXIgPSByZXF1aXJlKCcuL2lucHV0X3BhcnNlcicpO1xyXG5jb25zdCBQcmVkaWN0b25NZXJnZXIgPSByZXF1aXJlKCcuLi9jb21tb24vbWVyZ2VyJyk7XHJcbmNvbnN0IFRvcGljQ291bnRlciA9IHJlcXVpcmUoJy4vdG9waWNfY291bnRlcicpO1xyXG5jb25zdCBzZWFyY2hfdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbmNvbnN0IHNlYXJjaF9jb25zdHMgPSByZXF1aXJlKCcuL2NvbnN0cycpO1xyXG5jb25zdCBTZWFtYXBob3JlID0gcmVxdWlyZSgnLi8uLi8uLi8uLi9jb21tb24vY291bnRpbmdfc2VhbWFwaG9yZScpO1xyXG5jb25zdCBQcmVkaWN0b3JDcmVhdG9yID0gcmVxdWlyZSgnLi9wcmVkaWN0b3JzX2NyZWF0b3InKTtcclxuY29uc3QgU2VhcmNoSGFuZGxlciA9IHJlcXVpcmUoJy4uL3RvcGljL2hhbmRsZXInKTtcclxuXHJcbmNvbnN0IG1heF9wcmVkaWN0aW9ucyA9IDU7XHJcblxyXG5jbGFzcyBTZWFyY2hDb250cm9sbGVyIHtcclxuICBjb25zdHJ1Y3Rvcih3aWRnZXQpIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xyXG4gICAgdGhpcy5fcHJlZGljdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5fY29ycmVjdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5fcHJldmlvdXNfcHJlZGljdG9ycyA9IFtdO1xyXG4gICAgdGhpcy5pbml0SGFuZGxlS2V5SGFzaCgpO1xyXG4gICAgdGhpcy5tYXhfcHJlZGljdGlvbnMgPSBtYXhfcHJlZGljdGlvbnM7XHJcbiAgICB0aGlzLnByZWRpY3Rvbl9tZXJnZXIgPSBuZXcgUHJlZGljdG9uTWVyZ2VyKFtdKVxyXG4gICAgd2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zZWFyY2hfaGFuZGxlciA9IG5ldyBTZWFyY2hIYW5kbGVyKHdpZGdldClcclxuICB9XHJcbiAgaW5pdCgpIHtcclxuICAgIGxldCBoaXN0b3J5X2xpc3QgPSByaC5zdG9yYWdlLmZldGNoKGNvbnN0cygnUFJFVl9TRUFSQ0hfS0VZJykpO1xyXG4gICAgaGlzdG9yeV9yZWFkZXIuaW5pdEhpc3RvcnkoaGlzdG9yeV9saXN0KTtcclxuICAgIHRoaXMuY3JlYXRlX3ByZWRpY3RvcnMoKVxyXG4gICAgdGhpcy53aWRnZXQubW9kZWwuY3N1YnNjcmliZSgnRVZUX0NMT1NFX1NFQVJDSF9TVUdHRVNUSU9OJywgdGhpcy5jbG9zZVN1Z2dlc3Rpb25zLmJpbmQodGhpcykpXHJcbiAgICB0aGlzLndpZGdldC5tb2RlbC5jc3Vic2NyaWJlKCdFVlRfU0VBUkNIX1RFUk0nLCB0aGlzLnNlYXJjaC5iaW5kKHRoaXMpKVxyXG5cclxuXHJcbiAgfVxyXG4gIHNlYXJjaCgpIHtcclxuICAgIGxldCB0ZXh0ID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJykpXHJcbiAgICB0aGlzLnNlYXJjaF9oYW5kbGVyLnNob3dTZWFyY2hSZXN1bHRzKHRleHQpXHJcbiAgfVxyXG4gIGNyZWF0ZV9wcmVkaWN0b3JzKCkge1xyXG4gICAgdGhpcy5fcHJlZGljdG9ycyA9IFtdXHJcbiAgICBsZXQgcHJlZGljdG9yX2NyZWF0b3IgPSBuZXcgUHJlZGljdG9yQ3JlYXRvcihoaXN0b3J5X3JlYWRlciwgdGhpcy5wcm9jZXNzUmVzdWx0LmJpbmQodGhpcykpXHJcbiAgICBwcmVkaWN0b3JfY3JlYXRvci5jcmVhdGVQcmVkaWN0b3JzKHRoaXMuYWRkUHJlZGljdG9yLmJpbmQodGhpcyksXHJcbiAgICAgIHRoaXMuYWRkUHJldlByZWRpY3Rvci5iaW5kKHRoaXMpLFxyXG4gICAgICB0aGlzLmFkZENvcnJlY3Rvci5iaW5kKHRoaXMpKVxyXG4gIH1cclxuICBhZGRQcmVkaWN0b3IocHJlZGljdG9yKSB7XHJcbiAgICB0aGlzLl9wcmVkaWN0b3JzLnB1c2gocHJlZGljdG9yKVxyXG4gIH1cclxuICBhZGRQcmV2UHJlZGljdG9yKHByZWRpY3Rvcikge1xyXG4gICAgdGhpcy5fcHJldmlvdXNfcHJlZGljdG9ycy5wdXNoKHByZWRpY3RvcilcclxuICB9XHJcbiAgYWRkQ29ycmVjdG9yKGNvcnJlY3Rvcikge1xyXG4gICAgdGhpcy5fY29ycmVjdG9ycy5wdXNoKGNvcnJlY3RvcilcclxuICB9XHJcbiAgc2hvd1N1Z2dlc3Rpb25zKGtleUV2dCkge1xyXG4gICAgdGhpcy5faW5pdFN1Z2dlc3Rpb25zKGtleUV2dCk7XHJcbiAgICB0aGlzLl9jYWxjdWxhdGVTdWdndWVzdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIF9pbml0U3VnZ2VzdGlvbnMoa2V5RXZ0KSB7XHJcbiAgICB0aGlzLl9pbml0UmVzdWx0KCk7XHJcbiAgICB0aGlzLl9pbml0SW5wdXRzKGtleUV2dCk7XHJcbiAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUgPSBuZXcgU2VhbWFwaG9yZSh0aGlzLm9uUmVzdWx0Q29tcGxldGUuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG4gIF9pbml0SW5wdXRzKGtleUV2dCkge1xyXG4gICAgdGhpcy5wYXJzZWRfaW5wdXQgPSBuZXcgSW5wdXRQYXJzZXIoa2V5RXZ0LnRleHQsIGZhbHNlLCBrZXlFdnQuc2VsU3RhcnQsIGZhbHNlKTtcclxuICAgIGlmIChzZWFyY2hfdXRpbHMuaXNQcmV2aW91cyhrZXlFdnQpKSB7XHJcbiAgICAgIHRoaXMuX3ByZXZpb3VzX2lucHV0ID0gbmV3IElucHV0UGFyc2VyKGtleUV2dC50ZXh0LCBmYWxzZSwga2V5RXZ0LnNlbFN0YXJ0LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2NhbGN1bGF0ZVN1Z2d1ZXN0aW9ucygpIHtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMuX3ByZWRpY3RvckNvdW50KCkpO1xyXG4gICAgXy5lYWNoKHRoaXMuX3ByZWRpY3RvcnMsIChwcmVkaWN0b3IpID0+IHtcclxuICAgICAgcHJlZGljdG9yLmdldFByZWRpY3Rpb25zKHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMuX3ByZXZpb3VzX2lucHV0KSB7XHJcbiAgICAgIF8uZWFjaCh0aGlzLl9wcmV2aW91c19wcmVkaWN0b3JzLCAocHJlZGljdG9yKSA9PiB7XHJcbiAgICAgICAgcHJlZGljdG9yLmdldFByZWRpY3Rpb25zKHRoaXMuX3ByZXZpb3VzX2lucHV0KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9jbGVhclByZWRpY3RvcnMoKSB7XHJcbiAgICBfLmVhY2godGhpcy5fcHJlZGljdG9ycywgKHByZWRpY3RvcikgPT4ge1xyXG4gICAgICBwcmVkaWN0b3IuY2xlYXIoKTtcclxuICAgIH0pO1xyXG4gICAgXy5lYWNoKHRoaXMuX3ByZXZpb3VzX3ByZWRpY3RvcnMsIChwcmVkaWN0b3IpID0+IHtcclxuICAgICAgcHJlZGljdG9yLmNsZWFyKCk7XHJcbiAgICB9KTtcclxuICAgIF8uZWFjaCh0aGlzLl9jb3JyZWN0b3JzLCAoY29ycmVjdG9yKSA9PiB7XHJcbiAgICAgIGNvcnJlY3Rvci5jbGVhcigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF9wcmVkaWN0b3JDb3VudCgpIHtcclxuICAgIGxldCBjb3VudCA9IHRoaXMuX3ByZWRpY3RvcnMubGVuZ3RoO1xyXG4gICAgaWYgKHRoaXMuX3ByZXZpb3VzX2lucHV0KSB7XHJcbiAgICAgIGNvdW50ICs9IHRoaXMuX3ByZXZpb3VzX3ByZWRpY3RvcnMubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuICBfaW5pdFJlc3VsdCgpIHtcclxuICAgIGlmICh0aGlzLnByZWRpY3Rvbl9tZXJnZXIpIHtcclxuICAgICAgdGhpcy5wcmVkaWN0b25fbWVyZ2VyLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwic2VsZWN0ZWRcIiwgdW5kZWZpbmVkKTtcclxuICAgIHRoaXMuX3ByZXZpb3VzX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fY29tcHV0aW5nX2NvcnJlY3Rpb24gPSBmYWxzZTtcclxuICB9XHJcbiAgX2NsZWFyUmVzdWx0KCkge1xyXG4gICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpO1xyXG4gICAgdGhpcy5fcHJldmlvdXNfaW5wdXQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnBhcnNlZF9pbnB1dCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX2NsZWFyUHJlZGljdG9ycygpXHJcbiAgfVxyXG5cclxuICBpc1N1Z2dlc3Rpb25zT3BlbigpIHtcclxuICAgIGxldCBwcmVkaWN0aW9ucyA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoXCJTRUFSQ0hfUkVTVUxUU19LRVlcIikpXHJcbiAgICByZXR1cm4gcHJlZGljdGlvbnMgJiYgcHJlZGljdGlvbnMubGVuZ3RoID4gMFxyXG4gIH1cclxuICBwcm9jZXNzUmVzdWx0KHByZWRpY3Rpb25MaXN0LCBsb2FkZXIpIHtcclxuICAgIGlmICghcHJlZGljdGlvbkxpc3QuaXNGb3JJbnB1dCh0aGlzLnBhcnNlZF9pbnB1dCwgdGhpcy5fcHJldmlvdXNfaW5wdXQpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghcHJlZGljdGlvbkxpc3QuaXNFbXB0eSgpKSB7XHJcbiAgICAgIHRoaXMucHJlZGljdG9uX21lcmdlci5tZXJnZShwcmVkaWN0aW9uTGlzdC5wcmVkaWN0aW9ucyk7XHJcbiAgICAgIGxldCBjb3VudGVyID0gbmV3IFRvcGljQ291bnRlcihsb2FkZXIpO1xyXG4gICAgICB0aGlzLnByZWRpY3Rpb25zID0gY291bnRlci5jb21wdXRlQ291bnRzKHRoaXMucHJlZGljdGlvbnMsIHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH1cclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS5zaWduYWwoKTtcclxuICB9XHJcbiAgb25SZXN1bHRDb21wbGV0ZSgpIHtcclxuICAgIGlmICh0aGlzLm5lZWRDb3JyZWN0aW9uKCkpIHtcclxuICAgICAgdGhpcy5kb0NvcnJlY3Rpb24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucHJlZGljdGlvbnMuc3BsaWNlKHRoaXMubWF4X3ByZWRpY3Rpb25zKTtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoXCJTRUFSQ0hfUkVTVUxUU19LRVlcIiksIHRoaXMucHJlZGljdGlvbnMpO1xyXG4gICAgICB0aGlzLl9jbGVhclJlc3VsdCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBuZWVkQ29ycmVjdGlvbigpIHtcclxuICAgIHJldHVybiAhdGhpcy5fY29tcHV0aW5nX2NvcnJlY3Rpb24gJiZcclxuICAgICAgdGhpcy5wcmVkaWN0aW9ucy5sZW5ndGggPT09IDAgJiZcclxuICAgICAgdGhpcy5wYXJzZWRfaW5wdXQudHJpbW1lZFRleHQgIT09IFwiXCI7XHJcbiAgfVxyXG4gIGRvQ29ycmVjdGlvbigpIHtcclxuICAgIHRoaXMuX2NvbXB1dGluZ19jb3JyZWN0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMub25SZXN1bHRDb21wbGV0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMuX2NvcnJlY3RvcnMubGVuZ3RoKVxyXG4gICAgXy5lYWNoKHRoaXMuX2NvcnJlY3RvcnMsIChjb3JyZWN0b3IpID0+IHtcclxuICAgICAgY29ycmVjdG9yLmdldENvcnJlY3Rpb25zKHRoaXMucGFyc2VkX2lucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBjYW5EZWxldGUoaWQpIHtcclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICBpZiAocHJlZGljdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVkaWN0aW9uLnNvdXJjZSA9PT0gc2VhcmNoX2NvbnN0cy5QUkVESUNUT1JfU09VUkNFX0lELkhJU1RPUllfUFJFRElDVE9SO1xyXG4gIH1cclxuICBoYW5kbGVEZWxldGUoaWQpIHtcclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICB0aGlzLl9kZWxldGVGcm9tSGlzdG9yeShwcmVkaWN0aW9uLnRlcm0pO1xyXG4gICAgdGhpcy5fcmVtb3ZlUHJlZGljdGlvbihpZCk7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwiaGlzdG9yeV9kZWxldGVkXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3JlbW92ZVByZWRpY3Rpb24oaWQpIHtcclxuICAgIHRoaXMucHJlZGljdGlvbnMuc3BsaWNlKGlkLCAxKTtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKFwiU0VBUkNIX1JFU1VMVFNfS0VZXCIpLCB0aGlzLnByZWRpY3Rpb25zKTtcclxuICB9XHJcbiAgaGFuZGxlQ2xpY2soaWQpIHtcclxuICAgIGxldCBoaXN0b3J5X2RlbGV0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJoaXN0b3J5X2RlbGV0ZWRcIik7XHJcbiAgICBpZiAoaGlzdG9yeV9kZWxldGVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxldCBwcmVkaWN0aW9uID0gdGhpcy5wcmVkaWN0aW9uc1tpZF07XHJcbiAgICBpZiAocHJlZGljdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3X3RleHQgPSBwcmVkaWN0aW9uLnRlcm07XHJcbiAgICB0aGlzLl9hZGRUb0hpc3RvcnkobmV3X3RleHQpO1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCBuZXdfdGV4dCk7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnRVZUX1NFQVJDSF9URVJNJyksIHRydWUpO1xyXG5cclxuICB9XHJcbiAgaGFuZGxlRm9jdXNPdXQoa2V5LCBmb2N1c19rZXkpIHtcclxuICAgIGxldCBoaXN0b3J5X2RlbGV0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJoaXN0b3J5X2RlbGV0ZWRcIik7XHJcbiAgICBpZiAoIWhpc3RvcnlfZGVsZXRlZCkge1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGtleSwgZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChcImhpc3RvcnlfZGVsZXRlZFwiLCBmYWxzZSk7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goZm9jdXNfa2V5LCB0cnVlKTtcclxuICAgIH1cclxuICB9XHJcbiAgZ2V0Rmlyc3RTdWdnZXN0aW9uSW5kZXgobGVuZ3RoLCBkb3duKSB7XHJcbiAgICByZXR1cm4gZG93biA/IDAgOiBsZW5ndGggLSAxO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByZWRpY3Rpb25zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdG9uX21lcmdlci5pdGVtcztcclxuICB9XHJcbiAgc2V0IHByZWRpY3Rpb25zKHByZWRpY3Rpb25zKSB7XHJcbiAgICB0aGlzLnByZWRpY3Rvbl9tZXJnZXIgPSBuZXcgUHJlZGljdG9uTWVyZ2VyKHByZWRpY3Rpb25zKTtcclxuICB9XHJcblxyXG4gIGdldE5leHRTdWdnZXN0aW9uSW5kZXgoY3Vycl9zZWxlY3RlZCwgbGVuZ3RoLCBkb3duKSB7XHJcbiAgICBsZXQgbW92ZSA9IGRvd24gPyAxIDogbGVuZ3RoIC0gMTtcclxuICAgIGN1cnJfc2VsZWN0ZWQgPSAoY3Vycl9zZWxlY3RlZCA9PT0gdW5kZWZpbmVkKSA/IDAgOiBjdXJyX3NlbGVjdGVkO1xyXG4gICAgY3Vycl9zZWxlY3RlZCA9IChjdXJyX3NlbGVjdGVkICsgbW92ZSkgJSBsZW5ndGg7XHJcbiAgICByZXR1cm4gY3Vycl9zZWxlY3RlZDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUFycm93S2V5KGtleUV2dCkge1xyXG4gICAgbGV0IGN1cnJfc2VsZWN0ZWQgPSB0aGlzLndpZGdldC5nZXQoXCJzZWxlY3RlZFwiKTtcclxuICAgIGxldCBkb3duID0ga2V5RXZ0LmtleUNvZGUgPT09IDQwO1xyXG4gICAgbGV0IGxlbmd0aCA9IHRoaXMuZ2V0UHJlZGljdGlvbnNMZW5ndGgoKTtcclxuICAgIGlmIChsZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmIChjdXJyX3NlbGVjdGVkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjdXJyX3NlbGVjdGVkID0gdGhpcy5nZXRGaXJzdFN1Z2dlc3Rpb25JbmRleChsZW5ndGgsIGRvd24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnJfc2VsZWN0ZWQgPSB0aGlzLmdldE5leHRTdWdnZXN0aW9uSW5kZXgoY3Vycl9zZWxlY3RlZCwgbGVuZ3RoLCBkb3duKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKFwic2VsZWN0ZWRcIiwgY3Vycl9zZWxlY3RlZCk7XHJcbiAgICAgIGxldCBuZXdfdGV4dCA9IHRoaXMuZ2V0TmV3SW5wdXRUZXh0KHRoaXMucmVzdWx0c1tjdXJyX3NlbGVjdGVkXSk7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfU0VBUkNIX1RFUk0nKSwgbmV3X3RleHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TmV3SW5wdXRUZXh0KHByZWRpY3Rpb24pIHtcclxuICAgIHJldHVybiBwcmVkaWN0aW9uLnRlcm07XHJcbiAgfVxyXG5cclxuICBnZXRQcmVkaWN0aW9uc0xlbmd0aCgpIHtcclxuICAgIGxldCBsZW5ndGg7XHJcbiAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLndpZGdldC5nZXQoY29uc3RzKFwiU0VBUkNIX1JFU1VMVFNfS0VZXCIpKTtcclxuICAgIGlmICh0aGlzLnJlc3VsdHMpIHtcclxuICAgICAgbGVuZ3RoID0gdGhpcy5yZXN1bHRzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIHJldHVybiBsZW5ndGg7XHJcbiAgfVxyXG5cclxuICBjbG9zZVN1Z2dlc3Rpb25zKCkge1xyXG4gICAgdGhpcy5fY2xlYXJSZXN1bHQoKTtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goXCJzZWxlY3RlZFwiLCB1bmRlZmluZWQpO1xyXG4gICAgdGhpcy5vcmlnaW5hbF9wYXJzZWRfaW5wdXQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cyhcIlNFQVJDSF9SRVNVTFRTX0tFWVwiKSwgW10pO1xyXG4gIH1cclxuICBfZGVsZXRlRnJvbUhpc3RvcnkodGV4dCkge1xyXG4gICAgaGlzdG9yeV9yZWFkZXIuZGVsZXRlKHRleHQpO1xyXG4gICAgdGhpcy5fc2F2ZUhpc3RvcnkoKTtcclxuICB9XHJcbiAgX2FkZFRvSGlzdG9yeSh0ZXh0KSB7XHJcbiAgICBpZiAodGV4dCAmJiB0ZXh0ICE9PSBcIlwiKSB7XHJcbiAgICAgIGhpc3RvcnlfcmVhZGVyLmFkZCh7XHJcbiAgICAgICAgdGV4dDogdGV4dC50cmltKCksXHJcbiAgICAgICAgY291bnQ6IDEwXHJcbiAgICAgIH0pOyAvLyBUT0RPIGNoYW5nZVxyXG4gICAgICB0aGlzLl9zYXZlSGlzdG9yeSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2F2ZUhpc3RvcnkoKSB7XHJcbiAgICByaC5zdG9yYWdlLnBlcnNpc3QoY29uc3RzKCdQUkVWX1NFQVJDSF9LRVknKSwgaGlzdG9yeV9yZWFkZXIuZ2V0SGlzdG9yeSgpKTtcclxuICB9XHJcbiAgaGFuZGxlU2hvd1N1Z2dlc3Rpb24oa2V5RXZ0KSB7XHJcbiAgICBpZiAoa2V5RXZ0LnRleHQgPT09IFwiXCIgfHwgc2VhcmNoX3V0aWxzLnNob3VsZFNob3dTdWdnZXN0aW9uKGtleUV2dCkgPT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VTdWdnZXN0aW9ucygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaG93U3VnZ2VzdGlvbnMoa2V5RXZ0KTtcclxuICAgIH1cclxuICB9XHJcbiAgaGFuZGxlUmV0dXJuKGtleUV2dCkge1xyXG4gICAgaWYgKGtleUV2dC50ZXh0ICE9PSBcIlwiKSB7XHJcbiAgICAgIHRoaXMuX2FkZFRvSGlzdG9yeShrZXlFdnQudGV4dCk7XHJcbiAgICAgIHRoaXMuY2xvc2VTdWdnZXN0aW9ucygpO1xyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9URVJNJyksIGtleUV2dC50ZXh0KVxyXG4gICAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnRVZUX1NFQVJDSF9URVJNJyksIHRydWUpXHJcbiAgICB9XHJcbiAgfVxyXG4gIF9pc01vdmVtZW50S2V5KGtleUNvZGUpIHtcclxuICAgIHJldHVybiBbMzgsIDM5LCA0MF0uaW5kZXhPZihrZXlDb2RlKSA+PSAwO1xyXG4gIH1cclxuICBfcmVzZXRNb3ZlbWVudCgpIHtcclxuICAgIHRoaXMub3JpZ2luYWxfcGFyc2VkX2lucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChcInNlbGVjdGVkXCIsIHVuZGVmaW5lZCk7XHJcbiAgfVxyXG4gIF9pc0hhbmRsaW5nQ3Vyc29yTW92ZSgpIHtcclxuICAgIGxldCBjdXJyX3NlbGVjdGVkID0gdGhpcy53aWRnZXQuZ2V0KFwic2VsZWN0ZWRcIik7XHJcbiAgICByZXR1cm4gY3Vycl9zZWxlY3RlZCAhPT0gdW5kZWZpbmVkO1xyXG4gIH1cclxuICBpbml0SGFuZGxlS2V5SGFzaCgpIHtcclxuICAgIHRoaXMuaGFuZGxlX2tleV9oYXNoID0ge1xyXG4gICAgICB1cDogdGhpcy5oYW5kbGVBcnJvd0tleS5iaW5kKHRoaXMpLFxyXG4gICAgICBkb3duOiB0aGlzLmhhbmRsZUFycm93S2V5LmJpbmQodGhpcyksXHJcbiAgICAgIGJhY2tzcGFjZTogdGhpcy5oYW5kbGVCYWNrU3BhY2UuYmluZCh0aGlzKSxcclxuICAgICAgcmV0dXJuOiB0aGlzLmhhbmRsZVJldHVybi5iaW5kKHRoaXMpLFxyXG4gICAgICBkZWZhdWx0OiB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uLmJpbmQodGhpcyksXHJcbiAgICAgIGVzY2FwZTogdGhpcy5oYW5kbGVFc2NhcGUuYmluZCh0aGlzKSxcclxuICAgICAgcmlnaHQ6IHRoaXMuaGFuZGxlUmlnaHQuYmluZCh0aGlzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmlnaHQoa2V5RXZ0KSB7XHJcbiAgICBpZiAoIXRoaXMuX2lzSGFuZGxpbmdDdXJzb3JNb3ZlKCkpIHtcclxuICAgICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpXHJcbiAgICAgIHJldHVybiB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uKGtleUV2dClcclxuICAgIH1cclxuICAgIGlmIChzZWFyY2hfdXRpbHMuc2hvdWxkQXBwZW5kU3BhY2Uoa2V5RXZ0KSkge1xyXG4gICAgICBrZXlFdnQudGV4dCArPSBcIiBcIjtcclxuICAgICAga2V5RXZ0LnNlbFN0YXJ0ICs9IDFcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpLCBrZXlFdnQudGV4dCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yZXNldE1vdmVtZW50KCk7XHJcbiAgICB0aGlzLmhhbmRsZVNob3dTdWdnZXN0aW9uKGtleUV2dClcclxuICAgIHJldHVybiBmYWxzZVxyXG4gIH1cclxuICBoYW5kbGVCYWNrU3BhY2Uoa2V5RXZ0KSB7XHJcbiAgICByZXR1cm4gdGhpcy5oYW5kbGVTaG93U3VnZ2VzdGlvbihrZXlFdnQpO1xyXG4gIH1cclxuICBoYW5kbGVFc2NhcGUoKSB7XHJcbiAgICB0aGlzLmNsb3NlU3VnZ2VzdGlvbnMoKTtcclxuICB9XHJcbiAgaGFuZGxlS2V5KGV2ZW50KSB7XHJcblxyXG4gICAgbGV0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xyXG4gICAgbGV0IGtleUV2dCA9IHtcclxuICAgICAga2V5Q29kZToga2V5Q29kZSxcclxuICAgICAgc2VsU3RhcnQ6IGV2ZW50LnRhcmdldC5zZWxlY3Rpb25TdGFydCxcclxuICAgICAgdGV4dDogZXZlbnQudGFyZ2V0LnZhbHVlXHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX2lzTW92ZW1lbnRLZXkoa2V5Q29kZSkpIHtcclxuICAgICAgdGhpcy5fcmVzZXRNb3ZlbWVudCgpO1xyXG4gICAgfVxyXG4gICAgbGV0IGluZGV4ID0gXy5nZXRLZXlJbmRleChrZXlDb2RlKTtcclxuXHJcbiAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGxldCBoYW5kbGVGbiA9IHRoaXMuaGFuZGxlX2tleV9oYXNoW2luZGV4XTtcclxuICAgIGlmIChoYW5kbGVGbikge1xyXG4gICAgICByZXR1cm4gaGFuZGxlRm4oa2V5RXZ0KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ1NlYXJjaENvbnRyb2xsZXInLCBTZWFyY2hDb250cm9sbGVyKSIsImNsYXNzIFNvcnRlZFNldHtcclxuICBjb25zdHJ1Y3RvcihzZXQpe1xyXG4gICAgdGhpcy5fc2V0ID0gc2V0IHx8IFtdO1xyXG4gICAgdGhpcy5faW5pdGlhbGlzZWQgPSBmYWxzZTtcclxuICB9XHJcbiAgaW50ZXJzZWN0KG90aGVyKXtcclxuICAgIGlmKCFBcnJheS5pc0FycmF5KG90aGVyKSl7XHJcbiAgICAgIG90aGVyID0gb3RoZXIuc2V0O1xyXG4gICAgfVxyXG4gICAgbGV0IG5ld19zZXQgPSAgW107XHJcbiAgICBsZXQgY291bnQgPTAgO1xyXG4gICAgbGV0IGkgPSAwOyBsZXQgaj0gMDtcclxuICAgIGZvcig7IGkgPCB0aGlzLl9zZXQubGVuZ3RoICYmIGogPCBvdGhlci5sZW5ndGg7KXtcclxuICAgICAgaWYodGhpcy5fc2V0W2ldIDwgb3RoZXJbal0pIHtcclxuICAgICAgICBpKys7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGhpcy5fc2V0W2ldID4gb3RoZXJbal0pIHtcclxuICAgICAgICBqKys7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbmV3X3NldFtjb3VudCsrXSA9IHRoaXMuX3NldFtpXTtcclxuICAgICAgICBpKys7IGorKztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5fc2V0ID0gbmV3X3NldDtcclxuICB9XHJcbiAgaW50ZXJzZWN0T3JTZXQob3RoZXIpe1xyXG4gICAgaWYodGhpcy5faW5pdGlhbGlzZWQpe1xyXG4gICAgICB0aGlzLmludGVyc2VjdChvdGhlcilcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIGlmKCFBcnJheS5pc0FycmF5KG90aGVyKSl7XHJcbiAgICAgICAgb3RoZXIgPSBvdGhlci5zZXQ7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXQgPSBvdGhlclxyXG4gICAgICB0aGlzLl9pbml0aWFsaXNlZCA9IHRydWVcclxuICAgIH1cclxuICB9XHJcbiAgaW50ZXJzZWN0Q291bnQob3RoZXIpe1xyXG4gICAgaWYoIUFycmF5LmlzQXJyYXkob3RoZXIpKXtcclxuICAgICAgb3RoZXIgPSBvdGhlci5zZXQ7XHJcbiAgICB9XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgbGV0IGogPSAwO1xyXG4gICAgZm9yKDsgaSA8IHRoaXMuX3NldC5sZW5ndGggJiYgaiA8IG90aGVyLmxlbmd0aDspe1xyXG4gICAgICBpZih0aGlzLl9zZXRbaV0gPCBvdGhlcltqXSkge1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLl9zZXRbaV0gPiBvdGhlcltqXSkge1xyXG4gICAgICAgIGorKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIGkrKzsgaisrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG4gIHNldCBzZXQoc2V0KXtcclxuICAgIHRoaXMuX3NldCA9IHNldCB8fCBbXTtcclxuICB9XHJcbiAgZ2V0IHNldCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX3NldDtcclxuICB9XHJcbiAgZ2V0IGxlbmd0aCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuX3NldC5sZW5ndGg7XHJcbiAgfVxyXG5cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IFNvcnRlZFNldDtcclxuIiwiY29uc3QgU29ydGVkU2V0ID0gcmVxdWlyZSgnLi9zb3J0ZWRfc2V0Jyk7XHJcbmNvbnN0IFBhcnNlciA9IHJlcXVpcmUoJy4vaW5wdXRfcGFyc2VyJyk7XHJcbmNvbnN0IFByZWRpY3Rpb24gPSByZXF1aXJlKCcuL3ByZWRpY3Rpb24nKTtcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fO1xyXG5jb25zdCBJTkRFWCA9IHJlcXVpcmUoXCIuL2luZGljZXNcIilcclxuXHJcblxyXG5jbGFzcyBUb3BpY0NvdW50ZXJ7XHJcbiAgY29uc3RydWN0b3IobG9hZGVyKXtcclxuICAgIHRoaXMubmV3UHJlZGljdGlvbnMgPSBbXTtcclxuICAgIHRoaXMucHJlZGljdGlvblNldCA9IG5ldyBTb3J0ZWRTZXQoKTtcclxuICAgIHRoaXMuaW5wdXRTZXQgPSBuZXcgU29ydGVkU2V0KCk7XHJcbiAgICB0aGlzLl9sb2FkZXIgPSBsb2FkZXI7XHJcbiAgfVxyXG4gIGNvbXB1dGVDb3VudHMocHJlZGljdGlvbnMsIHBhcnNlZF9pbnB1dCl7XHJcbiAgICB0aGlzLm5ld1ByZWRpY3Rpb24gPSBbXTtcclxuICAgIHRoaXMucGFyc2VkX2lucHV0ID0gcGFyc2VkX2lucHV0O1xyXG4gICAgXy5lYWNoKHByZWRpY3Rpb25zLCAocHJlZGljdGlvbikgPT4ge1xyXG4gICAgICB0aGlzLmFkZFVwZGF0ZWRQcmVkaWN0aW9uKHByZWRpY3Rpb24pO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5uZXdQcmVkaWN0aW9ucztcclxuICB9XHJcblxyXG4gIGFkZFVwZGF0ZWRQcmVkaWN0aW9uKHByZWRpY3Rpb24pe1xyXG4gICAgbGV0IGNvdW50ID0gMTtcclxuICAgIGlmKHRoaXMuX2xvYWRlciAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgdGhpcy5jcmVhdGVQcmVkaWN0aW9uU2V0KHByZWRpY3Rpb24pO1xyXG4gICAgICBjb3VudCA9IHRoaXMuY29tcHV0ZVRvcGljQ291bnQoKTtcclxuICAgIH1cclxuICAgIGlmKGNvdW50ID4gMCl7XHJcbiAgICAgIGxldCBuZXdQcmRpY3Rpb24gPSBuZXcgUHJlZGljdGlvbihwcmVkaWN0aW9uLnRlcm0sIHByZWRpY3Rpb24ucHJvYmFiaWxpdHksIGNvdW50LCBwcmVkaWN0aW9uLnNvdXJjZSk7XHJcbiAgICAgIHRoaXMubmV3UHJlZGljdGlvbnMucHVzaChuZXdQcmRpY3Rpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICBjb21wdXRlVG9waWNDb3VudCgpe1xyXG4gICAgcmV0dXJuIHRoaXMucHJlZGljdGlvblNldC5zZXQubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlUHJlZGljdGlvblNldChwcmVkaWN0aW9uKXtcclxuICAgIHRoaXMucHJlZGljdGlvblNldCA9IG5ldyBTb3J0ZWRTZXQoKTtcclxuICAgIGxldCBwYXJzZWRfcHJlZGljdGlvbiA9IG5ldyBQYXJzZXIocHJlZGljdGlvbi50ZXJtLCB0cnVlKTtcclxuICAgIF8uZWFjaChwYXJzZWRfcHJlZGljdGlvbi53b3JkcywgKHdvcmQsIGluZGV4KSA9PntcclxuICAgICAgdGhpcy5fYWRkV29yZFRvU2V0KHdvcmQsIHRoaXMucHJlZGljdGlvblNldCwgaW5kZXgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpbml0SW5wdXQocGFyc2VkX2lucHV0KXtcclxuICAgIHRoaXMuaW5wdXRTZXQgPSBuZXcgU29ydGVkU2V0KCk7XHJcbiAgICBfLmVhY2gocGFyc2VkX2lucHV0LndvcmRzLCAod29yZCkgPT57XHJcbiAgICAgIHRoaXMuX2FkZFdvcmRUb1NldCh3b3JkLCB0aGlzLmlucHV0U2V0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2FkZFdvcmRUb1NldCh3b3JkLCBzZXQpe1xyXG4gICAgaWYodGhpcy5fbG9hZGVyLmlzU3RvcFdvcmQod29yZCkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHdvcmRIYXNoID0gdGhpcy5fbG9hZGVyLl9nZXRIYXNoRm9yV29yZCh3b3JkKTtcclxuICAgIGlmKHdvcmRIYXNoICYmIHdvcmRIYXNoLmxlbmd0aCA+IElOREVYLk1BUC5UT1BJQ1Mpe1xyXG4gICAgICBzZXQuaW50ZXJzZWN0T3JTZXQod29yZEhhc2hbSU5ERVguTUFQLlRPUElDU10pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUb3BpY0NvdW50ZXI7XHJcbiIsIlxyXG5cclxuY29uc3QgSU5ERVggPSByZXF1aXJlKCcuL2luZGljZXMnKTtcclxuXHJcbmxldCBfZXhwb3J0cyA9IHtcclxuICBnZXROZXh0TW9kZWw6IChtb2RlbF9pdGVtKSA9PntcclxuXHJcbiAgICBpZiggbW9kZWxfaXRlbSAgJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSAmJiBtb2RlbF9pdGVtLmxlbmd0aCA+IElOREVYLk1PREVMLk5FWFRfTU9ERUwpe1xyXG4gICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5ORVhUX01PREVMXTtcclxuICAgIH1cclxuICB9LFxyXG4gIGdldEZpcnN0TGV2ZWxOZXh0TW9kZWw6IChtb2RlbF9pdGVtLCBicHJldmlvdXMpID0+IHtcclxuICAgIGlmKG1vZGVsX2l0ZW0gJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSl7XHJcbiAgICAgIGlmKCAhYnByZXZpb3VzICYmIG1vZGVsX2l0ZW0ubGVuZ3RoID4gSU5ERVguRklSU1RfUFJFRElDVElPTi5ORVhUKXtcclxuICAgICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5GSVJTVF9QUkVESUNUSU9OLk5FWFRdO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKCBicHJldmlvdXMgJiYgbW9kZWxfaXRlbS5sZW5ndGggPiBJTkRFWC5GSVJTVF9QUkVESUNUSU9OLlBSRVZJT1VTICl7XHJcbiAgICAgICAgcmV0dXJuIG1vZGVsX2l0ZW1bSU5ERVguRklSU1RfUFJFRElDVElPTi5QUkVWSU9VU107XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICBnZXRGaXJzdFByZWRpY3Rpb246IChtb2RlbF9pdGVtKT0+IHtcclxuICAgIGlmKG1vZGVsX2l0ZW0gJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtKSAmJiBtb2RlbF9pdGVtLmxlbmd0aCA+IDAgJiYgQXJyYXkuaXNBcnJheShtb2RlbF9pdGVtWzBdKSl7XHJcbiAgICAgIHJldHVybiBtb2RlbF9pdGVtWzBdO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgY29tcGFyZU5vQ2FzZSh3b3JkMSwgd29yZDIpe1xyXG4gICAgaWYoZ2xvYmFsLmNvbXBhcmUgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgIHJldHVybiBnbG9iYWwuY29tcGFyZSh3b3JkMSwgd29yZDIpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgcmV0dXJuICh3b3JkMSA9PT0gd29yZDIpID8gMCA6IC0xO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaGFtbWluZ0Rpc3RhbmNlKHdvcmQxLCB3b3JkMil7XHJcbiAgICBsZXQgbWluTGVuZ3RoID0gTWF0aC5taW4od29yZDEubGVuZ3RoLCB3b3JkMi5sZW5ndGgpO1xyXG4gICAgbGV0IGhhbW1pbmdEaXN0YW5jZSA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDsgaTxtaW5MZW5ndGg7IGkrKyl7XHJcbiAgICAgIGlmKHdvcmQxW2ldICE9PSB3b3JkMltpXSkge1xyXG4gICAgICAgIGhhbW1pbmdEaXN0YW5jZSsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZih3b3JkMS5sZW5ndGggPiBtaW5MZW5ndGgpIHtcclxuICAgICAgaGFtbWluZ0Rpc3RhbmNlKz0gd29yZDEubGVuZ3RoIC0gbWluTGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhhbW1pbmdEaXN0YW5jZTtcclxuICB9LFxyXG4gIGlzUHJldmlvdXMoa2V5RXZ0KXtcclxuICAgIHJldHVybiAoa2V5RXZ0LnNlbFN0YXJ0IDwga2V5RXZ0LnRleHQubGVuZ3RoKVxyXG4gIH0sXHJcbiAgc2hvdWxkU2hvd1N1Z2dlc3Rpb24oa2V5RXZ0KXtcclxuICAgIGxldCB0ZXh0ID0ga2V5RXZ0LnRleHRcclxuICAgIGxldCBzZWxTdGFydCA9IGtleUV2dC5zZWxTdGFydFxyXG4gICAgaWYoc2VsU3RhcnQgPT09IDAgfHwgc2VsU3RhcnQgPT09IHRleHQubGVuZ3RoKXtcclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH1cclxuICAgIGlmKHRleHQubGVuZ3RoID4gMCApeyAvLyBpZiBjdXJzb3IgaXMgYmVmb3JlIHRoZSBlbmRcclxuICAgICAgcmV0dXJuIHRleHRbc2VsU3RhcnRdID09PSAnICcgfHwgdGV4dFtzZWxTdGFydC0xXSA9PT0gJyAnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSxcclxuICBzaG91bGRBcHBlbmRTcGFjZShrZXlFdnQpe1xyXG4gICAgbGV0IHRleHQgPSBrZXlFdnQudGV4dFxyXG4gICAgbGV0IHNlbFN0YXJ0ID0ga2V5RXZ0LnNlbFN0YXJ0XHJcbiAgICBpZiAodGV4dC5sZW5ndGggPiAwICYmIHNlbFN0YXJ0ID09PSB0ZXh0Lmxlbmd0aCl7Ly9jdXNyb3IgYXQgbGFzdFxyXG4gICAgICByZXR1cm4gdGV4dFt0ZXh0Lmxlbmd0aCAtMV0gIT09IFwiIFwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIGdldFNhZmVFbGVtZW50KGFyciwgaW5kZXgpe1xyXG4gICAgaWYoYXJyICYmIEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIubGVuZ3RoID4gaW5kZXgpIHtcclxuICAgICAgcmV0dXJuIGFycltpbmRleF07XHJcbiAgICB9XHJcbiAgfSxcclxuICBnZXRDb3VudGZyb21Nb2RlbChtb2RlbF9pdGVtKXtcclxuICAgIGlmKEFycmF5LmlzQXJyYXkobW9kZWxfaXRlbSkgJiYgbW9kZWxfaXRlbS5sZW5ndGggPiBJTkRFWC5NT0RFTC5DT1VOVCkge1xyXG4gICAgICByZXR1cm4gbW9kZWxfaXRlbVtJTkRFWC5NT0RFTC5DT1VOVF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxuICB9LFxyXG4gIGdldENvdW50ZnJvbVdvcmRIYXNoKHdvcmRfaGFzaCl7XHJcbiAgICBpZihBcnJheS5pc0FycmF5KHdvcmRfaGFzaCkgJiYgd29yZF9oYXNoLmxlbmd0aCA+IElOREVYLk1BUC5DT1VOVCkge1xyXG4gICAgICByZXR1cm4gd29yZF9oYXNoW0lOREVYLk1BUC5DT1VOVF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzO1xyXG4iLCJjb25zdCBRdWVyeVByb2Nlc3NvciA9IHJlcXVpcmUoJy4vcXVlcnkvcHJvY2Vzc29yJylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IGNvbnN0cyA9IHJoLmNvbnN0c1xyXG5jb25zdCBMb2FkZXIgPSByZXF1aXJlKCcuL3F1ZXJ5L2xvYWRlcicpXHJcbmNvbnN0IFJlc3VsdE1lcmdlciA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tZXJnZXInKVxyXG5jb25zdCBTZWFtYXBob3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vY29tbW9uL2NvdW50aW5nX3NlYW1hcGhvcmUnKVxyXG5jb25zdCBTZWFyY2hSZXN1bHQgPSByZXF1aXJlKCcuL3Jlc3VsdCcpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaEhhbmRsZXJ7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0LCBtYXhfcmVzdWx0cyA9MjApIHtcclxuICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0XHJcbiAgICB0aGlzLmluaXREb25lID0gZmFsc2VcclxuICAgIHRoaXMubWF4X3Jlc3VsdHMgPSBtYXhfcmVzdWx0cztcclxuICAgIHRoaXMucXVlcnlQcm9jZXNzb3JzID0gW11cclxuICAgIHRoaXMubWVyZ2VyID0gbmV3IFJlc3VsdE1lcmdlcihbXSlcclxuICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMub25SZXN1bHRDb21wbGV0ZS5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMud2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShjb25zdHMoJ0tFWV9QUk9KRUNUX0xJU1QnKSwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmluaXQoKVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgaW5pdCgpIHtcclxuICAgIGlmICghdGhpcy5pbml0RG9uZSkge1xyXG4gICAgICBsZXQgbG9hZGVycyA9IHRoaXMuX2NyZWF0ZUxvYWRlcnMoKVxyXG4gICAgICBfLmVhY2gobG9hZGVycywgKGxvYWRlciwgaWQpID0+IHtcclxuICAgICAgICBsb2FkZXIuaW5pdChpZCwgdGhpcy5hZGRQcm9jZXNzb3JzLmJpbmQodGhpcykpXHJcbiAgICAgIH0pXHJcbiAgICAgIHRoaXMuaW5pdERvbmUgPSB0cnVlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRQcm9jZXNzb3JzKGxvYWRlcikge1xyXG4gICAgdGhpcy5xdWVyeVByb2Nlc3NvcnMucHVzaChuZXcgUXVlcnlQcm9jZXNzb3IobG9hZGVyKSlcclxuICB9XHJcbiAgZ2V0IHByb2plY3RQYXRocygpIHtcclxuICAgIHJldHVybiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfUFJPSkVDVF9MSVNUJykpXHJcbiAgfVxyXG5cclxuICBfY3JlYXRlTG9hZGVycygpIHtcclxuICAgIHJldHVybiBfLm1hcCh0aGlzLnByb2plY3RQYXRocywgKHBhdGgpID0+IHtcclxuICAgICAgcmV0dXJuIG5ldyBMb2FkZXIocGF0aClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzaG93U2VhcmNoUmVzdWx0cyh0ZXh0KSB7XHJcbiAgICBsZXQgaXNOZXdRdWVyeSA9IF8uZmluZCh0aGlzLnF1ZXJ5UHJvY2Vzc29ycywgcHJvY2Vzc29yID0+IHByb2Nlc3Nvci5pc05ld1F1ZXJ5KHRleHQsIHRoaXMuc2VhcmNoT3B0cykpXHJcbiAgICBpZihpc05ld1F1ZXJ5KXtcclxuICAgICAgdGhpcy5tZXJnZXIgPSBuZXcgUmVzdWx0TWVyZ2VyKFtdKVxyXG4gICAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUgPSBuZXcgU2VhbWFwaG9yZSh0aGlzLm9uUmVzdWx0Q29tcGxldGUuYmluZCh0aGlzKSk7XHJcbiAgICAgIHRoaXMuX3Jlc3V0U2VhbWFwaG9yZS53YWl0KHRoaXMucHJvY2Vzc29yQ291bnQpXHJcbiAgICAgIC8vcmgubW9kZWwucHVibGlzaChyaC5jb25zdHMoJ0VWVF9TRUFSQ0hfSU5fUFJPR1JFU1MnKSwgdHJ1ZSwge3N5bmM6IHRydWV9KTtcclxuICAgICAgLy9yaC5tb2RlbC5wdWJsaXNoKHJoLmNvbnN0cygnS0VZX1NFQVJDSF9QUk9HUkVTUycpLCAwLCB7c3luYzogdHJ1ZX0pO1xyXG4gICAgICBfLmVhY2godGhpcy5xdWVyeVByb2Nlc3NvcnMsIHByb2Nlc3NvciA9PntcclxuICAgICAgICBwcm9jZXNzb3Iuc2VhcmNoKHRleHQsIHRoaXMuc2VhcmNoT3B0cywgdGhpcy50b3BpY0NhbGxiYWNrLmJpbmQodGhpcyksIHRoaXMub25TZWFyY2hSZXN1bHRzLmJpbmQodGhpcykpXHJcbiAgICAgICAgbGV0IGdsb3NzYXJ5UmVzdWx0ID0gcHJvY2Vzc29yLnNlYXJjaEdsb3NzYXJ5KHRleHQpXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzR2xvc3NhcnlSZXN1bHRzKHRleHQsIGdsb3NzYXJ5UmVzdWx0KVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAgIFxyXG4gIFxyXG4gIGdldCBwcm9jZXNzb3JDb3VudCgpIHtcclxuICAgIHJldHVybiB0aGlzLnF1ZXJ5UHJvY2Vzc29ycy5sZW5ndGhcclxuICB9XHJcbiAgb25TZWFyY2hSZXN1bHRzKHRleHQsIHNlYXJjaFJlc3VsdCkge1xyXG4gICAgdGhpcy5wcm9jZXNzVG9waWNzUmVzdWx0cyh0ZXh0LCBzZWFyY2hSZXN1bHQpXHJcbiAgICB0aGlzLl9yZXN1dFNlYW1hcGhvcmUuc2lnbmFsKClcclxuICB9XHJcblxyXG4gIG9uUmVzdWx0Q29tcGxldGUoKSB7XHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKHJoLmNvbnN0cygnRVZUX1NFQVJDSF9JTl9QUk9HUkVTUycpLCBmYWxzZSwge1xyXG4gICAgICBzeW5jOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGxldCByZXN1bHRzUGFyYW1zID0gXy5tYXBUb0VuY29kZWRTdHJpbmcoXy5leHRlbmQoe1xyXG4gICAgICByaHNlYXJjaDogdGhpcy50ZXh0XHJcbiAgICB9IC8qLCB7IHJoc3luczogc2VhcmNoUmVzdWx0cy5zeW5zIH0qLykpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGNvbnN0cygnS0VZX1NFQVJDSF9SRVNVTFRfUEFSQU1TJyksIHJlc3VsdHNQYXJhbXMpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKCcucC5zZWFyY2hyZXN1bHRzJywgdGhpcy5tZXJnZXIuaXRlbXMpXHJcbiAgfVxyXG4gIGdldCBzZWFyY2hPcHRzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYW5kU2VhcmNoOiByaC5tb2RlbC5nZXQocmguY29uc3RzKCdLRVlfQU5EX1NFQVJDSCcpKSA9PT0gJzEnLFxyXG4gICAgICBjYnQ6IHJoLm1vZGVsLmNnZXQoJ0tFWV9UQUdfRVhQUkVTU0lPTicpLFxyXG4gICAgICBvcmlnaW46IHJoLm1vZGVsLmNnZXQoJ0tFWV9UT1BJQ19PUklHSU4nKVxyXG4gICAgfVxyXG4gIH1cclxuICB0b3BpY0NhbGxiYWNrKGlkLCBzdW1tYXJ5LCB1cmwpIHtcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goYC5wLnNlYXJjaHN1bW1hcnkke2lkfWAsIHN1bW1hcnkpXHJcbiAgICB0aGlzLndpZGdldC5wdWJsaXNoKGAucC5zZWFyY2h1cmwke2lkfWAsIHVybClcclxuICB9XHJcbiAgcHJvY2Vzc0dsb3NzYXJ5UmVzdWx0cyh0ZXh0LCBnbG9zc2FyeV9yZXN1bHQpIHtcclxuICAgIGxldCB0ZXJtID0gZ2xvc3NhcnlfcmVzdWx0ICYmIE9iamVjdC5rZXlzKGdsb3NzYXJ5X3Jlc3VsdClbMF1cclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfR0xPU1NBUllfUkVTVUxUX1RFUk0nKSwgdGVybSlcclxuICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goY29uc3RzKCdLRVlfR0xPU1NBUllfUkVTVUxUJyksIGdsb3NzYXJ5X3Jlc3VsdFt0ZXJtXSlcclxuICB9XHJcblxyXG4gIHByb2Nlc3NUb3BpY3NSZXN1bHRzKHRleHQsIHRvcGljUmVzdWx0cykge1xyXG4gICAgdGhpcy50ZXh0ID0gdGV4dFxyXG4gICAgbGV0IHByb2Nlc3NlZFJlc3VsdCA9IF8ubWFwKHRvcGljUmVzdWx0cywgcmVzdWx0ID0+IG5ldyBTZWFyY2hSZXN1bHQocmVzdWx0KSlcclxuICAgIHRoaXMubWVyZ2VyLm1lcmdlKHByb2Nlc3NlZFJlc3VsdClcclxuICB9XHJcbiAgXHJcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaE1ldGFkYXRhIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICB0aGlzLmRhdGEgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgfVxyXG4gIGdldCBzZXR0aW5ncygpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEuc2V0dGluZ3NcclxuICB9XHJcbiAgZ2V0IHRvcGljRGF0YSgpIHtcclxuICAgIHJldHVybiB0aGlzLmRhdGEubWV0YWRhdGEgXHJcbiAgfVxyXG4gIGdldFRvcGljRGF0YShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9waWNEYXRhW2lkXSAgICBcclxuICB9XHJcblxyXG4gIGdldFRvcGljU3VtbWFyeShpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9waWNEYXRhW2lkXSAmJiB0aGlzLnRvcGljRGF0YVtpZF0uc3VtbWFyeVxyXG4gIH1cclxuXHJcbiAgZ2V0VG9waWNOZXh0SWQoaWQpIHtcclxuICAgIHJldHVybiB0aGlzLnRvcGljRGF0YVtpZF0gJiYgdGhpcy50b3BpY0RhdGFbaWRdLm5leHRcclxuICB9XHJcblxyXG4gIGdldCBjb250ZXh0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29udGV4dFxyXG4gIH1cclxuICBcclxuICBnZXQgZmllbGRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuZmllbGRzXHJcbiAgfVxyXG59IiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIENidEZpbHRlciB7XHJcbiAgY29uc3RydWN0b3IoZmllbGRzLCBvcmlnaW4sIHRhZ0V4cHJzKSB7XHJcbiAgICB0aGlzLmZpbGVkcyA9IGZpZWxkc1xyXG4gICAgdGhpcy5vcmlnaW4gPSBvcmlnaW5cclxuICAgIHRoaXMudGFnRXhwcnMgPSB0YWdFeHByc1xyXG4gIH1cclxuICBmaWx0ZXIoaXRlbUxpc3QpIHtcclxuICAgIHJldHVybiBfLnJlZHVjZShpdGVtTGlzdCwgKGZpbHRlcmVkLCBpdGVtKSA9PiBmaWx0ZXJlZCB8fCB0aGlzLl9pc0ZpbHRlcmQoaXRlbSksIGZhbHNlKVxyXG4gIH1cclxuICBfaXNGaWx0ZXJkKGl0ZW0pIHtcclxuICAgIGxldCBjYnQgPSB0aGlzLmdldENidChpdGVtKVxyXG4gICAgcmV0dXJuIGNidCAmJiB0aGlzLl9pc0ZpbHRlcmVkQ2J0KGNidClcclxuXHJcbiAgfVxyXG4gIF9pc0ZpbHRlcmVkQ2J0KGNidCkge1xyXG4gICAgbGV0IGlkcyA9IGNidC5zcGxpdCgnOycpXHJcbiAgICByZXR1cm4gIV8uYW55KGlkcywgKGlkKSAgPT4ge1xyXG4gICAgICByZXR1cm4gXy5ldmFsVGFnRXhwcmVzc2lvbihpZCwgdGhpcy50YWdFeHBycywgdGhpcy5vcmlnaW4pXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBcclxuICB9XHJcbiAgZ2V0Q2J0KGl0ZW0pIHtcclxuICAgIHJldHVybiBpdGVtICYmIGl0ZW0uYXR0cmlidXRlc1xyXG4gICAgICAmJiBpdGVtLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCAmJiBfLm1hcChpdGVtLmF0dHJpYnV0ZXMsIGF0dHIgPT4ge1xyXG4gICAgICAgIHJldHVybiBhdHRyLnZhbHVlXHJcbiAgICAgIH0pLmpvaW4oXCI7XCIpXHJcbiAgfVxyXG59IiwibGV0IGx1bnIgPSByZXF1aXJlICgnbHVucicpXHJcbmxldCBTeW5vbnltbnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vc3lub255bW5zJylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTZWFyY2hEYntcclxuICBjb25zdHJ1Y3Rvcihjb250ZW50LCBzZXR0aW5ncyl7XHJcbiAgICB0aGlzLmluaXQoY29udGVudCwgc2V0dGluZ3MpXHJcbiAgfVxyXG4gIGluaXQoY29udGVudCwgc2V0dGluZ3MgPSB7fSkge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzXHJcbiAgICB0aGlzLnByb2Nlc3NTeW4oKVxyXG4gICAgdGhpcy5yZWdpc3RlckZ1bmN0aW9ucygpXHJcbiAgICB0aGlzLnNldFRva2VuaXplcigpXHJcbiAgICB0aGlzLmRiID0gbHVuci5JbmRleC5sb2FkKGNvbnRlbnQpIFxyXG4gIH1cclxuICByZWdpc3RlckZ1bmN0aW9ucygpIHtcclxuICAgIGxldCBwaXBlbGluZUZ1bmN0aW9uID0gdGhpcy5yZXBsYWNlU3lub255bW4uYmluZCh0aGlzKVxyXG4gICAgbGV0IGFkZFF1ZXJ5RnVuY3Rpb24gPSB0aGlzLmFkZFF1ZXJ5LmJpbmQodGhpcylcclxuXHJcbiAgICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24ocGlwZWxpbmVGdW5jdGlvbiwgJ3JlcGxhY2VTeW5vbnltbicpXHJcbiAgICBsdW5yLlBpcGVsaW5lLnJlZ2lzdGVyRnVuY3Rpb24oYWRkUXVlcnlGdW5jdGlvbiwgJ2FkZFF1ZXJ5JylcclxuICB9XHJcbiAgc2V0VG9rZW5pemVyKCkge1xyXG4gICAgbHVuci50b2tlbml6ZXIuc2VwYXJhdG9yID0gL1tcXHNcXC5cXC1cXCdcXCxcXG47XFw6XFxcXFxcL1xcXCJdKy9cclxuICB9XHJcbiAgcHJvY2Vzc1N5bigpIHtcclxuICAgIGxldCBzeW5vbnltbnNfd29yZHMgPSAodGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLnN5bm9ueW1zKSB8fCB7fVxyXG4gICAgbGV0IHN5bm9ueW1zID0gbmV3IFN5bm9ueW1ucyhzeW5vbnltbnNfd29yZHMpXHJcbiAgICB0aGlzLnNldHRpbmdzLnJvb3RXb3JkcyA9IHN5bm9ueW1zLnJvb3RXb3Jkc1xyXG4gIH1cclxuICBhZGRRdWVyeSh0b2tlbikge1xyXG4gICAgbGV0IHdvcmQgPSB0b2tlbi50b1N0cmluZygpXHJcbiAgICB0aGlzLnF1ZXJ5V29yZHMucHVzaCh3b3JkKVxyXG4gICAgdGhpcy5xdWVyeVdvcmRzID0gXy51bmlxdWUodGhpcy5xdWVyeVdvcmRzKVxyXG4gICAgcmV0dXJuIHRva2VuXHJcbiAgfVxyXG4gIHJlcGxhY2VTeW5vbnltbih0b2tlbikge1xyXG4gICAgbGV0IHdvcmQgPSB0b2tlbi50b1N0cmluZygpXHJcbiAgICBsZXQgcm9vdCA9IHRoaXMuc2V0dGluZ3MgJiYgdGhpcy5zZXR0aW5ncy5yb290V29yZHMgJiYgdGhpcy5zZXR0aW5ncy5yb290V29yZHNbd29yZF1cclxuICAgIGlmIChyb290ICYmIHJvb3QgIT09IHdvcmQpIHtcclxuICAgICAgcmV0dXJuIHRva2VuLnVwZGF0ZSgoKSA9PiB7IHJldHVybiB0aGlzLnNldHRpbmdzLnJvb3RXb3Jkc1t3b3JkXSB9KVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiB0b2tlblxyXG4gICAgfVxyXG4gIH1cclxuICBhZGRTdG9wV29yZHMoaW5kZXgsIHN0b3BXb3Jkcykge1xyXG4gICAgaWYgKHN0b3BXb3Jkcykge1xyXG4gICAgICBsZXQgc3RvcFdvcmRGaWx0ZXIgPSBsdW5yLmdlbmVyYXRlU3RvcFdvcmRGaWx0ZXIoc3RvcFdvcmRzKVxyXG4gICAgICBpbmRleC5waXBlbGluZS5iZWZvcmUobHVuci5zdG9wV29yZEZpbHRlciwgc3RvcFdvcmRGaWx0ZXIpXHJcbiAgICAgIGluZGV4LnBpcGVsaW5lLnJlbW92ZShsdW5yLnN0b3BXb3JkRmlsdGVyKVxyXG4gICAgfVxyXG4gIH1cclxuICBzZWFyY2gocXVlcnkpIHtcclxuICAgIHRoaXMucXVlcnlXb3JkcyA9IFtdXHJcbiAgICBsZXQgcGFyYW1zID0gcXVlcnkuZ2V0UGFyYW1zKHRoaXMuaXNTdG9wV29yZC5iaW5kKHRoaXMpKS50cmltKClcclxuICAgIGxldCBzZWFyY2hfcmVzdWx0cyA9IHJoLl8uaXNFbXB0eVN0cmluZyhwYXJhbXMpPyBbXSA6IHRoaXMuZGIuc2VhcmNoKHBhcmFtcylcclxuICAgIHJldHVybiAocXVlcnkub3B0cyk/IFxyXG4gICAgICBfLmZpbHRlcihzZWFyY2hfcmVzdWx0cywgKHJlc3VsdCkgPT4gdGhpcy5tYXRjaChyZXN1bHQsIHF1ZXJ5Lm9wdHMpKVxyXG4gICAgICA6IHNlYXJjaF9yZXN1bHRzXHJcbiAgfVxyXG5cclxuICBtYXRjaChyZXN1bHQsIG9wdHMpIHtcclxuICAgIGxldCByZXRWYWwgPSB0cnVlXHJcbiAgICBpZiAob3B0cy5hbmRTZWFyY2gpIHtcclxuICAgICAgbGV0IG1hdGNoaW5nV29yZHMgPSByZXN1bHQgJiYgcmVzdWx0Lm1hdGNoRGF0YS5tZXRhZGF0YSB8fCBbXVxyXG4gICAgICBfLmVhY2godGhpcy5xdWVyeVdvcmRzLCAod29yZCkgPT4ge1xyXG4gICAgICAgIGlmICghbWF0Y2hpbmdXb3Jkc1t3b3JkXSAmJiAhdGhpcy5pc1N0b3BXb3JkKHdvcmQpKSB7XHJcbiAgICAgICAgICByZXRWYWwgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiByZXRWYWxcclxuICB9XHJcbiAgXHJcbiAgaXNTdG9wV29yZCh3b3JkKXtcclxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnN0b3BXb3Jkcy5pbmRleE9mKHdvcmQudG9Mb3dlckNhc2UoKSkgIT09IC0xXHJcbiAgfVxyXG4gIFxyXG4gIHNlYXJjaEdsb3NzYXJ5KHF1ZXJ5KSB7XHJcbiAgICBsZXQgZ2xvc3NhcnkgPSAodGhpcy5zZXR0aW5ncyAmJiB0aGlzLnNldHRpbmdzLmdsb3NzYXJ5KSB8fCB7fVxyXG4gICAgbGV0IHF1ZXJ5VG9rZW5zID0gdGhpcy5nZXRSb290VG9rZW5zKHF1ZXJ5KVxyXG4gICAgbGV0IGdvc3NhcnlSZXN1bHRzID0gXy5yZWR1Y2UoZ2xvc3NhcnksIChyZXN1bHQsIGRlZmluaXRpb24sIHRlcm0pID0+e1xyXG4gICAgICBsZXQgZ2xvVG9rZW5zID0gdGhpcy5nZXRSb290VG9rZW5zKHRlcm0pXHJcbiAgICAgIGlmIChxdWVyeVRva2Vucy5sZW5ndGggPT09IGdsb1Rva2Vucy5sZW5ndGggJiYgdGhpcy5tYXRjaFRva2VucyhxdWVyeVRva2VucywgZ2xvVG9rZW5zKSkge1xyXG4gICAgICAgIHJlc3VsdFt0ZXJtXSA9IGRlZmluaXRpb25cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9LCB7fSlcclxuICAgIHJldHVybiBnb3NzYXJ5UmVzdWx0c1xyXG4gIH1cclxuXHJcbiAgbWF0Y2hUb2tlbnMoc2V0MSwgc2V0Mikge1xyXG4gICAgbGV0IG1hdGNoZWQgPSB0cnVlICBcclxuICAgIF8uZWFjaChzZXQxLCAodGVybTEsIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmICh0ZXJtMSAhPT0gc2V0MltpbmRleF0pIHtcclxuICAgICAgICBtYXRjaGVkID0gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiBtYXRjaGVkXHJcbiAgfVxyXG5cclxuICBnZXRSb290VG9rZW5zKHRleHQpIHtcclxuICAgIGxldCB0b2tlbnMgPSBsdW5yLnRva2VuaXplcih0ZXh0KVxyXG4gICAgcmV0dXJuIF8ubWFwKHRva2VucywgKHRva2VuKSA9PiB7XHJcbiAgICAgIGxldCB3b3JkID0gdG9rZW4udG9TdHJpbmcoKVxyXG4gICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5yb290V29yZHNbd29yZF0gfHwgd29yZFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGV4cG9ydCgpe1xyXG4gICAgcmV0dXJuIHRoaXMuZGIudG9KU09OKClcclxuICB9XHJcbn1cclxuIiwiXHJcbmNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguX1xyXG5jb25zdCBQYXRocyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9wYXRocycpXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoTG9hZGVye1xyXG4gIGNvbnN0cnVjdG9yKHBhdGggPSBcIlwiKXtcclxuICAgIHRoaXMuX3BhdGhzID0gbmV3IFBhdGhzKHBhdGgpXHJcbiAgfVxyXG4gIGluaXQoaWQsIGNhbGxiYWNrRm4pIHtcclxuICAgIHRoaXMuaWQgPSBpZFxyXG4gICAgY2FsbGJhY2tGbih0aGlzKVxyXG4gIH1cclxuICBsb2FkREIoY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldFNlYXJjaERiRmlsZVBhdGgoKVxyXG4gICAgXy5sb2FkU2NyaXB0KHBhdGgsIHRydWUsICgpID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSBfLmV4cG9ydHMoKVxyXG4gICAgICBpZihjYWxsYmFja0ZuKXtcclxuICAgICAgICBjYWxsYmFja0ZuKGRhdGEpXHJcbiAgICAgIH1cclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoaWQpIHtcclxuICAgIHJldHVybiBgJHt0aGlzLmlkfV8ke2lkfWBcclxuICB9XHJcbiAgZ2V0VXJsKHVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BhdGhzLl9nZXRSZWxhdGl2ZVBhdGgodXJsKVxyXG4gIH1cclxuICBsb2FkTWV0YURhdGEoY2FsbGJhY2tGbil7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldE1ldGFkYXRhRmlsZVBhdGgoKVxyXG4gICAgXy5sb2FkU2NyaXB0KHBhdGgsIHRydWUsICgpID0+IHtcclxuICAgICAgbGV0IGRhdGEgPSBfLmV4cG9ydHMoKVxyXG4gICAgICBpZihjYWxsYmFja0ZuKXtcclxuICAgICAgICBjYWxsYmFja0ZuKGRhdGEpXHJcbiAgICAgIH1cclxuICAgIH0sIHRydWUpO1xyXG4gIH1cclxuICBcclxuICBsb2FkVGV4dERhdGEocXVlcnksIGlkLCBjYWxsYmFja0ZuKSB7XHJcbiAgICBsZXQgcGF0aCA9IHRoaXMuX3BhdGhzLmdldFRleHRGaWxlUGF0aChpZClcclxuICAgIF8ubG9hZFNjcmlwdChwYXRoLCB0cnVlLCAoKSA9PiB7XHJcbiAgICAgIGxldCBkYXRhID0gXy5leHBvcnRzKClcclxuICAgICAgaWYgKGNhbGxiYWNrRm4pIHtcclxuICAgICAgICBjYWxsYmFja0ZuKHF1ZXJ5LCBpZCwgZGF0YSlcclxuICAgICAgfVxyXG4gICAgfSwgdHJ1ZSk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IFNlYXJjaERiID0gcmVxdWlyZSAoJy4vZGInKVxyXG5jb25zdCBRdWVyeSA9IHJlcXVpcmUoJy4vcXVlcnknKVxyXG5jb25zdCBTdW1tYXJ5ID0gcmVxdWlyZSgnLi9zdW1tYXJ5JylcclxuY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbmNvbnN0IFNlYW1hcGhvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9jb21tb24vY291bnRpbmdfc2VhbWFwaG9yZScpXHJcbmNvbnN0IFRleHRNZXJnZXIgPSByZXF1aXJlKCcuLi90ZXh0X21lcmdlcicpXHJcbmNvbnN0IFNlYXJjaE1ldGFkYXRhID0gcmVxdWlyZSgnLi4vbWV0YWRhdGEnKVxyXG5jb25zdCBDYnRGaWx0ZXIgPSByZXF1aXJlKFwiLi9jYnRcIilcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoUHJvY2Vzc29ye1xyXG4gIGNvbnN0cnVjdG9yKGxvYWRlcil7XHJcbiAgICB0aGlzLmxvYWRlciA9IGxvYWRlclxyXG4gICAgdGhpcy5tZXRhZGF0YUxvYWRlZCA9IHRoaXMuZGJMb2FkZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubG9hZGVyLmxvYWREQigoZGJDb250ZW50KT0+e1xyXG4gICAgICB0aGlzLmluaXREQihkYkNvbnRlbnQpXHJcbiAgICB9KVxyXG4gICAgdGhpcy5sb2FkZXIubG9hZE1ldGFEYXRhKChtZXRhZGF0YSk9PntcclxuICAgICAgdGhpcy5pbml0TWV0YWRhdGEobWV0YWRhdGEpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICBpbml0TWV0YWRhdGEobWV0YWRhdGEpIHtcclxuICAgIHRoaXMubWV0YWRhdGFMb2FkZWQgPSB0cnVlIFxyXG4gICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBTZWFyY2hNZXRhZGF0YShtZXRhZGF0YSlcclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLmluaXQgJiYgdGhpcy5kYkNvbnRlbnQpIHtcclxuICAgICAgdGhpcy5pbml0REIodGhpcy5kYkNvbnRlbnQpXHJcbiAgICAgIHRoaXMuZGJDb250ZW50ID0gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdERCKGRiQ29udGVudCkge1xyXG4gICAgaWYodGhpcy5tZXRhZGF0YUxvYWRlZCl7XHJcbiAgICAgIHRoaXMuZGIgPSBuZXcgU2VhcmNoRGIoZGJDb250ZW50LCB0aGlzLm1ldGFkYXRhLnNldHRpbmdzKVxyXG4gICAgICB0aGlzLmluaXQgPSB0cnVlXHJcbiAgICAgIGlmICh0aGlzLndhaXRpbmcpIHtcclxuICAgICAgICB0aGlzLndhaXRpbmcgPSBmYWxzZVxyXG4gICAgICAgIHRoaXMuZ2V0UmVzdWx0cygpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLmRiQ29udGVudCA9IGRiQ29udGVudFxyXG4gICAgfVxyXG4gIH1cclxuICB0b3BpY3NMb2FkZWQoKSB7XHJcbiAgICBpZiAodGhpcy5leGFjdFNlYXJjaCkge1xyXG4gICAgICB0aGlzLmZpbHRlcigpXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlzTmV3UXVlcnkodGV4dCwgb3B0cyl7XHJcbiAgICBsZXQgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkodGV4dCwgb3B0cylcclxuICAgIHJldHVybiAhdGhpcy5xdWVyeSB8fCAhdGhpcy5xdWVyeS5pc0VxdWFsKHF1ZXJ5KVxyXG4gIH1cclxuICAgIFxyXG4gIHNlYXJjaCh0ZXh0LCBvcHRzLCBjYWxsYmFjaywgcmVzdWx0c0NhbGxiYWNrKSB7XHJcbiAgICBsZXQgcXVlcnkgPSB0aGlzLmJ1aWxkUXVlcnkodGV4dCwgb3B0cylcclxuICAgIGlmKHRoaXMuaXNOZXdRdWVyeSh0ZXh0LCBvcHRzKSkge1xyXG4gICAgICB0aGlzLnRleHQgPSB0ZXh0XHJcbiAgICAgIHRoaXMuc2VhbWFwaG9yZSA9IG5ldyBTZWFtYXBob3JlKHRoaXMudG9waWNzTG9hZGVkLmJpbmQodGhpcykpXHJcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeVxyXG4gICAgICB0aGlzLnRvcGljQ2FsbGJhY2sgPSBjYWxsYmFja1xyXG4gICAgICB0aGlzLm9wdHMgPSBvcHRzXHJcbiAgICAgIHRoaXMuc3VtbWFyaWVzID0ge31cclxuICAgICAgdGhpcy5yZXN1bHRzQ2FsbGJhY2sgPSByZXN1bHRzQ2FsbGJhY2tcclxuICAgICAgdGhpcy5leGFjdFNlYXJjaCA9IHRoaXMucXVlcnkuZXhhY3RNYXRjaFxyXG4gICAgICB0aGlzLmdldFJlc3VsdHMoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZmlsdGVyKCkge1xyXG4gICAgbGV0IHRlcm1zID0gdGhpcy5xdWVyeS5leGF4Y3RUZXJtc1xyXG4gICAgdGhpcy5yZXN1bHRzID0gXy5maWx0ZXIodGhpcy5yZXN1bHRzLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgIGxldCB0b3BpY1RleHQgPSB0aGlzLnJlc3VsdHNNZXRhZGF0YVtyZXN1bHQuaWRdLnRvcGljVGV4dFxyXG4gICAgICByZXR1cm4gdGhpcy5tYXRjaGVzRXhhY3QodGVybXMsIHRvcGljVGV4dCwgcmVzdWx0LmlkKVxyXG4gICAgfSlcclxuICAgIHRoaXMucmVzdWx0c0NhbGxiYWNrKHRoaXMucXVlcnkudGV4dCwgdGhpcy5yZXN1bHRzKVxyXG4gICAgdGhpcy5wcm9jZXNzU3VtbWFyeSgpXHJcbiAgfVxyXG5cclxuICBwcm9jZXNzU3VtbWFyeSgpe1xyXG4gICAgXy5lYWNoKHRoaXMucmVzdWx0cywgcmVzdWx0ID0+IHtcclxuICAgICAgbGV0IGlkID0gcmVzdWx0LmlkXHJcbiAgICAgIHRoaXMudG9waWNDYWxsYmFjayh0aGlzLmxvYWRlci5nZXRJZChpZCksIHRoaXMuc3VtbWFyaWVzW2lkXSwgdGhpcy5jcmVhdGVVcmwoaWQsIHRoaXMucXVlcnkuZXhheGN0VGVybXMpKSBcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBtYXRjaGVzRXhhY3QodGVybXMsIHRleHQsIGlkKSB7XHJcbiAgICBsZXQgZm91bmQgPSBmYWxzZVxyXG4gICAgXy5lYWNoKHRlcm1zLCB0ZXJtID0+IHtcclxuICAgICAgbGV0IGlkeCA9IHRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRlcm0pXHJcbiAgICAgIGlmIChpZHggIT09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5hZGRTdW1tYXJ5KGlkLCB0ZXh0LCBpZHgsIHRlcm0pXHJcbiAgICAgICAgZm91bmQgPSB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gZm91bmRcclxuICB9XHJcbiAgXHJcbiAgYWRkU3VtbWFyeShpZCwgdGV4dCwgaWR4LCB0ZXJtKSB7XHJcbiAgICBsZXQgc3VtbWFyeSA9ICB0aGlzLm1ldGFkYXRhLmdldFRvcGljU3VtbWFyeShpZClcclxuICAgIGlmICh0aGlzLm1ldGFkYXRhLmNvbnRleHQgJiYgc3VtbWFyeSkge1xyXG4gICAgICB0aGlzLnN1bW1hcmllc1tpZF0gPSBzdW1tYXJ5XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IHN1bW1hcnlFeHRyYWN0b3IgPSBuZXcgU3VtbWFyeSh0aGlzLm1ldGFkYXRhLnRvcGljRGF0YSwgIHRoaXMubWV0YWRhdGEuY29udGV4dClcclxuICAgICAgdGhpcy5zdW1tYXJpZXNbaWRdID0gc3VtbWFyeUV4dHJhY3Rvci5nZXRTdW1tYXJ5VGV4dCh0ZXh0LCBpZHgsIHRlcm0ubGVuZ3RoLCB0ZXJtKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBnZXRSZXN1bHRzKCkge1xyXG4gICAgaWYgKCF0aGlzLmluaXQpIHtcclxuICAgICAgdGhpcy53YWl0aW5nID0gdHJ1ZVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIHRoaXMucmVzdWx0cyA9IHRoaXMucHJvY2VzcygpXHJcbiAgICBpZiAodGhpcy5uZWVkc0NvcnJlY3Rpb24pIHtcclxuICAgICAgdGhpcy5kb0NvcnJlY3Rpb24oKSAgICBcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuZXhhY3RTZWFyY2gpIHtcclxuICAgICAgdGhpcy5yZXN1bHRzQ2FsbGJhY2sodGhpcy5xdWVyeS50ZXh0LCB0aGlzLnJlc3VsdHMpXHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5leGFjdFNlYXJjaCAmJiB0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMucmVzdWx0c0NhbGxiYWNrKHRoaXMucXVlcnkudGV4dCwgdGhpcy5yZXN1bHRzKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBnZXQgbmVlZHNDb3JyZWN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoID09PSAwXHJcbiAgICAgICYmICB0aGlzLm1ldGFkYXRhLnNldHRpbmdzLmZ1enp5XHJcbiAgICAgICYmICF0aGlzLnF1ZXJ5LmV4YWN0TWF0Y2hcclxuICB9XHJcblxyXG4gIGRvQ29ycmVjdGlvbigpe1xyXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSh0aGlzLnF1ZXJ5LnRleHQsIF8uZXh0ZW5kKHRoaXMub3B0cywgeyBmdXp6eTogdHJ1ZSB9KSlcclxuICAgIHRoaXMucmVzdWx0cyA9IHRoaXMucHJvY2VzcygpXHJcbiAgfVxyXG4gIFxyXG4gIHNlYXJjaEdsb3NzYXJ5KHRleHQpIHtcclxuICAgIGxldCBxdWVyeSA9IHRoaXMuYnVpbGRRdWVyeSh0ZXh0KVxyXG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc0dsb3NzYXJ5KHF1ZXJ5KVxyXG4gIH1cclxuXHJcbiAgYnVpbGRRdWVyeSh0ZXh0LCBvcHRzKXtcclxuICAgIHJldHVybiBuZXcgUXVlcnkodGV4dCwgIHRoaXMubWV0YWRhdGEuc2V0dGluZ3MsIG9wdHMsIHRoaXMuZmlsdGVySXRlbS5iaW5kKHRoaXMpKVxyXG4gIH1cclxuICBcclxuICBwcm9jZXNzKCkge1xyXG4gICAgdGhpcy5yZXN1bHRzTWV0YWRhdGEgPSB7fVxyXG4gICAgbGV0IHNlYXJjaFJlc3VsdHMgPSB0aGlzLmRiLnNlYXJjaCh0aGlzLnF1ZXJ5KVxyXG4gICAgdGhpcy5zZWFtYXBob3JlLndhaXQoc2VhcmNoUmVzdWx0cy5sZW5ndGgpXHJcbiAgICBfLmVhY2goKHNlYXJjaFJlc3VsdHMpLCAocmVzdWx0KSA9PiB7XHJcbiAgICAgIGxldCB0b3BpY0RhdGEgPSB0aGlzLm1ldGFkYXRhLmdldFRvcGljRGF0YShyZXN1bHQucmVmKVxyXG4gICAgICB0aGlzLnJlc3VsdHNNZXRhZGF0YVtyZXN1bHQucmVmXSA9IHJlc3VsdC5tYXRjaERhdGEubWV0YWRhdGFcclxuICAgICAgdGhpcy5sb2FkZXIubG9hZFRleHREYXRhKHRoaXMucXVlcnksIHJlc3VsdC5yZWYsIHRoaXMucHJvY2Vzc1RvcGljRGF0YS5iaW5kKHRoaXMpKVxyXG4gICAgICBfLmV4dGVuZChyZXN1bHQsIHRvcGljRGF0YSlcclxuICAgICAgcmVzdWx0LmlkID0gcmVzdWx0LnJlZlxyXG4gICAgICByZXN1bHQucmVmID0gdGhpcy5sb2FkZXIuZ2V0SWQocmVzdWx0LnJlZilcclxuICAgIH0pXHJcbiAgICByZXR1cm4gc2VhcmNoUmVzdWx0c1xyXG4gIH1cclxuICBwcm9jZXNzR2xvc3NhcnkocXVlcnkpIHtcclxuICAgIHJldHVybiB0aGlzLmRiLnNlYXJjaEdsb3NzYXJ5KHF1ZXJ5LnRleHQpXHJcbiAgfVxyXG5cclxuICBwcm9jZXNzVG9waWNEYXRhKHF1ZXJ5LCBpZCwgZGF0YSkge1xyXG4gICAgaWYgKCF0aGlzLnF1ZXJ5LmlzRXF1YWwocXVlcnkpKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoUmVzdWx0ID0gdGhpcy5yZXN1bHRzTWV0YWRhdGFbaWRdXHJcbiAgICBpZiAobWF0Y2hSZXN1bHQpIHtcclxuICAgICAgbGV0IHdvcmRsaXN0ID0gW11cclxuICAgICAgbGV0IHN1bW1hcnlFeHRyYWN0b3IgPSBuZXcgU3VtbWFyeSh0aGlzLm1ldGFkYXRhLnRvcGljRGF0YSwgdGhpcy5tZXRhZGF0YS5jb250ZXh0KVxyXG4gICAgICBsZXQgc3VtbWFyeSA9IHN1bW1hcnlFeHRyYWN0b3IuZ2V0U3VtbWFyeShpZCwgbWF0Y2hSZXN1bHQsIHdvcmRsaXN0LCBkYXRhKVxyXG4gICAgICBzdW1tYXJ5ID0gc3VtbWFyeS5yZXBsYWNlKC9cXHQrL2dpLCAnICcpLnRyaW0oKVxyXG4gICAgICB0aGlzLnJlc3VsdHNNZXRhZGF0YVtpZF0udG9waWNUZXh0ID0gdGhpcy5jcmVhdGVUZXh0KGlkLCBkYXRhKVxyXG4gICAgICBpZighdGhpcy5leGFjdFNlYXJjaCkge1xyXG4gICAgICAgIHRoaXMudG9waWNDYWxsYmFjayh0aGlzLmdldElkKGlkKSwgc3VtbWFyeSwgdGhpcy5jcmVhdGVVcmwoaWQsIHdvcmRsaXN0KSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZWFtYXBob3JlLnNpZ25hbCgpXHJcbiAgfVxyXG5cclxuICBjcmVhdGVUZXh0KHRvcGljSWQsIHRleHRzKSB7XHJcbiAgICBsZXQgbmV4dFRleHRzID0gdGhpcy5tZXRhZGF0YS5nZXRUb3BpY05leHRJZCh0b3BpY0lkKVxyXG4gICAgbGV0IG1lcmdlciA9IG5ldyBUZXh0TWVyZ2VyKG5leHRUZXh0cywgdGV4dHMsIHRoaXMuZmlsdGVySWQuYmluZCh0aGlzKSlcclxuICAgIHJldHVybiBtZXJnZXIuZ2V0VGV4dCgpXHJcbiAgfVxyXG5cclxuICBmaWx0ZXJJZChpZCl7XHJcbiAgICBsZXQgZmllbGRzID0gdGhpcy5tZXRhZGF0YS5maWVsZHNcclxuICAgIGxldCBmaWVsZEl0ZW0gPSBmaWVsZHNbaWRdXHJcbiAgICByZXR1cm4gdGhpcy5maWx0ZXJJdGVtKGZpZWxkSXRlbSkgIFxyXG4gIH1cclxuICBcclxuICBmaWx0ZXJJdGVtKGZpZWxkSXRlbSkge1xyXG4gICAgbGV0IGZpZWxkcyA9IHRoaXMubWV0YWRhdGEuZmllbGRzXHJcbiAgICBsZXQgZmlsdGVyID0gbmV3IENidEZpbHRlcihmaWVsZHMsIHRoaXMub3B0cy5vcmlnaW4sIHRoaXMub3B0cy5jYnQpXHJcbiAgICByZXR1cm4gZmllbGRJdGVtICYmIGZpbHRlci5maWx0ZXIoZmllbGRJdGVtKVxyXG4gIH1cclxuICBcclxuICBnZXRJZChpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMubG9hZGVyLmdldElkKGlkKVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlVXJsKGlkLCB3b3JkbGlzdCkge1xyXG4gICAgbGV0IGRhdGEgPSB0aGlzLm1ldGFkYXRhLmdldFRvcGljRGF0YShpZClcclxuICAgIGxldCBobFRlcm0gPSB0aGlzLmV4YWN0U2VhcmNoID8gYFwiJHt3b3JkbGlzdFswXX1cImAgOiB3b3JkbGlzdFxyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgbGV0IHJlc3VsdHNQYXJhbXMgPSAnPycgKyBfLm1hcFRvRW5jb2RlZFN0cmluZyh7XHJcbiAgICAgICAgcmhzZWFyY2g6IHRoaXMucXVlcnkub3JpZ2luYWxUZXh0LFxyXG4gICAgICAgIHJoaGx0ZXJtOiBobFRlcm1cclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIGAke3RoaXMubG9hZGVyLmdldFVybChkYXRhLnJlbFVybCl9JHtyZXN1bHRzUGFyYW1zfWBcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsImNvbnN0IHJoID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uLy4uL2xpYi9yaFwiKVxyXG5jb25zdCBfID0gcmguX1xyXG5jb25zdCBDYnRGaWx0ZXIgPSByZXF1aXJlKFwiLi9jYnRcIilcclxuY29uc3QgbHVuciA9IHJlcXVpcmUoXCJsdW5yXCIpXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoUXVlcnkge1xyXG4gIGNvbnN0cnVjdG9yKHRleHQsIHNldHRpbmdzLCBvcHRzKSB7XHJcbiAgICB0aGlzLm9yaWdpbmFsVGV4dCA9IHRleHQudHJpbSgpXHJcbiAgICB0aGlzLnRleHQgPSB0aGlzLm9yaWdpbmFsVGV4dC50b0xvd2VyQ2FzZSgpXHJcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3MgfHwge31cclxuICAgIHRoaXMub3B0cyA9IG9wdHMgfHwge31cclxuICAgIHRoaXMuY2hlY2tFeGFjdE1hdGNoKClcclxuICB9XHJcbiAgZmlsdGVyKGl0ZW1MaXN0KSB7XHJcbiAgICBsZXQgZmlsdGVyID0gbmV3IENidEZpbHRlcih0aGlzLnNldHRpbmdzLmZpZWxkcywgdGhpcy5vcHRzLm9yaWdpbiwgdGhpcy5vcHRzLmNidClcclxuICAgIHJldHVybiAgZmlsdGVyLmZpbHRlcihpdGVtTGlzdClcclxuICB9XHJcbiAgZ2V0UGFyYW1zKGlzU3RvcFdvcmRGbikge1xyXG4gICAgdGhpcy5pc1N0b3BXb3JkID0gaXNTdG9wV29yZEZuICBcclxuICAgIHJldHVybiBgJHt0aGlzLmZpZWxkc1BhcmFtfWAgXHJcbiAgfVxyXG4gIFxyXG4gIGlzRXF1YWwob3RoZXIpIHtcclxuICAgIGlmKHRoaXMudGV4dCAhPT0gb3RoZXIudGV4dCB8fCB0aGlzLl9iRXhhY3RNYXRjaCAhPT0gb3RoZXIuX2JFeGFjdE1hdGNoKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIF8uaXNFcXVhbCh0aGlzLm9wdHMsIG90aGVyLm9wdHMpXHJcbiAgfVxyXG4gIFxyXG4gIGdldEZ1enp5VGV4dChpZCwgdG9rZW4sIGJvb3N0KSB7XHJcbiAgICBpZiAodGhpcy5pc1N0b3BXb3JkKHRva2VuKSkge1xyXG4gICAgICByZXR1cm4gJydcclxuICAgIH1cclxuICAgIHJldHVybiAodGhpcy5vcHRzLmZ1enp5KT8gYCR7aWR9OiR7dG9rZW59fjFeJHtib29zdH1gOiBgJHtpZH06JHt0b2tlbn1eJHtib29zdH1gXHJcbiAgfVxyXG5cclxuICBjaGVja0V4YWN0TWF0Y2goKSB7XHJcbiAgICBpZiAodGhpcy5faXNFeGFjdE1hdGNoKSB7XHJcbiAgICAgIHRoaXMuX2JFeGFjdE1hdGNoID0gdHJ1ZVxyXG4gICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQuc3Vic3RyaW5nKDEsIHRoaXMudGV4dC5sZW5ndGgtMSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBfaXNFeGFjdE1hdGNoKCkge1xyXG4gICAgcmV0dXJuICh0aGlzLnRleHQubGVuZ3RoID4gMilcclxuICAgICAgJiYgdGhpcy5xdW90ZXNDaGFyLmluZGV4T2YodGhpcy50ZXh0WzBdKSAhPT0gLTFcclxuICAgICAgJiYgdGhpcy5xdW90ZXNDaGFyLmluZGV4T2YodGhpcy50ZXh0W3RoaXMudGV4dC5sZW5ndGggLTEgXSkgIT09IC0xXHJcbiAgfVxyXG5cclxuICBnZXQgZXhhY3RNYXRjaCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9iRXhhY3RNYXRjaFxyXG4gIH1cclxuXHJcbiAgZ2V0IGV4YXhjdFRlcm1zKCkge1xyXG4gICAgcmV0dXJuIFt0aGlzLnRleHRdXHJcbiAgfVxyXG4gIFxyXG4gIGdldCBxdW90ZXNDaGFyKCkge1xyXG4gICAgcmV0dXJuIFtcIlxcXCJcIiwgXCJcXCdcIl1cclxuICB9XHJcbiAgZ2V0RmllbGRCb29zdChmaWVsZCkge1xyXG4gICAgcmV0dXJuIF8ucmVkdWNlKGZpZWxkLCAobWF4LCBydWxlKSA9PiB7XHJcbiAgICAgIHJldHVybiAocnVsZSAmJiBydWxlLmJvb3N0ICYmIHJ1bGUuYm9vc3QgPiBtYXggKT8gcnVsZS5ib29zdCA6IG1heFxyXG4gICAgfSwgMSlcclxuICB9XHJcblxyXG4gIGdldCBmaWVsZHNQYXJhbSgpIHtcclxuICAgIGxldCBmaWVsZHF1ZXJ5ID0gJydcclxuICAgIF8uZWFjaCh0aGlzLnNldHRpbmdzLmZpZWxkcywgKGl0ZW0sIGlkKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5maWx0ZXIoaXRlbSkpIHtcclxuICAgICAgICBsZXQgdG9rZW5zID0gXy5tYXAobHVuci50b2tlbml6ZXIodGhpcy50ZXh0KSwgdG9rZW4gPT4gdG9rZW4uc3RyKSAgXHJcbiAgICAgICAgbGV0IGJvb3N0ID0gdGhpcy5nZXRGaWVsZEJvb3N0KGl0ZW0pXHJcbiAgICAgICAgXy5lYWNoKHRva2VucywgdG9rZW4gPT4ge1xyXG4gICAgICAgICAgZmllbGRxdWVyeSA9IGAke2ZpZWxkcXVlcnl9ICR7dGhpcy5nZXRGdXp6eVRleHQoaWQsIHRva2VuLCBib29zdCl9YFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gZmllbGRxdWVyeVxyXG4gIH1cclxufVxyXG4iLCJjb25zdCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi8uLi9saWIvcmhcIilcclxuY29uc3QgVGV4dE1lcmdlciA9IHJlcXVpcmUoJy4uL3RleHRfbWVyZ2VyJylcclxuY29uc3QgXyA9IHJoLl9cclxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBTZWFyY2hTdW1tYXJ5IHtcclxuICBjb25zdHJ1Y3Rvcih0b3BpY0RhdGEsIGNvbnRleHQpIHtcclxuICAgIHRoaXMudG9waWNEYXRhID0gdG9waWNEYXRhXHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XHJcbiAgfVxyXG4gIG1pbkRpc3RhbmNlKCkge1xyXG4gICAgLy9fLmVhY2goKVxyXG4gIH1cclxuXHJcbiAgZ2V0U3VtbWFyeShpZCwgbWF0Y2hSZXN1bHQsIHdvcmRsaXN0LCBkYXRhKSB7XHJcbiAgICBpZiAodGhpcy5jb250ZXh0KSB7XHJcbiAgICAgIGxldCBzdW1tYXJ5ID0gdGhpcy50b3BpY0RhdGFbaWRdICYmIHRoaXMudG9waWNEYXRhW2lkXS5zdW1tYXJ5XHJcbiAgICAgIGlmIChzdW1tYXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHN1bW1hcnlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHN1bW1hcmllcyA9IF8ubWFwKG1hdGNoUmVzdWx0LCAobWV0YWRhdGEpID0+IHtcclxuICAgICAgcmV0dXJuIF8udW5pb24obWV0YWRhdGEsIChwb3NEYXRhLCBmaWVsZElkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIF8udW5pb24ocG9zRGF0YS5wb3NpdGlvbiwgKGZpc3RyUG9zKSA9PiB7XHJcbiAgICAgICAgICBsZXQgdGV4dHMgPSBkYXRhW2ZpZWxkSWRdXHJcbiAgICAgICAgICBsZXQgbWVyZ2VyID0gbmV3IFRleHRNZXJnZXIoKVxyXG4gICAgICAgICAgbGV0IHRleHQgPSBtZXJnZXIuZ2V0SW5kZXhUZXh0KHRleHRzKVxyXG4gICAgICAgICAgbGV0IHdvcmQgPSB0ZXh0LnN1YnN0cmluZyhmaXN0clBvc1swXSwgZmlzdHJQb3NbMF0gKyBmaXN0clBvc1sxXSlcclxuICAgICAgICAgIHdvcmQgPSB3b3JkLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgIGlmICh3b3JkbGlzdC5pbmRleE9mKHdvcmQpID09PSAtMSkge1xyXG4gICAgICAgICAgICB3b3JkbGlzdC5wdXNoKHdvcmQpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdW1tYXJ5VGV4dCh0ZXh0LCBmaXN0clBvc1swXSwgZmlzdHJQb3NbMV0sIHdvcmQpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBsZXQgc3VtbWFyeSA9ICcnXHJcbiAgICBfLmVhY2goc3VtbWFyaWVzWzBdIHx8IFtdLCBzID0+IHtcclxuICAgICAgaWYgKHMubGVuZ3RoID4gc3VtbWFyeS5sZW5ndGgpIHtcclxuICAgICAgICBzdW1tYXJ5ID0gc1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHN1bW1hcnlcclxuICB9XHJcblxyXG5cclxuXHJcbiAgZ2V0U3VtbWFyeVRleHQodGV4dCwgaWR4LCBsZW5ndGgsIHdvcmQpe1xyXG4gICAgbGV0IGxlZnRUZXh0ID0gdGV4dC5zdWJzdHJpbmcoMCwgaWR4KVxyXG4gICAgbGV0IHJpZ2h0VGV4dCA9IHRleHQuc3Vic3RyaW5nKGlkeCArIGxlbmd0aClcclxuXHJcbiAgICByZXR1cm4gYCR7dGhpcy50cmltTGVmdChsZWZ0VGV4dCl9PGI+JHt3b3JkfTwvYj5cclxuICAgICAgICAgICAgICAke3RoaXMudHJpbVJpZ2h0KHJpZ2h0VGV4dCl9YFxyXG4gIH1cclxuICB0cmltTGVmdChsZWZ0VGV4dCkge1xyXG4gICAgbGV0IGxlZnRJZHggPSBsZWZ0VGV4dC5pbmRleE9mKFwiIFwiLCBsZWZ0VGV4dC5sZW5ndGggLSAzMClcclxuICAgIGxlZnRUZXh0ID0gbGVmdFRleHQuc3Vic3RyaW5nKGxlZnRJZHgsIGxlZnRUZXh0Lmxlbmd0aClcclxuICAgIHJldHVybiBsZWZ0VGV4dC50cmltU3RhcnQoKVxyXG4gIH1cclxuICB0cmltUmlnaHQocmlnaHRUZXh0KSB7XHJcbiAgICBsZXQgcmlnaHRJZHggPSByaWdodFRleHQuaW5kZXhPZihcIiBcIiwgNzApXHJcbiAgICByaWdodElkeCA9IChyaWdodElkeCA9PT0gLTEpID8gcmlnaHRUZXh0Lmxlbmd0aCA6IHJpZ2h0SWR4IFxyXG4gICAgcmlnaHRUZXh0ID0gcmlnaHRUZXh0LnN1YnN0cmluZygwLCByaWdodElkeClcclxuICAgIHJldHVybiByaWdodFRleHQudHJpbUVuZCgpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHNlYXJjaF91dGlscyBmcm9tICcuLi9zdWdnZXN0aW9uL3V0aWxzJ1xyXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNlYXJjaFJlc3VsdHtcclxuICBjb25zdHJ1Y3RvcihyZXN1bHQpIHtcclxuICAgIHRoaXMuZlJhbmtpbmcgPSByZXN1bHQuc2NvcmVcclxuICAgIHRoaXMubkluZGV4ID0gMVxyXG4gICAgdGhpcy5zdHJTdW1tYXJ5ID0gYC5wLnNlYXJjaHN1bW1hcnkke3Jlc3VsdC5yZWZ9YFxyXG4gICAgdGhpcy5zdHJUaXRsZSA9IHJlc3VsdC50aXRsZVxyXG4gICAgdGhpcy5zdHJVcmwgPSBgLnAuc2VhcmNodXJsJHtyZXN1bHQucmVmfWBcclxuICAgIHRoaXMuc3RyQnJlYWRjcnVtYnMgPSByZXN1bHQucmVsVXJsXHJcbiAgfVxyXG4gIG1lcmdlKG5ld19pdGVtKSB7XHJcbiAgICB0aGlzLmZSYW5raW5nICs9IG5ld19pdGVtLmZSYW5raW5nO1xyXG4gIH1cclxuICBjb21wYXJlKG90aGVyKSB7XHJcbiAgICByZXR1cm4gb3RoZXIuZlJhbmtpbmcgLSB0aGlzLmZSYW5raW5nXHJcbiAgfVxyXG4gIG1hdGNoKG90aGVyKSB7XHJcbiAgICByZXR1cm4gc2VhcmNoX3V0aWxzLmNvbXBhcmVOb0Nhc2Uob3RoZXIuc3RyVXJsLCB0aGlzLnN0clVybCkgPT09IDA7XHJcbiAgfVxyXG59IiwiY29uc3QgcmggPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vbGliL3JoXCIpXHJcbmNvbnN0IF8gPSByaC5fXHJcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VhcmNoVGV4dE1lcmdlciB7XHJcbiAgY29uc3RydWN0b3IobmV4dFRleHRzLCB0ZXh0cywgZmlsdGVyKSB7XHJcbiAgICB0aGlzLm5leHRUZXh0cyA9IG5leHRUZXh0c1xyXG4gICAgdGhpcy50ZXh0cyA9IHRleHRzXHJcbiAgICB0aGlzLnNlcGFyYXRvciA9IFwiIFwiXHJcbiAgICB0aGlzLmZpbHRlciA9IGZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXJcclxuICB9XHJcbiAgam9pbihpZCwgc3RhcnQsIGVuZCkge1xyXG4gICAgbGV0IHRleHRzID0gW11cclxuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKyl7XHJcbiAgICAgIGlmICh0aGlzLnRleHRzW2lkXVtpXSkge1xyXG4gICAgICAgIHRleHRzLnB1c2godGhpcy50ZXh0c1tpZF1baV0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0ZXh0cy5qb2luKHRoaXMuc2VwYXJhdG9yKVxyXG4gIH1cclxuICBkZWZhdWx0RmlsdGVyKCkge1xyXG4gICAgcmV0dXJuIGZhbHNlXHJcbiAgfVxyXG4gIGdldEluZGV4VGV4dCh0ZXh0cykge1xyXG4gICAgcmV0dXJuIHRleHRzLmpvaW4odGhpcy5zZXBhcmF0b3IpLnJlcGxhY2UoL1xcbi9naSwgdGhpcy5zZXBhcmF0b3IpLnRyaW0oKVxyXG4gIH1cclxuICBnZXRUZXh0KCkge1xyXG4gICAgbGV0IHRleHRzID0gW11cclxuICAgIF8uZWFjaCh0aGlzLm5leHRUZXh0cywgaXRlbSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5maWx0ZXIoaXRlbVswXSkpIHtcclxuICAgICAgICB0ZXh0cy5wdXNoKHRoaXMuam9pbihpdGVtWzBdLCBpdGVtWzFdLCBpdGVtWzJdKSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHJldHVybiB0ZXh0cy5qb2luKHRoaXMuc2VwYXJhdG9yKVxyXG4gIH1cclxufSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fXHJcbmxldCBjb25zdHMgPSByaC5jb25zdHNcclxuY2xhc3MgU2VhcmNoUmVzdWx0Q29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgdGhpcy53aWRnZXQgPSB3aWRnZXRcclxuICB9XHJcblxyXG4gIGdldExpbmsodXJsKSB7XHJcbiAgICBsZXQgc2VhcmNoVXJsID0gdXJsIFxyXG4gICAgbGV0IGhpZ2hsaWdodFBhcmFtID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1NFQVJDSF9SRVNVTFRfUEFSQU1TJykpXHJcbiAgICBsZXQgc2VhcmNoVGVybSA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9TRUFSQ0hfVEVSTScpKSBcclxuICAgIGxldCBzZWFyY2hUZXJtUGFyYW0gPSAnJ1xyXG4gICAgaWYoc2VhcmNoVGVybSAmJiAgc2VhcmNoVGVybSAhPT0gJycpIHtcclxuICAgICAgbGV0IGtleSA9IGNvbnN0cygnSEFTSF9LRVlfUkhfU0VBUkNIJylcclxuICAgICAgbGV0IHNlYXJjaFRlcm1NYXAgPSB7fTtcclxuICAgICAgc2VhcmNoVGVybU1hcFtrZXldID0gc2VhcmNoVGVybVxyXG4gICAgICBzZWFyY2hUZXJtUGFyYW0gPSBfLm1hcFRvRW5jb2RlZFN0cmluZyhzZWFyY2hUZXJtTWFwKVxyXG4gICAgfVxyXG4gICAgaWYoaGlnaGxpZ2h0UGFyYW0gIT09IHVuZGVmaW5lZCAmJiBoaWdobGlnaHRQYXJhbSAhPT0gJycpe1xyXG4gICAgICBzZWFyY2hVcmwgPSBzZWFyY2hVcmwgKyBoaWdobGlnaHRQYXJhbSArICcmJyArIHNlYXJjaFRlcm1QYXJhbSBcclxuICAgIH1cclxuICAgIGVsc2UgaWYoc2VhcmNoVGVybVBhcmFtICE9PSAnJyl7XHJcbiAgICAgIHNlYXJjaFVybCA9IHNlYXJjaFVybCArICc/JyArIHNlYXJjaFRlcm1QYXJhbVxyXG4gICAgfSBcclxuICAgIHJldHVybiBzZWFyY2hVcmxcclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ1NlYXJjaFJlc3VsdENvbnRyb2xsZXInLCBTZWFyY2hSZXN1bHRDb250cm9sbGVyKSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi9saWIvcmhcIilcclxubGV0IF8gPSByaC5fXHJcbmxldCBjb25zdHMgPSByaC5jb25zdHNcclxuLy9jb25zdCBLRVlfQUNUSVZFX0JPT0tJRCA9ICdhY3RpdmVfYm9va2lkJztcclxuXHJcbmNsYXNzIFRvY0JyZWFkY3J1bWJzQ29udHJvbGxlciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHdpZGdldCkge1xyXG4gICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XHJcbiAgICAvL3RoaXMud2lkZ2V0Lm1vZGVsLnN1YnNjcmliZShLRVlfQUNUSVZFX0JPT0tJRCwgdGhpcy51cGRhdGVCcmVhZGNydW1icylcclxuICB9XHJcbiAgc2VsZWN0KGlkLCB1cmwpe1xyXG4gICAgdGhpcy53aWRnZXQucHVibGlzaChjb25zdHMoJ0tFWV9UT0NfU0VMRUNUX0lURU0nKSxcclxuICAgICAgeydpZCc6IGlkICwgJ3VybCc6IHVybH0pO1xyXG4gIH1cclxuICBnZXRMaW5rKGlkKXtcclxuICAgIGlmKGlkKXtcclxuICAgICAgbGV0IGJyZWFkY3J1bWJzID0gdGhpcy53aWRnZXQuZ2V0KGNvbnN0cygnS0VZX1RPQ19CUkVBRENSVU1CUycpKVxyXG4gICAgICBsZXQgaXRlbSA9IGJyZWFkY3J1bWJzW2lkXVxyXG4gICAgICBpZihpdGVtICYmIGl0ZW0uaGFzVXJsKXtcclxuICAgICAgICByZXR1cm4gaXRlbS51cmxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBnb1RvSG9tZShpbmRleCl7XHJcbiAgICBpZihpbmRleCl7XHJcbiAgICAgIGxldCBicmVhZGNydW1icyA9IHRoaXMud2lkZ2V0LmdldChjb25zdHMoJ0tFWV9UT0NfQlJFQURDUlVNQlMnKSlcclxuICAgICAgbGV0IGl0ZW0gPSBicmVhZGNydW1ic1tpbmRleF1cclxuICAgICAgaWYoaXRlbSAmJiAhaXRlbS5oYXNVcmwpe1xyXG4gICAgICAgIF8uZ29Ub0hvbWUoe3JodG9jaWQ6IGl0ZW0uaWR9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxucmguY29udHJvbGxlcignVG9jQnJlYWRjcnVtYnNDb250cm9sbGVyJywgVG9jQnJlYWRjcnVtYnNDb250cm9sbGVyKSIsImxldCByaCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9saWIvcmhcIilcclxubGV0ICQgPSByaC4kO1xyXG5sZXQgQ0FST1VTRUxfQ0hBTkdFID0gJ2NoYW5nZSc7XHJcbmxldCBDQVJPVVNFTF9JVEVNID0gJy5jYXJvdXNlbC1pdGVtOm5vdCguaGlkZSk6bm90KC5yaC1oaWRlKSc7XHJcblxyXG5jbGFzcyBDYXJvdXNlbCB7XHJcbiAgY29uc3RydWN0b3Iod2lkZ2V0LCBvcHRzKSB7XHJcbiAgICB0aGlzLndpZGdldCA9IHdpZGdldDtcclxuICAgIHRoaXMubm9kZSA9IHRoaXMud2lkZ2V0Lm5vZGU7XHJcbiAgICB0aGlzLnRhYiA9IDA7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmVPbmNlKHJoLmNvbnN0cyhvcHRzLmtleSksICgpID0+IHtcclxuICAgICAgdGhpcy53aWRnZXQucHVibGlzaChDQVJPVVNFTF9DSEFOR0UsIHRydWUpO1xyXG4gICAgfSk7XHJcbiAgICByaC5tb2RlbC5zdWJzY3JpYmUocmguY29uc3RzKCdLRVlfU0NSRUVOJyksICgpID0+IHtcclxuICAgICAgdGhpcy5nb3RvKHRoaXMudGFiLCAwKTtcclxuICAgIH0pO1xyXG4gICAgcmgubW9kZWwuc3Vic2NyaWJlKG9wdHMua2V5Kydnb3RvdGFiJywgKGJvb2tEYXRhKSA9PiB7XHJcbiAgICAgIHRoaXMuZ290byh0aGlzLnBhZ2Vjb3VudCgpLCBib29rRGF0YS50YWIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnb3RvKGZyb20sIHRvKSB7XHJcbiAgICB0aGlzLnRhYiA9IHRvO1xyXG4gICAgdGhpcy5jYXJvdXNlbG5vZGUgPSAkLmZpbmQodGhpcy5ub2RlLCAnLmNhcm91c2VsJylbMF07XHJcbiAgICB0aGlzLmFuaW1hdGVMZWZ0KGZyb20pO1xyXG4gICAgcmguXy5kZWxheSgoKSA9PiB7XHJcbiAgICAgIHRoaXMud2lkZ2V0LnB1Ymxpc2goQ0FST1VTRUxfQ0hBTkdFLCB0cnVlKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgaGFzTmV4dCgpIHtcclxuICAgIHRoaXMuY2Fyb3VzZWxub2RlID0gJC5maW5kKHRoaXMubm9kZSwgJy5jYXJvdXNlbCcpWzBdO1xyXG4gICAgbGV0IGxhc3RJdGVtID0gJC5maW5kKCQuZmluZCh0aGlzLm5vZGUsICcuY2Fyb3VzZWwnKVswXSwgQ0FST1VTRUxfSVRFTSk7XHJcbiAgICBsYXN0SXRlbSA9IChsYXN0SXRlbSAmJiBsYXN0SXRlbS5sZW5ndGggPiAwKT8gbGFzdEl0ZW1bbGFzdEl0ZW0ubGVuZ3RoIC0gMV0gOiBudWxsO1xyXG4gICAgcmV0dXJuIGxhc3RJdGVtLm9mZnNldExlZnQgKyB0aGlzLmNhcm91c2Vsbm9kZS5vZmZzZXRMZWZ0ID4gdGhpcy5jYXJvdXNlbG5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgfVxyXG5cclxuICBhbmltYXRlTGVmdCgpIHtcclxuICAgIGxldCBsZWZ0VmFsID0gJ2NhbGMoLScgKyB0aGlzLnRhYioxNCArICdweCAtICcgKyB0aGlzLnRhYioxMDAgKyAnJSknXHJcbiAgICAkLmNzcyh0aGlzLmNhcm91c2Vsbm9kZSwgJ2xlZnQnLCBsZWZ0VmFsKVxyXG4gIH1cclxuXHJcbiAgbmV4dCgpIHtcclxuICAgIHRoaXMuZ290byh0aGlzLnRhYiwgdGhpcy50YWIrMSk7XHJcbiAgfVxyXG5cclxuICBwYWdlY291bnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy50YWI7XHJcbiAgfVxyXG5cclxuICBwcmV2aW91cygpIHtcclxuICAgIHRoaXMuZ290byh0aGlzLnRhYiwgdGhpcy50YWItMSk7XHJcbiAgfVxyXG5cclxuICBlbnN1cmVWaXNpYmxlKCkge1xyXG5cclxuICB9XHJcbn1cclxuXHJcbnJoLmNvbnRyb2xsZXIoJ0Nhcm91c2VsJywgQ2Fyb3VzZWwpO1xyXG4iLCJsZXQgcmggPSByZXF1aXJlKFwiLi4vLi4vbGliL3JoXCIpXHJcbmxldCAkID0gcmguJFxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgbm9kZVR5cGU6IHtcclxuICAgIEVMRU1FTlRfTk9ERTogMSxcclxuICAgIEFUVFJJQlVURV9OT0RFOiAyLFxyXG4gICAgVEVYVF9OT0RFOiAzLFxyXG4gICAgQ0RBVEFfU0VDVElPTl9OT0RFOiA0LFxyXG4gICAgRU5USVRZX1JFRkVSRU5DRV9OT0RFOiA1LFxyXG4gICAgRU5USVRZX05PREU6IDYsXHJcbiAgICBQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREU6IDcsXHJcbiAgICBDT01NRU5UX05PREU6IDgsXHJcbiAgICBET0NVTUVOVF9OT0RFOiA5LFxyXG4gICAgRE9DVU1FTlRfVFlQRV9OT0RFOiAxMCxcclxuICAgIERPQ1VNRU5UX0ZSQUdNRU5UX05PREU6IDExLFxyXG4gICAgTk9UQVRJT05fTk9ERTogMTJcclxuICB9LFxyXG5cclxuICByZW1vdmVDaGlsZChub2RlLCBwYXJlbnQgPSB0aGlzLnBhcmVudE5vZGUobm9kZSkpIHtcclxuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50LnJlbW92ZUNoaWxkICYmIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKVxyXG4gIH0sXHJcbiAgYXBwZW5kQ2hpbGQocGFyZW50LCBuZXdOb2RlKSB7XHJcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5hcHBlbmRDaGlsZCAmJiBwYXJlbnQuYXBwZW5kQ2hpbGQobmV3Tm9kZSlcclxuICB9LFxyXG4gIHBhcmVudE5vZGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlXHJcbiAgfSxcclxuICBjaGlsZE5vZGVzKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUuY2hpbGROb2RlcyB8fCBbXVxyXG4gIH0sXHJcbiAgdG9IdG1sTm9kZShodG1sKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzKCQuY3JlYXRlRWxlbWVudCgnZGl2JywgaHRtbCkpXHJcbiAgfSxcclxuICBvdXRlckhUTUwobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5vdXRlckhUTUwgfHwgJydcclxuICB9LFxyXG4gIGluc2VydEFmdGVyKG5vZGUsIG5ld05vZGUpe1xyXG4gICAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgbm9kZS5uZXh0U2libGluZylcclxuICB9LFxyXG4gIHZhbHVlKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVZhbHVlXHJcbiAgfSxcclxuICBuYW1lKG5vZGUpIHtcclxuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZU5hbWVcclxuICB9LFxyXG4gIHR5cGUobm9kZSkge1xyXG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZVxyXG4gIH0sXHJcbiAgaXNFbGVtZW50Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlKG5vZGUpID09PSB0aGlzLm5vZGVUeXBlLkVMRU1FTlRfTk9ERVxyXG4gIH0sXHJcbiAgaXNUZXh0Tm9kZShub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy50eXBlKG5vZGUpID09PSB0aGlzLm5vZGVUeXBlLlRFWFRfTk9ERVxyXG4gIH1cclxufSJdfQ==
